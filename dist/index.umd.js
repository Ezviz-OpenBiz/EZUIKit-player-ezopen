/*
*
* EZopenPlayer.js v8.2.5-beta.2
* Copyright (c) 2025-12-15 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).EZopenPlayer=t()}(this,(function(){"use strict";var e=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),t=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");window.SuperRender=function(){function a(a){this.canvasElement=document.getElementById(a),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(e,t),this.initBuffers(),this.initTextures())}return a.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),this.contextGL=t},a.prototype.initProgram=function(e,t){var a=this.contextGL,r=a.createShader(a.VERTEX_SHADER);a.shaderSource(r,e),a.compileShader(r),a.getShaderParameter(r,a.COMPILE_STATUS);var i=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(i,t),a.compileShader(i),a.getShaderParameter(i,a.COMPILE_STATUS);var n=a.createProgram();return a.attachShader(n,r),a.attachShader(n,i),a.linkProgram(n),a.getProgramParameter(n,a.LINK_STATUS),a.deleteShader(r),a.deleteShader(i),n},a.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var a=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,a),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=a},a.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},a.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var a=this.initTexture(),r=e.getUniformLocation(t,"ySampler");e.uniform1i(r,0),this.yTextureRef=a;var i=this.initTexture(),n=e.getUniformLocation(t,"uSampler");e.uniform1i(n,1),this.uTextureRef=i;var s=this.initTexture(),x=e.getUniformLocation(t,"vSampler");e.uniform1i(x,2),this.vTextureRef=s,e.useProgram(null)},a.prototype.SR_DisplayFrameData=function(e,t,a,r,i){if(!(e<=0||t<=0)){var n=this.contextGL;if(null==a)return n.clearColor(0,0,0,0),void n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var s=this.canvasElement;this.nWindowWidth=s.width,this.nWindowHeight=s.height;var x=this.nWindowWidth,o=this.nWindowHeight;n.clearColor(.8,.8,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewport(0,0,x,o),this.updateFrameData(e,t,a,r,i);var l=this.YUVProgram;n.useProgram(l);var _=this.vertexPosBuffer;n.bindBuffer(n.ARRAY_BUFFER,_);var h=n.getAttribLocation(l,"vertexPos");n.enableVertexAttribArray(h),n.vertexAttribPointer(h,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null);var f=this.texturePosBuffer;n.bindBuffer(n.ARRAY_BUFFER,f);var c=n.getAttribLocation(l,"texturePos");n.enableVertexAttribArray(c),n.vertexAttribPointer(c,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.drawArrays(n.TRIANGLE_STRIP,0,4),n.disableVertexAttribArray(h),n.disableVertexAttribArray(c),n.useProgram(null)}},a.prototype.updateFrameData=function(e,t,a,r,i){var n=this.contextGL,s=this.yTextureRef,x=this.uTextureRef,o=this.vTextureRef,l=a;if(e==r&&t==i){var _=e*t,h=l.subarray(0,_);n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e,t,0,n.LUMINANCE,n.UNSIGNED_BYTE,h);var f=e/2*t/2,c=l.subarray(e*t,e*t+f);n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,c);var u=f,d=l.subarray(e*t+e*t/4,e*t+e*t/4+u);n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d)}else{_=r*i,h=new Uint8Array(_);for(var p=0;p<i;p++)for(var m=l.subarray(p*e,p*e+r),S=0;S<r;S++)h[p*r+S]=m[S];for(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r,i,0,n.LUMINANCE,n.UNSIGNED_BYTE,h),h=null,m=null,f=r/2*i/2,c=new Uint8Array(f),p=0;p<i/2;p++){var R=l.subarray(e*t+p*e/2,e*t+p*e/2+r/2);for(S=0;S<r/2;S++)c[p*r/2+S]=R[S]}for(n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r/2,i/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,c),c=null,R=null,u=f,d=new Uint8Array(u),p=0;p<i/2;p++){var P=l.subarray(e*t*5/4+p*e/2,e*t*5/4+p*e/2+r/2);for(S=0;S<r/2;S++)d[p*r/2+S]=P[S]}n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r/2,i/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d),d=null,P=null}},a.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,a=this.nWindowWidth,r=this.nWindowHeight,i=null;if(e&&a>0&&r>0){var n=e.left/a,s=e.top/r,x=e.right/a,o=e.bottom/r;i=new Float32Array([x,s,n,s,x,o,n,o])}else i=new Float32Array([1,0,0,0,1,1,0,1]);var l=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,i),t.bindBuffer(t.ARRAY_BUFFER,null)},a.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var a=this.vertexPosBuffer,r=this.texturePosBuffer;e.deleteBuffer(a),e.deleteBuffer(r);var i=this.yTextureRef,n=this.uTextureRef,s=this.vTextureRef;e.deleteTexture(i),e.deleteTexture(n),e.deleteTexture(s)},a}(),function(){var e=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();function t(e,t){if(a=e,!(null!=(r=t)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](a):a instanceof r))throw new TypeError("Cannot call a class as a function");var a,r}var a,r=(a=void 0,function(e){return e&&(a=e),a});function i(){if(t(this,i),r())return r();if(void 0!==i.unique)return i.unique;i.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var e=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new e,this.writeString=function(e,t,a){for(var r=0;r<a.length;r++)e.setUint8(t+r,a.charCodeAt(r))},this.setBufferToDataview=function(e,t,a){for(var r=0;r<a.length;r++,t++)e.setUint8(t,a[r])},r(this)}e(i,[{key:"Play",value:function(e,t,a){var r=new ArrayBuffer(44+t),i=new DataView(r),n=a.samplesPerSec,s=a.channels,x=a.bitsPerSample;this.writeString(i,0,"RIFF"),i.setUint32(4,32+2*t,!0),this.writeString(i,8,"WAVE"),this.writeString(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,s,!0),i.setUint32(24,n,!0),i.setUint32(28,2*n,!0),i.setUint16(32,s*x/8,!0),i.setUint16(34,x,!0),this.writeString(i,36,"data"),i.setUint32(40,t,!0),this.setBufferToDataview(i,44,e);var o=this;return this.oAudioContext.decodeAudioData(i.buffer,(function(e){var t=o.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==o.gainNode||o.bSetVolume)&&(o.gainNode=o.oAudioContext.createGain(),o.bSetVolume=!1),o.gainNode.gain.value=o.currentVolume/100,o.gainNode.connect(o.oAudioContext.destination),t.connect(o.gainNode)}),(function(e){return-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),window.AudioRenderer=i}();var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===s}(e)}(e)};var s="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function x(e,t){return!1!==t.clone&&t.isMergeableObject(e)?f((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function o(e,t,a){return e.concat(t).map((function(e){return x(e,a)}))}function l(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return Object.propertyIsEnumerable.call(e,t)})):[]}(e))}function _(e,t){try{return t in e}catch(e){return!1}}function h(e,t,a){var r={};return a.isMergeableObject(e)&&l(e).forEach((function(t){r[t]=x(e[t],a)})),l(t).forEach((function(i){(function(e,t){return _(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(_(e,i)&&a.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return f;var a=t.customMerge(e);return"function"==typeof a?a:f}(i,a)(e[i],t[i],a):r[i]=x(t[i],a))})),r}function f(e,t,a){(a=a||{}).arrayMerge=a.arrayMerge||o,a.isMergeableObject=a.isMergeableObject||n,a.cloneUnlessOtherwiseSpecified=x;var r=Array.isArray(t);return r===Array.isArray(e)?r?a.arrayMerge(e,t,a):h(e,t,a):x(t,a)}f.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return f(e,a,t)}),{})};var c=f,u=r(c),d={info:"",log:"background: #4096ff; color: #FFF;",warn:"background: yellow; color: #FFF;",error:"background: red; color: #FFF;"},p=function(){function e(e){void 0===e&&(e={}),this._options={level:"INFO",showTime:!1},this._levelNum=3,this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0),this.setOptions(e)}var t=e.prototype;return t.setOptions=function(e){var t;this._options=Object.assign({},this._options,e),this._levelNum=this._matchLevel(null!=(t=this._options.level)?t:"INFO"),this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0)},t._matchLevel=function(e){var t=3;switch(e){case"INFO":t=3;break;case"LOG":t=2;break;case"WARN":t=1;break;case"ERROR":t=0}return t},t._loggerFactory=function(t,a){var r=console[t];if(a&&r){var i,n=this._options.name?"%c["+this._options.name+"]%c %c["+t.toUpperCase()+"]":"%c["+t.toUpperCase()+"]",s=[this._options.name?"background: green;color: #fff":null,this._options.name?"":null,d[t]].filter((function(e){return null!=e}));return(i=r).bind.apply(i,[].concat([console,n],s))}return e.noop},t.getOptions=function(){return this._options},t.getVersion=function(){return"2.0.0"},e}();function m(e){return(e=+e)<10&&(e="0"+e),e+""}p.noop=function(){},p.VERSION="2.0.0";var S=["info","log","warn","error"],R=r((function(e){var t=new p(e);return new Proxy(t,{get:function(e,t){if(S.includes(t)){var a;if(null==(a=e._options)?void 0:a.showTime){var r=(n=(i=new Date(Date.now())).getFullYear(),s=i.getMonth()+1,x=i.getDate(),o=i.getHours(),l=i.getMinutes(),_=i.getSeconds(),h=i.getMilliseconds(),n+"/"+m(s)+"/"+m(x)+" "+m(o)+":"+m(l)+":"+m(_)+":"+h);return e[t].bind(console,"["+r+"]")}return e[t].bind(console)}var i,n,s,x,o,l,_,h;return Reflect.get(e,t)}})})),P={exports:{}},b=c;var y=function(){function e(e,t){this._translations={},this._locale=null==t?void 0:t.defaultLocale,e&&(this._translations=e,(null==t?void 0:t.defaultLocale)||(this._locale=Object.keys(e)[0])),this.options=t||{}}var t,a,r=e.prototype;return r.t=function(e,t){var a,r=this._translations[this._locale];if(!r)return"function"==typeof this.options.customizeMissing?this.options.customizeMissing(e,t):'[missing "'+this._locale+'" locale]';if("string"==typeof e&&e.includes(".")&&!(e in r)){var i=this._findChainValue(r,e),n=i[0];if(i[1])a=n;else{if(void 0===(null==t?void 0:t.defaultvalue))return"function"==typeof this.options.customizeMissing?this.options.customizeMissing(e,t):'[missing "'+this._locale+"."+e+'" translation]';a=t.defaultvalue}}else if(e in r)a=r[e];else{if(void 0===(null==t?void 0:t.defaultvalue))return"function"==typeof this.options.customizeMissing?this.options.customizeMissing(e,t):'[missing "'+this._locale+"."+e+'" translation]';a=t.defaultvalue}return"string"==typeof a&&t&&/\{\{\s*(\w+)\s*\}\}/.test(a)?a.replace(/\{\{\s*(\w+)\s*\}\}/g,(function(e,a){return String(t[a])||""})):a},r.appendTranslations=function(e){this._translations=b(this._translations,e,{clone:!1}),this._locale||(this._locale=Object.keys(this._translations)[0]),this._onChange()},r.switchLocale=function(e){e in this._translations&&(this._locale=e,this._onChange())},r.switchTranslation=function(e){this.switchLocale(e)},r.getCurrentLocale=function(){return this._locale},r.getCurrentTranslation=function(){return this._translations[this._locale]},r.getVersion=function(){return"2.0.0"},r._onChange=function(){return null==this.options.onChange?void 0:this.options.onChange.call(this.options,this)},r._findChainValue=function(e,t){for(var a=t.split("."),r=e,i=0;i<a.length;i++){if(!(a[i]in r))return[void 0,!1];if(r=r[a[i]],i+1===a.length)return[r[a[i]],!0]}return[void 0,!1]},t=e,(a=[{key:"locale",get:function(){return this._locale}},{key:"translations",get:function(){return this._translations}}])&&function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,a),e}();y.VERSION="2.0.0",P.exports=y;var E,g,F,C=r(P.exports);function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function D(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}
/*
  * @ezuikit/utils-tools v1.1.0
  * tools utils
  * Copyright (c) 2025-08-29 Ezviz-OpenBiz
  * Released under the MIT License.
  */
function A(e,t){return Object.entries(e).reduce(((e,a)=>{let[r,i]=a;return t.includes(r)&&(e[r]=i),e}),{})}!function(){function e(){}e.fillZero=function(e,t){return void 0===t&&(t=2),e.toString().padStart(t,"0")},e.format=function(t,a){var r;if(D(t,Date))r=t;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid date input");r=e.toDate(t+"")}for(var i,n=a,s=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}(e))||t){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}([[/(yyyy|YYYY)/g,function(){return e.fillZero(r.getFullYear(),4)}],[/(yy|YY)/g,function(){return e.fillZero(r.getFullYear()%100,2)}],[/(MM)/g,function(){return e.fillZero(r.getMonth()+1,2)}],[/(M)/g,function(){return(r.getMonth()+1).toString()}],[/(dd|DD)/g,function(){return e.fillZero(r.getDate(),2)}],[/(d|D)/g,function(){return r.getDate().toString()}],[/(HH|hh)/g,function(){return e.fillZero(r.getHours(),2)}],[/(H|h)/g,function(){return r.getHours().toString()}],[/(mm)/g,function(){return e.fillZero(r.getMinutes(),2)}],[/(m)/g,function(){return r.getMinutes().toString()}],[/(ss|SS)/g,function(){return e.fillZero(r.getSeconds(),2)}],[/(s|S)/g,function(){return r.getSeconds().toString()}],[/(fff)/g,function(){return e.fillZero(r.getMilliseconds(),3)}]]);!(i=s()).done;){var x=i.value,o=x[0],l=x[1];n=n.replace(o,l)}return n},e.toDate=function(e){if(D(e,Date))return e;e=(e+"").trim().replace(/\/|\./gi,"-"),/^\d{4}$/.test(e)&&(e+="-01"),/^\d{4}-\d{2}$/.test(e)&&(e+="-01");try{return/^\d{4}-\d{2}-\d{2}$/.test(e)?new Date(e+"T00:00:00"):/^\d{8}$/.test(e)?(e+="",new Date(e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8)+"T00:00:00")):/^\d{14}$/.test(e)?(e+="",new Date(e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8)+"T"+e.slice(8,10)+":"+e.slice(10,12)+":"+e.slice(12,14))):/^\d{13}$/.test(e)?new Date(Number(e)):/^\d{10}$/.test(e)?new Date(1e3*Number(e)):new Date(e)}catch(e){throw new Error("Invalid date string")}},e.diff=function(t,a,r){void 0===r&&(r="second");var i=e.toDate(t),n=e.toDate(a);return"second"===r?Math.floor((i.getTime()-n.getTime())/1e3):"minute"===r?Math.floor((i.getTime()-n.getTime())/1e3/60):"hour"===r?Math.floor((i.getTime()-n.getTime())/1e3/60/60):"day"===r?Math.floor((i.getTime()-n.getTime())/1e3/60/60/24):Math.abs(i.getTime()-n.getTime())}}(),F=function(e,t){void 0===t&&(t="");var a=/^(https?:\/\/|^\/\/)/;if(""===e||void 0===e)return"";if(a.test(e))return e;e=e.replace(/\/+/g,"/"),t=a.test(t||"")?t:window.location.href;try{return new URL(e,t).href}catch(t){return e}},g=function(e){var t,a,r,i;return/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone|Opera Mini)/i.test(null!=e?e:null==(t=navigator)?void 0:t.userAgent)||/Macintosh/i.test(e||(null==(a=navigator)?void 0:a.userAgent))&&(null==(r=navigator)?void 0:r.maxTouchPoints)>1||!!(null==(i=window)?void 0:i.__IS_MOBILE_SIMULATOR__)},E=function(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var a=e.indexOf("@"),r=e.indexOf("//");t.validateCode=e.substring(r+2,a),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var i=t.pathname.split("/"),n=i[2].split(".");return t.deviceSerial=i[1],t.channelNo=n[0],t.type=n[n.length-1],"live"===t.type&&(t.definition=n.length>2?n[1]:"sd"),"rec"===t.type&&i[2]&&(t.recType=i[2].includes(".cloud.")?"cloud":""),t.searchParams=function(e){var t=e.split("?")[1],a={};if(t)for(var r=t.split("&"),i=0;i<r.length;i++){var n=r[i].split("=");a[n[0]]=decodeURIComponent(n[1])}return a}(e),t}return{}};var I={exports:{}};!function(e){e.exports=function(){var e=1e3,t=6e4,a=36e5,r="millisecond",i="second",n="minute",s="hour",x="day",o="week",l="month",_="quarter",h="year",f="date",c="Invalid Date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},m=function(e,t,a){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(a)+e},S={s:m,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),r=Math.floor(a/60),i=a%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var r=12*(a.year()-t.year())+(a.month()-t.month()),i=t.clone().add(r,l),n=a-i<0,s=t.clone().add(r+(n?-1:1),l);return+(-(r+(a-i)/(n?i-s:s-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:h,w:o,d:x,D:f,h:s,m:n,s:i,ms:r,Q:_}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},R="en",P={};P[R]=p;var b="$isDayjsObject",y=function(e){return e instanceof v||!(!e||!e[b])},E=function e(t,a,r){var i;if(!t)return R;if("string"==typeof t){var n=t.toLowerCase();P[n]&&(i=n),a&&(P[n]=a,i=n);var s=t.split("-");if(!i&&s.length>1)return e(s[0])}else{var x=t.name;P[x]=t,i=x}return!r&&i&&(R=i),i||!r&&R},g=function(e,t){if(y(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new v(a)},F=S;F.l=E,F.i=y,F.w=function(e,t){return g(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var v=function(){function p(e){this.$L=E(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[b]=!0}var m=p.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(F.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(u);if(r){var i=r[2]-1||0,n=(r[7]||"0").substring(0,3);return a?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,n)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,n)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return F},m.isValid=function(){return!(this.$d.toString()===c)},m.isSame=function(e,t){var a=g(e);return this.startOf(t)<=a&&a<=this.endOf(t)},m.isAfter=function(e,t){return g(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<g(e)},m.$g=function(e,t,a){return F.u(e)?this[t]:this.set(a,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var a=this,r=!!F.u(t)||t,_=F.p(e),c=function(e,t){var i=F.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return r?i:i.endOf(x)},u=function(e,t){return F.w(a.toDate()[e].apply(a.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},d=this.$W,p=this.$M,m=this.$D,S="set"+(this.$u?"UTC":"");switch(_){case h:return r?c(1,0):c(31,11);case l:return r?c(1,p):c(0,p+1);case o:var R=this.$locale().weekStart||0,P=(d<R?d+7:d)-R;return c(r?m-P:m+(6-P),p);case x:case f:return u(S+"Hours",0);case s:return u(S+"Minutes",1);case n:return u(S+"Seconds",2);case i:return u(S+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var a,o=F.p(e),_="set"+(this.$u?"UTC":""),c=(a={},a[x]=_+"Date",a[f]=_+"Date",a[l]=_+"Month",a[h]=_+"FullYear",a[s]=_+"Hours",a[n]=_+"Minutes",a[i]=_+"Seconds",a[r]=_+"Milliseconds",a)[o],u=o===x?this.$D+(t-this.$W):t;if(o===l||o===h){var d=this.clone().set(f,1);d.$d[c](u),d.init(),this.$d=d.set(f,Math.min(this.$D,d.daysInMonth())).$d}else c&&this.$d[c](u);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[F.p(e)]()},m.add=function(r,_){var f,c=this;r=Number(r);var u=F.p(_),d=function(e){var t=g(c);return F.w(t.date(t.date()+Math.round(e*r)),c)};if(u===l)return this.set(l,this.$M+r);if(u===h)return this.set(h,this.$y+r);if(u===x)return d(1);if(u===o)return d(7);var p=(f={},f[n]=t,f[s]=a,f[i]=e,f)[u]||1,m=this.$d.getTime()+r*p;return F.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||c;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=F.z(this),n=this.$H,s=this.$m,x=this.$M,o=a.weekdays,l=a.months,_=a.meridiem,h=function(e,a,i,n){return e&&(e[a]||e(t,r))||i[a].slice(0,n)},f=function(e){return F.s(n%12||12,e,"0")},u=_||function(e,t,a){var r=e<12?"AM":"PM";return a?r.toLowerCase():r};return r.replace(d,(function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return F.s(t.$y,4,"0");case"M":return x+1;case"MM":return F.s(x+1,2,"0");case"MMM":return h(a.monthsShort,x,l,3);case"MMMM":return h(l,x);case"D":return t.$D;case"DD":return F.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(a.weekdaysMin,t.$W,o,2);case"ddd":return h(a.weekdaysShort,t.$W,o,3);case"dddd":return o[t.$W];case"H":return String(n);case"HH":return F.s(n,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return u(n,s,!0);case"A":return u(n,s,!1);case"m":return String(s);case"mm":return F.s(s,2,"0");case"s":return String(t.$s);case"ss":return F.s(t.$s,2,"0");case"SSS":return F.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,f,c){var u,d=this,p=F.p(f),m=g(r),S=(m.utcOffset()-this.utcOffset())*t,R=this-m,P=function(){return F.m(d,m)};switch(p){case h:u=P()/12;break;case l:u=P();break;case _:u=P()/3;break;case o:u=(R-S)/6048e5;break;case x:u=(R-S)/864e5;break;case s:u=R/a;break;case n:u=R/t;break;case i:u=R/e;break;default:u=R}return c?u:F.a(u)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return P[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),r=E(e,t,!0);return r&&(a.$L=r),a},m.clone=function(){return F.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},p}(),C=v.prototype;return g.prototype=C,[["$ms",r],["$s",i],["$m",n],["$H",s],["$W",x],["$M",l],["$y",h],["$D",f]].forEach((function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),g.extend=function(e,t){return e.$i||(e(t,v,g),e.$i=!0),g},g.locale=E,g.isDayjs=y,g.unix=function(e){return g(1e3*e)},g.en=P[R],g.Ls=P,g.p={},g}()}(I);var M=r(I.exports),L="https://open.ys7.com";function w(e,t){return new Promise((function(a,r){fetch(e,t).then((function(e){return e.json()})).then((function(e){var t,i;if(200==+e.code||0==+(null==(t=e.meta)?void 0:t.code)||200==+(null==(i=e.meta)?void 0:i.code))a(e);else{if(e.meta)return e.meta.msg=e.meta.message,void r(e.meta);r(e)}})).catch((function(e){if(e.meta)return e.meta.msg=e.meta.message,void r(e.meta);r(e)}))}))}function O(e,t,a,r,i,n,s){try{var x=e[n](s),o=x.value}catch(e){return void a(e)}x.done?t(o):Promise.resolve(o).then(r,i)}function B(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a,r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],a=e[1];r.append(t,a)})),r.append("version",null!=(a=e.version)?a:"2.0"),e=r}return new Promise((function(a,r){var i=function(){return s.apply(this,arguments)},n=[];function s(){var x;return x=function(){var s,x,o,l;return function(e,t){var a,r,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function x(n){return function(x){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,x])}}}(this,(function(_){switch(_.label){case 0:return[4,w((null!=t?t:L)+"/api/lapp/video/by/time",{method:"POST",body:e})];case 1:return(x=_.sent()).data&&Array.isArray(x.data)?(n=n.concat(x.data),a({code:200,data:n,msg:""}),[2]):(!Array.isArray(x.data)&&(null==(s=x.data)?void 0:s.files)&&(n=n.concat(x.data.files),(null==(o=x.data)?void 0:o.isAll)?a({code:200,data:n,msg:""}):(null==(l=x.data)?void 0:l.nextFileTime)&&(e.append("startTime",x.data.nextFileTime),i().catch(r))),a({code:200,data:[],msg:""}),[2])}}))},s=function(){var e=this,t=arguments;return new Promise((function(a,r){var i=x.apply(e,t);function n(e){O(i,a,r,n,s,"next",e)}function s(e){O(i,a,r,n,s,"throw",e)}n(void 0)}))},s.apply(this,arguments)}i().catch(r)}))}function k(e){var t=e.slice(0,4),a=e.slice(4,6),r=e.slice(6,8),i=e.slice(8,10),n=e.slice(10,12),s=e.slice(12,14);return new Date(t+"/"+a+"/"+r+" "+i+":"+n+":"+s)}var N=function(){function e(e){if(!e)throw new Error("options is required");var t;this._options=e,/^http[s]?:\/\//.test(null!=(t=null==e?void 0:e.domain)?t:"")||(this._options.domain=L)}var t=e.prototype;return t.getDeviceCapacity=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];a.append(t,r)})),e=a}return w((null!=t?t:L)+"/api/lapp/device/capacity",{method:"POST",body:e})}(A(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getDeviceInfo=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];a.append(t,r)})),e=a}return w((null!=t?t:L)+"/api/lapp/device/info",{method:"POST",body:e})}(A(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getRealPlayUrl=function(e){var t,a,r=this,i=null==(a=this._options)||null==(t=a.extraParams)?void 0:t.ezopenParams;return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a,r,i=new FormData;i.append("isFlv","false"),i.append("userAgent",null==(r=window)||null==(a=r.navigator)?void 0:a.userAgent),i.append("isHttp","false"),Object.entries(e).forEach((function(e){var t=e[0],a=e[1];i.append(t,a)})),e=i}return w((null!=t?t:L)+"/api/lapp/live/url/ezopen",{method:"POST",body:e})}(e=Object.assign({},A(this._options,["accessToken"]),e,"object"==typeof i?i:{}),this._options.domain).then((function(e){var t,a,i,n,s,x,o,l,_,h,f="",c="",u="";if((null==e||null==(t=e.ext)?void 0:t.token)?(c+=e.data,u=e.ext.token,f=e.data):(null==(a=e.data)?void 0:a.token)&&(c+=e.data.url,u=e.data.token,f=e.data.url),c=c.includes("live")?c+"&ssn="+u+"&auth=1&biz=4&cln=100":c+"&ssn="+u+"&auth=1&cln=100",null==(n=r._options)||null==(i=n.extraParams)?void 0:i.wsParams)if("string"==typeof(null==(x=r._options)||null==(s=x.extraParams)?void 0:s.wsParams))c+="&"+(null==(h=r._options)||null==(_=h.extraParams)?void 0:_.wsParams);else if("object"==typeof(null==(l=r._options)||null==(o=l.extraParams)?void 0:o.wsParams)){var d,p;for(var m in null==(p=r._options)||null==(d=p.extraParams)?void 0:d.wsParams){var S,R;c+="&"+m+"="+(null==(R=r._options)||null==(S=R.extraParams)?void 0:S.wsParams[m])}}return{playUrl:f,stream:u,realUrl:c}}))},t.getVideoByTime=function(e){return B(e=Object.assign({},A(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getRecordCloudVideoByTime=function(e){return function(e,t){var a,r,i={startTime:e.startTime?null==(a=M(e.startTime))?void 0:a.format("YYYY-MM-DD HH:mm:ss"):void 0,endTime:e.startTime?null==(r=M(e.endTime))?void 0:r.format("YYYY-MM-DD HH:mm:ss"):void 0,spaceId:e.spaceId},n=Object.keys(i).reduce((function(e,t){return null==i[t]?e:e+="&"+t+"="+encodeURIComponent(i[t])}),"").replace("&","");return w((null!=t?t:L)+"/api/service/cloudrecord/video/info/list?"+n,{method:"GET",headers:{accessToken:e.accessToken,deviceSerial:e.deviceSerial,localIndex:e.channelNo}}).then((function(e){return e.data=(e.data||[]).map((function(e){return e.endTime=k(e.stopTime).getTime(),e.startTime=k(e.startTime).getTime(),e.iStorageVersion=e.istorageVersion,e.busType=7,delete e.istorageVersion,e})),e}))}(e=Object.assign({},A(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getThemeDetailById=function(e){return t={accessToken:this._options.accessToken,id:e},w((null!=(a=this._options.domain)?a:L)+"/api/service/media/template/getDetail?accessToken="+t.accessToken+"&id="+t.id,{method:"GET"});var t,a},t.setMirrorFlip=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];a.append(t,r)})),e=a}return w((null!=t?t:L)+"/api/lapp/device/ptz/mirror",{method:"POST",body:e})}(e=Object.assign({},A(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getVideoByID=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var a=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];a.append(t,r)})),e=a}return w((null!=t?t:L)+"/api/lapp/video/by/id",{method:"POST",body:e})}(e,this._options.domain)},t.getVersion=function(){return this.version},e}(),V={title:"title",name:"name {{name}}"},U={title:"标题",name:"姓名 {{name}}"};function H(e){return/^ezopen:\/\//.test(e)}var W={autoPlay:!0,decoderType:"auto",audio:!0,dpr:1,logger:{level:"INFO",name:"ezopen",showTime:!0},debugDownloadData:!1,disableRenderPrivateData:!1,streamInfoCBType:1};function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function G(e,t,a,r,i,n,s){try{var x=e[n](s),o=x.value}catch(e){return void a(e)}x.done?t(o):Promise.resolve(o).then(r,i)}function X(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function s(e){G(n,r,i,s,x,"next",e)}function x(e){G(n,r,i,s,x,"throw",e)}s(void 0)}))}}function J(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return Y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Y(e,t):void 0}}(e))||t){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Z(e,t){var a,r,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function x(n){return function(x){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,x])}}}var j=function(){function e(e){this.plugins=new Map,this.context=e}var t=e.prototype;return t.usePlugins=function(e){var t=this;return X((function(){var a,r,i;return Z(this,(function(n){switch(n.label){case 0:a=J(e),n.label=1;case 1:return(r=a()).done?[3,4]:(i=r.value,[4,t.use(i)]);case 2:n.sent(),n.label=3;case 3:return[3,1];case 4:return[2]}}))}))()},t.use=function(e){var t=this;return X((function(){var a;return Z(this,(function(r){switch(r.label){case 0:return e.name?("function"==typeof(null==e?void 0:e.init)&&(null==e||e.init()),a=!0,(null==e?void 0:e.beforeExec)?[4,e.beforeExec(t.context)]:[3,2]):[3,3];case 1:a=r.sent(),r.label=2;case 2:return a&&e.exec(t.context),"function"==typeof(null==e?void 0:e.afterExec)&&(null==e||e.afterExec(t.context)),t.plugins.set(e.name.toLowerCase(),e),[3,4];case 3:r.label=4;case 4:return[2]}}))}))()},t.destroyByName=function(e){var t=this.plugins.get(e.toLowerCase());t&&"function"==typeof(null==t?void 0:t.destroy)&&t.destroy(),this.plugins.delete(e)},t.destroy=function(){var e=this;(this.plugins||[]).forEach((function(t,a){e.destroyByName(a)})),this.plugins=null},e}();function z(e,t,a){return{code:null!=t?t:0,data:e,msg:a}}function K(e,t,a,r){return{data:e,msg:t,source:a,target:r}}var q="playError",$="EVENT_CALLBACK",Q={pluginErrorHandler:"pluginErrorHandler",getStreamHeaderCallback:"getStreamHeaderCallback",getVideoStreamCallback:"getVideoStreamCallback",appearFirstFrameCallback:"appearFirstFrameCallback",firstFrameCallback:"firstFrameCallback",averageStreamSuccessCallback:"averageStreamSuccessCallback",setRunTimeInfoCallBack:"setRunTimeInfoCallBack",setAdditionDataCallBack:"setAdditionDataCallBack",openStreamCallback:"openStreamCallback",stutterDetectedCallback:"stutterDetectedCallback"},ee={initializing:"initializing",loadstart:"loadstart",abort:"abort",waiting:"waiting",canplay:"canplay",rateChange:"ratechange",volumeChange:"volumechange",debug:"debug",error:"error",videoInfo:"videoInfo",audioInfo:"audioInfo",decoder:"decoder",urlChange:"urlChange",API:{play:"play",pause:"pause",rateChange:"ratechange",volumeChange:"volumechange",destroy:"destroy",snapshot:"snapshot",fullscreen:"fullscreen",exitFullscreen:"exitFullscreen",resize:"resize",seek:"seek",resume:"resume"},NETWORK:{deviceCapacity:"network.deviceCapacity",deviceInfo:"network.deviceInfo",videoFragmentFiles:"network.videoFragmentFiles",error:{error:"network.error",deviceCapacity:"network.error.deviceCapacity",deviceInfo:"network.error.deviceInfo",realPlayUrl:"network.error.realPlayUrl",videoFragmentFiles:"network.error.videoFragmentFiles"}},SOCKET:{autoClose:"StreamClient.autoClose",openStream:"StreamClient.openStream",startPlay:"StreamClient.startPlay",stopAll:"StreamClient.stopAll",setPlayRate:"StreamClient.setPlayRate",seek:"StreamClient.seek",close:"StreamClient.close",error:"StreamClient.error"},CALLBACK:Q,FECCorrect:{setFEC2DParam:"setFEC2DParam"},streamInfoCB:"streamInfoCB"};var te="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),ae=new Uint8Array(16);function re(){if(!te)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return te(ae)}var ie=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var ne=[],se=0;se<256;++se)ne.push((se+256).toString(16).substr(1));function xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(ne[e[t+0]]+ne[e[t+1]]+ne[e[t+2]]+ne[e[t+3]]+"-"+ne[e[t+4]]+ne[e[t+5]]+"-"+ne[e[t+6]]+ne[e[t+7]]+"-"+ne[e[t+8]]+ne[e[t+9]]+"-"+ne[e[t+10]]+ne[e[t+11]]+ne[e[t+12]]+ne[e[t+13]]+ne[e[t+14]]+ne[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&ie.test(e)}(a))throw TypeError("Stringified UUID is invalid");return a}function oe(e,t,a){var r=(e=e||{}).random||(e.rng||re)();return r[6]=15&r[6]|64,r[8]=63&r[8]|128,xe(r)}var le=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,a,r){return{socket:e,id:t,iCurChannel:a,iCurStream:r,resolve:null,reject:null}},t.zeroPlayCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0])},t.playCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0])},t.playbackCmd=function(e,t,a,r){var i=e.split("T")[0],n=e.split("T")[1],s="0"+parseInt(i.substring(0,4),10).toString(16),x=parseInt(i.substring(4,6),10),o=parseInt(i.substring(6),10),l=parseInt(n.substring(0,2),10),_=parseInt(n.substring(2,4),10),h=parseInt(n.substring(4,6),10),f=t.split("T")[0],c=t.split("T")[1],u="0"+parseInt(f.substring(0,4),10).toString(16),d=parseInt(f.substring(4,6),10),p=parseInt(c.substring(0,2),10),m=parseInt(c.substring(2,4),10),S=parseInt(c.substring(4,6),10),R=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,a,0,0,parseInt(s.substring(0,2),16),parseInt(s.substring(2,4),16),0,0,0,x,0,0,0,o,0,0,0,l,0,0,0,_,0,0,0,h,0,0,parseInt(u.substring(0,2),16),parseInt(u.substring(2,4),16),0,0,0,d,0,0,0,o,0,0,0,p,0,0,0,m,0,0,0,S,0,0,0,0,0,0,0,0,r,0,0,0];return new Uint8Array(R)},t.playRateCmd=function(e){for(var t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16),a=t.length;a<8;a++)t="0"+t;for(var r=[0,0,0,0],i=0,n=t.length;i<n;i+=2)r[Math.floor(i/2)]=parseInt(t.substring(i,i+2),16);var s=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r[0],r[1],r[2],r[3]];return new Uint8Array(s)},t.pauseCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},t.resumeCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},e}(),_e=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,a){return{socket:e,id:t,playURL:a,resolve:null,reject:null}},t.getMediaFromSdp=function(e){for(var t=e.indexOf("MEDIAINFO=")+10,a=e.slice(t,t+80),r=[],i=0,n=a.length/2;i<n;i++)r[i]=parseInt(a.slice(2*i,2*i+2),16);return new Uint8Array(r)},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)},t.playbackCmd=function(e,t,a){var r={sequence:0,cmd:"playback",url:a,startTime:e,endTime:t};return JSON.stringify(r)},t.playRateCmd=function(e){var t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)},t.pauseCmd=function(){return JSON.stringify({sequence:0,cmd:"pause"})},t.resumeCmd=function(){return JSON.stringify({sequence:0,cmd:"resume"})},t.getError=function(e){var t=3001;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=3002:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=3003)),{iErrorNum:t,oError:e}},e}();function he(e,t,a){null!=e&&("number"==typeof e?this.fromNumber(e,t,a):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function fe(){return new he(null)}he.prototype.am=function(e,t,a,r,i,n){var s=16383&t;for(t>>=14;--n>=0;){var x=16383&this[e],o=this[e++]>>14,l=t*x+o*s;i=((x=s*x+((16383&l)<<14)+a[r]+i)>>28)+(l>>14)+t*o;a[r++]=268435455&x}return i},he.prototype.DB=28,he.prototype.DM=268435455,he.prototype.DV=1<<28;he.prototype.FV=Math.pow(2,52),he.prototype.F1=24,he.prototype.F2=4;var ce,ue,de=[];for(ce="0".charCodeAt(0),ue=0;ue<=9;++ue)de[ce++]=ue;for(ce="a".charCodeAt(0),ue=10;ue<36;++ue)de[ce++]=ue;for(ce="A".charCodeAt(0),ue=10;ue<36;++ue)de[ce++]=ue;function pe(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function me(e,t){var a=de[e.charCodeAt(t)];return null==a?-1:a}function Se(e){var t=fe();return t.fromInt(e),t}function Re(e){var t,a=1;return 0!=(t=e>>>16)&&(e=t,a+=16),0!=(t=e>>8)&&(e=t,a+=8),0!=(t=e>>4)&&(e=t,a+=4),0!=(t=e>>2)&&(e=t,a+=2),e>>1&&(a+=1),a}function Pe(e){this.m=e}function be(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function ye(e,t){return e&t}function Ee(e,t){return e|t}function ge(e,t){return e^t}function Fe(e,t){return e&~t}function ve(e){if(0==e)return-1;var t=0;return!(65535&e)&&(e>>=16,t+=16),!(255&e)&&(e>>=8,t+=8),!(15&e)&&(e>>=4,t+=4),!(3&e)&&(e>>=2,t+=2),!(1&e)&&++t,t}function Ce(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Te(){}function De(e){return e}function Ae(e){this.r2=fe(),this.q3=fe(),he.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Pe.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Pe.prototype.revert=function(e){return e},Pe.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Pe.prototype.mulTo=function(e,t,a){e.multiplyTo(t,a),this.reduce(a)},Pe.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},be.prototype.convert=function(e){var t=fe();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(he.ZERO)>0&&this.m.subTo(t,t),t},be.prototype.revert=function(e){var t=fe();return e.copyTo(t),this.reduce(t),t},be.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var a,r=(a=32767&e[t])*this.mpl+((a*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[a=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[a]>=e.DV;)e[a]-=e.DV,e[++a]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},be.prototype.mulTo=function(e,t,a){e.multiplyTo(t,a),this.reduce(a)},be.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},he.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},he.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},he.prototype.fromString=function(e,t){var a;if(16==t)a=4;else if(8==t)a=3;else if(256==t)a=8;else if(2==t)a=1;else if(32==t)a=5;else{if(4!=t)return void this.fromRadix(e,t);a=2}this.s=this.t=0;for(var r=e.length,i=!1,n=0;--r>=0;){var s=8==a?255&e[r]:me(e,r);s<0?"-"==e.charAt(r)&&(i=!0):(i=!1,0==n?this[this.t++]=s:n+a>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,(n+=a)>=this.DB&&(n-=this.DB))}8==a&&128&e[0]&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),i&&he.ZERO.subTo(this,this)},he.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},he.prototype.dlShiftTo=function(e,t){var a;for(a=this.t-1;a>=0;--a)t[a+e]=this[a];for(a=e-1;a>=0;--a)t[a]=0;t.t=this.t+e,t.s=this.s},he.prototype.drShiftTo=function(e,t){for(var a=e;a<this.t;++a)t[a-e]=this[a];t.t=Math.max(this.t-e,0),t.s=this.s},he.prototype.lShiftTo=function(e,t){var a,r=e%this.DB,i=this.DB-r,n=(1<<i)-1,s=Math.floor(e/this.DB),x=this.s<<r&this.DM;for(a=this.t-1;a>=0;--a)t[a+s+1]=this[a]>>i|x,x=(this[a]&n)<<r;for(a=s-1;a>=0;--a)t[a]=0;t[s]=x,t.t=this.t+s+1,t.s=this.s,t.clamp()},he.prototype.rShiftTo=function(e,t){t.s=this.s;var a=Math.floor(e/this.DB);if(a>=this.t)t.t=0;else{var r=e%this.DB,i=this.DB-r,n=(1<<r)-1;t[0]=this[a]>>r;for(var s=a+1;s<this.t;++s)t[s-a-1]|=(this[s]&n)<<i,t[s-a]=this[s]>>r;r>0&&(t[this.t-a-1]|=(this.s&n)<<i),t.t=this.t-a,t.clamp()}},he.prototype.subTo=function(e,t){for(var a=0,r=0,i=Math.min(e.t,this.t);a<i;)r+=this[a]-e[a],t[a++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;a<this.t;)r+=this[a],t[a++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;a<e.t;)r-=e[a],t[a++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[a++]=this.DV+r:r>0&&(t[a++]=r),t.t=a,t.clamp()},he.prototype.multiplyTo=function(e,t){var a=this.abs(),r=e.abs(),i=a.t;for(t.t=i+r.t;--i>=0;)t[i]=0;for(i=0;i<r.t;++i)t[i+a.t]=a.am(0,r[i],t,i,0,a.t);t.s=0,t.clamp(),this.s!=e.s&&he.ZERO.subTo(t,t)},he.prototype.squareTo=function(e){for(var t=this.abs(),a=e.t=2*t.t;--a>=0;)e[a]=0;for(a=0;a<t.t-1;++a){var r=t.am(a,t[a],e,2*a,0,1);(e[a+t.t]+=t.am(a+1,2*t[a],e,2*a+1,r,t.t-a-1))>=t.DV&&(e[a+t.t]-=t.DV,e[a+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(a,t[a],e,2*a,0,1)),e.s=0,e.clamp()},he.prototype.divRemTo=function(e,t,a){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)null!=t&&t.fromInt(0),null!=a&&this.copyTo(a);else{null==a&&(a=fe());var n=fe(),s=this.s,x=(e=e.s,this.DB-Re(r[r.t-1]));if(x>0?(r.lShiftTo(x,n),i.lShiftTo(x,a)):(r.copyTo(n),i.copyTo(a)),0!=(i=n[(r=n.t)-1])){var o=i*(1<<this.F1)+(r>1?n[r-2]>>this.F2:0),l=this.FV/o,_=(o=(1<<this.F1)/o,1<<this.F2),h=a.t,f=h-r,c=null==t?fe():t;for(n.dlShiftTo(f,c),a.compareTo(c)>=0&&(a[a.t++]=1,a.subTo(c,a)),he.ONE.dlShiftTo(r,c),c.subTo(n,n);n.t<r;)n[n.t++]=0;for(;--f>=0;){var u=a[--h]==i?this.DM:Math.floor(a[h]*l+(a[h-1]+_)*o);if((a[h]+=n.am(0,u,a,f,0,r))<u)for(n.dlShiftTo(f,c),a.subTo(c,a);a[h]<--u;)a.subTo(c,a)}null!=t&&(a.drShiftTo(r,t),s!=e&&he.ZERO.subTo(t,t)),a.t=r,a.clamp(),x>0&&a.rShiftTo(x,a),s<0&&he.ZERO.subTo(a,a)}}}},he.prototype.invDigit=function(){if(this.t<1)return 0;var e,t=this[0];return 1&t?(e=(e=(e=(e=(e=3&t)*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e:0},he.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},he.prototype.exp=function(e,t){if(e>4294967295||e<1)return he.ONE;var a=fe(),r=fe(),i=t.convert(this),n=Re(e)-1;for(i.copyTo(a);--n>=0;)if(t.sqrTo(a,r),(e&1<<n)>0)t.mulTo(r,i,a);else{var s=a;a=r,r=s}return t.revert(a)},he.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,a=(1<<e)-1,r=!1,i="",n=this.t,s=this.DB-n*this.DB%e;if(n-- >0)for(s<this.DB&&(t=this[n]>>s)>0&&(r=!0,i=pe(t));n>=0;)s<e?(t=(this[n]&(1<<s)-1)<<e-s,t|=this[--n]>>(s+=this.DB-e)):(t=this[n]>>(s-=e)&a,s<=0&&(s+=this.DB,--n)),t>0&&(r=!0),r&&(i+=pe(t));return r?i:"0"},he.prototype.negate=function(){var e=fe();return he.ZERO.subTo(this,e),e},he.prototype.abs=function(){return this.s<0?this.negate():this},he.prototype.compareTo=function(e){if(0!=(t=this.s-e.s))return t;var t,a=this.t;if(0!=(t=a-e.t))return t;for(;--a>=0;)if(0!=(t=this[a]-e[a]))return t;return 0},he.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Re(this[this.t-1]^this.s&this.DM)},he.prototype.mod=function(e){var t=fe();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(he.ZERO)>0&&e.subTo(t,t),t},he.prototype.modPowInt=function(e,t){var a;return a=e<256||t.isEven()?new Pe(t):new be(t),this.exp(e,a)},he.ZERO=Se(0),he.ONE=Se(1),Te.prototype.convert=De,Te.prototype.revert=De,Te.prototype.mulTo=function(e,t,a){e.multiplyTo(t,a)},Te.prototype.sqrTo=function(e,t){e.squareTo(t)},Ae.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=fe();return e.copyTo(t),this.reduce(t),t},Ae.prototype.revert=function(e){return e},Ae.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Ae.prototype.mulTo=function(e,t,a){e.multiplyTo(t,a),this.reduce(a)},Ae.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Ie=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Me=67108864/Ie[Ie.length-1];function Le(){}function we(){this.j=this.i=0,this.S=[]}he.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},he.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),a=Se(t=Math.pow(e,t)),r=fe(),i=fe(),n="";for(this.divRemTo(a,r,i);r.signum()>0;)n=(t+i.intValue()).toString(e).substr(1)+n,r.divRemTo(a,r,i);return i.intValue().toString(e)+n},he.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var a=this.chunkSize(t),r=Math.pow(t,a),i=!1,n=0,s=0,x=0;x<e.length;++x){var o=me(e,x);o<0?"-"==e.charAt(x)&&0==this.signum()&&(i=!0):(s=t*s+o,++n>=a&&(this.dMultiply(r),this.dAddOffset(s,0),s=n=0))}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(s,0)),i&&he.ZERO.subTo(this,this)},he.prototype.fromNumber=function(e,t,a){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,a),this.testBit(e-1)||this.bitwiseTo(he.ONE.shiftLeft(e-1),Ee,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(he.ONE.shiftLeft(e-1),this);else{var r=7&e;(a=[]).length=1+(e>>3),t.nextBytes(a),r>0?a[0]&=(1<<r)-1:a[0]=0,this.fromString(a,256)}},he.prototype.bitwiseTo=function(e,t,a){var r,i,n=Math.min(e.t,this.t);for(r=0;r<n;++r)a[r]=t(this[r],e[r]);if(e.t<this.t){for(i=e.s&this.DM,r=n;r<this.t;++r)a[r]=t(this[r],i);a.t=this.t}else{for(i=this.s&this.DM,r=n;r<e.t;++r)a[r]=t(i,e[r]);a.t=e.t}a.s=t(this.s,e.s),a.clamp()},he.prototype.changeBit=function(e,t){var a=he.ONE.shiftLeft(e);return this.bitwiseTo(a,t,a),a},he.prototype.addTo=function(e,t){for(var a=0,r=0,i=Math.min(e.t,this.t);a<i;)r+=this[a]+e[a],t[a++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;a<this.t;)r+=this[a],t[a++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;a<e.t;)r+=e[a],t[a++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[a++]=r:r<-1&&(t[a++]=this.DV+r),t.t=a,t.clamp()},he.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},he.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},he.prototype.multiplyLowerTo=function(e,t,a){var r,i=Math.min(this.t+e.t,t);for(a.s=0,a.t=i;i>0;)a[--i]=0;for(r=a.t-this.t;i<r;++i)a[i+this.t]=this.am(0,e[i],a,i,0,this.t);for(r=Math.min(e.t,t);i<r;++i)this.am(0,e[i],a,i,0,t-i);a.clamp()},he.prototype.multiplyUpperTo=function(e,t,a){--t;var r=a.t=this.t+e.t-t;for(a.s=0;--r>=0;)a[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)a[this.t+r-t]=this.am(t-r,e[r],a,0,0,this.t+r-t);a.clamp(),a.drShiftTo(1,a)},he.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,a=this.s<0?e-1:0;if(this.t>0)if(0==t)a=this[0]%e;else for(var r=this.t-1;r>=0;--r)a=(t*a+this[r])%e;return a},he.prototype.millerRabin=function(e){var t=this.subtract(he.ONE),a=t.getLowestSetBit();if(a<=0)return!1;var r=t.shiftRight(a);(e=e+1>>1)>Ie.length&&(e=Ie.length);for(var i=fe(),n=0;n<e;++n){i.fromInt(Ie[Math.floor(Math.random()*Ie.length)]);var s=i.modPow(r,this);if(0!=s.compareTo(he.ONE)&&0!=s.compareTo(t)){for(var x=1;x++<a&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(he.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},he.prototype.clone=function(){var e=fe();return this.copyTo(e),e},he.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},he.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},he.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},he.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},he.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var a,r=this.DB-e*this.DB%8,i=0;if(e-- >0)for(r<this.DB&&(a=this[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=a|this.s<<this.DB-r);e>=0;)r<8?(a=(this[e]&(1<<r)-1)<<8-r,a|=this[--e]>>(r+=this.DB-8)):(a=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),!!(128&a)&&(a|=-256),0==i&&(128&this.s)!=(128&a)&&++i,(i>0||a!=this.s)&&(t[i++]=a);return t},he.prototype.equals=function(e){return 0==this.compareTo(e)},he.prototype.min=function(e){return this.compareTo(e)<0?this:e},he.prototype.max=function(e){return this.compareTo(e)>0?this:e},he.prototype.and=function(e){var t=fe();return this.bitwiseTo(e,ye,t),t},he.prototype.or=function(e){var t=fe();return this.bitwiseTo(e,Ee,t),t},he.prototype.xor=function(e){var t=fe();return this.bitwiseTo(e,ge,t),t},he.prototype.andNot=function(e){var t=fe();return this.bitwiseTo(e,Fe,t),t},he.prototype.not=function(){for(var e=fe(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},he.prototype.shiftLeft=function(e){var t=fe();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},he.prototype.shiftRight=function(e){var t=fe();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},he.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ve(this[e]);return this.s<0?this.t*this.DB:-1},he.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,a=0;a<this.t;++a)e+=Ce(this[a]^t);return e},he.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},he.prototype.setBit=function(e){return this.changeBit(e,Ee)},he.prototype.clearBit=function(e){return this.changeBit(e,Fe)},he.prototype.flipBit=function(e){return this.changeBit(e,ge)},he.prototype.add=function(e){var t=fe();return this.addTo(e,t),t},he.prototype.subtract=function(e){var t=fe();return this.subTo(e,t),t},he.prototype.multiply=function(e){var t=fe();return this.multiplyTo(e,t),t},he.prototype.divide=function(e){var t=fe();return this.divRemTo(e,t,null),t},he.prototype.remainder=function(e){var t=fe();return this.divRemTo(e,null,t),t},he.prototype.divideAndRemainder=function(e){var t=fe(),a=fe();return this.divRemTo(e,t,a),[t,a]},he.prototype.modPow=function(e,t){var a,r,i=e.bitLength(),n=Se(1);if(i<=0)return n;a=i<18?1:i<48?3:i<144?4:i<768?5:6,r=i<8?new Pe(t):t.isEven()?new Ae(t):new be(t);var s=[],x=3,o=a-1,l=(1<<a)-1;if(s[1]=r.convert(this),a>1)for(i=fe(),r.sqrTo(s[1],i);x<=l;)s[x]=fe(),r.mulTo(i,s[x-2],s[x]),x+=2;var _,h=e.t-1,f=!0,c=fe();for(i=Re(e[h])-1;h>=0;){for(i>=o?_=e[h]>>i-o&l:(_=(e[h]&(1<<i+1)-1)<<o-i,h>0&&(_|=e[h-1]>>this.DB+i-o)),x=a;!(1&_);)_>>=1,--x;if((i-=x)<0&&(i+=this.DB,--h),f)s[_].copyTo(n),f=!1;else{for(;x>1;)r.sqrTo(n,c),r.sqrTo(c,n),x-=2;x>0?r.sqrTo(n,c):(x=n,n=c,c=x),r.mulTo(c,s[_],n)}for(;h>=0&&!(e[h]&1<<i);)r.sqrTo(n,c),x=n,n=c,c=x,--i<0&&(i=this.DB-1,--h)}return r.revert(n)},he.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return he.ZERO;for(var a=e.clone(),r=this.clone(),i=Se(1),n=Se(0),s=Se(0),x=Se(1);0!=a.signum();){for(;a.isEven();)a.rShiftTo(1,a),t?(i.isEven()&&n.isEven()||(i.addTo(this,i),n.subTo(e,n)),i.rShiftTo(1,i)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&x.isEven()||(s.addTo(this,s),x.subTo(e,x)),s.rShiftTo(1,s)):x.isEven()||x.subTo(e,x),x.rShiftTo(1,x);a.compareTo(r)>=0?(a.subTo(r,a),t&&i.subTo(s,i),n.subTo(x,n)):(r.subTo(a,r),t&&s.subTo(i,s),x.subTo(n,x))}return 0!=r.compareTo(he.ONE)?he.ZERO:x.compareTo(e)>=0?x.subtract(e):x.signum()<0?(x.addTo(e,x),x.signum()<0?x.add(e):x):x},he.prototype.pow=function(e){return this.exp(e,new Te)},he.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone();if(e=e.s<0?e.negate():e.clone(),t.compareTo(e)<0){var a=t;t=e,e=a}a=t.getLowestSetBit();var r=e.getLowestSetBit();if(r<0)return t;for(a<r&&(r=a),r>0&&(t.rShiftTo(r,t),e.rShiftTo(r,e));t.signum()>0;)(a=t.getLowestSetBit())>0&&t.rShiftTo(a,t),(a=e.getLowestSetBit())>0&&e.rShiftTo(a,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return r>0&&e.lShiftTo(r,e),e},he.prototype.isProbablePrime=function(e){var t,a=this.abs();if(1==a.t&&a[0]<=Ie[Ie.length-1]){for(t=0;t<Ie.length;++t)if(a[0]==Ie[t])return!0;return!1}if(a.isEven())return!1;for(t=1;t<Ie.length;){for(var r=Ie[t],i=t+1;i<Ie.length&&r<Me;)r*=Ie[i++];for(r=a.modInt(r);t<i;)if(r%Ie[t++]==0)return!1}return a.millerRabin(e)},he.prototype.square=function(){var e=fe();return this.squareTo(e),e},function(e,t,a,r,i,n,s){function x(e){var t,r,i=this,n=e.length,s=0,x=i.i=i.j=i.m=0;for(i.S=[],i.c=[],n||(e=[n++]);s<a;)i.S[s]=s++;for(s=0;s<a;s++)x=x+(t=i.S[s])+e[s%n]&255,r=i.S[x],i.S[s]=r,i.S[x]=t;i.g=function(e){var t=i.S,r=i.i+1&255,n=t[r],s=i.j+n&255,x=t[s];t[r]=x,t[s]=n;for(var o=t[n+x&255];--e;)x=t[s=s+(n=t[r=r+1&255])&255],t[r]=x,t[s]=n,o=o*a+t[n+x&255];return i.i=r,i.j=s,o},i.g(a)}function o(e,t,a,r,i){var n;if(a=[],i=void 0===e?"undefined":(n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{a.push(o(e[r],t-1))}catch(e){}return a.length?a:e+("string"!=i?"\0":"")}function l(e,t,a,r){for(e+="",r=a=0;r<e.length;r++){var i=t,n=255&r,s=(a^=19*t[255&r])+e.charCodeAt(r);i[n]=255&s}for(r in e="",t)e+=String.fromCharCode(t[r]);return e}t.seedrandom=function(r,_){var h,f=[];r=l(o(_?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),f);return l((h=new x(f)).S,e),t.random=function(){for(var e=h.g(6),t=s,r=0;e<i;)e=(e+r)*a,t*=a,r=h.g(1);for(;e>=n;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},s=t.pow(a,6),i=t.pow(2,i),n=2*i,l(t.random(),e)}([],Math,256,0,52),Le.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())},we.prototype.init=function(e){var t,a,r;for(t=0;t<256;++t)this.S[t]=t;for(t=a=0;t<256;++t)a=a+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[a],this.S[a]=r;this.j=this.i=0},we.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var Oe,Be,ke;function Ne(){!function(e){Be[ke++]^=255&e,Be[ke++]^=e>>8&255,Be[ke++]^=e>>16&255,Be[ke++]^=e>>24&255,ke>=256&&(ke-=256)}((new Date).getTime())}if(null==Be){var Ve;for(Be=[],ke=0;ke<256;)Ve=Math.floor(65536*Math.random()),Be[ke++]=Ve>>>8,Be[ke++]=255&Ve;ke=0,Ne()}function Ue(){if(null==Oe){for(Ne(),(Oe=new we).init(Be),ke=0;ke<Be.length;++ke)Be[ke]=0;ke=0}return Oe.next()}function He(){}He.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Ue()};var We=function(e){return function(e){function t(e,t){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}function a(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e),function(e){for(var t="",a=0;a<4*e.length;a++)t+="0123456789abcdef".charAt(e[a>>2]>>8*(3-a%4)+4&15)+"0123456789abcdef".charAt(e[a>>2]>>8*(3-a%4)&15);return t}(function(e,r){var i,n,s,x,o,l,_,h,f,c,u,d,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],S=Array(64);for(e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r,f=0;f<e.length;f+=16){for(i=m[0],n=m[1],s=m[2],x=m[3],o=m[4],l=m[5],_=m[6],h=m[7],c=0;c<64;c++)S[c]=c<16?e[c+f]:t(t(t(a(S[c-2],17)^a(S[c-2],19)^S[c-2]>>>10,S[c-7]),a(S[c-15],7)^a(S[c-15],18)^S[c-15]>>>3),S[c-16]),u=t(t(t(t(h,a(o,6)^a(o,11)^a(o,25)),o&l^~o&_),p[c]),S[c]),d=t(a(i,2)^a(i,13)^a(i,22),i&n^i&s^n&s),h=_,_=l,l=o,o=t(x,u),x=s,s=n,n=i,i=t(u,d);m[0]=t(i,m[0]),m[1]=t(n,m[1]),m[2]=t(s,m[2]),m[3]=t(x,m[3]),m[4]=t(o,m[4]),m[5]=t(l,m[5]),m[6]=t(_,m[6]),m[7]=t(h,m[7])}return m}(function(e){for(var t=[],a=0;a<8*e.length;a+=8)t[a>>5]|=(255&e.charCodeAt(a/8))<<24-a%32;return t}(e),8*e.length))}(e)};var Ye=function(e){return function(e){function t(e,t){return e<<t|e>>>32-t}function a(e){var t,a="";for(t=7;t>=0;t--)a+=(e>>>4*t&15).toString(16);return a}var r,i,n,s,x,o,l,_=Array(80),h=1732584193,f=4023233417,c=2562383102,u=271733878,d=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e),n=e.length;var p=[];for(r=0;r<n-3;r+=4)i=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),p.push(i);switch(n%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(n-1)<<24|8388608;break;case 2:r=e.charCodeAt(n-2)<<24|e.charCodeAt(n-1)<<16|32768;break;case 3:r=e.charCodeAt(n-3)<<24|e.charCodeAt(n-2)<<16|e.charCodeAt(n-1)<<8|128}for(p.push(r);p.length%16!=14;)p.push(0);for(p.push(n>>>29),p.push(n<<3&4294967295),e=0;e<p.length;e+=16){for(r=0;r<16;r++)_[r]=p[e+r];for(r=16;r<=79;r++)_[r]=t(_[r-3]^_[r-8]^_[r-14]^_[r-16],1);for(i=h,n=f,s=c,x=u,o=d,r=0;r<=19;r++)l=t(i,5)+(n&s|~n&x)+o+_[r]+1518500249&4294967295,o=x,x=s,s=t(n,30),n=i,i=l;for(r=20;r<=39;r++)l=t(i,5)+(n^s^x)+o+_[r]+1859775393&4294967295,o=x,x=s,s=t(n,30),n=i,i=l;for(r=40;r<=59;r++)l=t(i,5)+(n&s|n&x|s&x)+o+_[r]+2400959708&4294967295,o=x,x=s,s=t(n,30),n=i,i=l;for(r=60;r<=79;r++)l=t(i,5)+(n^s^x)+o+_[r]+3395469782&4294967295,o=x,x=s,s=t(n,30),n=i,i=l;h=h+i&4294967295,f=f+n&4294967295,c=c+s&4294967295,u=u+x&4294967295,d=d+o&4294967295}return(l=a(h)+a(f)+a(c)+a(u)+a(d)).toLowerCase()}(e)};function Ge(e,t){return new he(e,t)}function Xe(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}Xe.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},Xe.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Ge(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},Xe.prototype.encrypt=function(e){return null==(e=function(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var a=[],r=e.length-1;r>=0&&t>0;){var i=e.charCodeAt(r--);i<128?a[--t]=i:i>127&&i<2048?(a[--t]=63&i|128,a[--t]=i>>6|192):(a[--t]=63&i|128,a[--t]=i>>6&63|128,a[--t]=i>>12|224)}for(a[--t]=0,r=new He,i=[];t>2;){for(i[0]=0;0==i[0];)r.nextBytes(i);a[--t]=i[0]}return a[--t]=2,a[--t]=0,new he(a)}(e,this.n.bitLength()+7>>3))||null==(e=this.doPublic(e))?null:1&(e=e.toString(16)).length?"0"+e:e},Xe.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)},Xe.prototype.setPrivate=function(e,t,a){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Ge(e,16),this.e=parseInt(t,16),this.d=Ge(a,16)):alert("Invalid RSA private key")},Xe.prototype.setPrivateEx=function(e,t,a,r,i,n,s,x){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Ge(e,16),this.e=parseInt(t,16),this.d=Ge(a,16),this.p=Ge(r,16),this.q=Ge(i,16),this.dmp1=Ge(n,16),this.dmq1=Ge(s,16),this.coeff=Ge(x,16)):alert("Invalid RSA private key")},Xe.prototype.generate=function(e,t){var a=new Le,r=e>>1;this.e=parseInt(t,16);for(var i=new he(t,16);;){for(;this.p=new he(e-r,1,a),0!=this.p.subtract(he.ONE).gcd(i).compareTo(he.ONE)||!this.p.isProbablePrime(10););for(;this.q=new he(r,1,a),0!=this.q.subtract(he.ONE).gcd(i).compareTo(he.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var n=this.p;this.p=this.q,this.q=n}n=this.p.subtract(he.ONE);var s=this.q.subtract(he.ONE),x=n.multiply(s);if(0==x.gcd(i).compareTo(he.ONE)){this.n=this.p.multiply(this.q),this.d=i.modInverse(x),this.dmp1=this.d.mod(n),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},Xe.prototype.decrypt=function(e){return null==(e=this.doPrivate(Ge(e,16)))?null:function(e,t){for(var a=e.toByteArray(),r=0;r<a.length&&0==a[r];)++r;if(a.length-r!=t-1||2!=a[r])return null;for(++r;0!=a[r];)if(++r>=a.length)return null;for(var i="";++r<a.length;){var n=255&a[r];n<128?i+=String.fromCharCode(n):n>191&&n<224?(i+=String.fromCharCode((31&n)<<6|63&a[r+1]),++r):(i+=String.fromCharCode((15&n)<<12|(63&a[r+1])<<6|63&a[r+2]),r+=2)}return i}(e,this.n.bitLength()+7>>3)};var Je=[];Je.sha1="3021300906052b0e03021a05000414",Je.sha256="3031300d060960864801650304020105000420";var Ze=[];function je(e,t,a){t/=4;e=(0,Ze[a])(e),a="00"+Je[a]+e,e="",t=t-4-a.length;for(var r=0;r<t;r+=2)e+="ff";return sPaddedMessageHex="0001"+e+a}function ze(e,t,a){return function(e,t,a){var r=new Xe;return r.setPublic(t,a),r.doPublic(e)}(e,t,a).toString(16).replace(/^1f+00/,"")}function Ke(e){for(var t in Je){var a=Je[t],r=a.length;if(e.substring(0,r)==a)return[t,e.substring(r)]}return[]}Ze.sha1=Ye,Ze.sha256=We,Xe.prototype.signString=function(e,t){var a=je(e,this.n.bitLength(),t);return this.doPrivate(Ge(a,16)).toString(16)},Xe.prototype.signStringWithSHA1=function(e){return e=je(e,this.n.bitLength(),"sha1"),this.doPrivate(Ge(e,16)).toString(16)},Xe.prototype.signStringWithSHA256=function(e){return e=je(e,this.n.bitLength(),"sha256"),this.doPrivate(Ge(e,16)).toString(16)},Xe.prototype.verifyString=function(e,t){t=t.replace(/[ \n]+/g,"");var a=this.doPublic(Ge(t,16)).toString(16).replace(/^1f+00/,""),r=Ke(a);return 0!=r.length&&(a=r[1])==(r=(0,Ze[r[0]])(e))},Xe.prototype.verifyHexSignatureForMessage=function(e,t){return function(e,t,a,r){return 0!=(a=Ke(t=ze(t,a,r))).length&&(t=a[1])==(0,Ze[a[0]])(e)}(t,Ge(e,16),this.n.toString(16),this.e.toString(16))};var qe,$e,Qe=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var a,r=t.length,i=1;switch(r){case 16:a=176;break;case 24:a=208;break;case 32:a=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var n=r;n<a;n+=4){var s=t.slice(n-4,n);n%r==0?(s=[e.Sbox[s[1]]^i,e.Sbox[s[2]],e.Sbox[s[3]],e.Sbox[s[0]]],(i<<=1)>=256&&(i^=283)):r>24&&n%r==16&&(s=[e.Sbox[s[0]],e.Sbox[s[1]],e.Sbox[s[2]],e.Sbox[s[3]]]);for(var x=0;x<4;x++)t[n+x]=t[n+x-r]^s[x]}},Encrypt:function(t,a){var r=a.length;e.AddRoundKey(t,a.slice(0,16));for(var i=16;i<r-16;i+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,a.slice(i,i+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,a.slice(i,r))},Decrypt:function(t,a){var r=a.length;for(e.AddRoundKey(t,a.slice(r-16,r)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),r-=32;r>=16;r-=16)e.AddRoundKey(t,a.slice(r,r+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,a.slice(0,16))},SubBytes:function(e,t){for(var a=0;a<16;a++)e[a]=t[e[a]]},AddRoundKey:function(e,t){for(var a=0;a<16;a++)e[a]^=t[a]},ShiftRows:function(e,t){for(var a=[].concat(e),r=0;r<16;r++)e[r]=a[t[r]]},MixColumns:function(t){for(var a=0;a<16;a+=4){var r=t[a+0],i=t[a+1],n=t[a+2],s=t[a+3],x=r^i^n^s;t[a+0]^=x^e.xtime[r^i],t[a+1]^=x^e.xtime[i^n],t[a+2]^=x^e.xtime[n^s],t[a+3]^=x^e.xtime[s^r]}},MixColumns_Inv:function(t){for(var a=0;a<16;a+=4){var r=t[a+0],i=t[a+1],n=t[a+2],s=t[a+3],x=r^i^n^s,o=e.xtime[x],l=e.xtime[e.xtime[o^r^n]]^x;x^=e.xtime[e.xtime[o^i^s]],t[a+0]^=l^e.xtime[r^i],t[a+1]^=x^e.xtime[i^n],t[a+2]^=l^e.xtime[n^s],t[a+3]^=x^e.xtime[s^r]}}};return e}(),et=function(){var e={};return Qe.Init(),e.b256to64=function(e){var t,a,r,i="",n=0,s=e.length;for(r=0;r<s;r++)a=e.charCodeAt(r),0==n?(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2&63),t=(3&a)<<4):1==n?(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|a>>4&15),t=(15&a)<<2):2==n&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|a>>6&3),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&a)),3==(n+=1)&&(n=0);return n>0&&(i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),i+="="),1==n&&(i+="="),i},e.b64to256=function(e){var t,a,r="",i=0,n=0,s=e.length;for(a=0;a<s;a++)(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a)))>=0&&(i&&(r+=String.fromCharCode(n|t>>6-i&255)),n=t<<(i=i+2&7)&255);return r},e.b16to64=function(e){var t,a,r="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)a=parseInt(e.substring(t,t+3),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&a);for(t+1==e.length?(a=parseInt(e.substring(t,t+1),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a<<2)):t+2==e.length&&(a=parseInt(e.substring(t,t+2),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(a>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&a)<<4));(3&r.length)>0;)r+="=";return r},e.b64to16=function(e){var t,a,r="",i=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==i?(r+=pe(v>>2),a=3&v,i=1):1==i?(r+=pe(a<<2|v>>4),a=15&v,i=2):2==i?(r+=pe(a),r+=pe(v>>2),a=3&v,i=3):(r+=pe(a<<2|v>>4),r+=pe(15&v),i=0));return 1==i&&(r+=pe(a<<2)),r},e.string2bytes=function(e){for(var t=[],a=0;a<e.length;a++)t.push(e.charCodeAt(a));return t},e.bytes2string=function(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return t},e.blockXOR=function(e,t){for(var a=Array(16),r=0;r<16;r++)a[r]=e[r]^t[r];return a},e.blockIV=function(){var e=new He,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),a=(16-e.length%16)%16;for(i=e.length;i<e.length+a;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,a){var r=a.slice(0);Qe.ExpandKey(r);for(var i=e.string2bytes(t),n=(i=e.pad16(i),e.blockIV()),s=0;s<i.length/16;s++){var x=i.slice(16*s,16*s+16),o=n.slice(16*s,16*s+16);x=e.blockXOR(o,x);Qe.Encrypt(x,r),n=n.concat(x)}return r=e.bytes2string(n),e.b256to64(r)},e.decryptAESCBC=function(t,a){var r=a.slice(0);Qe.ExpandKey(r);t=e.b64to256(t);for(var i=e.string2bytes(t),n=[],s=1;s<i.length/16;s++){var x=i.slice(16*s,16*s+16),o=i.slice(16*(s-1),16*(s-1)+16);Qe.Decrypt(x,r),x=e.blockXOR(o,x),n=n.concat(x)}return n=e.depad(n),e.bytes2string(n)},e.wrap60=function(e){for(var t="",a=0;a<e.length;a++)a%60==0&&0!=a&&(t+="\n"),t+=e[a];return t},e.generateAESKey=function(){var e=Array(16);return(new He).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(We(e));var a=new Xe;return a.generate(t,"10001"),a},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return function(e){function t(e,t){var a,r,i,n,s;return i=2147483648&e,n=2147483648&t,s=(1073741823&e)+(1073741823&t),(a=1073741824&e)&(r=1073741824&t)?2147483648^s^i^n:a|r?1073741824&s?3221225472^s^i^n:1073741824^s^i^n:s^i^n}function a(e,a,r,i,n,s,x){return e=t(e,t(t(a&r|~a&i,n),x)),t(e<<s|e>>>32-s,a)}function r(e,a,r,i,n,s,x){return e=t(e,t(t(a&i|r&~i,n),x)),t(e<<s|e>>>32-s,a)}function i(e,a,r,i,n,s,x){return e=t(e,t(t(a^r^i,n),x)),t(e<<s|e>>>32-s,a)}function n(e,a,r,i,n,s,x){return e=t(e,t(t(r^(a|~i),n),x)),t(e<<s|e>>>32-s,a)}function s(e){var t,a="",r="";for(t=0;t<=3;t++)a+=(r="0"+(r=e>>>8*t&255).toString(16)).substr(r.length-2,2);return a}var x,o,l,_,h,f,c,u,d=function(e){for(var t,a=e.length,r=16*(((t=a+8)-t%64)/64+1),i=Array(r-1),n=0,s=0;s<a;)n=s%4*8,i[t=(s-s%4)/4]|=e.charCodeAt(s)<<n,s++;return i[(s-s%4)/4]|=128<<s%4*8,i[r-2]=a<<3,i[r-1]=a>>>29,i}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",a=0;a<e.length;a++){var r=e.charCodeAt(a);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e));for(h=1732584193,f=4023233417,c=2562383102,u=271733878,e=0;e<d.length;e+=16)x=h,o=f,l=c,_=u,h=a(h,f,c,u,d[e+0],7,3614090360),u=a(u,h,f,c,d[e+1],12,3905402710),c=a(c,u,h,f,d[e+2],17,606105819),f=a(f,c,u,h,d[e+3],22,3250441966),h=a(h,f,c,u,d[e+4],7,4118548399),u=a(u,h,f,c,d[e+5],12,1200080426),c=a(c,u,h,f,d[e+6],17,2821735955),f=a(f,c,u,h,d[e+7],22,4249261313),h=a(h,f,c,u,d[e+8],7,1770035416),u=a(u,h,f,c,d[e+9],12,2336552879),c=a(c,u,h,f,d[e+10],17,4294925233),f=a(f,c,u,h,d[e+11],22,2304563134),h=a(h,f,c,u,d[e+12],7,1804603682),u=a(u,h,f,c,d[e+13],12,4254626195),c=a(c,u,h,f,d[e+14],17,2792965006),h=r(h,f=a(f,c,u,h,d[e+15],22,1236535329),c,u,d[e+1],5,4129170786),u=r(u,h,f,c,d[e+6],9,3225465664),c=r(c,u,h,f,d[e+11],14,643717713),f=r(f,c,u,h,d[e+0],20,3921069994),h=r(h,f,c,u,d[e+5],5,3593408605),u=r(u,h,f,c,d[e+10],9,38016083),c=r(c,u,h,f,d[e+15],14,3634488961),f=r(f,c,u,h,d[e+4],20,3889429448),h=r(h,f,c,u,d[e+9],5,568446438),u=r(u,h,f,c,d[e+14],9,3275163606),c=r(c,u,h,f,d[e+3],14,4107603335),f=r(f,c,u,h,d[e+8],20,1163531501),h=r(h,f,c,u,d[e+13],5,2850285829),u=r(u,h,f,c,d[e+2],9,4243563512),c=r(c,u,h,f,d[e+7],14,1735328473),h=i(h,f=r(f,c,u,h,d[e+12],20,2368359562),c,u,d[e+5],4,4294588738),u=i(u,h,f,c,d[e+8],11,2272392833),c=i(c,u,h,f,d[e+11],16,1839030562),f=i(f,c,u,h,d[e+14],23,4259657740),h=i(h,f,c,u,d[e+1],4,2763975236),u=i(u,h,f,c,d[e+4],11,1272893353),c=i(c,u,h,f,d[e+7],16,4139469664),f=i(f,c,u,h,d[e+10],23,3200236656),h=i(h,f,c,u,d[e+13],4,681279174),u=i(u,h,f,c,d[e+0],11,3936430074),c=i(c,u,h,f,d[e+3],16,3572445317),f=i(f,c,u,h,d[e+6],23,76029189),h=i(h,f,c,u,d[e+9],4,3654602809),u=i(u,h,f,c,d[e+12],11,3873151461),c=i(c,u,h,f,d[e+15],16,530742520),h=n(h,f=i(f,c,u,h,d[e+2],23,3299628645),c,u,d[e+0],6,4096336452),u=n(u,h,f,c,d[e+7],10,1126891415),c=n(c,u,h,f,d[e+14],15,2878612391),f=n(f,c,u,h,d[e+5],21,4237533241),h=n(h,f,c,u,d[e+12],6,1700485571),u=n(u,h,f,c,d[e+3],10,2399980690),c=n(c,u,h,f,d[e+10],15,4293915773),f=n(f,c,u,h,d[e+1],21,2240044497),h=n(h,f,c,u,d[e+8],6,1873313359),u=n(u,h,f,c,d[e+15],10,4264355552),c=n(c,u,h,f,d[e+6],15,2734768916),f=n(f,c,u,h,d[e+13],21,1309151649),h=n(h,f,c,u,d[e+4],6,4149444226),u=n(u,h,f,c,d[e+11],10,3174756917),c=n(c,u,h,f,d[e+2],15,718787259),f=n(f,c,u,h,d[e+9],21,3951481745),h=t(h,x),f=t(f,o),c=t(c,l),u=t(u,_);return(s(h)+s(f)+s(c)+s(u)).toLowerCase()}(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new Xe;return t.setPublic(e,"10001"),t},e.encrypt=function(t,a,r){var i="";try{i+=e.publicKeyFromString(a).encrypt(t)+"?"}catch(e){return{status:"Invalid public key"}}return{status:"success",cipher:i}},e.decrypt=function(e,t){var a=e.split("?");return{status:"success",plaintext:t.decrypt(a[0]),signature:"unsigned"}},e}(),tt=tt||function(e){var t={},a=t.lib={},r=function(){},i=a.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},n=a.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||x).stringify(this)},concat:function(e){var t=this.words,a=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(a[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<a.length)for(i=0;i<e;i+=4)t[r+i>>>2]=a[i>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a=[],r=0;r<t;r+=4)a.push(4294967296*e.random()|0);return new n.init(a,t)}}),s=t.enc={},x=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;a.push((i>>>4).toString(16)),a.push((15&i).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r+=2)a[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new n.init(a,t/2)}},o=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var a=[],r=0;r<e;r++)a.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],r=0;r<t;r++)a[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new n.init(a,t)}},l=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(o.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return o.parse(unescape(encodeURIComponent(e)))}},_=a.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new n.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,r=a.words,i=a.sigBytes,s=this.blockSize,x=i/(4*s);if(t=(x=t?e.ceil(x):e.max((0|x)-this._minBufferSize,0))*s,i=e.min(4*t,i),t){for(var o=0;o<t;o+=s)this._doProcessBlock(r,o);o=r.splice(0,t),a.sigBytes-=i}return new n.init(o,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});a.Hasher=_.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,a){return new e.init(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return new h.HMAC.init(e,a).finalize(t)}}});var h=t.algo={};return t}(Math);$e=(qe=tt).lib.WordArray,qe.enc.Base64={stringify:function(e){var t=e.words,a=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<a;i+=3)for(var n=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<a;s++)e.push(r.charAt(n>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,a=this._map;(r=a.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],i=0,n=0;n<t;n++)if(n%4){var s=a.indexOf(e.charAt(n-1))<<n%4*2,x=a.indexOf(e.charAt(n))>>>6-n%4*2;r[i>>>2]|=(s|x)<<24-i%4*8,i++}return $e.create(r,i)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,a,r,i,n,s){return((e=e+(t&a|~t&r)+i+s)<<n|e>>>32-n)+t}function a(e,t,a,r,i,n,s){return((e=e+(t&r|a&~r)+i+s)<<n|e>>>32-n)+t}function r(e,t,a,r,i,n,s){return((e=e+(t^a^r)+i+s)<<n|e>>>32-n)+t}function i(e,t,a,r,i,n,s){return((e=e+(a^(t|~r))+i+s)<<n|e>>>32-n)+t}for(var n=tt,s=(o=n.lib).WordArray,x=o.Hasher,o=n.algo,l=[],_=0;64>_;_++)l[_]=4294967296*e.abs(e.sin(_+1))|0;o=o.MD5=x.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var s=0;16>s;s++){var x=e[o=n+s];e[o]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}s=this._hash.words;var o=e[n+0],_=(x=e[n+1],e[n+2]),h=e[n+3],f=e[n+4],c=e[n+5],u=e[n+6],d=e[n+7],p=e[n+8],m=e[n+9],S=e[n+10],R=e[n+11],P=e[n+12],b=e[n+13],y=e[n+14],E=e[n+15],g=t(g=s[0],C=s[1],v=s[2],F=s[3],o,7,l[0]),F=t(F,g,C,v,x,12,l[1]),v=t(v,F,g,C,_,17,l[2]),C=t(C,v,F,g,h,22,l[3]);g=t(g,C,v,F,f,7,l[4]),F=t(F,g,C,v,c,12,l[5]),v=t(v,F,g,C,u,17,l[6]),C=t(C,v,F,g,d,22,l[7]),g=t(g,C,v,F,p,7,l[8]),F=t(F,g,C,v,m,12,l[9]),v=t(v,F,g,C,S,17,l[10]),C=t(C,v,F,g,R,22,l[11]),g=t(g,C,v,F,P,7,l[12]),F=t(F,g,C,v,b,12,l[13]),v=t(v,F,g,C,y,17,l[14]),g=a(g,C=t(C,v,F,g,E,22,l[15]),v,F,x,5,l[16]),F=a(F,g,C,v,u,9,l[17]),v=a(v,F,g,C,R,14,l[18]),C=a(C,v,F,g,o,20,l[19]),g=a(g,C,v,F,c,5,l[20]),F=a(F,g,C,v,S,9,l[21]),v=a(v,F,g,C,E,14,l[22]),C=a(C,v,F,g,f,20,l[23]),g=a(g,C,v,F,m,5,l[24]),F=a(F,g,C,v,y,9,l[25]),v=a(v,F,g,C,h,14,l[26]),C=a(C,v,F,g,p,20,l[27]),g=a(g,C,v,F,b,5,l[28]),F=a(F,g,C,v,_,9,l[29]),v=a(v,F,g,C,d,14,l[30]),g=r(g,C=a(C,v,F,g,P,20,l[31]),v,F,c,4,l[32]),F=r(F,g,C,v,p,11,l[33]),v=r(v,F,g,C,R,16,l[34]),C=r(C,v,F,g,y,23,l[35]),g=r(g,C,v,F,x,4,l[36]),F=r(F,g,C,v,f,11,l[37]),v=r(v,F,g,C,d,16,l[38]),C=r(C,v,F,g,S,23,l[39]),g=r(g,C,v,F,b,4,l[40]),F=r(F,g,C,v,o,11,l[41]),v=r(v,F,g,C,h,16,l[42]),C=r(C,v,F,g,u,23,l[43]),g=r(g,C,v,F,m,4,l[44]),F=r(F,g,C,v,P,11,l[45]),v=r(v,F,g,C,E,16,l[46]),g=i(g,C=r(C,v,F,g,_,23,l[47]),v,F,o,6,l[48]),F=i(F,g,C,v,d,10,l[49]),v=i(v,F,g,C,y,15,l[50]),C=i(C,v,F,g,c,21,l[51]),g=i(g,C,v,F,P,6,l[52]),F=i(F,g,C,v,h,10,l[53]),v=i(v,F,g,C,S,15,l[54]),C=i(C,v,F,g,x,21,l[55]),g=i(g,C,v,F,p,6,l[56]),F=i(F,g,C,v,E,10,l[57]),v=i(v,F,g,C,u,15,l[58]),C=i(C,v,F,g,b,21,l[59]),g=i(g,C,v,F,f,6,l[60]),F=i(F,g,C,v,R,10,l[61]),v=i(v,F,g,C,_,15,l[62]),C=i(C,v,F,g,m,21,l[63]);s[0]=s[0]+g|0,s[1]=s[1]+C|0,s[2]=s[2]+v|0,s[3]=s[3]+F|0},_doFinalize:function(){var t=this._data,a=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;a[i>>>5]|=128<<24-i%32;var n=e.floor(r/4294967296);for(a[15+(i+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),a[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(a.length+1),this._process(),a=(t=this._hash).words,r=0;4>r;r++)i=a[r],a[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=x.clone.call(this);return e._hash=this._hash.clone(),e}}),n.MD5=x._createHelper(o),n.HmacMD5=x._createHmacHelper(o)}(Math),function(){var e,t=tt,a=(e=t.lib).Base,r=e.WordArray,i=(e=t.algo).EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var a=(x=this.cfg).hasher.create(),i=r.create(),n=i.words,s=x.keySize,x=x.iterations;n.length<s;){o&&a.update(o);var o=a.update(e).finalize(t);a.reset();for(var l=1;l<x;l++)o=a.finalize(o),a.reset();i.concat(o)}return i.sigBytes=4*s,i}});t.EvpKDF=function(e,t,a){return i.create(a).compute(e,t)}}(),tt.lib.Cipher||function(){var e=(f=tt).lib,t=e.Base,a=e.WordArray,r=e.BufferedBlockAlgorithm,i=f.enc.Base64,n=f.algo.EvpKDF,s=e.Cipher=r.extend({cfg:t.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,a){this.cfg=this.cfg.extend(a),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,a,r){return("string"==typeof a?c:h).encrypt(e,t,a,r)},decrypt:function(t,a,r){return("string"==typeof a?c:h).decrypt(e,t,a,r)}}}});e.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var x=f.mode={},o=function(e,t,a){var r=this._iv;r?this._iv=undefined:r=this._prevBlock;for(var i=0;i<a;i++)e[t+i]^=r[i]},l=(e.BlockCipherMode=t.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize;o.call(this,e,t,r),a.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var a=this._cipher,r=a.blockSize,i=e.slice(t,t+r);a.decryptBlock(e,t),o.call(this,e,t,r),this._prevBlock=i}}),x=x.CBC=l,l=(f.pad={}).Pkcs7={pad:function(e,t){for(var r,i=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,n=[],s=0;s<r;s+=4)n.push(i);r=a.create(n,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=s.extend({cfg:s.cfg.extend({mode:x,padding:l}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var a=t.createEncryptor;else a=t.createDecryptor,this._minBufferSize=1;this._mode=a.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var _=e.CipherParams=t.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(x=(f.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(i)},parse:function(e){var t=(e=i.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return _.create({ciphertext:e,salt:r})}},e.SerializableCipher=t.extend({cfg:t.extend({format:x}),encrypt:function(e,t,a,r){r=this.cfg.extend(r);var i=e.createEncryptor(a,r);return t=i.finalize(t),i=i.cfg,_.create({ciphertext:t,key:a,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,a,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(a,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),f=(f.kdf={}).OpenSSL={execute:function(e,t,r,i){return i||(i=a.random(8)),e=n.create({keySize:t+r}).compute(e,i),r=a.create(e.words.slice(t),4*r),e.sigBytes=4*t,_.create({key:e,iv:r,salt:i})}},c=e.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:f}),encrypt:function(e,t,a,r){return a=(r=this.cfg.extend(r)).kdf.execute(a,e.keySize,e.ivSize),r.iv=a.iv,(e=h.encrypt.call(this,e,t,a.key,r)).mixIn(a),e},decrypt:function(e,t,a,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),a=r.kdf.execute(a,e.keySize,e.ivSize,t.salt),r.iv=a.iv,h.decrypt.call(this,e,t,a.key,r)}})}(),function(){for(var e=tt,t=e.lib.BlockCipher,a=e.algo,r=[],i=[],n=[],s=[],x=[],o=[],l=[],_=[],h=[],f=[],c=[],u=0;256>u;u++)c[u]=128>u?u<<1:u<<1^283;var d=0,p=0;for(u=0;256>u;u++){var m=(m=p^p<<1^p<<2^p<<3^p<<4)>>>8^255&m^99;r[d]=m,i[m]=d;var S=c[d],R=c[S],P=c[R],b=257*c[m]^16843008*m;n[d]=b<<24|b>>>8,s[d]=b<<16|b>>>16,x[d]=b<<8|b>>>24,o[d]=b,b=16843009*P^65537*R^257*S^16843008*d,l[m]=b<<24|b>>>8,_[m]=b<<16|b>>>16,h[m]=b<<8|b>>>24,f[m]=b,d?(d=S^c[c[c[P^S]]],p^=c[c[p]]):d=p=1}var y=[0,1,2,4,8,16,32,64,128,27,54];a=a.AES=t.extend({_doReset:function(){for(var e=(a=this._key).words,t=a.sigBytes/4,a=4*((this._nRounds=t+6)+1),i=this._keySchedule=[],n=0;n<a;n++)if(n<t)i[n]=e[n];else{var s=i[n-1];n%t?6<t&&4==n%t&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=y[n/t|0]<<24),i[n]=i[n-t]^s}for(e=this._invKeySchedule=[],t=0;t<a;t++)n=a-t,s=t%4?i[n]:i[n-4],e[t]=4>t||4>=n?s:l[r[s>>>24]]^_[r[s>>>16&255]]^h[r[s>>>8&255]]^f[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,s,x,o,r)},decryptBlock:function(e,t){var a=e[t+1];e[t+1]=e[t+3],e[t+3]=a,this._doCryptBlock(e,t,this._invKeySchedule,l,_,h,f,i),a=e[t+1],e[t+1]=e[t+3],e[t+3]=a},_doCryptBlock:function(e,t,a,r,i,n,s,x){for(var o=this._nRounds,l=e[t]^a[0],_=e[t+1]^a[1],h=e[t+2]^a[2],f=e[t+3]^a[3],c=4,u=1;u<o;u++){var d=r[l>>>24]^i[_>>>16&255]^n[h>>>8&255]^s[255&f]^a[c++],p=r[_>>>24]^i[h>>>16&255]^n[f>>>8&255]^s[255&l]^a[c++],m=r[h>>>24]^i[f>>>16&255]^n[l>>>8&255]^s[255&_]^a[c++];f=r[f>>>24]^i[l>>>16&255]^n[_>>>8&255]^s[255&h]^a[c++],l=d,_=p,h=m}d=(x[l>>>24]<<24|x[_>>>16&255]<<16|x[h>>>8&255]<<8|x[255&f])^a[c++],p=(x[_>>>24]<<24|x[h>>>16&255]<<16|x[f>>>8&255]<<8|x[255&l])^a[c++],m=(x[h>>>24]<<24|x[f>>>16&255]<<16|x[l>>>8&255]<<8|x[255&_])^a[c++],f=(x[f>>>24]<<24|x[l>>>16&255]<<16|x[_>>>8&255]<<8|x[255&h])^a[c++],e[t]=d,e[t+1]=p,e[t+2]=m,e[t+3]=f},keySize:8});e.AES=t._createHelper(a)}();var at=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,a,r,i){var n=tt.AES.encrypt((new Date).getTime().toString(),tt.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse("12345678912345671234567891234567"),padding:tt.pad.Pkcs7}).ciphertext.toString();n.length<64&&(n+=n);var s=tt.AES.encrypt((new Date).getTime().toString(),tt.enc.Hex.parse("12345678912345671234567891234567"),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse("12345678912345671234567891234567"),padding:tt.pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:a,rand:r,playURL:i.playURL||"",auth:i.auth||"",token:i.token||"",key:n,iv:s,resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e.playURL,key:et.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:tt.AES.encrypt(e.rand+":"+e.auth,tt.enc.Hex.parse(e.key),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse(e.iv),padding:tt.pad.Pkcs7}).ciphertext.toString(),token:tt.AES.encrypt(e.token,tt.enc.Hex.parse(e.key),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse(e.iv),padding:tt.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)},t.playbackCmd=function(e,t,a){var r={sequence:0,cmd:"playback",url:e.playURL,key:et.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:tt.AES.encrypt(e.rand+":"+e.auth,tt.enc.Hex.parse(e.key),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse(e.iv),padding:tt.pad.Pkcs7}).ciphertext.toString(),token:tt.AES.encrypt(e.token,tt.enc.Hex.parse(e.key),{mode:tt.mode.CBC,iv:tt.enc.Hex.parse(e.iv),padding:tt.pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:a};return JSON.stringify(r)},t.seekCmd=function(e,t){var a={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(a)},e}(),rt=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,a,r){return{socket:e,id:t,playURL:a,deviceSerial:r.deviceSerial||"",verificationCode:r.verificationCode||"",resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)},t.playbackCmd=function(e,t,a){var r={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:a};return JSON.stringify(r)},e}(),it=Symbol("WEBSOCKET"),nt=Symbol("GETINDEX"),st=Symbol("PROTOCOLVERSION"),xt=Symbol("CIPHERSUITES"),ot=new le,lt=new _e,_t=new at,ht=new rt,ft=function(){function e(){this[st]="0.1",this[xt]=0,this[it]=[],this.ERRORS={},this[nt]=function(e){for(var t=-1,a=0,r=this[it].length;a<r;a++)if(this[it][a].id===e){t=a;break}return t}}var t=e.prototype;return t.openStream=function(e,t,a,r,i){var n=!1;e.indexOf("[")>-1&&(n=!0);var s=this,x=e.split("://"),o=x[0],l="",_=7681,h=1,f=0,c=!1;if(n)l=x[1].split("]:")[0]+"]",_=Math.floor(x[1].split("]:")[1].split("/")[0]),h=Math.floor(x[1].split("]:")[1].split("/")[1]/100),f=Math.floor(x[1].split("]:")[1].split("/")[1]%100)-1;else{l=x[1].split(":")[0],_=Math.floor(x[1].split(":")[1].split("/")[0]),h=Math.floor(x[1].split(":")[1].split("/")[1]/100),f=Math.floor(x[1].split(":")[1].split("/")[1]%100)-1;var u=x[1].split(":")[1].split("/")[2];""!==u&&"webSocketVideoCtrlProxy"===u&&(c=!0)}0===h&&(f=0);var d="&sessionID=";(t=t||{}).token&&!t.playURL&&(d="&token=");var p=t.sessionID||t.session||(t.playURL?"":t.token)||"",m=new window.WebSocket(o+"://"+l+":"+_+(t.mode?"/"+t.mode:"")+(c?"/webSocketVideoCtrlProxy":"")+"?version="+s[st]+"&cipherSuites="+s[xt]+d+p+(t.proxy?"&proxy="+t.proxy:""));m.binaryType="arraybuffer";var S=oe(),R=-1;return new Promise((function(e,n){m.onopen=function(){t.playURL||t.sessionID||t.deviceSerial||t.token||(s[it].push(ot.createClientObject(m,S,h,f)),e(S))},m.onmessage=function(r){if("string"==typeof r.data){var i=JSON.parse(r.data),x=s[nt](S);if(i&&i.version&&i.cipherSuite){if(s[st]=i.version,s[xt]=parseInt(i.cipherSuite,10),i&&i.PKD&&i.rand)s[it].push(_t.createClientObject(m,S,i.PKD,i.rand,t));else{var o="live://"+l+":"+_+"/"+h+"/"+f;-1===s[xt]?s[it].push(ht.createClientObject(m,S,o,t)):s[it].push(lt.createClientObject(m,S,o))}return void e(S)}if(i&&i.sdp){var c=lt.getMediaFromSdp(i.sdp);a({bHead:!0,buf:c})}if(i&&i.cmd&&"end"===i.cmd&&a({type:"exception",cmd:i.cmd}),i&&i.statusString&&("ok"===i.statusString.toLowerCase()&&s[it][x].resolve&&s[it][x].resolve(i),"ok"!==i.statusString.toLowerCase())){var u=lt.getError(i);x>-1?s[it][x].reject&&s[it][x].reject(u):n(u)}i&&i.errorCode&&a(i)}else{var d={},p=new Uint8Array(r.data);if(R++,64===p.byteLength||40===p.byteLength){for(var P=-1,b=p.byteLength,y=0;y<b;y++)if(73===p[y]&&77===p[y+1]&&75===p[y+2]&&72===p[y+3]){P=y;break}if(-1!==P)d={bHead:!0,buf:p.slice(P,P+40)};else d={bHead:!1,buf:p};a(d)}else R>0&&a(d={bHead:!1,buf:p});p=null,d=null,r=null}},m.onclose=function(){for(var e=0,t=s[it].length;e<t;e++)if(s[it][e].id===S){s[it][e].resolve(),s[it].splice(e,1),setTimeout((function(){r(S)}),200);break}n()},m.onerror=function(e){var t,a;[null==(t=window.WebSocket)?void 0:t.CLOSED,null==(a=window.WebSocket)?void 0:a.CLOSING].includes(e.target.readyState)||i(S,e)}}))},t.startPlay=function(e,t,a){var r=this,i=this[nt](e);return t&&a&&"0.1"===r[st]&&(t=t.replace(/-/g,"").replace(/:/g,""),a=a.replace(/-/g,"").replace(/:/g,"")),new Promise((function(e,n){if(i>-1){r[it][i].resolve=e,r[it][i].reject=n;var s=null;t&&a?"0.1"!==r[st]?0===r[xt]?s=_t.playbackCmd(r[it][i],t,a):1===r[xt]?s=lt.playbackCmd(t,a,r[it][i].playURL):-1===r[xt]&&(s=ht.playbackCmd(r[it][i],t,a)):s=ot.playbackCmd(t,a,r[it][i].iCurChannel,r[it][i].iCurStream):0===r[it][i].iCurChannel&&"0.1"===r[st]?s=ot.zeroPlayCmd(r[it][i].iCurChannel,r[it][i].iCurStream):"0.1"!==r[st]?0===r[xt]?s=_t.playCmd(r[it][i]):1===r[xt]?s=lt.playCmd(r[it][i].playURL):-1===r[xt]&&(s=ht.playCmd(r[it][i])):s=ot.playCmd(r[it][i].iCurChannel,r[it][i].iCurStream),r[it][i].socket.send(s),"0.1"===r[st]&&e()}else"0.1"===r[st]&&n()}))},t.singleFrame=function(){},t.setPlayRate=function(e,t){var a=this;return new Promise((function(r,i){for(var n=0,s=a[it].length;n<s;n++)if(a[it][n].id===e){if("0.1"===a[st]){var x=ot.playRateCmd(t);a[it][n].socket.send(x),r();break}a[it][n].resolve=r,a[it][n].reject=i;var o=lt.playRateCmd(t);a[it][n].socket.send(o)}}))},t.seek=function(e,t,a){var r=this;return new Promise((function(i,n){for(var s=0,x=r[it].length;s<x;s++)if(r[it][s].id===e){r[it][s].resolve=i,r[it][s].reject=n;var o=_t.seekCmd(t,a);r[it][s].socket.send(o)}}))},t.pause=function(e){var t=this;return new Promise((function(a,r){for(var i=0,n=t[it].length;i<n;i++)if(t[it][i].id===e){if("0.1"===t[st]){var s=ot.pauseCmd();t[it][i].socket.send(s),a();break}t[it][i].resolve=a,t[it][i].reject=r;var x=lt.pauseCmd();t[it][i].socket.send(x)}}))},t.transmission=function(e,t){var a=this;return new Promise((function(r,i){for(var n=0,s=a[it].length;n<s;n++)a[it][n].id===e&&(a[it][n].resolve=r,a[it][n].reject=i,a[it][n].socket.send(t))}))},t.resume=function(e){var t=this;return new Promise((function(a,r){for(var i=0,n=t[it].length;i<n;i++)if(t[it][i].id===e){if("0.1"===t[st]){var s=ot.resumeCmd();t[it][i].socket.send(s),a();break}t[it][i].resolve=a,t[it][i].reject=r;var x=lt.resumeCmd();t[it][i].socket.send(x)}}))},t.stop=function(e){var t=this;return new Promise((function(a,r){if(e){for(var i=-1,n=0,s=t[it].length;n<s;n++)if(t[it][n].id===e){i=n,t[it][n].resolve=a,t[it][n].socket.close(1e3,"CLOSE");break}-1===i&&r()}else r()}))},t.stopAll=function(){var e=this;return new Promise((function(t,a){for(var r=0,i=e[it].length;r<i;r++){var n,s,x;if([null==(n=window.WebSocket)?void 0:n.CLOSING,null==(s=window.WebSocket)?void 0:s.CLOSED].includes(null==(x=e[it][r].socket)?void 0:x.readyState))t();else try{var o,l;null==(l=e[it][r])||null==(o=l.socket)||o.close(1e3,"CLOSE")}catch(e){}}t()}))},e}(),ct=function(){function e(e){this._streamUUID=null,this._player=e,this._streamClient=new ft}var t=e.prototype;return t.openStream=function(e,t,a,r,i){var n=this;return this._streamClient.openStream(e,t,a,r,i).then((function(a){var r;n._streamUUID=a;try{n._player.logger.log("["+ee.SOCKET.openStream+"] url: ",e,"oParams: ",JSON.stringify(t))}catch(e){}return null==(r=n._player)||r.emit(""+ee.SOCKET.openStream,K(a)),a}))},t.startPlay=function(e){var t=this;return e=null!=e?e:this._streamUUID,this._streamClient.startPlay(e).then((function(){var a,r,i;null==(r=t._player)||null==(a=r.logger)||a.log("["+ee.SOCKET.startPlay+"] StreamUUID: ",e),null==(i=t._player)||i.emit(""+ee.SOCKET.startPlay,K(e))}))},t.setPlayRate=function(e,t){var a=this;return t=null!=t?t:this._streamUUID,this._streamClient.setPlayRate(t,e).then((function(){var r,i,n;null==(i=a._player)||null==(r=i.logger)||r.log("["+ee.SOCKET.setPlayRate+"] StreamUUID: ",t," rate: ",e),null==(n=a._player)||n.emit(""+ee.SOCKET.startPlay,K({id:t,rate:e}))}))},t.seek=function(e,t,a){var r=this;return a=null!=a?a:this._streamUUID,this._streamClient.seek(a,e,t).then((function(){var i;r._player.logger.log("["+ee.SOCKET.seek+"] StreamUUID: ",a," startTime: ",e," stopTime:",t),null==(i=r._player)||i.emit(""+ee.SOCKET.seek,K({id:a,startTime:e,stopTime:t}))}))},t.stopAll=function(){var e=this;return this._streamClient.stopAll().then((function(){e._player.logger.log("["+ee.SOCKET.stopAll+"]"),e._player.emit(ee.SOCKET.stopAll,K(void 0)),e._streamUUID=null}))},t.destroy=function(){var e=this;this.stopAll().then((function(){e._streamUUID=null,e._streamClient=null}))},e}();function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function dt(){return dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},dt.apply(this,arguments)}function pt(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(a)return(a=a.call(e)).next.bind(a);if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return ut(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ut(e,t):void 0}}(e))||t){a&&(e=a);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var mt=768,St={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}},Rt=function(){function e(e){this._canvasFECSubPort=new Map,this._correctType=null,this._player=e,this.init()}var t=e.prototype;return t._supportFEC=function(){return this._player._decoderStatus.bSupHardOrSoft},t.init=function(){var e=this;this._player.logger.log("FECSplitIds.init"),this._player.on("JSPlayM4_Play_Before",(function(){e._player.logger.log("JSPlayM4_Play_Before event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_FEC_SetCanvasID(e._FECSplitIds)})),this._player.on("JSPlayM4_Play_After",(function(){e._player.logger.log("JSPlayM4_Play_After event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._canvasFECSubPort.set(e._player._playerWindow.canvasId,dt({},St))})),this._player.on("PlayM4_openStream",(function(){e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_SetDecodeEngine(0)})),this._player.on("JSPlayM4_Stop",(function(){e._closeFECAllSubWnd()})),this._player.on(ee.API.destroy,(function(){e._closeFECAllSubWnd()})),this._player.logger.log("FECCorrect init")},t.setFECCorrectType=function(e,t){var a=this;return this._supportFEC()?(this._FECSplitIds=t,this._correctType=e,new Promise((function(r,i){var n=a._createSplitCanvas(e,t),s=n.find((function(e){return-1===e.code}));a._player.emit("FECCorrect.setFECCorrectType",K({type:e,ids:t})),s||0===n.length?i(n):r(n)}))):Promise.reject()},t.setFEC2DParam=function(e,t){if(this._supportFEC())return this._player.emit("FECCorrect.setFEC2DParam",K({port:e,param2d:t})),this._player.wasmplayer.JSPlayM4_FEC_SetParam(e,t)},t.setFEC3DViewParam=function(e){if(!this._supportFEC())return Promise.reject(!1);var t=this._player.wasmplayer;if(this._FECSplitIds&&this._canvasFECSubPort&&this._correctType){var a=t.JSPlayM4_FEC_SetViewParam(e.port,e.upDateType,e.fValue);return this._player.emit("FECCorrect.setFEC3DViewParam",K({param:e})),1===a?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)},t.get3DViewParam=function(e){var t=this;if(!this._supportFEC())return Promise.reject(!1);var a=this._player.wasmplayer;return new Promise((function(r,i){if(t._FECSplitIds&&t._canvasFECSubPort&&t._correctType&&1!==a.JSPlayM4_FEC_GetViewParam(e.port,e.upDateType,(function(a){t._player.emit("FECCorrect.get3DViewParam",K({param:e})),r(a)})))return i(!1);return i(void 0)}))},t.getFECSubPortMap=function(){var e=this._canvasFECSubPort;return this._player.emit("FECCorrect.getFECSubPortMap",K(e)),e},t._createSplitCanvas=function(e,t){var a=this._player._playerWindow.canvasId,r=(t=a+t?","+this._FECSplitIds:"")?t.split(","):[],i=this._player.wasmplayer,n=[],s=this;if(e.correctList&&e.correctList.length>0){for(var x=0;x<e.correctList.length;x++)if(0!==x||!e.correctList[x].hidden)if(0!==x){var o=document.getElementById(r[x]);if(!r[x]||!o||"CANVAS"!==o.nodeName)return this._player.logger.error("Canvas element is null"),[];var l=i.JSPlayM4_FEC_GetPort(e.place,e.correctList[x].correctType),_=i.JSPlayM4_FEC_Enable(l),h=i.JSPlayM4_FEC_SetWnd(l,r[x]),f={upDateType:this._matchUpDateType(e.correctList[x].correctType),fValue:0,fPTZParam:{fPTZPositionX:e.correctList[x].x||0,fPTZPositionY:e.correctList[x].y||0},fPTZZoom:1e-5};this.setFEC2DParam(l,f),0===_||0===h?n.push({code:-1,msg:"失败",port:l,id:r[x]}):(n.push({code:0,msg:"成功",port:l,id:r[x]}),this._canvasFECSubPort.set(r[x],dt({},St,{port:l,param2d:f,startPTZPosition:{x:f.fPTZParam.fPTZPositionX,y:f.fPTZParam.fPTZPositionY}})),o.setAttribute("data-port",l+""),this._spliceCanvasMouseEvents(r[x],e.correctList[x]))}else c(e.correctList[0])}else c(e);function c(t){var r={upDateType:s._matchUpDateType(t.correctType),fValue:0,fPTZParam:{fPTZPositionX:t.x||0,fPTZPositionY:t.y||0},fPTZZoom:1e-5},x=s._canvasFECSubPort.get(a).port;if(void 0===x)return n;1===i.JSPlayM4_FEC_ResetCorrectType(x,e.place,t.correctType)?(n.push({code:0,msg:"成功",port:x,id:a}),t.correctType<=mt?s.setFEC2DParam(x,r):t.viewParam&&setTimeout((function(){"number"==typeof t.viewParam.x&&"number"==typeof t.viewParam.y&&(i.JSPlayM4_FEC_SetViewParam(x,2,t.viewParam.x),i.JSPlayM4_FEC_SetViewParam(x,1,t.viewParam.y)),"number"==typeof t.viewParam.zoom&&i.JSPlayM4_FEC_SetViewParam(x,3,t.viewParam.zoom)}),200),s._canvasFECSubPort.set(a,dt({},St,{port:x,param2d:r,startPTZPosition:{x:r.fPTZParam.fPTZPositionX,y:r.fPTZParam.fPTZPositionY}})),s._spliceCanvasMouseEvents(a,t)):n.push({code:-1,msg:"失败",port:x,id:a})}return n},t._matchUpDateType=function(e){switch(e){case mt:return 4;case 256:return 8}return 2},t._spliceCanvasMouseEvents=function(e,t){if(void 0!==e){var a=document.getElementById(e);if(null!==a){var r=this._player.wasmplayer,i=a.getAttribute("id"),n=this._canvasFECSubPort.get(i);if(void 0!==n.port){var s=a.width,x=a.height,o=function(e){};a.addEventListener("mousedown",(function(e){n.start.x=e.pageX,n.start.y=e.pageY,n.lastCorrdsY=e.pageY,o=function(e){!function(e){var a=[e.clientX,e.clientY];n.diff.y=a[1]-n.start.y;var i=(n.total.y+n.diff.y)/x*2*Math.PI,o=(a[1]-n.lastCorrdsY)/(2*x),l=Math.atan2(n.startPTZPosition.y-.5,n.startPTZPosition.x-.5),_=n.startPTZPosition.x+o*Math.cos(l),h=n.startPTZPosition.y+o*Math.sin(l);n.diff.x=a[0]-n.start.x;var f=(n.total.x+n.diff.x)/s*2*Math.PI,c=Math.sqrt(Math.pow(_-.5,2)+Math.pow(h-.5,2)),u=-f,d=.5+c*Math.cos(u),p=.5+c*Math.sin(u);if(t.correctType<=mt){switch(t.correctType){case mt:case 512:n.param2d.upDateType=4;break;case 256:if(n.param2d.upDateType=8,Math.sqrt(Math.pow(d-.5,2)+Math.pow(p-.5,2))>.4)return}n.param2d.fValue=f,n.param2d.fPTZParam.fPTZPositionX=d,n.param2d.fPTZParam.fPTZPositionY=p,r.JSPlayM4_FEC_SetParam(n.port,n.param2d)}else 1536===t.correctType&&(r.JSPlayM4_FEC_SetViewParam(n.port,2,f),r.JSPlayM4_FEC_SetViewParam(n.port,1,i))}(e)},a.addEventListener("mousemove",o)}));var l=function(){null!==o&&(a.removeEventListener("mousemove",o),o=null,n.total.x+=n.diff.x,n.total.y+=n.diff.y)};a.addEventListener("mouseup",l),a.addEventListener("mouseleave",l),a.addEventListener("mouseout",l)}}}},t._closeFECAllSubWnd=function(){if(this._FECSplitIds&&this._canvasFECSubPort&&this._supportFEC())for(var e,t=pt(this._FECSplitIds.split(","));!(e=t()).done;){var a=e.value;if(a){var r=this._canvasFECSubPort.get(a);if(void 0===r||void 0===r.port)continue;this._canvasFECSubPort.delete(a);var i=this._player.wasmplayer;i.JSPlayM4_FEC_Disable(r.port,!0),i.JSPlayM4_FEC_DelPort(r.port)}}},e}(),Pt={exports:{}};!function(e,t){function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}!function(a,i){var n="function",s="undefined",x="object",o="string",l="major",_="model",h="name",f="type",c="vendor",u="version",d="architecture",p="console",m="mobile",S="tablet",R="smarttv",P="wearable",b="embedded",y="Amazon",E="Apple",g="ASUS",F="BlackBerry",v="Browser",C="Chrome",T="Firefox",D="Google",A="Huawei",I="LG",M="Microsoft",L="Motorola",w="Opera",O="Samsung",B="Sharp",k="Sony",N="Xiaomi",V="Zebra",U="Facebook",H="Chromium OS",W="Mac OS",Y=function(e){for(var t={},a=0;a<e.length;a++)t[e[a].toUpperCase()]=e[a];return t},G=function(e,t){return(void 0===e?"undefined":r(e))===o&&-1!==X(t).indexOf(X(e))},X=function(e){return e.toLowerCase()},J=function(e,t){if((void 0===e?"undefined":r(e))===o)return e=e.replace(/^\s\s*/,""),(void 0===t?"undefined":r(t))===s?e:e.substring(0,500)},Z=function(e,t){for(var a,s,o,l,_,h,f=0;f<t.length&&!_;){var c=t[f],u=t[f+1];for(a=s=0;a<c.length&&!_&&c[a];)if(_=c[a++].exec(e))for(o=0;o<u.length;o++)h=_[++s],(void 0===(l=u[o])?"undefined":r(l))===x&&l.length>0?2===l.length?r(l[1])==n?this[l[0]]=l[1].call(this,h):this[l[0]]=l[1]:3===l.length?r(l[1])!==n||l[1].exec&&l[1].test?this[l[0]]=h?h.replace(l[1],l[2]):i:this[l[0]]=h?l[1].call(this,h,l[2]):i:4===l.length&&(this[l[0]]=h?l[3].call(this,h.replace(l[1],l[2])):i):this[l]=h||i;f+=2}},j=function(e,t){for(var a in t)if(r(t[a])===x&&t[a].length>0){for(var n=0;n<t[a].length;n++)if(G(t[a][n],e))return"?"===a?i:a}else if(G(t[a],e))return"?"===a?i:a;return e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,u],[/opios[\/ ]+([\w\.]+)/i],[u,[h,w+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[h,w]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[u,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[h,"UC"+v]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[u,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[u,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[u,[h,"Smart Lenovo "+v]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+v],u],[/\bfocus\/([\w\.]+)/i],[u,[h,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[h,w+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[h,w+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[h,"MIUI "+v]],[/fxios\/([-\w\.]+)/i],[u,[h,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+v]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+v],u],[/samsungbrowser\/([\w\.]+)/i],[u,[h,O+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],u],[/metasr[\/ ]?([\d\.]+)/i],[u,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,u],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,U],u],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[u,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[h,C+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,C+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[h,"Android "+v]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[u,j,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[h,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,u],[/(cobalt)\/([\w\.]+)/i],[h,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,X]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,"",X]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,X]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[_,[c,O],[f,S]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[_,[c,O],[f,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[_,[c,E],[f,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_,[c,E],[f,S]],[/(macintosh);/i],[_,[c,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[_,[c,B],[f,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[_,[c,A],[f,S]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[_,[c,A],[f,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[_,/_/g," "],[c,N],[f,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[_,/_/g," "],[c,N],[f,S]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[_,[c,"OPPO"],[f,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[_,[c,"Vivo"],[f,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[_,[c,"Realme"],[f,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[_,[c,L],[f,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[_,[c,L],[f,S]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[_,[c,I],[f,S]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[_,[c,I],[f,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[_,[c,"Lenovo"],[f,S]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[_,/_/g," "],[c,"Nokia"],[f,m]],[/(pixel c)\b/i],[_,[c,D],[f,S]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[_,[c,D],[f,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_,[c,k],[f,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[_,"Xperia Tablet"],[c,k],[f,S]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[_,[c,"OnePlus"],[f,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[_,[c,y],[f,S]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[_,/(.+)/g,"Fire Phone $1"],[c,y],[f,m]],[/(playbook);[-\w\),; ]+(rim)/i],[_,c,[f,S]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[_,[c,F],[f,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[_,[c,g],[f,S]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[_,[c,g],[f,m]],[/(nexus 9)/i],[_,[c,"HTC"],[f,S]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[c,[_,/_/g," "],[f,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[_,[c,"Acer"],[f,S]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[_,[c,"Meizu"],[f,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[_,[c,"Ulefone"],[f,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[c,_,[f,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[c,_,[f,S]],[/(surface duo)/i],[_,[c,M],[f,S]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[_,[c,"Fairphone"],[f,m]],[/(u304aa)/i],[_,[c,"AT&T"],[f,m]],[/\bsie-(\w*)/i],[_,[c,"Siemens"],[f,m]],[/\b(rct\w+) b/i],[_,[c,"RCA"],[f,S]],[/\b(venue[\d ]{2,7}) b/i],[_,[c,"Dell"],[f,S]],[/\b(q(?:mv|ta)\w+) b/i],[_,[c,"Verizon"],[f,S]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[_,[c,"Barnes & Noble"],[f,S]],[/\b(tm\d{3}\w+) b/i],[_,[c,"NuVision"],[f,S]],[/\b(k88) b/i],[_,[c,"ZTE"],[f,S]],[/\b(nx\d{3}j) b/i],[_,[c,"ZTE"],[f,m]],[/\b(gen\d{3}) b.+49h/i],[_,[c,"Swiss"],[f,m]],[/\b(zur\d{3}) b/i],[_,[c,"Swiss"],[f,S]],[/\b((zeki)?tb.*\b) b/i],[_,[c,"Zeki"],[f,S]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[c,"Dragon Touch"],_,[f,S]],[/\b(ns-?\w{0,9}) b/i],[_,[c,"Insignia"],[f,S]],[/\b((nxa|next)-?\w{0,9}) b/i],[_,[c,"NextBook"],[f,S]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[c,"Voice"],_,[f,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[c,"LvTel"],_,[f,m]],[/\b(ph-1) /i],[_,[c,"Essential"],[f,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[_,[c,"Envizen"],[f,S]],[/\b(trio[-\w\. ]+) b/i],[_,[c,"MachSpeed"],[f,S]],[/\btu_(1491) b/i],[_,[c,"Rotor"],[f,S]],[/(shield[\w ]+) b/i],[_,[c,"Nvidia"],[f,S]],[/(sprint) (\w+)/i],[c,_,[f,m]],[/(kin\.[onetw]{3})/i],[[_,/\./g," "],[c,M],[f,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_,[c,V],[f,S]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[_,[c,V],[f,m]],[/smart-tv.+(samsung)/i],[c,[f,R]],[/hbbtv.+maple;(\d+)/i],[[_,/^/,"SmartTV"],[c,O],[f,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[c,I],[f,R]],[/(apple) ?tv/i],[c,[_,E+" TV"],[f,R]],[/crkey/i],[[_,C+"cast"],[c,D],[f,R]],[/droid.+aft(\w+)( bui|\))/i],[_,[c,y],[f,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[_,[c,B],[f,R]],[/(bravia[\w ]+)( bui|\))/i],[_,[c,k],[f,R]],[/(mitv-\w{5}) bui/i],[_,[c,N],[f,R]],[/Hbbtv.*(technisat) (.*);/i],[c,_,[f,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[c,J],[_,J],[f,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[c,_,[f,p]],[/droid.+; (shield) bui/i],[_,[c,"Nvidia"],[f,p]],[/(playstation [345portablevi]+)/i],[_,[c,k],[f,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[_,[c,M],[f,p]],[/((pebble))app/i],[c,_,[f,P]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[_,[c,E],[f,P]],[/droid.+; (glass) \d/i],[_,[c,D],[f,P]],[/droid.+; (wt63?0{2,3})\)/i],[_,[c,V],[f,P]],[/(quest( 2| pro)?)/i],[_,[c,U],[f,P]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[c,[f,b]],[/(aeobc)\b/i],[_,[c,y],[f,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[_,[f,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[_,[f,S]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,S]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,m]],[/(android[-\w\. ]{0,9});.+buil/i],[_,[c,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,u],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[u,j,z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,j,z],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,W],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,u],[/\(bb(10);/i],[u,[h,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[h,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[h,C+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,H],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,u],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,u]]},q=function(e,t){if((void 0===e?"undefined":r(e))===x&&(t=e,e=i),p=this,!(null!=(R=q)&&"undefined"!=typeof Symbol&&R[Symbol.hasInstance]?R[Symbol.hasInstance](p):p instanceof R))return new q(e,t).getResult();var p,R,P=(void 0===a?"undefined":r(a))!==s&&a.navigator?a.navigator:i,b=e||(P&&P.userAgent?P.userAgent:""),y=P&&P.userAgentData?P.userAgentData:i,E=t?function(e,t){var a={};for(var r in e)t[r]&&t[r].length%2==0?a[r]=t[r].concat(e[r]):a[r]=e[r];return a}(K,t):K,g=P&&P.userAgent==b;return this.getBrowser=function(){var e,t={};return t[h]=i,t[u]=i,Z.call(t,b,E.browser),t[l]=(void 0===(e=t[u])?"undefined":r(e))===o?e.replace(/[^\d\.]/g,"").split(".")[0]:i,g&&P&&P.brave&&r(P.brave.isBrave)==n&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[d]=i,Z.call(e,b,E.cpu),e},this.getDevice=function(){var e={};return e[c]=i,e[_]=i,e[f]=i,Z.call(e,b,E.device),g&&!e[f]&&y&&y.mobile&&(e[f]=m),g&&"Macintosh"==e[_]&&P&&r(P.standalone)!==s&&P.maxTouchPoints&&P.maxTouchPoints>2&&(e[_]="iPad",e[f]=S),e},this.getEngine=function(){var e={};return e[h]=i,e[u]=i,Z.call(e,b,E.engine),e},this.getOS=function(){var e={};return e[h]=i,e[u]=i,Z.call(e,b,E.os),g&&!e[h]&&y&&"Unknown"!=y.platform&&(e[h]=y.platform.replace(/chrome os/i,H).replace(/macos/i,W)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=(void 0===e?"undefined":r(e))===o&&e.length>500?J(e,500):e,this},this.setUA(b),this};q.VERSION="1.0.37",q.BROWSER=Y([h,u,l]),q.CPU=Y([d]),q.DEVICE=Y([_,c,f,p,m,R,S,P,b]),q.ENGINE=q.OS=Y([h,u]),r(t)!==s?(r(e)!==s&&e.exports&&(t=e.exports=q),t.UAParser=q):(void 0===a?"undefined":r(a))!==s&&(a.UAParser=q);var $=(void 0===a?"undefined":r(a))!==s&&(a.jQuery||a.Zepto);if($&&!$.ua){var Q=new q;$.ua=Q.getResult(),$.ua.get=function(){return Q.getUA()},$.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var a in t)$.ua[a]=t[a]}}}("object"===("undefined"==typeof window?"undefined":r(window))?window:a)}(Pt,Pt.exports);var bt,yt,Et=(null==(yt=new(r(Pt.exports)))||null==(bt=yt.getResult)?void 0:bt.call(yt))||{};function gt(e,t){return new Promise((function(a,r){e.service.getVideoByTime(t).then((function(r){e.emit(ee.NETWORK.videoFragmentFiles,K(r.data||[],"根据时间获取存储文件信息",t.recType+"")),a(r)})).catch((function(t){e.emit(ee.NETWORK.error.error,K(t)),e.emit(ee.NETWORK.error.videoFragmentFiles,K(t)),r(t)}))}))}function Ft(e,t){if(e._options=u.all([{},W,e._options||{},t],{clone:!1}),!e._options.id)throw new Error("id is required");if(!document.getElementById(e._options.id))throw new Error("#"+e._options.id+" node does not exist");if(e.pluginManager||(e.pluginManager=new j(e)),"string"!=typeof e._options.id)throw new Error("id is required and only support string");if(e.$container=e._options.container||document.getElementById(e._options.id),e._options.width){var a="";/\d/.test(e._options.width+"")?a+=";width: "+e._options.width+"px;":a+=";width: "+e._options.width+";",e.$container&&(e.$container.style.cssText+=a)}if(e._options.height){var r="";/\d/.test(e._options.height+"")?r+=";height: "+e._options.height+"px;":r+=";height: "+e._options.height+";",e.$container&&(e.$container.style.cssText+=r)}if(e.$container.style.cssText+=";position: relative;",e._width=e.$container.clientWidth,e._height=e.$container.clientHeight,e._oStreamClient||(e._oStreamClient=new ct(e)),e.logger||(e.logger=R(e._options.logger)),e.logger.log("[version] ",Wa.version),e.logger.log("[Browser Info] ",JSON.stringify(Et)),e.logger.log("[options] ",JSON.stringify(e._options)),e.i18n||(e.i18n=new C({en:V,zh:U})),e.fECCorrect||(e.fECCorrect=new Rt(e)),e._options.accessToken&&H(e._options.url)){var i,n,s,x=null==(i=e.urlInfo)?void 0:i.deviceSerial;if(e.urlInfo=E(e._options.url),!e.urlInfo.deviceSerial||!e._options.accessToken)throw new Error("deviceSerial is required!");e.service=new N({deviceSerial:e.urlInfo.deviceSerial,accessToken:e._options.accessToken,domain:null==(s=e._options)||null==(n=s.env)?void 0:n.domain,extraParams:e._options.extraParams}),x!==e.urlInfo.deviceSerial&&(function(e){e.service.getDeviceCapacity().then((function(t){200==+t.code?(e.deviceCapacity=t.data,e.emit(ee.NETWORK.deviceCapacity,K(t.data))):e.logger.error("getDeviceCapacity error: ",t)})).catch((function(t){e.emit(ee.NETWORK.error.error,K(t)),e.emit(ee.NETWORK.error.deviceCapacity,K(t)),e.logger.error("getDeviceCapacity error: ",t)}))}(e),function(e){e.emit(ee.NETWORK.deviceInfo,K({})),e.service.getDeviceInfo().then((function(t){200==+t.code?(e.deviceInfo=t.data,e.emit(ee.NETWORK.deviceInfo,K(t.data))):e.logger.error("deviceInfo error: ",t)})).catch((function(t){e.emit(ee.NETWORK.error.error,K(t)),e.emit(ee.NETWORK.error.deviceInfo,K(t)),e.logger.error("deviceInfo error: ",t)}))}(e)),e&&x&&(e.logger.log("play url change "+e._options.url),e.emit(ee.urlChange,K(e._options.url)))}}var vt={0:void 0,1:"H264",2:"MPEG2",3:"MPEG4",4:"MotionJpeg",5:"H265",256:"H264"},Ct={0:void 0,4096:"ADPCM",8192:"MPEG",8193:"AAC",8194:"AACLD",12290:"OPUS",28944:"G711U",28945:"G711A",29217:"G722.1",29233:"G723.1",29280:"G726U",29281:"G726A",29328:"G729"},Tt={dpr:1},Dt=function(){function e(e){this._options=u(Tt,e,{clone:!1}),this._$container=e.container,this.dpr=this._options.dpr||1,this._player=this._options.player,this._canvasWidth=Math.floor(this._$container.clientWidth),this._canvasHeight=Math.floor(this._$container.clientHeight)}var t=e.prototype;return t._render=function(){var e;this._removeCanvas(),this.canvasId=this._options.id+"-player",this.$canvas=document.createElement("canvas"),this.$canvas.classList.add("ezplayer-canvas"),this.$canvas.style.cssText+="width: 100%; height: 100%; pointer-events: none; user-select: none;",this.$canvas.setAttribute("id",this.canvasId),this.$canvas.setAttribute("width",this._canvasWidth*this.dpr+"px"),this.$canvas.setAttribute("height",this._canvasHeight*this.dpr+"px"),null==(e=this._$container)||e.appendChild(this.$canvas)},t.hide=function(){var e,t=null==(e=this._$container)?void 0:e.querySelector("#"+this.canvasId);t&&(t.style.display="none")},t.destroy=function(){this._removeCanvas(),this.width=0,this.height=0},t._removeCanvas=function(){var e=this._$container.querySelector("#"+this.canvasId);e&&(e.remove(),e=null,this.$canvas.remove(),this.$canvas=null)},t.resize=function(e,t){var a=this._$container.querySelector("#"+this.canvasId);if(a&&(this._canvasWidth!==e||this._canvasHeight!==t)){var r,i,n,s;this._canvasWidth=e,this._canvasHeight=t;try{a.width=this._canvasWidth*this.dpr,a.height=this._canvasHeight*this.dpr}catch(e){}if(null==(r=this._player)?void 0:r.wasmplayer)null==(s=this._player)||null==(n=s.wasmplayer)||null==(i=n.JSPlayM4_SetCanvasSize)||i.call(n,this._canvasWidth*this.dpr,this._canvasHeight*this.dpr)}},t.reRenderCanvas=function(e){e&&this._render()},e}(),At={exports:{}};!function(e,t){function a(e,t,a,r,i,n,s){try{var x=e[n](s),o=x.value}catch(e){return void a(e)}x.done?t(o):Promise.resolve(o).then(r,i)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var s=e.apply(t,r);function x(e){a(s,i,n,x,o,"next",e)}function o(e){a(s,i,n,x,o,"throw",e)}x(void 0)}))}}function i(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function s(e,t){var a,r,i,n,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return n={next:x(0),throw:x(1),return:x(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function x(n){return function(x){return function(n){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,r&&(i=2&n[0]?r.return:n[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,n[1])).done)return i;switch(r=0,i&&(n=[2&n[0],i.value]),n[0]){case 0:case 1:i=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){s.label=n[1];break}if(6===n[0]&&s.label<i[1]){s.label=i[1],i=n;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(n);break}i[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{a=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,x])}}}!function(a,r){if("object"==n(t)&&"object"==n(e))e.exports=r();else{var i=r();for(var s in i)("object"==n(t)?t:a)[s]=i[s]}}(self,(function(){return function(){var e={477:function(e){e.exports=function(e,t,a,r){var i=self||window;try{try{var n;try{n=new i.Blob([e])}catch(t){(n=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),n=n.getBlob()}var s=i.URL||i.webkitURL,x=s.createObjectURL(n),o=new i[t](x,a);return s.revokeObjectURL(x),o}catch(r){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),a)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new i[t](r,a)}}},61:function(e,t,a){var r=a(698).default;function n(){e.exports=n=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},a=Object.prototype,s=a.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},o=x.iterator||"@@iterator",l=x.asyncIterator||"@@asyncIterator",_=x.toStringTag||"@@toStringTag";function h(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,a){return e[t]=a}}function f(e,t,a,r){var n,s,x,o,l=t&&i(t.prototype,d)?t:d,_=Object.create(l.prototype),h=new C(r||[]);return _._invoke=(n=e,s=a,x=h,o="suspendedStart",function(e,t){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===e)throw t;return{value:void 0,done:!0}}for(x.method=e,x.arg=t;;){var a=x.delegate;if(a){var r=g(a,x);if(r){if(r===u)continue;return r}}if("next"===x.method)x.sent=x._sent=x.arg;else if("throw"===x.method){if("suspendedStart"===o)throw o="completed",x.arg;x.dispatchException(x.arg)}else"return"===x.method&&x.abrupt("return",x.arg);o="executing";var i=c(n,s,x);if("normal"===i.type){if(o=x.done?"completed":"suspendedYield",i.arg===u)continue;return{value:i.arg,done:x.done}}"throw"===i.type&&(o="completed",x.method="throw",x.arg=i.arg)}}),_}function c(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var u={};function d(){}function p(){}function m(){}var S={};h(S,o,(function(){return this}));var R=Object.getPrototypeOf,P=R&&R(R(T([])));P&&P!==a&&s.call(P,o)&&(S=P);var b=m.prototype=d.prototype=Object.create(S);function y(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function a(i,n,x,o){var l=c(e[i],e,n);if("throw"!==l.type){var _=l.arg,h=_.value;return h&&"object"==r(h)&&s.call(h,"__await")?t.resolve(h.__await).then((function(e){a("next",e,x,o)}),(function(e){a("throw",e,x,o)})):t.resolve(h).then((function(e){_.value=e,x(_)}),(function(e){return a("throw",e,x,o)}))}o(l.arg)}var i;this._invoke=function(e,r){function n(){return new t((function(t,i){a(e,r,t,i)}))}return i=i?i.then(n,n):n()}}function g(e,t){var a=e.iterator[t.method];if(void 0===a){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,g(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=c(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function v(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function T(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(s.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,h(b,"constructor",m),h(m,"constructor",p),p.displayName=h(m,_,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,h(e,_,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},y(E.prototype),h(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,a,r,i,n){void 0===n&&(n=Promise);var s=new E(f(e,a,r,i),n);return t.isGeneratorFunction(a)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},y(b),h(b,_,"Generator"),h(b,o,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var a in e)t.push(a);return t.reverse(),function a(){for(;t.length;){var r=t.pop();if(r in e)return a.value=r,a.done=!1,a}return a.done=!0,a}},t.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(v),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(a,r){return n.type="throw",n.arg=e,t.next=a,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],n=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var x=s.call(i,"catchLoc"),o=s.call(i,"finallyLoc");if(x&&o){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(x){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!o)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var n=i?i.completion:{};return n.type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),v(a),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var r=a.completion;if("throw"===r.type){var i=r.arg;v(a)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,a){return this.delegate={iterator:T(e),resultName:t,nextLoc:a},"next"===this.method&&(this.arg=void 0),u}},t}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(a){return e.exports=t="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(a)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:function(e,t,a){var r=a(61)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var x={};return function(){var e=function(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")},t=function(e,t,a){return t&&function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e},o=function(e,t,a,r,i,n,s){try{var x=e[n](s),o=x.value}catch(e){return void a(e)}x.done?t(o):Promise.resolve(o).then(r,i)},l=function(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var n=e.apply(t,a);function s(e){o(n,r,i,s,x,"next",e)}function x(e){o(n,r,i,s,x,"throw",e)}s(void 0)}))}},_=function(){return oe()("((()=>{var _0x213829={0x3d:(_0x215012,_0x45e3d6,_0x22a923)=>{var _0x1b89c9=_0x22a923(0x2ba)['default'];function _0x5cda59(){'use strict';_0x215012['exports']=_0x5cda59=function(){return _0x366441;},_0x215012['exports']['__esModule']=!0x0,_0x215012['exports']['default']=_0x215012['exports'];var _0x366441={},_0x45d692=Object['prototype'],_0xe02211=_0x45d692['hasOwnProperty'],_0x194eca='function'==typeof Symbol?Symbol:{},_0x52135c=_0x194eca['iterator']||'@@iterator',_0x297dd6=_0x194eca['asyncIterator']||'@@asyncIterator',_0xffa9d8=_0x194eca['toStringTag']||'@@toStringTag';function _0x2fe4dd(_0xc96c49,_0x1b19d4,_0x866a9d){return Object['defineProperty'](_0xc96c49,_0x1b19d4,{'value':_0x866a9d,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}),_0xc96c49[_0x1b19d4];}try{_0x2fe4dd({},'');}catch(_0x583586){_0x2fe4dd=function(_0x429a34,_0x551a61,_0x191875){return _0x429a34[_0x551a61]=_0x191875;};}function _0x2702ee(_0x9fd45f,_0x212242,_0x36d587,_0x15113d){var _0x10c38a=_0x212242&&_0x212242['prototype']instanceof _0x2b38ad?_0x212242:_0x2b38ad,_0x39e980=Object['create'](_0x10c38a['prototype']),_0x1ccd47=new _0x45852a(_0x15113d||[]);return _0x39e980['_invoke']=function(_0x5455db,_0x1fce1b,_0x5ae786){var _0x2410ff='suspendedStart';return function(_0x4c30c1,_0x4d2d43){if('executing'===_0x2410ff)throw new Error('Generator\\x20is\\x20already\\x20running');if('completed'===_0x2410ff){if('throw'===_0x4c30c1)throw _0x4d2d43;return _0x2efa68();}for(_0x5ae786['method']=_0x4c30c1,_0x5ae786['arg']=_0x4d2d43;;){var _0x26cebc=_0x5ae786['delegate'];if(_0x26cebc){var _0x19b160=_0x5a74f6(_0x26cebc,_0x5ae786);if(_0x19b160){if(_0x19b160===_0x1b16cf)continue;return _0x19b160;}}if('next'===_0x5ae786['method'])_0x5ae786['sent']=_0x5ae786['_sent']=_0x5ae786['arg'];else{if('throw'===_0x5ae786['method']){if('suspendedStart'===_0x2410ff)throw _0x2410ff='completed',_0x5ae786['arg'];_0x5ae786['dispatchException'](_0x5ae786['arg']);}else'return'===_0x5ae786['method']&&_0x5ae786['abrupt']('return',_0x5ae786['arg']);}_0x2410ff='executing';var _0x4e1d81=_0x536364(_0x5455db,_0x1fce1b,_0x5ae786);if('normal'===_0x4e1d81['type']){if(_0x2410ff=_0x5ae786['done']?'completed':'suspendedYield',_0x4e1d81['arg']===_0x1b16cf)continue;return{'value':_0x4e1d81['arg'],'done':_0x5ae786['done']};}'throw'===_0x4e1d81['type']&&(_0x2410ff='completed',_0x5ae786['method']='throw',_0x5ae786['arg']=_0x4e1d81['arg']);}};}(_0x9fd45f,_0x36d587,_0x1ccd47),_0x39e980;}function _0x536364(_0x350ea9,_0x4ec124,_0x1847d4){try{return{'type':'normal','arg':_0x350ea9['call'](_0x4ec124,_0x1847d4)};}catch(_0xc47674){return{'type':'throw','arg':_0xc47674};}}_0x366441['wrap']=_0x2702ee;var _0x1b16cf={};function _0x2b38ad(){}function _0x44b8da(){}function _0xee7c9b(){}var _0xd5ef88={};_0x2fe4dd(_0xd5ef88,_0x52135c,function(){return this;});var _0x139f38=Object['getPrototypeOf'],_0x482462=_0x139f38&&_0x139f38(_0x139f38(_0x181220([])));_0x482462&&_0x482462!==_0x45d692&&_0xe02211['call'](_0x482462,_0x52135c)&&(_0xd5ef88=_0x482462);var _0x5e9c10=_0xee7c9b['prototype']=_0x2b38ad['prototype']=Object['create'](_0xd5ef88);function _0x497222(_0x4d928b){['next','throw','return']['forEach'](function(_0xf738d6){_0x2fe4dd(_0x4d928b,_0xf738d6,function(_0x4c8e47){return this['_invoke'](_0xf738d6,_0x4c8e47);});});}function _0x9c4bf6(_0x45b865,_0x691183){function _0x2f196c(_0x1cb491,_0x280222,_0x24f265,_0x2024d5){var _0x51f327=_0x536364(_0x45b865[_0x1cb491],_0x45b865,_0x280222);if('throw'!==_0x51f327['type']){var _0x2f2b59=_0x51f327['arg'],_0x23c3bd=_0x2f2b59['value'];return _0x23c3bd&&'object'==_0x1b89c9(_0x23c3bd)&&_0xe02211['call'](_0x23c3bd,'__await')?_0x691183['resolve'](_0x23c3bd['__await'])['then'](function(_0x1529d8){_0x2f196c('next',_0x1529d8,_0x24f265,_0x2024d5);},function(_0x32f601){_0x2f196c('throw',_0x32f601,_0x24f265,_0x2024d5);}):_0x691183['resolve'](_0x23c3bd)['then'](function(_0x24a789){_0x2f2b59['value']=_0x24a789,_0x24f265(_0x2f2b59);},function(_0x27b6c3){return _0x2f196c('throw',_0x27b6c3,_0x24f265,_0x2024d5);});}_0x2024d5(_0x51f327['arg']);}var _0x2cd3aa;this['_invoke']=function(_0x692466,_0x1530e4){function _0x464237(){return new _0x691183(function(_0x1bdc87,_0x37db35){_0x2f196c(_0x692466,_0x1530e4,_0x1bdc87,_0x37db35);});}return _0x2cd3aa=_0x2cd3aa?_0x2cd3aa['then'](_0x464237,_0x464237):_0x464237();};}function _0x5a74f6(_0xbfa682,_0x2dd743){var _0x405392=_0xbfa682['iterator'][_0x2dd743['method']];if(void 0x0===_0x405392){if(_0x2dd743['delegate']=null,'throw'===_0x2dd743['method']){if(_0xbfa682['iterator']['return']&&(_0x2dd743['method']='return',_0x2dd743['arg']=void 0x0,_0x5a74f6(_0xbfa682,_0x2dd743),'throw'===_0x2dd743['method']))return _0x1b16cf;_0x2dd743['method']='throw',_0x2dd743['arg']=new TypeError('The\\x20iterator\\x20does\\x20not\\x20provide\\x20a\\x20\\x27throw\\x27\\x20method');}return _0x1b16cf;}var _0x4ad83e=_0x536364(_0x405392,_0xbfa682['iterator'],_0x2dd743['arg']);if('throw'===_0x4ad83e['type'])return _0x2dd743['method']='throw',_0x2dd743['arg']=_0x4ad83e['arg'],_0x2dd743['delegate']=null,_0x1b16cf;var _0x12f4d0=_0x4ad83e['arg'];return _0x12f4d0?_0x12f4d0['done']?(_0x2dd743[_0xbfa682['resultName']]=_0x12f4d0['value'],_0x2dd743['next']=_0xbfa682['nextLoc'],'return'!==_0x2dd743['method']&&(_0x2dd743['method']='next',_0x2dd743['arg']=void 0x0),_0x2dd743['delegate']=null,_0x1b16cf):_0x12f4d0:(_0x2dd743['method']='throw',_0x2dd743['arg']=new TypeError('iterator\\x20result\\x20is\\x20not\\x20an\\x20object'),_0x2dd743['delegate']=null,_0x1b16cf);}function _0x49de50(_0x11bade){var _0x111760={'tryLoc':_0x11bade[0x0]};0x1 in _0x11bade&&(_0x111760['catchLoc']=_0x11bade[0x1]),0x2 in _0x11bade&&(_0x111760['finallyLoc']=_0x11bade[0x2],_0x111760['afterLoc']=_0x11bade[0x3]),this['tryEntries']['push'](_0x111760);}function _0x38d957(_0x241420){var _0x16917b=_0x241420['completion']||{};_0x16917b['type']='normal',delete _0x16917b['arg'],_0x241420['completion']=_0x16917b;}function _0x45852a(_0x3c9d7a){this['tryEntries']=[{'tryLoc':'root'}],_0x3c9d7a['forEach'](_0x49de50,this),this['reset'](!0x0);}function _0x181220(_0x1a0a09){if(_0x1a0a09){var _0x1ee369=_0x1a0a09[_0x52135c];if(_0x1ee369)return _0x1ee369['call'](_0x1a0a09);if('function'==typeof _0x1a0a09['next'])return _0x1a0a09;if(!isNaN(_0x1a0a09['length'])){var _0x5ad7c1=-0x1,_0x16ee86=function _0x373de2(){for(;++_0x5ad7c1<_0x1a0a09['length'];)if(_0xe02211['call'](_0x1a0a09,_0x5ad7c1))return _0x373de2['value']=_0x1a0a09[_0x5ad7c1],_0x373de2['done']=!0x1,_0x373de2;return _0x373de2['value']=void 0x0,_0x373de2['done']=!0x0,_0x373de2;};return _0x16ee86['next']=_0x16ee86;}}return{'next':_0x2efa68};}function _0x2efa68(){return{'value':void 0x0,'done':!0x0};}return _0x44b8da['prototype']=_0xee7c9b,_0x2fe4dd(_0x5e9c10,'constructor',_0xee7c9b),_0x2fe4dd(_0xee7c9b,'constructor',_0x44b8da),_0x44b8da['displayName']=_0x2fe4dd(_0xee7c9b,_0xffa9d8,'GeneratorFunction'),_0x366441['isGeneratorFunction']=function(_0x38f5dc){var _0x1a9847='function'==typeof _0x38f5dc&&_0x38f5dc['constructor'];return!!_0x1a9847&&(_0x1a9847===_0x44b8da||'GeneratorFunction'===(_0x1a9847['displayName']||_0x1a9847['name']));},_0x366441['mark']=function(_0x1d5755){return Object['setPrototypeOf']?Object['setPrototypeOf'](_0x1d5755,_0xee7c9b):(_0x1d5755['__proto__']=_0xee7c9b,_0x2fe4dd(_0x1d5755,_0xffa9d8,'GeneratorFunction')),_0x1d5755['prototype']=Object['create'](_0x5e9c10),_0x1d5755;},_0x366441['awrap']=function(_0x22d1de){return{'__await':_0x22d1de};},_0x497222(_0x9c4bf6['prototype']),_0x2fe4dd(_0x9c4bf6['prototype'],_0x297dd6,function(){return this;}),_0x366441['AsyncIterator']=_0x9c4bf6,_0x366441['async']=function(_0x6c603a,_0x831f0e,_0x4dc669,_0x333d3c,_0x28ca60){void 0x0===_0x28ca60&&(_0x28ca60=Promise);var _0xa99d88=new _0x9c4bf6(_0x2702ee(_0x6c603a,_0x831f0e,_0x4dc669,_0x333d3c),_0x28ca60);return _0x366441['isGeneratorFunction'](_0x831f0e)?_0xa99d88:_0xa99d88['next']()['then'](function(_0x1ff2ab){return _0x1ff2ab['done']?_0x1ff2ab['value']:_0xa99d88['next']();});},_0x497222(_0x5e9c10),_0x2fe4dd(_0x5e9c10,_0xffa9d8,'Generator'),_0x2fe4dd(_0x5e9c10,_0x52135c,function(){return this;}),_0x2fe4dd(_0x5e9c10,'toString',function(){return'[object\\x20Generator]';}),_0x366441['keys']=function(_0x18bd97){var _0x3a2db3=[];for(var _0x41f7fe in _0x18bd97)_0x3a2db3['push'](_0x41f7fe);return _0x3a2db3['reverse'](),function _0x271556(){for(;_0x3a2db3['length'];){var _0x3e433f=_0x3a2db3['pop']();if(_0x3e433f in _0x18bd97)return _0x271556['value']=_0x3e433f,_0x271556['done']=!0x1,_0x271556;}return _0x271556['done']=!0x0,_0x271556;};},_0x366441['values']=_0x181220,_0x45852a['prototype']={'constructor':_0x45852a,'reset':function(_0x4130c0){if(this['prev']=0x0,this['next']=0x0,this['sent']=this['_sent']=void 0x0,this['done']=!0x1,this['delegate']=null,this['method']='next',this['arg']=void 0x0,this['tryEntries']['forEach'](_0x38d957),!_0x4130c0){for(var _0x5d7096 in this)'t'===_0x5d7096['charAt'](0x0)&&_0xe02211['call'](this,_0x5d7096)&&!isNaN(+_0x5d7096['slice'](0x1))&&(this[_0x5d7096]=void 0x0);}},'stop':function(){this['done']=!0x0;var _0x2acd2e=this['tryEntries'][0x0]['completion'];if('throw'===_0x2acd2e['type'])throw _0x2acd2e['arg'];return this['rval'];},'dispatchException':function(_0x25bbc0){if(this['done'])throw _0x25bbc0;var _0x1f4a39=this;function _0x43934e(_0x11b211,_0x43da6d){return _0x216fbf['type']='throw',_0x216fbf['arg']=_0x25bbc0,_0x1f4a39['next']=_0x11b211,_0x43da6d&&(_0x1f4a39['method']='next',_0x1f4a39['arg']=void 0x0),!!_0x43da6d;}for(var _0x291a8a=this['tryEntries']['length']-0x1;_0x291a8a>=0x0;--_0x291a8a){var _0x6a58da=this['tryEntries'][_0x291a8a],_0x216fbf=_0x6a58da['completion'];if('root'===_0x6a58da['tryLoc'])return _0x43934e('end');if(_0x6a58da['tryLoc']<=this['prev']){var _0x280650=_0xe02211['call'](_0x6a58da,'catchLoc'),_0x5eb111=_0xe02211['call'](_0x6a58da,'finallyLoc');if(_0x280650&&_0x5eb111){if(this['prev']<_0x6a58da['catchLoc'])return _0x43934e(_0x6a58da['catchLoc'],!0x0);if(this['prev']<_0x6a58da['finallyLoc'])return _0x43934e(_0x6a58da['finallyLoc']);}else{if(_0x280650){if(this['prev']<_0x6a58da['catchLoc'])return _0x43934e(_0x6a58da['catchLoc'],!0x0);}else{if(!_0x5eb111)throw new Error('try\\x20statement\\x20without\\x20catch\\x20or\\x20finally');if(this['prev']<_0x6a58da['finallyLoc'])return _0x43934e(_0x6a58da['finallyLoc']);}}}}},'abrupt':function(_0x4b0eea,_0x654f40){for(var _0x48b8c1=this['tryEntries']['length']-0x1;_0x48b8c1>=0x0;--_0x48b8c1){var _0x3e695f=this['tryEntries'][_0x48b8c1];if(_0x3e695f['tryLoc']<=this['prev']&&_0xe02211['call'](_0x3e695f,'finallyLoc')&&this['prev']<_0x3e695f['finallyLoc']){var _0x18d1da=_0x3e695f;break;}}_0x18d1da&&('break'===_0x4b0eea||'continue'===_0x4b0eea)&&_0x18d1da['tryLoc']<=_0x654f40&&_0x654f40<=_0x18d1da['finallyLoc']&&(_0x18d1da=null);var _0x28d4dd=_0x18d1da?_0x18d1da['completion']:{};return _0x28d4dd['type']=_0x4b0eea,_0x28d4dd['arg']=_0x654f40,_0x18d1da?(this['method']='next',this['next']=_0x18d1da['finallyLoc'],_0x1b16cf):this['complete'](_0x28d4dd);},'complete':function(_0xbc2124,_0xad4ff7){if('throw'===_0xbc2124['type'])throw _0xbc2124['arg'];return'break'===_0xbc2124['type']||'continue'===_0xbc2124['type']?this['next']=_0xbc2124['arg']:'return'===_0xbc2124['type']?(this['rval']=this['arg']=_0xbc2124['arg'],this['method']='return',this['next']='end'):'normal'===_0xbc2124['type']&&_0xad4ff7&&(this['next']=_0xad4ff7),_0x1b16cf;},'finish':function(_0x20a677){for(var _0x25eb89=this['tryEntries']['length']-0x1;_0x25eb89>=0x0;--_0x25eb89){var _0x3254c5=this['tryEntries'][_0x25eb89];if(_0x3254c5['finallyLoc']===_0x20a677)return this['complete'](_0x3254c5['completion'],_0x3254c5['afterLoc']),_0x38d957(_0x3254c5),_0x1b16cf;}},'catch':function(_0x5897da){for(var _0x13d3a9=this['tryEntries']['length']-0x1;_0x13d3a9>=0x0;--_0x13d3a9){var _0x11fdee=this['tryEntries'][_0x13d3a9];if(_0x11fdee['tryLoc']===_0x5897da){var _0x380614=_0x11fdee['completion'];if('throw'===_0x380614['type']){var _0x24b6e8=_0x380614['arg'];_0x38d957(_0x11fdee);}return _0x24b6e8;}}throw new Error('illegal\\x20catch\\x20attempt');},'delegateYield':function(_0x1fad8e,_0x1f8974,_0x341f69){return this['delegate']={'iterator':_0x181220(_0x1fad8e),'resultName':_0x1f8974,'nextLoc':_0x341f69},'next'===this['method']&&(this['arg']=void 0x0),_0x1b16cf;}},_0x366441;}_0x215012['exports']=_0x5cda59,_0x215012['exports']['__esModule']=!0x0,_0x215012['exports']['default']=_0x215012['exports'];},0x2ba:_0x47b69a=>{function _0x358f91(_0x31866f){return _0x47b69a['exports']=_0x358f91='function'==typeof Symbol&&'symbol'==typeof Symbol['iterator']?function(_0x4d5715){return typeof _0x4d5715;}:function(_0x542261){return _0x542261&&'function'==typeof Symbol&&_0x542261['constructor']===Symbol&&_0x542261!==Symbol['prototype']?'symbol':typeof _0x542261;},_0x47b69a['exports']['__esModule']=!0x0,_0x47b69a['exports']['default']=_0x47b69a['exports'],_0x358f91(_0x31866f);}_0x47b69a['exports']=_0x358f91,_0x47b69a['exports']['__esModule']=!0x0,_0x47b69a['exports']['default']=_0x47b69a['exports'];},0x2af:(_0x336a6d,_0x348e1b,_0x5c84ea)=>{var _0x1e36da=_0x5c84ea(0x3d)();_0x336a6d['exports']=_0x1e36da;try{regeneratorRuntime=_0x1e36da;}catch(_0x19d540){'object'==typeof globalThis?globalThis['regeneratorRuntime']=_0x1e36da:Function('r','regeneratorRuntime\\x20=\\x20r')(_0x1e36da);}}},_0x429f67={};function _0x1ec460(_0x85a7e1){var _0xc54cdc=_0x429f67[_0x85a7e1];if(void 0x0!==_0xc54cdc)return _0xc54cdc['exports'];var _0x53a793=_0x429f67[_0x85a7e1]={'exports':{}};return _0x213829[_0x85a7e1](_0x53a793,_0x53a793['exports'],_0x1ec460),_0x53a793['exports'];}_0x1ec460['n']=_0x3986a2=>{var _0xa17d5a=_0x3986a2&&_0x3986a2['__esModule']?()=>_0x3986a2['default']:()=>_0x3986a2;return _0x1ec460['d'](_0xa17d5a,{'a':_0xa17d5a}),_0xa17d5a;},_0x1ec460['d']=(_0x501d9e,_0x3e1252)=>{for(var _0x42bd89 in _0x3e1252)_0x1ec460['o'](_0x3e1252,_0x42bd89)&&!_0x1ec460['o'](_0x501d9e,_0x42bd89)&&Object['defineProperty'](_0x501d9e,_0x42bd89,{'enumerable':!0x0,'get':_0x3e1252[_0x42bd89]});},_0x1ec460['o']=(_0x3142a3,_0x3bd3c1)=>Object['prototype']['hasOwnProperty']['call'](_0x3142a3,_0x3bd3c1),((()=>{'use strict';function _0x18a458(_0x3725cd){return _0x18a458='function'==typeof Symbol&&'symbol'==typeof Symbol['iterator']?function(_0x128369){return typeof _0x128369;}:function(_0x30dcbc){return _0x30dcbc&&'function'==typeof Symbol&&_0x30dcbc['constructor']===Symbol&&_0x30dcbc!==Symbol['prototype']?'symbol':typeof _0x30dcbc;},_0x18a458(_0x3725cd);}function _0x234176(_0xacf0eb,_0xd6343e,_0x5f1fc5,_0x3a61e0,_0x2dd086,_0x449cd1,_0x57d4bf){try{var _0x2f6ade=_0xacf0eb[_0x449cd1](_0x57d4bf),_0x2234b5=_0x2f6ade['value'];}catch(_0x1198f6){return void _0x5f1fc5(_0x1198f6);}_0x2f6ade['done']?_0xd6343e(_0x2234b5):Promise['resolve'](_0x2234b5)['then'](_0x3a61e0,_0x2dd086);}function _0x43597e(_0x380bf7){return function(){var _0x262eb4=this,_0x110441=arguments;return new Promise(function(_0x43fa04,_0x397001){var _0x275a60=_0x380bf7['apply'](_0x262eb4,_0x110441);function _0x4eda28(_0x3e0379){_0x234176(_0x275a60,_0x43fa04,_0x397001,_0x4eda28,_0x47a53c,'next',_0x3e0379);}function _0x47a53c(_0x2fbab0){_0x234176(_0x275a60,_0x43fa04,_0x397001,_0x4eda28,_0x47a53c,'throw',_0x2fbab0);}_0x4eda28(void 0x0);});};}function _0x311c09(_0x33a8a1,_0x4de5cf){if(!(_0x33a8a1 instanceof _0x4de5cf))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0x189330(_0x3e8d08,_0x237758){for(var _0x22787a=0x0;_0x22787a<_0x237758['length'];_0x22787a++){var _0x179c80=_0x237758[_0x22787a];_0x179c80['enumerable']=_0x179c80['enumerable']||!0x1,_0x179c80['configurable']=!0x0,'value'in _0x179c80&&(_0x179c80['writable']=!0x0),Object['defineProperty'](_0x3e8d08,_0x179c80['key'],_0x179c80);}}function _0x50c85d(_0x49f3c3,_0x5b2c4f,_0x1cb81e){return _0x5b2c4f&&_0x189330(_0x49f3c3['prototype'],_0x5b2c4f),_0x1cb81e&&_0x189330(_0x49f3c3,_0x1cb81e),Object['defineProperty'](_0x49f3c3,'prototype',{'writable':!0x1}),_0x49f3c3;}var _0x545f95=_0x1ec460(0x2af),_0x33ed9d=_0x1ec460['n'](_0x545f95),_0x532c7f=0x501,_0x23abc0=0x502,_0x524588=0x505,_0x276ff7=0x507,_0x2c4e6b=0x508,_0x48536d=0x509,_0x41280d=0x512,_0x4e1d0a=0x516,_0x1237f0=0x1,_0x347826=0x2,_0x128d88=0x3,_0x21ccda=0x0,_0x10161a=0x100,_0x1ef416=0x200,_0x26d787=0x300,_0x5d8b15=0x400,_0x5c32d1=0x500,_0x5bd051=0x600,_0x285594=0x700,_0x313b18=0x800,_0x55119e=0x900,_0x2da057=0xa00,_0x5bc2b2=0x1,_0x44f236=0x2,_0x232e49=0x4,_0x44e7dd=0x8,_0x4f9b53=0x10,_0x3c4c48=0x20,_0x44b923=0x15000001,_0x3877da=0x1f000001,_0x1d0760=0x1f800000;function _0xa41c73(_0x1871bc,_0xdb79ec){(null==_0xdb79ec||_0xdb79ec>_0x1871bc['length'])&&(_0xdb79ec=_0x1871bc['length']);for(var _0x2797e0=0x0,_0x23ef91=new Array(_0xdb79ec);_0x2797e0<_0xdb79ec;_0x2797e0++)_0x23ef91[_0x2797e0]=_0x1871bc[_0x2797e0];return _0x23ef91;}function _0x595930(_0x1d2e53){return function(_0x46237e){if(Array['isArray'](_0x46237e))return _0xa41c73(_0x46237e);}(_0x1d2e53)||function(_0x53517c){if('undefined'!=typeof Symbol&&null!=_0x53517c[Symbol['iterator']]||null!=_0x53517c['@@iterator'])return Array['from'](_0x53517c);}(_0x1d2e53)||function(_0xf04487,_0x2aeca6){if(_0xf04487){if('string'==typeof _0xf04487)return _0xa41c73(_0xf04487,_0x2aeca6);var _0x46ba52=Object['prototype']['toString']['call'](_0xf04487)['slice'](0x8,-0x1);return'Object'===_0x46ba52&&_0xf04487['constructor']&&(_0x46ba52=_0xf04487['constructor']['name']),'Map'===_0x46ba52||'Set'===_0x46ba52?Array['from'](_0xf04487):'Arguments'===_0x46ba52||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](_0x46ba52)?_0xa41c73(_0xf04487,_0x2aeca6):void 0x0;}}(_0x1d2e53)||(function(){throw new TypeError('Invalid\\x20attempt\\x20to\\x20spread\\x20non-iterable\\x20instance.\\x0aIn\\x20order\\x20to\\x20be\\x20iterable,\\x20non-array\\x20objects\\x20must\\x20have\\x20a\\x20[Symbol.iterator]()\\x20method.');}());}var _0x2c1c22=(function(){function _0x38ec85(){_0x311c09(this,_0x38ec85),this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['preTimerStamp']=0x0;}return _0x50c85d(_0x38ec85,[{'key':'Init','value':function(){this['startTime']=this['GetCurTime']();}},{'key':'GetCurTime','value':function(){return this['curTime']=0x18*new Date()['getDate']()*0x3c*0x3c*0x3e8+0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds'](),this['curTime'];}},{'key':'GetTimerWalk','value':function(){return this['timeWalk']=this['GetCurTime']()-this['startTime'],this['timeWalk']<0x0&&(this['timeWalk']=0x0),this['timeWalk'];}},{'key':'timerReset','value':function(){this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['preTimerStamp']=0x0;}}]),_0x38ec85;}());function _0x198e9a(_0x194bb6,_0x3375e1){var _0x1ba59b='undefined'!=typeof Symbol&&_0x194bb6[Symbol['iterator']]||_0x194bb6['@@iterator'];if(!_0x1ba59b){if(Array['isArray'](_0x194bb6)||(_0x1ba59b=function(_0x263bae,_0x3e0374){if(!_0x263bae)return;if('string'==typeof _0x263bae)return _0x366a14(_0x263bae,_0x3e0374);var _0x5c8e90=Object['prototype']['toString']['call'](_0x263bae)['slice'](0x8,-0x1);'Object'===_0x5c8e90&&_0x263bae['constructor']&&(_0x5c8e90=_0x263bae['constructor']['name']);if('Map'===_0x5c8e90||'Set'===_0x5c8e90)return Array['from'](_0x263bae);if('Arguments'===_0x5c8e90||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](_0x5c8e90))return _0x366a14(_0x263bae,_0x3e0374);}(_0x194bb6))||_0x3375e1&&_0x194bb6&&'number'==typeof _0x194bb6['length']){_0x1ba59b&&(_0x194bb6=_0x1ba59b);var _0x2a5406=0x0,_0x4181b3=function(){};return{'s':_0x4181b3,'n':function(){return _0x2a5406>=_0x194bb6['length']?{'done':!0x0}:{'done':!0x1,'value':_0x194bb6[_0x2a5406++]};},'e':function(_0x20465c){throw _0x20465c;},'f':_0x4181b3};}throw new TypeError('Invalid\\x20attempt\\x20to\\x20iterate\\x20non-iterable\\x20instance.\\x0aIn\\x20order\\x20to\\x20be\\x20iterable,\\x20non-array\\x20objects\\x20must\\x20have\\x20a\\x20[Symbol.iterator]()\\x20method.');}var _0x3bfb1b,_0x5356f4=!0x0,_0x550896=!0x1;return{'s':function(){_0x1ba59b=_0x1ba59b['call'](_0x194bb6);},'n':function(){var _0x5a4204=_0x1ba59b['next']();return _0x5356f4=_0x5a4204['done'],_0x5a4204;},'e':function(_0xa47f0b){_0x550896=!0x0,_0x3bfb1b=_0xa47f0b;},'f':function(){try{_0x5356f4||null==_0x1ba59b['return']||_0x1ba59b['return']();}finally{if(_0x550896)throw _0x3bfb1b;}}};}function _0x366a14(_0x5b07ff,_0x98036c){(null==_0x98036c||_0x98036c>_0x5b07ff['length'])&&(_0x98036c=_0x5b07ff['length']);for(var _0xf82ab1=0x0,_0x4adfe6=new Array(_0x98036c);_0xf82ab1<_0x98036c;_0xf82ab1++)_0x4adfe6[_0xf82ab1]=_0x5b07ff[_0xf82ab1];return _0x4adfe6;}var _0xcec02a=(function(){function _0x164648(_0xf74783,_0x37b177,_0x126227,_0x644031){_0x311c09(this,_0x164648),this['width']=0x0,this['height']=0x0,this['decoderObj']=null,this['FirstFrame']=!0x0,this['ready_frames']=[],this['underflow']=!0x0,this['sab']=_0xf74783,this['frameRate']=0x1e,this['needSetPreSoft']=!0x1,this['decoderCurStatus']=0x2,this['decoderOutSuccess']=!0x1,this['decoderObjNeedReset']=!0x1,this['oVideoRenderHandle']=_0x37b177,this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['player']=null,null!=_0x126227&&(this['player']=_0x126227),this['curFrame']=null,this['printfFlag']=this['oVideoRenderHandle']['printfFlag'],this['nGetTotalFrameNum']=0x0,this['nAverageDecodeTime']=0x0,this['oDecodeTimer']=null,this['runtimeInfoCBFun']=null,this['pstRuntimeInfo']={'nRunTimeModule':0x0,'nStrVersion':0x0,'nFrameTimeStamp':0x0,'nFrameNum':0x0,'nErrorCode':0x0,'nInputDataInterval':0x0,'nFrameNumInterval':0x0,'nAverageDecodeTime':0x0,'nSystemFormat':0x0,'nDetectRes':0x0,'nMp4FileTime':0x0,'nMp4TotalFrameNum':0x0,'AbsTimeYear':0x0,'AbsTimeMonth':0x0,'AbsTimeDay':0x0,'AbsTimeHour':0x0,'AbsTimeMinute':0x0,'AbsTimeSecond':0x0,'AbsTimeMilliseconds':0x0},this['HardDecFrameCount']=0x0,this['canvas']=_0x644031,this['bSetStreamEnd']=!0x1,this['bVisibility']=!0x0,this['back_ready_frames']=[],this['StartFrameTime']=0x0,this['WaitForFrameFlag']=0x0;}return _0x50c85d(_0x164648,[{'key':'initDecoder','value':function(){if(null==this['decoderObj'])try{var _0x2f3d61={'output':this['output'],'error':this['reportError']};this['decoderObj']=new VideoDecoder(_0x2f3d61);}catch(_0x527eec){0x0==this['oVideoRenderHandle']['firstFrame']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}''!=this['canvas']&&null!=this['canvas']&&(this['underflow']&&(this['underflow']=!0x1,this['oVideoRenderHandle']['RenderFrame']()['then'](function(){})),this['oVideoRenderHandle']['displayRunning']=!0x0),this['decoderCurStatus']=0x2,this['FirstFrame']=!0x0;}},{'key':'inputData','value':function(_0x20e47c,_0x1c67f0){null!=this['decoderObj']&&(this['printfFlag']>0x0&&console['log']('VideoDecoder.js\\x20inputData\\x20videoInfo.timeStamp:'+_0x1c67f0['timeStamp']+',decodeQueueSize:'+this['decoderObj']['decodeQueueSize']+',frameLength:'+this['ready_frames']['length']),('configured'==this['decoderObj']['state']||this['FirstFrame'])&&this['decodeProcess'](_0x20e47c,_0x1c67f0),(this['ready_frames']['length']>0x64||this['decoderObj']['decodeQueueSize']>0x64)&&(this['player']?this['player']['JSPlayM4_GetDecodeBufferSize'](this['decoderObj']['decodeQueueSize'],this['ready_frames']['length']):postMessage({'function':'GetDecodeBufferSize','rawSize':this['decoderObj']['decodeQueueSize'],'frameSize':this['ready_frames']['length']})),_0x1c67f0['nStreamEnd']&&this['SetStreamEnd']());}},{'key':'concatenate','value':function(_0x1b5418){for(var _0x2855ec=0x0,_0x23834b=arguments['length'],_0x558e28=new Array(_0x23834b>0x1?_0x23834b-0x1:0x0),_0x41b646=0x1;_0x41b646<_0x23834b;_0x41b646++)_0x558e28[_0x41b646-0x1]=arguments[_0x41b646];for(var _0x4e540a=0x0,_0x5d8b0a=_0x558e28;_0x4e540a<_0x5d8b0a['length'];_0x4e540a++){var _0x26afe7=_0x5d8b0a[_0x4e540a];_0x2855ec+=_0x26afe7['length'];}for(var _0x345e16=new _0x1b5418(_0x2855ec),_0x5adf88=0x0,_0x5d7da8=0x0,_0x9503a4=_0x558e28;_0x5d7da8<_0x9503a4['length'];_0x5d7da8++){var _0x4c680c=_0x9503a4[_0x5d7da8];_0x345e16['set'](_0x4c680c,_0x5adf88),_0x5adf88+=_0x4c680c['length'];}return _0x345e16;}},{'key':'processData','value':function(_0x3608ca){for(var _0x2d692f=null,_0x1bfdd2=null,_0x3e2172=null,_0x31d615=!0x1,_0x541848=!0x1,_0x45216b=0x0,_0x29e872=0x0;_0x29e872<_0x3608ca['length']-0x4;_0x29e872++){if(0x0!=_0x3608ca[_0x29e872]||0x0!=_0x3608ca[_0x29e872+0x1]||0x0!=_0x3608ca[_0x29e872+0x2]||0x1!=_0x3608ca[_0x29e872+0x3]||0x67!=_0x3608ca[_0x29e872+0x4]&&0x27!=_0x3608ca[_0x29e872+0x4]||(0x0!=_0x29e872?(_0x541848=!0x0,_0x2d692f=_0x3608ca['slice'](_0x29e872),_0x45216b=_0x29e872):_0x2d692f=_0x3608ca),0x0==_0x3608ca[_0x29e872]&&0x0==_0x3608ca[_0x29e872+0x1]&&0x0==_0x3608ca[_0x29e872+0x2]&&0x1==_0x3608ca[_0x29e872+0x3]&&(0x9==_0x3608ca[_0x29e872+0x4]||0x6==_0x3608ca[_0x29e872+0x4])){if(null==_0x2d692f)continue;null==_0x1bfdd2&&(_0x1bfdd2=_0x3608ca['slice'](_0x45216b,_0x29e872),_0x31d615=!0x0);}if(0x0==_0x3608ca[_0x29e872]&&0x0==_0x3608ca[_0x29e872+0x1]&&0x0==_0x3608ca[_0x29e872+0x2]&&0x1==_0x3608ca[_0x29e872+0x3]&&(0x65==_0x3608ca[_0x29e872+0x4]||0x25==_0x3608ca[_0x29e872+0x4])){_0x31d615&&(_0x3e2172=_0x3608ca['slice'](_0x29e872));break;}}return _0x31d615?this['concatenate'](Uint8Array,_0x1bfdd2,_0x3e2172):_0x541848?_0x2d692f:_0x3608ca;}},{'key':'processData1','value':function(_0x4ac342){return 0x0!=_0x4ac342[0x0]||0x0!=_0x4ac342[0x1]||0x0!=_0x4ac342[0x2]||0x1!=_0x4ac342[0x3]||0x9!=_0x4ac342[0x4]&&0x6!=_0x4ac342[0x4]?_0x4ac342:_0x4ac342['slice'](0x5);}},{'key':'formatVideoDecoderConfigure','value':function(_0x3b93ba,_0x181f26,_0x3b2d65,_0x40a089){var _0x4e27fc='';0x5==_0x181f26?(_0x4e27fc='hvc1.1.6.L123.00',this['printfFlag']>=0x0&&console['log']('265\\x20hard\\x20decoder')):0x100==_0x181f26?(_0x4e27fc='avc1.42001f',this['printfFlag']>=0x0&&console['log']('264\\x20hard\\x20decoder')):console['log']('Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!');var _0xc9549b={'codec':_0x4e27fc,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x181f26&&this['needSetPreSoft']&&(_0xc9549b['hardwareAcceleration']='prefer-software'),_0xc9549b;}},{'key':'decodeProcess','value':function(_0x3b703a,_0x521e9c){this['frameRate']!=_0x521e9c['frameRate']&&(this['frameRate']=_0x521e9c['frameRate']),this['width']!=_0x521e9c['width']&&(this['width']=_0x521e9c['width']),this['height']!=_0x521e9c['height']&&(this['height']=_0x521e9c['height']),_0x521e9c['needSetPreSoft']&&(this['needSetPreSoft']=_0x521e9c['needSetPreSoft']);var _0x41e943=_0x3b703a;if(0x4!=this['decoderCurStatus']&&null!=this['decoderObj']){if(this['printfFlag']>0x0&&console['log']('VideoDecoder.js\\x20Decoder\\x20this.decoderObj.state:'+this['decoderObj']['state']),'configured'==this['decoderObj']['state']){var _0x25e244=new EncodedVideoChunk({'data':_0x41e943,'timestamp':_0x521e9c['timeStamp'],'type':_0x521e9c['isKeyFrame']?'key':'delta'});try{this['decoderObj']['decode'](_0x25e244);}catch(_0x377bee){0x0==this['oVideoRenderHandle']['firstFrame']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}_0x41e943=null,_0x3b703a=null,_0x25e244=null,_0x521e9c['frameType'];}else{if(_0x521e9c['isKeyFrame']&&'unconfigured'==this['decoderObj']['state']){var _0x37428a=this['formatVideoDecoderConfigure'](_0x3b703a,_0x521e9c['codecType'],_0x521e9c['width'],_0x521e9c['height']);if(''==_0x37428a['codec'])return-0x1;if(null!==this['decoderObj']){try{this['decoderObj']['configure'](_0x37428a);}catch(_0x36389a){0x0==this['oVideoRenderHandle']['firstFrame']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}_0x41e943=this['processData'](_0x3b703a),this['FirstFrame']=!0x1;var _0x266b82=new EncodedVideoChunk({'data':_0x41e943,'timestamp':_0x521e9c['timeStamp'],'type':_0x521e9c['isKeyFrame']?'key':'delta'});try{this['decoderObj']['decode'](_0x266b82);}catch(_0x4acaf5){0x0==this['oVideoRenderHandle']['firstFrame']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}_0x37428a=null,_0x41e943=null,_0x3b703a=null;}}}}}},{'key':'checkY','value':function(_0x1ca100,_0x567baf,_0x24a0bc){Uint8Array['prototype']['compare']=function(_0x4ab168,_0x50d61e,_0x17535f){for(var _0xedd672=0x0;_0xedd672<_0x17535f;_0xedd672++)if(this[_0x4ab168+_0xedd672]!==this[_0x50d61e+_0xedd672])return-0x1;return 0x0;};for(var _0x5c1322=0x0,_0x1a8871=new Uint8Array(_0x1ca100),_0x5b3c5b=(_0x24a0bc-0x8)*_0x567baf,_0x43bbd9=0x0;_0x43bbd9<0x8;_0x43bbd9++)for(var _0xa69542=_0x5b3c5b+_0x43bbd9*_0x567baf,_0x26bd38=0x0;_0x26bd38<_0x567baf-0x10;_0x26bd38+=0x18){var _0x2db12c=_0x1a8871['compare'](_0xa69542+_0x26bd38,_0xa69542+_0x26bd38+0x8,0x8),_0x1643de=_0x1a8871['compare'](_0xa69542+_0x26bd38+0x8,_0xa69542+_0x26bd38+0x10,0x8);0x0===_0x2db12c&&0x0===_0x1643de&&(_0x1a8871[_0xa69542+_0x26bd38]>0x7a&&_0x1a8871[_0xa69542+_0x26bd38]<=0x80||0x0===_0x1a8871[_0xa69542+_0x26bd38])&&_0x5c1322++;}return!(_0x5c1322>0x64);}},{'key':'output','value':function(_0x50ee5c){var _0x4d8856=this;if(this['printfFlag']>0x0&&console['log']('VideoDecoder.js\\x20output\\x20timestamp:'+_0x50ee5c['timestamp']+',decodeQueueSize:'+this['decoderObj']['decodeQueueSize']+',length:'+this['ready_frames']['length']),null!==this['decoderObj']){if('configured'==this['decoderObj']['state']&&this['bVisibility']){var _0x55b48a=_0x50ee5c['timestamp'];if(this['oVideoRenderHandle']['VideoPrivateInfoMap']['size']>0x0){var _0x1e45f6=this['oVideoRenderHandle']['VideoPrivateInfoMap']['get'](_0x55b48a);if(null!=_0x1e45f6){for(;_0x1e45f6['linesInfo']['length']>0x0||_0x1e45f6['fontInfo']['length']>0x0||_0x1e45f6['imageInfo']['length']>0x0;)this['oVideoRenderHandle']['oVideoRender']['InputPrivateInfo'](_0x1e45f6['linesInfo']['shift'](),_0x1e45f6['fontInfo']['shift'](),_0x1e45f6['imageInfo']['shift']());this['oVideoRenderHandle']['VideoPrivateInfoMap']['delete'](_0x55b48a);}}if(this['printfFlag']>0x0&&console['log']('output1\\x20cb\\x20decodeQueueSize:'+this['decoderObj']['decodeQueueSize']+',length:'+this['ready_frames']['length']+',timestamp:'+_0x55b48a+',systime:'+new Date()['getHours']()+':'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds']()),this['oVideoRenderHandle']['DecodeTypeFlagMap']['size']>0x0){var _0x2a4c81,_0x139da2=_0x198e9a(this['oVideoRenderHandle']['DecodeTypeFlagMap']['keys']());try{for(_0x139da2['s']();!(_0x2a4c81=_0x139da2['n']())['done'];){var _0xc3decb=_0x2a4c81['value'];if(_0xc3decb==_0x44b923){if(0x1==this['oVideoRenderHandle']['DecodeTypeFlagMap']['get'](_0xc3decb)&&null!=this['runtimeInfoCBFun']&&null!=this['oDecodeTimer']){var _0x215a2c=this['oDecodeTimer']['GetTimerWalk']();_0x215a2c<=0x0||_0x215a2c>0x989680||this['nGetTotalFrameNum']>0x186a0?(this['nGetTotalFrameNum']=0x0,this['oDecodeTimer']['Init']()):(this['nGetTotalFrameNum']++,this['nAverageDecodeTime']=_0x215a2c/this['nGetTotalFrameNum'],null!=this['runtimeInfoCBFun']&&(this['pstRuntimeInfo']['nRunTimeModule']=0x2,this['pstRuntimeInfo']['nStrVersion']=0x1,this['pstRuntimeInfo']['nFrameTimeStamp']=_0x55b48a,this['pstRuntimeInfo']['nFrameNum']=0x0,this['pstRuntimeInfo']['nErrorCode']=_0x44b923,this['pstRuntimeInfo']['nInputDataInterval']=0x0,this['pstRuntimeInfo']['nFrameNumInterval']=0x0,this['pstRuntimeInfo']['nAverageDecodeTime']=this['nAverageDecodeTime'],this['runtimeInfoCBFun'](this['pstRuntimeInfo'])));}}}}catch(_0x86b4ec){_0x139da2['e'](_0x86b4ec);}finally{_0x139da2['f']();}}if(null!=this['player']&&null!=this['player']['HardDecToJpegCBFun']){++this['HardDecFrameCount'];var _0x1e39b7=_0x50ee5c['displayWidth'],_0x279238=_0x50ee5c['displayHeight'];(this['HardDecFrameCount']-0x1)%this['player']['HardDecToJpegInterval']==0x0&&createImageBitmap(_0x50ee5c)['then'](function(_0x1c17e4){_0x4d8856['player']?_0x4d8856['player']['_GetImage'](_0x1c17e4,'jpeg',0x0,0x0,_0x1e39b7,_0x279238,_0x4d8856['HardDecFrameCount']):postMessage({'function':'bitmap','value':_0x1c17e4,'type':'jpeg','sx':0x0,'sy':0x0,'sw':_0x50ee5c['displayWidth'],'sh':_0x50ee5c['displayHeight'],'framenum':_0x4d8856['HardDecFrameCount']});});}if(''!=this['canvas']&&null!=this['canvas']){if(this['printfFlag']>0x0&&console['log']('VideoDecoder.js\\x20WaitForFrameFlag:'+this['WaitForFrameFlag']+',frame.timestamp:'+_0x50ee5c['timestamp']+',StartFrameTime:'+this['StartFrameTime']),0x2==this['WaitForFrameFlag']&&_0x50ee5c['timestamp']>this['StartFrameTime']&&0x0!=this['StartFrameTime'])return _0x50ee5c['close'](),0x1;if(0x1==this['WaitForFrameFlag']&&_0x50ee5c['timestamp']<this['StartFrameTime']&&0x0!=this['StartFrameTime'])return _0x50ee5c['close'](),0x1;if(0x6==this['decoderCurStatus']){if(this['back_ready_frames']['length']>0xc8)_0x50ee5c['close']();else{var _0x4fd6f5;new Object();if(this['oVideoRenderHandle']['findFramebyTime'](_0x50ee5c['timestamp'],0x0)['isKeyFrame'])this['back_ready_frames']['reverse'](),(_0x4fd6f5=this['ready_frames'])['push']['apply'](_0x4fd6f5,_0x595930(this['back_ready_frames'])),this['back_ready_frames']['splice'](0x0,this['back_ready_frames']['length']),createImageBitmap(_0x50ee5c)['then'](function(_0x46c033){_0x4d8856['back_ready_frames']['push']({'image':_0x46c033,'timestamp':_0x50ee5c['timestamp'],'displayWidth':_0x50ee5c['displayWidth'],'displayHeight':_0x50ee5c['displayHeight']}),_0x50ee5c['close']();});else createImageBitmap(_0x50ee5c)['then'](function(_0x1c7d6b){_0x4d8856['back_ready_frames']['push']({'image':_0x1c7d6b,'timestamp':_0x50ee5c['timestamp'],'displayWidth':_0x50ee5c['displayWidth'],'displayHeight':_0x50ee5c['displayHeight']}),_0x50ee5c['close']();}),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&this['back_ready_frames']['length']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'}));}}else this['ready_frames']['length']>0x64?_0x50ee5c['close']():(this['ready_frames']['push'](_0x50ee5c),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&this['ready_frames']['length']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})));}else{if(_0x50ee5c['close'](),null!=this['player']&&null!=this['player']['runtimeCBFun']&&0x1==this['GetStreamEnd']()&&0x1==this['bSetStreamEnd']){var _0x3e0331={'nRunTimeModule':0x0,'nStrVersion':0x0,'nFrameTimeStamp':0x0,'nFrameNum':0x0,'nErrorCode':0x9};this['player']['runtimeCBFun'](_0x3e0331),this['bSetStreamEnd']=!0x1;}}}else _0x50ee5c['close']();}}},{'key':'output2','value':function(_0x5a4284){var _0x8cbea5=this;_0x5a4284['timestamp'],createImageBitmap(_0x5a4284)['then'](function(_0x5dabd3){_0x5a4284['close'](),_0x8cbea5['ready_frames']['push'](_0x5dabd3);});}},{'key':'reportError','value':function(_0x56a8ae){if(this['oVideoRenderHandle']['DecodeTypeFlagMap']['size']>0x0){var _0x9c6b6c,_0x4da030=_0x198e9a(this['oVideoRenderHandle']['DecodeTypeFlagMap']['keys']());try{for(_0x4da030['s']();!(_0x9c6b6c=_0x4da030['n']())['done'];){var _0x381716=_0x9c6b6c['value'];if(0x80==_0x381716)0x1==this['oVideoRenderHandle']['DecodeTypeFlagMap']['get'](_0x381716)&&null!=this['runtimeInfoCBFun']&&(this['pstRuntimeInfo']['nRunTimeModule']=0x2,this['pstRuntimeInfo']['nStrVersion']=0x1,this['pstRuntimeInfo']['nFrameTimeStamp']=timestamp,this['pstRuntimeInfo']['nFrameNum']=0x0,this['pstRuntimeInfo']['nErrorCode']=0x80,this['runtimeInfoCBFun'](this['pstRuntimeInfo']));}}catch(_0x153971){_0x4da030['e'](_0x153971);}finally{_0x4da030['f']();}}console['log']('hardDecode\\x20reportError:'+_0x56a8ae['message']+',state:'+this['decoderObj']['state']+',frameRate:'+this['frameRate']+'this.ready_frames.length:'+this['ready_frames']['length']),0x0==this['oVideoRenderHandle']['firstFrame']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}},{'key':'destroyDecoder','value':function(){var _0x1fcc18=this;return new Promise(function(_0xeeade7,_0x1b6018){_0x1fcc18['clearDecoderObjBuffer'](),null!=_0x1fcc18['decoderObj']&&('closed'!=_0x1fcc18['decoderObj']['state']&&_0x1fcc18['decoderObj']['close'](),_0x1fcc18['printfFlag']>=0x0&&console['log']('>>>JS\\x2001\\x20destroy\\x20decoderObj'),_0x1fcc18['decoderObj']=null),_0x1fcc18['decoderCurStatus']=0x4,_0x1fcc18['decoderOutSuccess']=!0x1,_0x1fcc18['FirstFrame']=!0x0,_0x1fcc18['needSetPreSoft']=!0x1,_0x1fcc18['decoderObjNeedReset']=!0x1,_0x1fcc18['curFrame']=null,null!==_0x1fcc18['oDecodeTimer']&&(_0x1fcc18['oDecodeTimer']['timerReset'](),_0x1fcc18['oDecodeTimer']=null),_0xeeade7();});}},{'key':'resetDecoder','value':function(){var _0x5432a0=this;return new Promise(function(_0x42d1c8,_0x11d3b0){_0x5432a0['destroyDecoder']()['then'](function(){_0x5432a0['initDecoder'](),console['log']('%c\\x20reset\\x20hard\\x20decoder','color:red'),_0x42d1c8();},function(){_0x11d3b0();});});}},{'key':'clearDecoderObjBuffer','value':function(){if(0x6==this['decoderCurStatus']){for(var _0x2f5d97=this['ready_frames']['length'],_0x4c6658=0x0;_0x4c6658<_0x2f5d97;_0x4c6658++){var _0x4a5fdb=this['ready_frames']['shift']();null!=_0x4a5fdb['image']&&null!=_0x4a5fdb['image']&&_0x4a5fdb['image']['close']();}this['ready_frames']['splice'](0x0,this['ready_frames']['length']);for(var _0x3ecd10=this['back_ready_frames']['length'],_0x23b806=0x0;_0x23b806<_0x3ecd10;_0x23b806++){var _0x470348=this['back_ready_frames']['shift']();null!=_0x470348['image']&&null!=_0x470348['image']&&_0x470348['image']['close']();}this['back_ready_frames']['splice'](0x0,this['back_ready_frames']['length']);}else{for(var _0x3ae2d3=this['ready_frames']['length'],_0x442b66=0x0;_0x442b66<_0x3ae2d3;_0x442b66++){this['ready_frames']['shift']()['close']();}this['ready_frames']['splice'](0x0,this['ready_frames']['length']);}this['resetDecoderObj']();}},{'key':'resetDecoderObj','value':function(){null!=this['decoderObj']&&'configured'==this['decoderObj']['state']&&(this['decoderObj']['reset'](),this['FirstFrame']=!0x0);}},{'key':'SetStreamEnd','value':function(){return null!=this['decoderObj']&&0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']&&(this['decoderObj']['flush'](),console['log']('flush')),this['bSetStreamEnd']=!0x0,0x1;}},{'key':'GetStreamEnd','value':function(){return null!=this['decoderObj']&&(0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']||void 0x0);}},{'key':'NotifyBackPlay','value':function(_0x14c797,_0x4846e8,_0x90d857){var _0xa4a3e9=this;return 0x0!=_0x4846e8?this['resetDecoder']()['then'](function(){_0xa4a3e9['decoderCurStatus']=_0x14c797?0x6:0x2,_0xa4a3e9['StartFrameTime']=_0x4846e8,_0xa4a3e9['WaitForFrameFlag']=_0x90d857;}):(this['decoderCurStatus']=_0x14c797?0x6:0x2,this['StartFrameTime']=_0x4846e8,this['WaitForFrameFlag']=_0x90d857),0x1;}},{'key':'GetFrame','value':function(){var _0x723c91=this;return new Promise(function(_0x4a1f5d,_0x4dcdc2){if(null!=_0x723c91['curFrame']){var _0x4130ef=_0x723c91['ready_frames']['shift']();0x6==_0x723c91['decoderCurStatus']?null!=_0x4130ef['image']&&null!=_0x4130ef['image']&&_0x4130ef['image']['close']():_0x4130ef['close'](),_0x4130ef=null,_0x723c91['curFrame']=null;}0x0!=_0x723c91['ready_frames']['length']?(_0x723c91['curFrame']=_0x723c91['ready_frames'][0x0],_0x4a1f5d(_0x723c91['curFrame'])):(_0x723c91['curFrame']=null,_0x4a1f5d(null));});}},{'key':'GetFrameBufferLength','value':function(){return this['ready_frames']['length'];}},{'key':'GetImageYUV','value':function(_0x346c44,_0x2b3b01,_0x342469,_0x4f63e7,_0x5c44fb){var _0x303597=this;return new Promise(function(_0x3286ae,_0x3ef4c4){var _0x3bda72=null;if(null!=_0x303597['curFrame']?_0x3bda72=_0x303597['curFrame']:0x0!=_0x303597['ready_frames']['length']&&(_0x3bda72=_0x303597['ready_frames'][0x0]),null!=_0x3bda72){var _0x5b7ad2=_0x3bda72['displayWidth'],_0x10a8ff=_0x3bda72['displayHeight'],_0x332c8b=_0x3bda72;0x6==_0x303597['decoderCurStatus']&&(_0x332c8b=_0x3bda72['image']),0x0==_0x2b3b01&&0x0==_0x342469&&0x0==_0x4f63e7&&0x0==_0x5c44fb&&(_0x4f63e7=_0x5b7ad2,_0x5c44fb=_0x10a8ff),createImageBitmap(_0x332c8b)['then'](function(_0x23276d){_0x303597['player']?_0x303597['player']['_GetImage'](_0x23276d,_0x346c44,_0x2b3b01,_0x342469,_0x4f63e7,_0x5c44fb,0x0):postMessage({'function':'bitmap','value':_0x23276d,'type':_0x346c44,'sx':_0x2b3b01,'sy':_0x342469,'sw':_0x4f63e7,'sh':_0x5c44fb,'framenum':0x0});}),_0x3ef4c4();}else _0x3286ae({'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1});});}},{'key':'SetPrintLogFlag','value':function(_0x5538ca){return this['printfFlag']=_0x5538ca,0x1;}},{'key':'SetRunTimeInfoCallBackFun','value':function(_0x353eca,_0x1a2ed3){return this['runtimeInfoCBFun']=_0x1a2ed3,0x1;}},{'key':'SetRunTimeInfoCallbackType','value':function(_0x2b5858,_0x238c8e,_0x370332){return _0x238c8e==_0x44b923&&(this['nGetTotalFrameNum']=0x0,_0x370332?null==this['oDecodeTimer']&&(this['oDecodeTimer']=new _0x2c1c22(),this['oDecodeTimer']['Init']()):null!==this['oDecodeTimer']&&(this['oDecodeTimer']['timerReset'](),this['oDecodeTimer']=null)),0x1;}},{'key':'IsVisible','value':function(_0x21c09c){return this['bVisibility']=_0x21c09c,0x1;}}]),_0x164648;}());function _0x46fc9f(_0x464d37,_0x40c708,_0x3d2bc0){return _0x40c708 in _0x464d37?Object['defineProperty'](_0x464d37,_0x40c708,{'value':_0x3d2bc0,'enumerable':!0x0,'configurable':!0x0,'writable':!0x0}):_0x464d37[_0x40c708]=_0x3d2bc0,_0x464d37;}var _0x11589c={'d':function(_0x35f232,_0x5a59c9){for(var _0x574ec0 in _0x5a59c9)_0x11589c['o'](_0x5a59c9,_0x574ec0)&&!_0x11589c['o'](_0x35f232,_0x574ec0)&&Object['defineProperty'](_0x35f232,_0x574ec0,{'enumerable':!0x0,'get':_0x5a59c9[_0x574ec0]});},'o':function(_0x42a120,_0x32b21c){return Object['prototype']['hasOwnProperty']['call'](_0x42a120,_0x32b21c);},'r':function(_0x44d10a){'undefined'!=typeof Symbol&&Symbol['toStringTag']&&Object['defineProperty'](_0x44d10a,Symbol['toStringTag'],{'value':'Module'}),Object['defineProperty'](_0x44d10a,'__esModule',{'value':!0x0});}},_0x137b8e={};function _0x9cc894(_0xa06e8e,_0x4b126b){if(!(_0xa06e8e instanceof _0x4b126b))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0x56ec6d(_0x3236c5){return _0x56ec6d='function'==typeof Symbol&&'symbol'==_0x18a458(Symbol['iterator'])?function(_0x371ac0){return _0x18a458(_0x371ac0);}:function(_0x59d459){return _0x59d459&&'function'==typeof Symbol&&_0x59d459['constructor']===Symbol&&_0x59d459!==Symbol['prototype']?'symbol':_0x18a458(_0x59d459);},_0x56ec6d(_0x3236c5);}function _0x1c365a(_0x3ec4ae){var _0x520cb2=function(_0x54fa78,_0x567788){if('object'!=_0x56ec6d(_0x54fa78)||!_0x54fa78)return _0x54fa78;var _0x416f98=_0x54fa78[Symbol['toPrimitive']];if(void 0x0!==_0x416f98){var _0x1ae56a=_0x416f98['call'](_0x54fa78,_0x567788);if('object'!=_0x56ec6d(_0x1ae56a))return _0x1ae56a;throw new TypeError('@@toPrimitive\\x20must\\x20return\\x20a\\x20primitive\\x20value.');}return String(_0x54fa78);}(_0x3ec4ae,'string');return'symbol'==_0x56ec6d(_0x520cb2)?_0x520cb2:_0x520cb2+'';}function _0x19b5ac(_0x156ce4,_0x316e01){for(var _0x360a26=0x0;_0x360a26<_0x316e01['length'];_0x360a26++){var _0x405040=_0x316e01[_0x360a26];_0x405040['enumerable']=_0x405040['enumerable']||!0x1,_0x405040['configurable']=!0x0,'value'in _0x405040&&(_0x405040['writable']=!0x0),Object['defineProperty'](_0x156ce4,_0x1c365a(_0x405040['key']),_0x405040);}}function _0x3bf3f2(_0x54536a,_0x4f0f21,_0x3e57c5){return _0x4f0f21&&_0x19b5ac(_0x54536a['prototype'],_0x4f0f21),_0x3e57c5&&_0x19b5ac(_0x54536a,_0x3e57c5),Object['defineProperty'](_0x54536a,'prototype',{'writable':!0x1}),_0x54536a;}_0x11589c['r'](_0x137b8e),_0x11589c['d'](_0x137b8e,{'ERRCODE':function(){return _0x990bc1;},'SRCALLBACKTYPE':function(){return _0x315c65;},'SRDISPLAYEFFECT':function(){return _0x593e88;},'SRFISHPARAMTYPE':function(){return _0x53c56d;},'SRIMAGEROTATEANGLE':function(){return _0x60b01c;},'SRPIXELFORMAT':function(){return _0x43e6f4;},'SRPOSTPROCTYPE':function(){return _0x44fad3;},'SRPTZDISPLAYMODE':function(){return _0x28e52b;},'SRRENDERSTATETYPE':function(){return _0x1a32ef;},'SRSETRECTTYPE':function(){return _0x5a8c60;},'SRVIEWLIMITATERATE':function(){return _0x1e5382;},'SRVIEWTYPE':function(){return _0xc57d71;}});var _0x4fe2fc=0x20,_0x3fca2c=0x400,_0x4d0f95=0.05,_0x24183=0.000001,_0x515c4d=3.1415926,_0x122a3e=1.57,_0x39f2db=0.02,_0x5bbb66=0x3e8,_0xd5ab80=0.78539815,_0x46bfa0=0x32,_0x553509=0x32,_0x547537=-0x1,_0x2d8cf5=_0x515c4d/0x12,_0xbc8aa4=_0x515c4d/0x3,_0x334a77=_0x515c4d/0x6,_0x3b1178=_0x515c4d/0x9,_0x990bc1={'SR_OK':0x1,'SR_ERR_NOT_SUPPORT':0x80000001,'SR_ERR_SUBPORT':0x80000002,'SR_ERR_ALLOC_MEMORY':0x80000003,'SR_ERR_CALL_ORDER':0x80000004,'SR_ERR_PARAM':0x80000005,'SR_ERR_CAPTURE':0x80000006,'SR_ERR_SUBPORT_FULL':0x80000007,'SR_ERR_SHADER':0x80000008,'SR_ERR_3D_MODEL':0x80000009,'SR_ERR_FONT':0x8000000a,'SR_ERR_MEMORY_LIMIT':0x8000000b,'SR_ERR_WEBGPU_RESOURCE':0x8000000c,'SR_ERR_WEBGL_RESOURCE':0x8000000d,'SR_ERR_CANVAS':0x8000000e},_0x5a8c60={'SR_SRT_NULL':0x0,'SR_SRT_SRC':0x1,'SR_SRT_DST':0x2},_0x1e5382={'SR_VLR_BLACK_NULL':0x0,'SR_VLR_BLACK_1216_2832':0x1},_0x593e88={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17,'SR_DE_ELLIPSOID_VIEWLIMITED':0x1c},_0x43e6f4={'SR_PF_NULL':0x0,'SR_PF_YV12':0x1,'SR_PF_NV12':0x2,'SR_PF_I420':0x3,'SR_PF_RGB565':0x4,'SR_PF_RGBA32':0x5,'SR_PF_NV21':0x6,'SR_PF_SURFACE':0x100},_0x53c56d={'SR_FPT_NULL':0x0,'SR_FPT_CENTER':0x1,'SR_FPT_ANGLE':0x2,'SR_FPT_ZOOM':0x3,'SR_FPT_PTZ':0x4},_0x28e52b={'SR_DM_NULL':0x0,'SR_DM_RECT':0x1,'SR_DM_RANGE':0x2},_0xc57d71={'SR_VT_NULL':0x0,'SR_VT_ROTATION_X':0x1,'SR_VT_ROTATION_Y':0x2,'SR_VT_SCALE':0x3},_0x315c65={'SR_CBT_NULL':0x0,'SR_CBT_OUT':0x1},_0x1a32ef={'SR_RST_NULL':0x0,'SR_RST_VERTICALFLIP':0x1,'SR_RST_BACK_CULL':0x2,'SR_RST_IMAGE_ROTATE':0x3},_0x44fad3={'SR_PPT_NULL':0x0,'SR_PPT_BRIGHTNESS':0x1,'SR_PPT_HUE':0x2,'SR_PPT_SATURATION':0x3,'SR_PPT_CONTRAST':0x4,'SR_PPT_SHARPNESS':0x5},_0x60b01c={'SR_IRA_0':0x1,'SR_IRA_90':0x2,'SR_IRA_180':0x3,'SR_IRA_270':0x4},_0x402ceb=0.000001,_0x35750e='undefined'!=typeof Float32Array?Float32Array:Array;function _0x3f2018(){var _0x3132ab=new _0x35750e(0x10);return _0x35750e!=Float32Array&&(_0x3132ab[0x1]=0x0,_0x3132ab[0x2]=0x0,_0x3132ab[0x3]=0x0,_0x3132ab[0x4]=0x0,_0x3132ab[0x6]=0x0,_0x3132ab[0x7]=0x0,_0x3132ab[0x8]=0x0,_0x3132ab[0x9]=0x0,_0x3132ab[0xb]=0x0,_0x3132ab[0xc]=0x0,_0x3132ab[0xd]=0x0,_0x3132ab[0xe]=0x0),_0x3132ab[0x0]=0x1,_0x3132ab[0x5]=0x1,_0x3132ab[0xa]=0x1,_0x3132ab[0xf]=0x1,_0x3132ab;}function _0x3789fc(_0x253912){return _0x253912[0x0]=0x1,_0x253912[0x1]=0x0,_0x253912[0x2]=0x0,_0x253912[0x3]=0x0,_0x253912[0x4]=0x0,_0x253912[0x5]=0x1,_0x253912[0x6]=0x0,_0x253912[0x7]=0x0,_0x253912[0x8]=0x0,_0x253912[0x9]=0x0,_0x253912[0xa]=0x1,_0x253912[0xb]=0x0,_0x253912[0xc]=0x0,_0x253912[0xd]=0x0,_0x253912[0xe]=0x0,_0x253912[0xf]=0x1,_0x253912;}function _0x917050(_0x46bab6,_0x10c75b,_0x54be10){var _0x4911a0=_0x10c75b[0x0],_0xad62a0=_0x10c75b[0x1],_0x320610=_0x10c75b[0x2],_0x25e9d2=_0x10c75b[0x3],_0x202ed0=_0x10c75b[0x4],_0x5c07d6=_0x10c75b[0x5],_0xfd5199=_0x10c75b[0x6],_0x41622b=_0x10c75b[0x7],_0x5c368d=_0x10c75b[0x8],_0x5863af=_0x10c75b[0x9],_0x5c9aa5=_0x10c75b[0xa],_0x33f269=_0x10c75b[0xb],_0x12d09b=_0x10c75b[0xc],_0x273c39=_0x10c75b[0xd],_0x2e24fd=_0x10c75b[0xe],_0x457f4b=_0x10c75b[0xf],_0x31c5c7=_0x54be10[0x0],_0x30e2cc=_0x54be10[0x1],_0x1e46cc=_0x54be10[0x2],_0x222cb4=_0x54be10[0x3];return _0x46bab6[0x0]=_0x31c5c7*_0x4911a0+_0x30e2cc*_0x202ed0+_0x1e46cc*_0x5c368d+_0x222cb4*_0x12d09b,_0x46bab6[0x1]=_0x31c5c7*_0xad62a0+_0x30e2cc*_0x5c07d6+_0x1e46cc*_0x5863af+_0x222cb4*_0x273c39,_0x46bab6[0x2]=_0x31c5c7*_0x320610+_0x30e2cc*_0xfd5199+_0x1e46cc*_0x5c9aa5+_0x222cb4*_0x2e24fd,_0x46bab6[0x3]=_0x31c5c7*_0x25e9d2+_0x30e2cc*_0x41622b+_0x1e46cc*_0x33f269+_0x222cb4*_0x457f4b,_0x31c5c7=_0x54be10[0x4],_0x30e2cc=_0x54be10[0x5],_0x1e46cc=_0x54be10[0x6],_0x222cb4=_0x54be10[0x7],_0x46bab6[0x4]=_0x31c5c7*_0x4911a0+_0x30e2cc*_0x202ed0+_0x1e46cc*_0x5c368d+_0x222cb4*_0x12d09b,_0x46bab6[0x5]=_0x31c5c7*_0xad62a0+_0x30e2cc*_0x5c07d6+_0x1e46cc*_0x5863af+_0x222cb4*_0x273c39,_0x46bab6[0x6]=_0x31c5c7*_0x320610+_0x30e2cc*_0xfd5199+_0x1e46cc*_0x5c9aa5+_0x222cb4*_0x2e24fd,_0x46bab6[0x7]=_0x31c5c7*_0x25e9d2+_0x30e2cc*_0x41622b+_0x1e46cc*_0x33f269+_0x222cb4*_0x457f4b,_0x31c5c7=_0x54be10[0x8],_0x30e2cc=_0x54be10[0x9],_0x1e46cc=_0x54be10[0xa],_0x222cb4=_0x54be10[0xb],_0x46bab6[0x8]=_0x31c5c7*_0x4911a0+_0x30e2cc*_0x202ed0+_0x1e46cc*_0x5c368d+_0x222cb4*_0x12d09b,_0x46bab6[0x9]=_0x31c5c7*_0xad62a0+_0x30e2cc*_0x5c07d6+_0x1e46cc*_0x5863af+_0x222cb4*_0x273c39,_0x46bab6[0xa]=_0x31c5c7*_0x320610+_0x30e2cc*_0xfd5199+_0x1e46cc*_0x5c9aa5+_0x222cb4*_0x2e24fd,_0x46bab6[0xb]=_0x31c5c7*_0x25e9d2+_0x30e2cc*_0x41622b+_0x1e46cc*_0x33f269+_0x222cb4*_0x457f4b,_0x31c5c7=_0x54be10[0xc],_0x30e2cc=_0x54be10[0xd],_0x1e46cc=_0x54be10[0xe],_0x222cb4=_0x54be10[0xf],_0x46bab6[0xc]=_0x31c5c7*_0x4911a0+_0x30e2cc*_0x202ed0+_0x1e46cc*_0x5c368d+_0x222cb4*_0x12d09b,_0x46bab6[0xd]=_0x31c5c7*_0xad62a0+_0x30e2cc*_0x5c07d6+_0x1e46cc*_0x5863af+_0x222cb4*_0x273c39,_0x46bab6[0xe]=_0x31c5c7*_0x320610+_0x30e2cc*_0xfd5199+_0x1e46cc*_0x5c9aa5+_0x222cb4*_0x2e24fd,_0x46bab6[0xf]=_0x31c5c7*_0x25e9d2+_0x30e2cc*_0x41622b+_0x1e46cc*_0x33f269+_0x222cb4*_0x457f4b,_0x46bab6;}function _0x389b7a(_0x4dad0c,_0x38cb29,_0x2861fe,_0x125e8c){var _0x2b54e2,_0x56e183,_0x3ec5be,_0x1ffb6f,_0x5d489f,_0x509eb4,_0x5d0caf,_0x1ff67a,_0x29641c,_0x1f6dab,_0x2b3728,_0x2e969c,_0x19483f,_0x1369b8,_0x3c9615,_0x5081c0,_0x133712,_0x349eda,_0x1a9df8,_0xdb1182,_0x998f6f,_0x431edd,_0xa53ff2,_0x3156a0,_0x71e845=_0x125e8c[0x0],_0x1c1d37=_0x125e8c[0x1],_0x1654e4=_0x125e8c[0x2],_0x3b15d0=Math['hypot'](_0x71e845,_0x1c1d37,_0x1654e4);return _0x3b15d0<_0x402ceb?null:(_0x71e845*=_0x3b15d0=0x1/_0x3b15d0,_0x1c1d37*=_0x3b15d0,_0x1654e4*=_0x3b15d0,_0x2b54e2=Math['sin'](_0x2861fe),_0x3ec5be=0x1-(_0x56e183=Math['cos'](_0x2861fe)),_0x1ffb6f=_0x38cb29[0x0],_0x5d489f=_0x38cb29[0x1],_0x509eb4=_0x38cb29[0x2],_0x5d0caf=_0x38cb29[0x3],_0x1ff67a=_0x38cb29[0x4],_0x29641c=_0x38cb29[0x5],_0x1f6dab=_0x38cb29[0x6],_0x2b3728=_0x38cb29[0x7],_0x2e969c=_0x38cb29[0x8],_0x19483f=_0x38cb29[0x9],_0x1369b8=_0x38cb29[0xa],_0x3c9615=_0x38cb29[0xb],_0x5081c0=_0x71e845*_0x71e845*_0x3ec5be+_0x56e183,_0x133712=_0x1c1d37*_0x71e845*_0x3ec5be+_0x1654e4*_0x2b54e2,_0x349eda=_0x1654e4*_0x71e845*_0x3ec5be-_0x1c1d37*_0x2b54e2,_0x1a9df8=_0x71e845*_0x1c1d37*_0x3ec5be-_0x1654e4*_0x2b54e2,_0xdb1182=_0x1c1d37*_0x1c1d37*_0x3ec5be+_0x56e183,_0x998f6f=_0x1654e4*_0x1c1d37*_0x3ec5be+_0x71e845*_0x2b54e2,_0x431edd=_0x71e845*_0x1654e4*_0x3ec5be+_0x1c1d37*_0x2b54e2,_0xa53ff2=_0x1c1d37*_0x1654e4*_0x3ec5be-_0x71e845*_0x2b54e2,_0x3156a0=_0x1654e4*_0x1654e4*_0x3ec5be+_0x56e183,_0x4dad0c[0x0]=_0x1ffb6f*_0x5081c0+_0x1ff67a*_0x133712+_0x2e969c*_0x349eda,_0x4dad0c[0x1]=_0x5d489f*_0x5081c0+_0x29641c*_0x133712+_0x19483f*_0x349eda,_0x4dad0c[0x2]=_0x509eb4*_0x5081c0+_0x1f6dab*_0x133712+_0x1369b8*_0x349eda,_0x4dad0c[0x3]=_0x5d0caf*_0x5081c0+_0x2b3728*_0x133712+_0x3c9615*_0x349eda,_0x4dad0c[0x4]=_0x1ffb6f*_0x1a9df8+_0x1ff67a*_0xdb1182+_0x2e969c*_0x998f6f,_0x4dad0c[0x5]=_0x5d489f*_0x1a9df8+_0x29641c*_0xdb1182+_0x19483f*_0x998f6f,_0x4dad0c[0x6]=_0x509eb4*_0x1a9df8+_0x1f6dab*_0xdb1182+_0x1369b8*_0x998f6f,_0x4dad0c[0x7]=_0x5d0caf*_0x1a9df8+_0x2b3728*_0xdb1182+_0x3c9615*_0x998f6f,_0x4dad0c[0x8]=_0x1ffb6f*_0x431edd+_0x1ff67a*_0xa53ff2+_0x2e969c*_0x3156a0,_0x4dad0c[0x9]=_0x5d489f*_0x431edd+_0x29641c*_0xa53ff2+_0x19483f*_0x3156a0,_0x4dad0c[0xa]=_0x509eb4*_0x431edd+_0x1f6dab*_0xa53ff2+_0x1369b8*_0x3156a0,_0x4dad0c[0xb]=_0x5d0caf*_0x431edd+_0x2b3728*_0xa53ff2+_0x3c9615*_0x3156a0,_0x38cb29!==_0x4dad0c&&(_0x4dad0c[0xc]=_0x38cb29[0xc],_0x4dad0c[0xd]=_0x38cb29[0xd],_0x4dad0c[0xe]=_0x38cb29[0xe],_0x4dad0c[0xf]=_0x38cb29[0xf]),_0x4dad0c);}Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){for(var _0x41f753=0x0,_0x54a02c=arguments['length'];_0x54a02c--;)_0x41f753+=arguments[_0x54a02c]*arguments[_0x54a02c];return Math['sqrt'](_0x41f753);});var _0xa96b89=function(_0x57fc9c,_0x52519d,_0x4adcce,_0x22066f,_0x116020){var _0x1d1e56=0x1/Math['tan'](_0x52519d/0x2);if(_0x57fc9c[0x0]=_0x1d1e56/_0x4adcce,_0x57fc9c[0x1]=0x0,_0x57fc9c[0x2]=0x0,_0x57fc9c[0x3]=0x0,_0x57fc9c[0x4]=0x0,_0x57fc9c[0x5]=_0x1d1e56,_0x57fc9c[0x6]=0x0,_0x57fc9c[0x7]=0x0,_0x57fc9c[0x8]=0x0,_0x57fc9c[0x9]=0x0,_0x57fc9c[0xb]=-0x1,_0x57fc9c[0xc]=0x0,_0x57fc9c[0xd]=0x0,_0x57fc9c[0xf]=0x0,null!=_0x116020&&_0x116020!==0x1/0x0){var _0x186c21=0x1/(_0x22066f-_0x116020);_0x57fc9c[0xa]=(_0x116020+_0x22066f)*_0x186c21,_0x57fc9c[0xe]=0x2*_0x116020*_0x22066f*_0x186c21;}else _0x57fc9c[0xa]=-0x1,_0x57fc9c[0xe]=-0x2*_0x22066f;return _0x57fc9c;};function _0x459409(_0x15a8ed,_0x525fcb,_0x138c72,_0x2c6caa){var _0x5cf09a,_0x19c106,_0x23f696,_0x180634,_0x1b63cd,_0x8d6343,_0x182b9e,_0x383440,_0x34a55b,_0x3e1d8c,_0x5f28d8=_0x525fcb[0x0],_0x3018ed=_0x525fcb[0x1],_0x1bd448=_0x525fcb[0x2],_0x147c6e=_0x2c6caa[0x0],_0x2055f3=_0x2c6caa[0x1],_0x24d0e9=_0x2c6caa[0x2],_0xddf3a4=_0x138c72[0x0],_0x2b7b3d=_0x138c72[0x1],_0x3266e1=_0x138c72[0x2];return Math['abs'](_0x5f28d8-_0xddf3a4)<_0x402ceb&&Math['abs'](_0x3018ed-_0x2b7b3d)<_0x402ceb&&Math['abs'](_0x1bd448-_0x3266e1)<_0x402ceb?_0x3789fc(_0x15a8ed):(_0x182b9e=_0x5f28d8-_0xddf3a4,_0x383440=_0x3018ed-_0x2b7b3d,_0x34a55b=_0x1bd448-_0x3266e1,_0x5cf09a=_0x2055f3*(_0x34a55b*=_0x3e1d8c=0x1/Math['hypot'](_0x182b9e,_0x383440,_0x34a55b))-_0x24d0e9*(_0x383440*=_0x3e1d8c),_0x19c106=_0x24d0e9*(_0x182b9e*=_0x3e1d8c)-_0x147c6e*_0x34a55b,_0x23f696=_0x147c6e*_0x383440-_0x2055f3*_0x182b9e,(_0x3e1d8c=Math['hypot'](_0x5cf09a,_0x19c106,_0x23f696))?(_0x5cf09a*=_0x3e1d8c=0x1/_0x3e1d8c,_0x19c106*=_0x3e1d8c,_0x23f696*=_0x3e1d8c):(_0x5cf09a=0x0,_0x19c106=0x0,_0x23f696=0x0),_0x180634=_0x383440*_0x23f696-_0x34a55b*_0x19c106,_0x1b63cd=_0x34a55b*_0x5cf09a-_0x182b9e*_0x23f696,_0x8d6343=_0x182b9e*_0x19c106-_0x383440*_0x5cf09a,(_0x3e1d8c=Math['hypot'](_0x180634,_0x1b63cd,_0x8d6343))?(_0x180634*=_0x3e1d8c=0x1/_0x3e1d8c,_0x1b63cd*=_0x3e1d8c,_0x8d6343*=_0x3e1d8c):(_0x180634=0x0,_0x1b63cd=0x0,_0x8d6343=0x0),_0x15a8ed[0x0]=_0x5cf09a,_0x15a8ed[0x1]=_0x180634,_0x15a8ed[0x2]=_0x182b9e,_0x15a8ed[0x3]=0x0,_0x15a8ed[0x4]=_0x19c106,_0x15a8ed[0x5]=_0x1b63cd,_0x15a8ed[0x6]=_0x383440,_0x15a8ed[0x7]=0x0,_0x15a8ed[0x8]=_0x23f696,_0x15a8ed[0x9]=_0x8d6343,_0x15a8ed[0xa]=_0x34a55b,_0x15a8ed[0xb]=0x0,_0x15a8ed[0xc]=-(_0x5cf09a*_0x5f28d8+_0x19c106*_0x3018ed+_0x23f696*_0x1bd448),_0x15a8ed[0xd]=-(_0x180634*_0x5f28d8+_0x1b63cd*_0x3018ed+_0x8d6343*_0x1bd448),_0x15a8ed[0xe]=-(_0x182b9e*_0x5f28d8+_0x383440*_0x3018ed+_0x34a55b*_0x1bd448),_0x15a8ed[0xf]=0x1,_0x15a8ed);}function _0x3e947b(){var _0x254e23=new _0x35750e(0x3);return _0x35750e!=Float32Array&&(_0x254e23[0x0]=0x0,_0x254e23[0x1]=0x0,_0x254e23[0x2]=0x0),_0x254e23;}function _0x5b4cf9(_0x49c55c,_0x4bc90c,_0x2c3f28){var _0x9adda5=new _0x35750e(0x3);return _0x9adda5[0x0]=_0x49c55c,_0x9adda5[0x1]=_0x4bc90c,_0x9adda5[0x2]=_0x2c3f28,_0x9adda5;}function _0x146232(){var _0x30a046=new _0x35750e(0x4);return _0x35750e!=Float32Array&&(_0x30a046[0x0]=0x0,_0x30a046[0x1]=0x0,_0x30a046[0x2]=0x0),_0x30a046[0x3]=0x1,_0x30a046;}_0x3e947b(),(function(){var _0x808c2a;_0x808c2a=new _0x35750e(0x4),_0x35750e!=Float32Array&&(_0x808c2a[0x0]=0x0,_0x808c2a[0x1]=0x0,_0x808c2a[0x2]=0x0,_0x808c2a[0x3]=0x0);}());var _0x3646a6;_0x3e947b(),_0x5b4cf9(0x1,0x0,0x0),_0x5b4cf9(0x0,0x1,0x0),_0x146232(),_0x146232(),_0x3646a6=new _0x35750e(0x9),_0x35750e!=Float32Array&&(_0x3646a6[0x1]=0x0,_0x3646a6[0x2]=0x0,_0x3646a6[0x3]=0x0,_0x3646a6[0x5]=0x0,_0x3646a6[0x6]=0x0,_0x3646a6[0x7]=0x0),_0x3646a6[0x0]=0x1,_0x3646a6[0x4]=0x1,_0x3646a6[0x8]=0x1,(function(){var _0x3621d6=new _0x35750e(0x2);_0x35750e!=Float32Array&&(_0x3621d6[0x0]=0x0,_0x3621d6[0x1]=0x0);}());var _0x3a15be='\\x0aattribute\\x20vec4\\x20position;\\x20\\x0aattribute\\x20vec4\\x20texCoord;\\x20\\x0avarying\\x20vec4\\x20pp;\\x20\\x0auniform\\x20int\\x20bCapture;\\x20\\x0a\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x0a\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20}\\x0a\\x20\\x20else\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x0a\\x20\\x20}\\x0a\\x20\\x20pp\\x20=\\x20texCoord;\\x0a}\\x0a',_0x110aac='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec4\\x20pp;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20int\\x20bDataFormat;\\x0auniform\\x20float\\x20fAlpha;\\x0auniform\\x20int\\x20bDrawImage;\\x0a\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor=vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(Ytexture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20if(bDrawImage\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a',_0x2fc445='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x31ea18='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position\\x20*\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x2a1640='\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0xfed662=_0x3bf3f2(function _0xae4d44(){_0x9cc894(this,_0xae4d44),this['fFov']=1.57,this['fAspect']=0x1,this['fNear']=0.1,this['fFar']=0x3e8,this['fTheta']=0x0,this['fAlpha']=0x0,this['fBeta']=0x0,this['fScale']=0x1,this['bOrtho']=!0x1,this['matView']=_0x3f2018(),this['matProj']=_0x3f2018(),this['vecEye']=_0x5b4cf9(0x0,0x0,this['fScale']),this['vecCenter']=_0x5b4cf9(0x0,0x0,-0x64),this['vecUp']=_0x5b4cf9(0x0,0x1,0x0);},[{'key':'SetYaw','value':function(_0x2c0d7c){this['fTheta']=_0x2c0d7c;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetPitch','value':function(_0x45eba4){this['fAlpha']=_0x45eba4;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetRoll','value':function(_0x3f6811){this['fBeta']=_0x3f6811;}},{'key':'GetRoll','value':function(){return this['fBeta'];}},{'key':'SetScale','value':function(_0x2dad8c){this['fScale']=_0x2dad8c,this['vecEye'][0x2]=this['fScale'];}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetEye','value':function(_0x32ff6a,_0x259c5b,_0x4a5008){this['vecEye'][0x0]=_0x32ff6a,this['vecEye'][0x1]=_0x259c5b,this['vecEye'][0x2]=_0x4a5008;}},{'key':'SetCenter','value':function(_0x891ddc,_0x47544f,_0x183edd){this['vecCenter'][0x0]=_0x891ddc,this['vecCenter'][0x1]=_0x47544f,this['vecCenter'][0x2]=_0x183edd;}},{'key':'SetFov','value':function(_0x376b51){this['fFov']=_0x376b51;}},{'key':'SetAspect','value':function(_0x172c5e){this['fAspect']=_0x172c5e;}},{'key':'SetNear','value':function(_0x31c17a){this['fNear']=_0x31c17a;}},{'key':'SetFar','value':function(_0x3fd77a){this['fFar']=_0x3fd77a;}},{'key':'SetOrtho','value':function(_0xd6c555){this['bOrtho']=_0xd6c555;}},{'key':'UpdateCamera','value':function(_0x346ede,_0x4d744e){if(!(_0x346ede<=0x0||_0x4d744e<=0x0)){0x1==this['bOrtho']?(function(_0x46d0db,_0x254cf0,_0x4ee493,_0x4f47fe,_0x34c6ac,_0x3d8081,_0x382848){var _0x3ff968=0x1/(_0x254cf0-_0x4ee493),_0x5abe41=0x1/(_0x4f47fe-_0x34c6ac),_0x141de6=0x1/(_0x3d8081-_0x382848);_0x46d0db[0x0]=-0x2*_0x3ff968,_0x46d0db[0x1]=0x0,_0x46d0db[0x2]=0x0,_0x46d0db[0x3]=0x0,_0x46d0db[0x4]=0x0,_0x46d0db[0x5]=-0x2*_0x5abe41,_0x46d0db[0x6]=0x0,_0x46d0db[0x7]=0x0,_0x46d0db[0x8]=0x0,_0x46d0db[0x9]=0x0,_0x46d0db[0xa]=0x2*_0x141de6,_0x46d0db[0xb]=0x0,_0x46d0db[0xc]=(_0x254cf0+_0x4ee493)*_0x3ff968,_0x46d0db[0xd]=(_0x34c6ac+_0x4f47fe)*_0x5abe41,_0x46d0db[0xe]=(_0x382848+_0x3d8081)*_0x141de6,_0x46d0db[0xf]=0x1;}(this['matProj'],0x0,(0x2-1.5*this['fAlpha'])*(_0x346ede/_0x4d744e),0x0,0x2-1.5*this['fAlpha'],this['fNear'],this['fFar']),this['matProj'][0xc]=0x0,this['matProj'][0xd]=0x0):_0xa96b89(this['matProj'],this['fFov'],_0x346ede/_0x4d744e,this['fNear'],this['fFar']);var _0x5339d8=_0x5b4cf9(0x1,0x0,0x0),_0x52f115=_0x5b4cf9(0x0,0x1,0x0),_0x1bcc5c=_0x5b4cf9(0x0,0x0,0x1),_0xbfd1ea=_0x3f2018();_0x459409(_0xbfd1ea,this['vecEye'],this['vecCenter'],this['vecUp']);var _0x4ce92d=_0x3f2018(),_0x4b5078=_0x3f2018(),_0x1c4903=_0x3f2018(),_0x2c02d8=_0x3f2018();_0x389b7a(_0x4b5078,_0x4ce92d,-this['fAlpha'],_0x5339d8),_0x389b7a(_0x1c4903,_0x4b5078,-this['fTheta'],_0x52f115),_0x389b7a(_0x2c02d8,_0x1c4903,-this['fBeta'],_0x1bcc5c),_0x917050(this['matView'],_0xbfd1ea,_0x2c02d8);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]),_0x4afbfb=_0x3bf3f2(function _0x58ee27(){_0x9cc894(this,_0x58ee27),this['fFov']=_0x122a3e,this['fAspect']=0x1,this['fNear']=0.1,this['fFar']=0x3e8,this['fAlpha']=0x0,this['fTheta']=0x0,this['fScale']=0x1,this['bPano']=!0x1,this['matView']=_0x3f2018(),this['matProj']=_0x3f2018(),this['vecEye']=_0x5b4cf9(0x0,0x0,0.99),this['vecCenter']=_0x5b4cf9(0x0,0x0,-0x64),this['vecUp']=_0x5b4cf9(0x0,0x1,0x0);},[{'key':'SetPitch','value':function(_0x1ec8de){this['fAlpha']=_0x1ec8de;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetYaw','value':function(_0x448d1c){this['fTheta']=_0x448d1c;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetScale','value':function(_0x2df189){this['fScale']=_0x2df189;}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetFov','value':function(_0x2febf5){this['fFov']=_0x2febf5;}},{'key':'SetAspect','value':function(_0x1a6c33){this['fAspect']=_0x1a6c33;}},{'key':'SetNear','value':function(_0x31d6bf){this['fNear']=_0x31d6bf;}},{'key':'SetPano','value':function(_0x3211ea){this['bPano']=_0x3211ea;}},{'key':'SetFar','value':function(_0x208d71){this['fFar']=_0x208d71;}},{'key':'UpdateCamera','value':function(_0x8ac1e2,_0x275ed1){if(!(_0x8ac1e2<=0x0||_0x275ed1<=0x0)){var _0x46ef6b=_0x8ac1e2/_0x275ed1;0x1==this['bPano']?(_0xa96b89(this['matProj'],this['fScale'],_0x46ef6b,this['fNear'],this['fFar']),this['matProj'][0x0]*=-0x1,this['matProj'][0x5]*=-0x1):(_0xa96b89(this['matProj'],this['fFov']+this['fScale']-0x1,_0x46ef6b,this['fNear'],this['fFar']),this['matProj'][0x0]=this['matProj'][0x0]*((this['fAlpha']- -1.57)/_0x515c4d*0.5-0x1),this['matProj'][0x5]=this['matProj'][0x0]*_0x46ef6b);var _0x308990=_0x5b4cf9(0x1,0x0,0x0),_0x2b1c63=_0x5b4cf9(0x0,0x1,0x0),_0x1149ae=_0x3f2018();_0x459409(_0x1149ae,this['vecEye'],this['vecCenter'],this['vecUp']);var _0x23fe40=_0x3f2018(),_0xa895e0=_0x3f2018(),_0x423674=_0x3f2018();_0x389b7a(_0xa895e0,_0x23fe40,-this['fAlpha'],_0x308990),_0x389b7a(_0x423674,_0xa895e0,-this['fTheta'],_0x2b1c63),_0x917050(this['matView'],_0x1149ae,_0x423674);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]);function _0x5a42e7(_0x7fcd73){return function(_0x2e1063,_0x370f68,_0x3e7fbd){return Math['min'](Math['max'](_0x2e1063,0x0),0x1);}(_0x7fcd73);}var _0x1e2d96=_0x3bf3f2(function _0x59d4cc(){_0x9cc894(this,_0x59d4cc),this['onlySupportedWebGL1']=!0x1,this['videoShaderProgram']=0x0,this['vertexPosBuffer']=0x0,this['texturePosBuffer']=0x0,this['indicesPosBuffer']=0x0,this['ctx']=null,this['enPixelFormat']=_0x43e6f4['SR_PF_NULL'],this['nTextureNum']=0x0,this['nSurfaceTexture']=[],this['nSurfaceTexture'][0x0]=0x0,this['nSurfaceTexture'][0x1]=0x0,this['nSurfaceTexture'][0x2]=0x0,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['bSrcRect']=!0x1,this['fSrcUseLeft']=0x0,this['fSrcUseRight']=0x1,this['fSrcUseTop']=0x0,this['fSrcUseBottom']=0x1,this['fDstUseLeft']=0x0,this['fDstUseRight']=0x1,this['fDstUseTop']=0x0,this['fDstUseBottom']=0x1,this['nPostProc']=0x0,this['fBrightness']=0x0,this['fHue']=0x0,this['fSaturation']=0x0,this['fContrast']=0x0,this['fSharpness']=0x0,this['nWndWidth']=0x0,this['nWndHeight']=0x0,this['bCullBack']=!0x1,this['nImageRotateAngle']=_0x60b01c['SR_IRA_0'],this['matRotate']=_0x3f2018(),this['bIsCapturing']=!0x1,this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['nCaptureRTTex']=0x0,this['nCaptureFBO']=0x0,this['nCaptureFBOWidth']=0x0,this['nCaptureFBOHeight']=0x0,this['nCaptureDepthbuffer']=0x0,this['bCaptureResInit']=!0x1,this['pFishParamManager']=null,this['nFECPort']=_0x547537,this['pstFishParam']=[],this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['fRotateLimitX']=0x0,this['fRotateLimitY']=0x0,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pSpherePos']=null,this['pSphereTex']=null,this['pSphereInd']=null,this['nSpherePosNum']=0x0,this['nSpherePosSize']=0x0,this['nSphereTexSize']=0x0,this['fBlackModeMinY']=0x0,this['fBlackModeMaxY']=0x0,this['enBlackSize']=_0x1e5382['SR_VLR_BLACK_NULL'],this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['fImageWidth']=0x1,this['fImageHeight']=0x1,this['fTexCenterX']=0.5,this['fTexCenterY']=0.5,this['fTexRadius']=0.5,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null,this['nMosaicShaderProgram']=0x0,this['nLineShaderProgram']=0x0,this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,this['glLinePosBuffer']=0x0,this['glLineClrBuffer']=0x0,this['nLineTriangleNum']=0x0,this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,this['glBlockPosBuffer']=0x0,this['glBlockClrBuffer']=0x0,this['nBlockShaderProgram']=0x0,this['textCanvas']=null,this['textCanvasCtx']=null,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this['nFontColorTexture']=0x0,this['pFontColorBuffer']=0x0,this['nFontShaderProgram']=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this['pFontPosVertices']=null,this['glFontVertexPosBuffer']=0x0,this['glFontTexturePosBuffer']=0x0,this['nImageShaderProgram']=0x0,this['pImagePosVertices']=null,this['pImageClrVertices']=null,this['glImagePosBuffer']=0x0,this['glImageClrBuffer']=0x0,this['nImageColorTexture']=null,this['nDrawImageWidth']=0x0,this['nDrawImageHeight']=0x0,this['nImageColorTextures']=[],this['nImageColorTextures'][0x0]=0x0,this['nImageColorTextures'][0x1]=0x0,this['nImageColorTextures'][0x2]=0x0,this['bFirstDrawImage']=!0x0,this['bAntialias']=!0x1,this['bRenderToTex']=!0x1,this['msaaFrameBuffer']=0x0,this['renderBuffer']=0x0,this['stOriginalDisplayRect']={},this['bCaptureOriginal']=!0x1;},[{'key':'SetCanvasSize','value':function(_0x45ee43,_0x5266a8){return _0x45ee43<=0x0||_0x5266a8<=0x0?_0x990bc1['SR_ERR_PARAM']:(this['nWndWidth']=_0x45ee43,this['nWndHeight']=_0x5266a8,_0x990bc1['SR_OK']);}},{'key':'Init','value':function(_0x25f7d3,_0x7d546f,_0x172ca3,_0x32265b){if(null==_0x25f7d3)return _0x990bc1['SR_ERR_PARAM'];if(null==this['ctx']&&(this['ctx']=_0x25f7d3),_0x7d546f==_0x43e6f4['SR_PF_NULL'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x1dba77=_0x990bc1['SR_OK'];return _0x172ca3!=_0x593e88['SR_DE_FISH_SEMISPHERE']&&_0x172ca3!=_0x593e88['SR_DE_PANORAMA_SPHERE']&&_0x172ca3!=_0x593e88['SR_DE_PANORAMA_PLANET']&&_0x172ca3!=_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']&&_0x172ca3!=_0x593e88['SR_DE_FISH_CYLINDER_CEILING']&&_0x172ca3!=_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']&&_0x172ca3!=_0x593e88['SR_DE_FISH_PLANET']&&_0x172ca3!=_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']&&_0x172ca3!=_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']&&_0x172ca3!=_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x172ca3!=_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']||(this['b3DPort']=!0x0,this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0)),_0x1dba77=this['_InitVideoVertex'](_0x7d546f,_0x172ca3,_0x32265b),_0x990bc1['SR_OK']!=_0x1dba77?_0x1dba77:(_0x1dba77=this['_InitVideoShader'](_0x7d546f,_0x172ca3),_0x990bc1['SR_OK']!=_0x1dba77?_0x1dba77:(_0x1dba77=this['_InitCamera'](_0x172ca3),_0x990bc1['SR_OK']!=_0x1dba77?_0x1dba77:(this['enPixelFormat']=_0x7d546f,this['enDisplayEffect']=_0x172ca3,_0x172ca3!=_0x593e88['SR_DE_FISH_SEMISPHERE']&&_0x172ca3!=_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x172ca3!=_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']||this['ctx']['enable'](this['ctx']['CULL_FACE']),_0x990bc1['SR_OK'])));}},{'key':'DeInit','value':function(){}},{'key':'SetTextureNum','value':function(_0xf3e4eb){return this['nTextureNum']=_0xf3e4eb,_0x990bc1['SR_OK'];}},{'key':'SetTextures','value':function(_0x43f5aa,_0x5d0f0a){return this['nSurfaceTexture'][_0x43f5aa]=_0x5d0f0a,_0x990bc1['SR_OK'];}},{'key':'SetWndResolution','value':function(_0x2b31ee,_0x32bbae){return _0x2b31ee<=0x0||_0x32bbae<=0x0?_0x990bc1['SR_ERR_PARAM']:(this['nWndWidth']=_0x2b31ee,this['nWndHeight']=_0x32bbae,_0x990bc1['SR_OK']);}},{'key':'GetWndResolution','value':function(_0x5cd2a2){return _0x5cd2a2['nWndWidth']=this['nWndWidth'],_0x5cd2a2['nWndHeight']=this['nWndHeight'],_0x990bc1['SR_OK'];}},{'key':'SetDisplayRect','value':function(_0x5666b2,_0x18f4d6,_0x483ccf,_0x379a34,_0x36ac64){if(null===this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x1d25da=_0x5a42e7(_0x5666b2),_0x199248=_0x5a42e7(_0x18f4d6),_0x7e27df=_0x5a42e7(_0x5666b2+_0x483ccf),_0x253418=_0x5a42e7(_0x18f4d6+_0x379a34);if(_0x1d25da>=_0x7e27df||_0x199248>=_0x253418)return _0x990bc1['SR_ERR_PARAM'];var _0x4a71cc=null,_0x59dbe5=null;switch(_0x36ac64){case _0x5a8c60['SR_SRT_SRC']:if(this['fSrcUseLeft']=_0x1d25da,this['fSrcUseTop']=_0x199248,this['fSrcUseRight']=_0x7e27df,this['fSrcUseBottom']=_0x253418,_0x60b01c['SR_IRA_0']==this['nImageRotateAngle'])_0x4a71cc=new Float32Array([this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom']]);else{if(_0x60b01c['SR_IRA_90']==this['nImageRotateAngle']){var _0x2bb00b=this['fSrcUseTop'],_0xd206ca=this['fSrcUseBottom'],_0x61566b=0x1-this['fSrcUseRight'],_0x5f508c=0x1-this['fSrcUseLeft'];this['fSrcUseLeft']=_0x2bb00b,this['fSrcUseRight']=_0xd206ca,this['fSrcUseTop']=_0x61566b,this['fSrcUseBottom']=_0x5f508c,_0x4a71cc=new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop']]);}else{if(_0x60b01c['SR_IRA_180']==this['nImageRotateAngle']){var _0x2ef247=0x1-this['fSrcUseRight'],_0x4931a0=0x1-this['fSrcUseLeft'],_0x1cb3b9=0x1-this['fSrcUseBottom'],_0x328668=0x1-this['fSrcUseTop'];this['fSrcUseLeft']=_0x2ef247,this['fSrcUseRight']=_0x4931a0,this['fSrcUseTop']=_0x1cb3b9,this['fSrcUseBottom']=_0x328668,_0x4a71cc=new Float32Array([this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop']]);}else{if(_0x60b01c['SR_IRA_270']==this['nImageRotateAngle']){var _0x559f58=0x1-this['fSrcUseBottom'],_0x5230cc=0x1-this['fSrcUseTop'],_0x596ace=this['fSrcUseLeft'],_0x54aadf=this['fSrcUseRight'];this['fSrcUseLeft']=_0x559f58,this['fSrcUseRight']=_0x5230cc,this['fSrcUseTop']=_0x596ace,this['fSrcUseBottom']=_0x54aadf,_0x4a71cc=new Float32Array([this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom']]);}}}}this['bSrcRect']=!0x0,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x4a71cc),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x4a71cc=null;break;case _0x5a8c60['SR_SRT_DST']:this['fDstUseLeft']=_0x1d25da,this['fDstUseTop']=_0x199248,this['fDstUseRight']=_0x7e27df,this['fDstUseBottom']=_0x253418,(_0x59dbe5=new Float32Array(0xc))[0x0]=0x2*this['fDstUseLeft']-0x1,_0x59dbe5[0x1]=0x1-0x2*this['fDstUseTop'],_0x59dbe5[0x2]=0x2*this['fDstUseLeft']-0x1,_0x59dbe5[0x3]=0x1-0x2*this['fDstUseBottom'],_0x59dbe5[0x4]=0x2*this['fDstUseRight']-0x1,_0x59dbe5[0x5]=0x1-0x2*this['fDstUseTop'],_0x59dbe5[0x6]=0x2*this['fDstUseRight']-0x1,_0x59dbe5[0x7]=0x1-0x2*this['fDstUseTop'],_0x59dbe5[0x8]=0x2*this['fDstUseLeft']-0x1,_0x59dbe5[0x9]=0x1-0x2*this['fDstUseBottom'],_0x59dbe5[0xa]=0x2*this['fDstUseRight']-0x1,_0x59dbe5[0xb]=0x1-0x2*this['fDstUseBottom'],this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x59dbe5),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x59dbe5=null;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'SetImagePostProcess','value':function(_0x113b43,_0x13a020){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(_0x44fad3['SR_PPT_SHARPNESS']==_0x113b43||_0x44fad3['SR_PPT_HUE']==_0x113b43){if(0x0-_0x13a020>_0x24183||_0x13a020-0x1>_0x24183)return _0x990bc1['SR_ERR_PARAM'];}else{if((_0x44fad3['SR_PPT_BRIGHTNESS']==_0x113b43||_0x44fad3['SR_PPT_SATURATION']==_0x113b43||_0x44fad3['SR_PPT_CONTRAST']==_0x113b43)&&(-0x1-_0x13a020>_0x24183||_0x13a020-0x1>_0x24183))return _0x990bc1['SR_ERR_PARAM'];}switch(_0x113b43){case _0x44fad3['SR_PPT_BRIGHTNESS']:this['fBrightness']=_0x13a020;break;case _0x44fad3['SR_PPT_HUE']:this['fHue']=_0x13a020;break;case _0x44fad3['SR_PPT_SATURATION']:this['fSaturation']=_0x13a020;break;case _0x44fad3['SR_PPT_CONTRAST']:this['fContrast']=_0x13a020;break;case _0x44fad3['SR_PPT_SHARPNESS']:this['fSharpness']=_0x13a020;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return Math['abs'](this['fBrightness']-0x0)<_0x24183&&Math['abs'](this['fHue']-0x0)<_0x24183&&Math['abs'](this['fSaturation']-0x0)<_0x24183&&Math['abs'](this['fContrast']-0x0)<_0x24183&&Math['abs'](this['fSharpness']-0x0)<_0x24183?this['nPostProc']=0x0:this['nPostProc']=0x1,_0x990bc1['SR_OK'];}},{'key':'SetRenderState','value':function(_0x2b5a9f,_0x357179){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];switch(_0x2b5a9f){case _0x1a32ef['SR_RST_VERTICALFLIP']:if(this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];break;case _0x1a32ef['SR_RST_BACK_CULL']:if(!this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];Math['abs'](_0x357179-0x0)<_0x24183?this['bCullBack']=!0x1:this['bCullBack']=!0x0;break;case _0x1a32ef['SR_RST_IMAGE_ROTATE']:if(this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x51fd37=null,_0xe5e22f=_0x60b01c['SR_IRA_0'],_0x5f1d54=_0x5b4cf9(0x0,0x0,0x1),_0x505b9b=_0x3f2018();if(Math['abs'](_0x357179-0x0)<_0x24183){if(this['nImageRotateAngle']==_0xe5e22f)break;_0x51fd37=this['bSrcRect']?new Float32Array([this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom']]):new Float32Array([0x0,0x0,0x0,0x1,0x1,0x0,0x1,0x0,0x0,0x1,0x1,0x1]),_0x3789fc(this['matRotate']);}else{if(Math['abs'](_0x357179-0x5a)<_0x24183){if(_0xe5e22f=_0x60b01c['SR_IRA_90'],this['nImageRotateAngle']==_0xe5e22f)break;_0x51fd37=this['bSrcRect']?new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop']]):new Float32Array([0x0,0x1,0x1,0x1,0x0,0x0,0x0,0x0,0x1,0x1,0x1,0x0]),_0x389b7a(this['matRotate'],_0x505b9b,1.5707963,_0x5f1d54);}else{if(Math['abs'](_0x357179-0xb4)<_0x24183){if(_0xe5e22f=_0x60b01c['SR_IRA_180'],this['nImageRotateAngle']==_0xe5e22f)break;_0x51fd37=this['bSrcRect']?new Float32Array([this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop']]):new Float32Array([0x1,0x1,0x1,0x0,0x0,0x1,0x0,0x1,0x1,0x0,0x0,0x0]),_0x389b7a(this['matRotate'],_0x505b9b,_0x515c4d,_0x5f1d54);}else{if(!(Math['abs'](_0x357179-0x10e)<_0x24183))return _0x990bc1['SR_ERR_PARAM'];if(_0xe5e22f=_0x60b01c['SR_IRA_270'],this['nImageRotateAngle']==_0xe5e22f)break;_0x51fd37=this['bSrcRect']?new Float32Array([this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseRight'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseLeft'],this['fSrcUseBottom']]):new Float32Array([0x1,0x0,0x0,0x0,0x1,0x1,0x1,0x1,0x0,0x0,0x0,0x1]),_0x389b7a(this['matRotate'],_0x505b9b,0x3*_0x515c4d/0x2,_0x5f1d54);}}}if(null==_0x51fd37)return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0xb8e45=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0xb8e45),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x51fd37,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0xb8e45,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['nImageRotateAngle']=_0xe5e22f;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'SetVideoResolution','value':function(_0x3a45ae,_0x21c8d3){return null==this['ctx']||_0x3a45ae<=0x0||_0x21c8d3<=0x0?_0x990bc1['SR_ERR_CALL_ORDER']:(this['frameDisplayWidth']=_0x3a45ae,this['frameDisplayHeight']=_0x21c8d3,_0x990bc1['SR_OK']);}},{'key':'GetCaptureSize','value':function(_0x10144f){var _0x1d52b4=arguments['length']>0x1&&void 0x0!==arguments[0x1]&&arguments[0x1];if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x10144f['nWidth']||null==_0x10144f['nWidth']||null==_0x10144f['nHeight']||null==_0x10144f['nHeight'])return _0x990bc1['SR_ERR_PARAM'];if(0x1==_0x1d52b4&&this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x31bfea=0x0,_0x38c2b5=0x0;if(0x0==_0x10144f['nWidth']&&0x0==_0x10144f['nHeight'])switch(this['enDisplayEffect']){case _0x593e88['SR_DE_FISH_PTZ_WALL']:case _0x593e88['SR_DE_FISH_PTZ_CEILING']:case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:_0x31bfea=Math['round'](0x5*this['frameDisplayHeight']/0x8),_0x38c2b5=Math['round'](0x3*_0x31bfea/0x4);break;case _0x593e88['SR_DE_NULL']:_0x1d52b4?(_0x31bfea=Math['round'](this['frameDisplayWidth']),_0x38c2b5=Math['round'](this['frameDisplayHeight'])):(_0x31bfea=Math['round']((this['fSrcUseRight']-this['fSrcUseLeft'])*this['frameDisplayWidth']),_0x38c2b5=Math['round']((this['fSrcUseBottom']-this['fSrcUseTop'])*this['frameDisplayHeight']));break;case _0x593e88['SR_DE_FISH_ORIGINAL']:case _0x593e88['SR_DE_FISH_SEMISPHERE']:case _0x593e88['SR_DE_PANORAMA_SPHERE']:case _0x593e88['SR_DE_PANORAMA_PLANET']:case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:case _0x593e88['SR_DE_FISH_PLANET']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x31bfea=Math['round'](this['frameDisplayWidth']),_0x38c2b5=Math['round'](this['frameDisplayHeight']);break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:this['frameDisplayHeight']>=0x800?(_0x31bfea=0x1800,_0x38c2b5=0x360):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x31bfea=0x1000,_0x38c2b5=0x240):(_0x31bfea=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x38c2b5=Math['round'](0x9*this['frameDisplayWidth']/0x10),_0x31bfea=Math['round'](0x2*_0x31bfea),_0x38c2b5=Math['round'](_0x38c2b5/0x2));break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:this['frameDisplayHeight']>=0xc00?(_0x31bfea=0x1000,_0x38c2b5=0x900):this['frameDisplayHeight']>=0x800&&0xc00>this['frameDisplayHeight']?(_0x31bfea=0xc00,_0x38c2b5=0x6c0):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x31bfea=0x800,_0x38c2b5=0x480):(_0x31bfea=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x38c2b5=Math['round'](0x9*_0x31bfea/0x10));break;case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:_0x31bfea=Math['round'](this['frameDisplayHeight']),_0x38c2b5=Math['round'](0x9*_0x31bfea/0x10);break;default:return _0x990bc1['SR_ERR_PARAM'];}else _0x31bfea=Math['round'](_0x10144f['nWidth']),_0x38c2b5=Math['round'](_0x10144f['nHeight']);return _0x31bfea<0x10||_0x38c2b5<0x10?_0x990bc1['SR_ERR_PARAM']:(this['nCaptureWidth']=0x4*Math['round'](_0x31bfea/0x4),this['nCaptureHeight']=Math['round'](_0x38c2b5),_0x10144f['nWidth']=this['nCaptureWidth'],_0x10144f['nHeight']=this['nCaptureHeight'],_0x10144f['nBufferLen']=this['nCaptureWidth']*this['nCaptureHeight']*0x4,this['bCaptureOriginal']=_0x1d52b4,_0x990bc1['SR_OK']);}},{'key':'CaptureScreen','value':function(_0x57fdee,_0x2d80e2){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x309607=_0x990bc1['SR_OK'];if(_0x309607=this['_BeginCapture'](),_0x990bc1['SR_OK']!=_0x309607)return this['bIsCapturing']=!0x1,_0x309607;if(0x1==this['bCaptureOriginal']&&(this['stOriginalDisplayRect']['fLeft']=this['fSrcUseLeft'],this['stOriginalDisplayRect']['fTop']=this['fSrcUseTop'],this['stOriginalDisplayRect']['fWidth']=this['fSrcUseRight']-this['fSrcUseLeft'],this['stOriginalDisplayRect']['fHeight']=this['fSrcUseBottom']-this['fSrcUseTop'],_0x309607=this['SetDisplayRect'](0x0,0x0,0x1,0x1,_0x5a8c60['SR_SRT_SRC']),_0x990bc1['SR_OK']!=_0x309607))return this['bIsCapturing']=!0x1,_0x309607;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x4242f6=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'position');if(_0x4242f6<0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['b3DPort']?this['ctx']['vertexAttribPointer'](_0x4242f6,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0):this['ctx']['vertexAttribPointer'](_0x4242f6,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x4242f6),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x2baefd=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'texCoord');if(_0x2baefd<0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['vertexAttribPointer'](_0x2baefd,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x2baefd),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x45449f=this['enDisplayEffect'],_0x599bab=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x599bab<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x599bab,0x1);var _0x42ac9c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bDataFormat');if(_0x42ac9c<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];switch(this['enPixelFormat']){case _0x43e6f4['SR_PF_YV12']:case _0x43e6f4['SR_PF_I420']:this['ctx']['uniform1i'](_0x42ac9c,0x0);break;case _0x43e6f4['SR_PF_NV12']:break;case _0x43e6f4['SR_PF_RGBA32']:case _0x43e6f4['SR_PF_SURFACE']:this['ctx']['uniform1i'](_0x42ac9c,0x1);break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}var _0x3d1241=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bDrawImage');this['ctx']['uniform1i'](_0x3d1241,0x0);var _0x2d0ac9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAlpha');switch(this['ctx']['uniform1f'](_0x2d0ac9,0x0),_0x45449f){case _0x593e88['SR_DE_NULL']:break;case _0x593e88['SR_DE_FISH_ORIGINAL']:case _0x593e88['SR_DE_FISH_PTZ_CEILING']:case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:case _0x593e88['SR_DE_FISH_PTZ_WALL']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];var _0x2ff2c3={},_0x7f0d50=_0x990bc1['SR_OK'];if(_0x7f0d50=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x2ff2c3),_0x990bc1['SR_OK']!=_0x7f0d50)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x7f0d50;if(_0x593e88['SR_DE_FISH_ORIGINAL']==_0x45449f){var _0x490b6e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x490b6e<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x490b6e,_0x2ff2c3['bBlack']);var _0x9a1bf9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x9a1bf9<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x9a1bf9,_0x2ff2c3['bCut']);}if(_0x593e88['SR_DE_FISH_PTZ_CEILING']==_0x45449f||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==_0x45449f||_0x593e88['SR_DE_FISH_PTZ_WALL']==_0x45449f){var _0x35bc81=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x35bc81<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x35bc81,_0x2ff2c3['fCosH']);var _0x2ca643=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x2ca643<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x2ca643,_0x2ff2c3['fSinH']);var _0xeeebc6=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0xeeebc6<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0xeeebc6,_0x2ff2c3['fCosV']);var _0x563691=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x563691<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x563691,_0x2ff2c3['fSinV']);var _0x33b00e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x33b00e<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x33b00e,_0x2ff2c3['fZoom']);}if(_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']==_0x45449f||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']==_0x45449f||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x45449f||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x45449f){var _0x5b38f7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x5b38f7<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x5b38f7,_0x2ff2c3['fAngle']);}var _0x261895=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x261895<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x261895,_0x2ff2c3['fRXLeft']);var _0xb941bb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0xb941bb<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0xb941bb,_0x2ff2c3['fRXRight']);var _0x2a0cf7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x2a0cf7<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x2a0cf7,_0x2ff2c3['fRYTop']);var _0x131c9d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x131c9d<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x131c9d,_0x2ff2c3['fRYBottom']);break;case _0x593e88['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0xb4b33e=this['pCamera']['GetView'](),_0x5b4c63=this['pCamera']['GetProj'](),_0x148d6c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x148d6c<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x148d6c,!0x1,_0xb4b33e);var _0x1837a3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x1837a3<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x1837a3,!0x1,_0x5b4c63);break;case _0x593e88['SR_DE_PANORAMA_SPHERE']:case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x16029d=this['pCamera']['GetView'](),_0x2e7fe4=this['pCamera']['GetProj'](),_0x558003=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x558003<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x558003,!0x1,_0x16029d);var _0xbfcfba=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0xbfcfba<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0xbfcfba,!0x1,_0x2e7fe4);break;case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x514934=this['pCamera']['GetView'](),_0x5b20bf=this['pCamera']['GetProj'](),_0x14afd0=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x14afd0<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x14afd0,!0x1,_0x514934);var _0x52e52b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x52e52b<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x52e52b,!0x1,_0x5b20bf);break;case _0x593e88['SR_DE_FISH_PLANET']:case _0x593e88['SR_DE_PANORAMA_PLANET']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](this['fRotateX']),this['pCamera']['SetYaw'](3.14+this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x29fe26=this['pCamera']['GetView'](),_0x262877=this['pCamera']['GetProj'](),_0x56e60c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x56e60c<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x56e60c,!0x1,_0x29fe26);var _0x355e6b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x355e6b<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x355e6b,!0x1,_0x262877);break;case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(null==this['pFishParamManager'])return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];var _0xc9923={},_0x49c448=_0x990bc1['SR_OK'];if(_0x49c448=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0xc9923),_0x990bc1['SR_OK']!=_0x49c448)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x49c448;this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x392004=this['pCamera']['GetView'](),_0x14d589=this['pCamera']['GetProj'](),_0x13763e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x13763e<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x13763e,!0x1,_0x392004);var _0x56dd46,_0x50a100=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x50a100<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x50a100,!0x1,_0x14d589),_0x56dd46=Math['abs'](0.785-this['fRotateX'])<0.0025?0.785:this['fRotateX'];var _0x32f9d8=new Float32Array([0x0,0x1,0x0,0x2*-_0x56dd46]),_0xbd2bf5=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'vecCylinderParam');if(_0xbd2bf5<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['uniform4f'](_0xbd2bf5,_0x32f9d8[0x0],_0x32f9d8[0x1],_0x32f9d8[0x2],_0x32f9d8[0x3]),_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['enDisplayEffect']){var _0xf72f40=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fTextureOffset');if(_0xf72f40<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0xf72f40,this['fRotateY']);}else{var _0x3305a9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fTextureOffset');if(_0x3305a9<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3305a9,-this['fRotateY']);}var _0x285156=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x285156<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x285156,_0xc9923['fRXLeft']);var _0x123ff2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x123ff2<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x123ff2,_0xc9923['fRXRight']);var _0x1b6c5e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x1b6c5e<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x1b6c5e,_0xc9923['fRYTop']);var _0x16f72f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x16f72f<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x16f72f,_0xc9923['fRYBottom']);break;default:return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_NOT_SUPPORT'];}if(this['nCaptureWidth']<=0x0||this['nCaptureHeight']<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CANVAS'];if(this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0x43e6f4['SR_PF_RGBA32']||this['enPixelFormat']==_0x43e6f4['SR_PF_SURFACE']){this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0xf01305=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0xf01305,0x0);}else{if(this['enPixelFormat']!=_0x43e6f4['SR_PF_YV12']&&this['enPixelFormat']!=_0x43e6f4['SR_PF_I420'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x56f3fd=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0x56f3fd,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x88e18d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x88e18d,0x1),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0xa0a0b9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0xa0a0b9,0x2);}if(this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6);else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_SEMISPHERE']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_PLANET']){if(this['nSemiSpherePosNum']<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_SPHERE']||this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_PLANET']||this['enDisplayEffect']==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']){if(this['nSpherePosNum']<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['bindBuffer'](this['ctx']['ELEMENT_ARRAY_BUFFER'],this['indicesPosBuffer']),this['ctx']['drawElements'](this['ctx']['TRIANGLES'],0x6*this['nSpherePosNum'],this['ctx']['UNSIGNED_SHORT'],0x0),this['ctx']['bindBuffer'](this['ctx']['ELEMENT_ARRAY_BUFFER'],null);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']){if(this['nCylinderPosNum']<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}}if(this['ctx']['useProgram'](null),_0x2d80e2||this['DoCallBack'](),0x1==this['bCaptureOriginal']){var _0x37d17a=this['nImageRotateAngle'];if(this['bSrcRect']=!0x1,_0x309607=this['SetRenderState'](_0x1a32ef['SR_RST_IMAGE_ROTATE'],0x0),_0x990bc1['SR_OK']!=_0x309607)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x309607;if(_0x309607=this['SetDisplayRect'](this['stOriginalDisplayRect']['fLeft'],this['stOriginalDisplayRect']['fTop'],this['stOriginalDisplayRect']['fWidth'],this['stOriginalDisplayRect']['fHeight'],_0x5a8c60['SR_SRT_SRC']),_0x990bc1['SR_OK']!=_0x309607)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x309607;switch(this['bSrcRect']=!0x0,_0x37d17a){case _0x60b01c['SR_IRA_0']:_0x309607=this['SetRenderState'](_0x1a32ef['SR_RST_IMAGE_ROTATE'],0x0);break;case _0x60b01c['SR_IRA_90']:_0x309607=this['SetRenderState'](_0x1a32ef['SR_RST_IMAGE_ROTATE'],0x5a);break;case _0x60b01c['SR_IRA_180']:_0x309607=this['SetRenderState'](_0x1a32ef['SR_RST_IMAGE_ROTATE'],0xb4);break;case _0x60b01c['SR_IRA_270']:_0x309607=this['SetRenderState'](_0x1a32ef['SR_RST_IMAGE_ROTATE'],0x10e);break;default:return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_NOT_SUPPORT'];}if(_0x990bc1['SR_OK']!=_0x309607)return this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x309607;}return _0x309607=this['_EndCapture'](_0x57fdee),_0x990bc1['SR_OK']!=_0x309607?_0x309607:_0x990bc1['SR_OK'];}},{'key':'SetWebGL2Support','value':function(_0x300728){return this['onlySupportedWebGL1']=_0x300728,_0x990bc1['SR_OK'];}},{'key':'SetFishParamManager','value':function(_0x1f9f61){return this['pFishParamManager']=_0x1f9f61,_0x990bc1['SR_OK'];}},{'key':'SetFECPort','value':function(_0x1d7dba){return this['nFECPort']=_0x1d7dba,_0x990bc1['SR_OK'];}},{'key':'Render','value':function(_0x53f4d8){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];switch(this['ctx']['useProgram'](this['videoShaderProgram']),this['enPixelFormat']){case _0x43e6f4['SR_PF_YV12']:case _0x43e6f4['SR_PF_I420']:this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x4b85f4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0x4b85f4,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x5f0d70=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x5f0d70,0x1),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x13cae6=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0x13cae6,0x2);break;case _0x43e6f4['SR_PF_SURFACE']:this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),!this['onlySupportedWebGL1']&&this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);var _0x426ef6=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0x426ef6,0x0);break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}var _0x3d0827=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x3d0827<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x3d0827,0x0);var _0xdaa7c5=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bDataFormat');if(_0xdaa7c5<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];switch(this['enPixelFormat']){case _0x43e6f4['SR_PF_YV12']:case _0x43e6f4['SR_PF_I420']:this['ctx']['uniform1i'](_0xdaa7c5,0x0);break;case _0x43e6f4['SR_PF_NV12']:break;case _0x43e6f4['SR_PF_RGBA32']:case _0x43e6f4['SR_PF_SURFACE']:this['ctx']['uniform1i'](_0xdaa7c5,0x1);}switch(this['enDisplayEffect']){case _0x593e88['SR_DE_NULL']:if(this['nPostProc']){var _0x4f601c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fBrightness');if(_0x4f601c<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x4f601c,this['fBrightness']);var _0x3456b7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHue');if(_0x3456b7<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3456b7,this['fHue']);var _0x52c050=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSaturation');if(_0x52c050<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x52c050,this['fSaturation']);var _0x5c89b5=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fContrast');if(_0x5c89b5<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x5c89b5,this['fContrast']);var _0x3a49da=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSharpness');if(_0x3a49da<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3a49da,this['fSharpness']);var _0x527320=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndWidth');if(_0x527320<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x527320,this['nWndWidth']);var _0x65dbeb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndHeight');if(_0x65dbeb<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x65dbeb,this['nWndHeight']);}var _0x393c6f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'nPostProc');this['ctx']['uniform1i'](_0x393c6f,this['nPostProc']);break;case _0x593e88['SR_DE_FISH_ORIGINAL']:case _0x593e88['SR_DE_FISH_PTZ_CEILING']:case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:case _0x593e88['SR_DE_FISH_PTZ_WALL']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:if(_0x593e88['SR_DE_FISH_ORIGINAL']==this['enDisplayEffect']){var _0x2128e3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x2128e3<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x2128e3,this['pstFishParam']['bBlack']);var _0x58f313=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x58f313<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x58f313,this['pstFishParam']['bCut']);}if(_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['enDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['enDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_WALL']==this['enDisplayEffect']){var _0x41d00b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x41d00b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x41d00b,this['pstFishParam']['fCosH']);var _0x240e6b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x240e6b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x240e6b,this['pstFishParam']['fSinH']);var _0x332720=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x332720<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x332720,this['pstFishParam']['fCosV']);var _0x86ddea=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x86ddea<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x86ddea,this['pstFishParam']['fSinV']);var _0x55ae54=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x55ae54<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x55ae54,this['pstFishParam']['fZoom']);}if(_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']==this['enDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']==this['enDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']==this['enDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==this['enDisplayEffect']){var _0x3cf403=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x3cf403<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3cf403,this['pstFishParam']['fAngle']);}var _0x14f349=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x14f349<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x14f349,this['pstFishParam']['fRXLeft']);var _0x13bf44=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x13bf44<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x13bf44,this['pstFishParam']['fRXRight']);var _0x173129=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x173129<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x173129,this['pstFishParam']['fRYTop']);var _0x305616=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x305616<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x305616,this['pstFishParam']['fRYBottom']);break;case _0x593e88['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x5c1c68=this['pCamera']['GetView'](),_0x54ff5b=this['pCamera']['GetProj'](),_0x2d80e8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x2d80e8<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x2d80e8,!0x1,_0x5c1c68);var _0x182c8b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x182c8b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x182c8b,!0x1,_0x54ff5b);break;case _0x593e88['SR_DE_PANORAMA_SPHERE']:case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x3629fd=this['pCamera']['GetView'](),_0x50c3a5=this['pCamera']['GetProj'](),_0x2ea079=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x2ea079<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x2ea079,!0x1,_0x3629fd);var _0x35aa0a=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x35aa0a<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x35aa0a,!0x1,_0x50c3a5);break;case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x405c7b=this['pCamera']['GetView'](),_0x2c539c=this['pCamera']['GetProj'](),_0x378dbf=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x378dbf<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x378dbf,!0x1,_0x405c7b);var _0x29239b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x29239b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x29239b,!0x1,_0x2c539c);break;case _0x593e88['SR_DE_FISH_PLANET']:case _0x593e88['SR_DE_PANORAMA_PLANET']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](this['fRotateX']),this['pCamera']['SetYaw'](3.14+this['fRotateY']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x2f7412=this['pCamera']['GetView'](),_0x4b2b3f=this['pCamera']['GetProj'](),_0x36a4ad=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x36a4ad<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x36a4ad,!0x1,_0x2f7412);var _0x5ac7ec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x5ac7ec<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x5ac7ec,!0x1,_0x4b2b3f);var _0x3de016=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bDrawImage');if(_0x3de016<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x3de016,0x0);var _0x3eb4e6=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAlpha');if(_0x3eb4e6<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3eb4e6,0x0);break;case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(null==this['pFishParamManager'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['UpdateCamera'](this['nWndWidth'],this['nWndHeight']);var _0x5b79cc=this['pCamera']['GetView'](),_0x2a3c5c=this['pCamera']['GetProj'](),_0x44f87d=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x44f87d<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x44f87d,!0x1,_0x5b79cc);var _0x158236,_0x176cca=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x176cca<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x176cca,!0x1,_0x2a3c5c),_0x158236=Math['abs'](0.785-this['fRotateX'])<0.0025?0.785:this['fRotateX'];var _0x3f6a9f=new Float32Array([0x0,0x1,0x0,0x2*-_0x158236]),_0x3f9f40=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'vecCylinderParam');if(_0x3f9f40<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['uniform4f'](_0x3f9f40,_0x3f6a9f[0x0],_0x3f6a9f[0x1],_0x3f6a9f[0x2],_0x3f6a9f[0x3]),_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['enDisplayEffect']){var _0x525473=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fTextureOffset');if(_0x525473<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x525473,this['fRotateY']);}else{var _0x247805=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fTextureOffset');if(_0x247805<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x247805,-this['fRotateY']);}var _0x51545d={},_0x4f0203=_0x990bc1['SR_OK'];if(_0x4f0203=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x51545d),_0x990bc1['SR_OK']!=_0x4f0203)return _0x4f0203;var _0xd905f2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0xd905f2<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0xd905f2,_0x51545d['fRXLeft']);var _0x3cb133=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x3cb133<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x3cb133,_0x51545d['fRXRight']);var _0x1d0c5e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x1d0c5e<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x1d0c5e,_0x51545d['fRYTop']);var _0x2c00a8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x2c00a8<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x2c00a8,_0x51545d['fRYBottom']);var _0x47eba1=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bDrawImage');if(_0x47eba1<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1i'](_0x47eba1,0x0);var _0x5671e9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAlpha');if(_0x5671e9<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x5671e9,0x0);break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x450f38=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'position');if(_0x450f38<0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['b3DPort']?this['ctx']['vertexAttribPointer'](_0x450f38,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0):this['ctx']['vertexAttribPointer'](_0x450f38,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x450f38),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x40fb1a=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'texCoord');if(_0x40fb1a<0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['vertexAttribPointer'](_0x40fb1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x40fb1a),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['viewport'](0x0,0x0,this['nWndWidth'],this['nWndHeight']),this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6);else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_SEMISPHERE']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_PLANET']){if(this['nSemiSpherePosNum']<=0x0)return _0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_SPHERE']||this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_PLANET']||this['enDisplayEffect']==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']){if(this['nSpherePosNum']<=0x0)return _0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['bindBuffer'](this['ctx']['ELEMENT_ARRAY_BUFFER'],this['indicesPosBuffer']),this['ctx']['drawElements'](this['ctx']['TRIANGLES'],0x6*this['nSpherePosNum'],this['ctx']['UNSIGNED_SHORT'],0x0),this['ctx']['bindBuffer'](this['ctx']['ELEMENT_ARRAY_BUFFER'],null);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x990bc1['SR_ERR_CALL_ORDER'];this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}}return this['ctx']['useProgram'](null),_0x990bc1['SR_OK'];}},{'key':'SetAntialias','value':function(_0x318c84){return null==this['ctx']?_0x990bc1['SR_ERR_CALL_ORDER']:(this['bAntialias']=_0x318c84,_0x990bc1['SR_OK']);}},{'key':'DelSubPort','value':function(){return null==this['ctx']?_0x990bc1['SR_ERR_CALL_ORDER']:(0x0!=this['videoShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['videoShaderProgram']),this['videoShaderProgram']=0x0),0x0!=this['vertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['vertexPosBuffer']),this['vertexPosBuffer']=0x0),0x0!=this['texturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['texturePosBuffer']),this['texturePosBuffer']=0x0),0x0!=this['indicesPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['indicesPosBuffer']),this['indicesPosBuffer']=0x0),this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,0x0!=this['glLinePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLinePosBuffer']),this['glLinePosBuffer']=0x0),this['nLineTriangleNum']=0x0,0x0!=this['nLineShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nLineShaderProgram']),this['nLineShaderProgram']=0x0),this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,0x0!=this['glBlockPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockPosBuffer']),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockClrBuffer']),this['glBlockClrBuffer']=0x0),0x0!=this['nBlockShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nBlockShaderProgram']),this['nBlockShaderProgram']=0x0),this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,0x0!=this['nFontColorTexture']&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nFontColorTexture']),this['nFontColorTexture']=0x0),this['pFontColorBuffer']=0x0,0x0!=this['nFontShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nFontShaderProgram']),this['nFontShaderProgram']=0x0),this['pFontPosVertices']=null,0x0!=this['glFontTexturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glFontTexturePosBuffer']),this['glFontTexturePosBuffer']=0x0),0x0!=this['glFontVertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glFontVertexPosBuffer']),this['glFontVertexPosBuffer']=0x0),0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureFBO']&&(this['ctx']['deleteFramebuffer'](this['nCaptureFBO']),this['nCaptureFBO']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),this['bCaptureResInit']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pSpherePos']=null,this['pSphereTex']=null,this['pSphereInd']=null,this['nSpherePosNum']=0x0,this['nSpherePosSize']=0x0,this['nSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['ctx']['disable'](this['ctx']['CULL_FACE']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),_0x990bc1['SR_OK']);}},{'key':'SetFishParam','value':function(_0x452312){return null==_0x452312?_0x990bc1['SR_ERR_PARAM']:(this['pstFishParam']=_0x452312,_0x990bc1['SR_OK']);}},{'key':'DrawLines','value':function(_0x37abdb,_0x104d10,_0x2a0dea,_0x249e8b,_0x1b1d14,_0x5c5518){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x1b7ca8=[],_0x427d9c={};return _0x427d9c['pstPoints']=_0x37abdb,_0x427d9c['nPointNum']=_0x104d10,_0x427d9c['bLoop']=_0x2a0dea,_0x427d9c['pstColor']=_0x249e8b,_0x427d9c['nLineWidth']=_0x1b1d14,_0x1b7ca8['push'](_0x427d9c),this['DrawLinesEx'](_0x1b7ca8,0x1,_0x104d10,_0x5c5518);}},{'key':'DrawLinesEx','value':function(_0x520761,_0x2f9ad2,_0x47f8d4,_0x397df8){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x520761||_0x2f9ad2<0x1||_0x47f8d4<0x2)return _0x990bc1['SR_ERR_PARAM'];if(0x0==this['nLineShaderProgram']){var _0x392b55=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0)\\x20*\\x20matRotate;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0)\\x20*\\x20matRotate;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x2fc445);if(_0x392b55<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['nLineShaderProgram']=_0x392b55;}if(0x1==_0x397df8)return this['DrawFillBlock'](_0x520761,_0x2f9ad2,_0x47f8d4);for(var _0x2a1b09=0x0,_0xe163c1=0x0;_0xe163c1<_0x2f9ad2;++_0xe163c1){if(null==_0x520761[_0xe163c1]['pstPoints']||_0x520761[_0xe163c1]['nPointNum']<=0x1||_0x520761[_0xe163c1]['nPointNum']>=0x400||_0x520761[_0xe163c1]['nLineWidth']<=0x0||null==_0x520761[_0xe163c1]['pstColor'])return _0x990bc1['SR_ERR_PARAM'];_0x2a1b09+=_0x520761[_0xe163c1]['nPointNum'];}if(_0x2a1b09!=_0x47f8d4)return _0x990bc1['SR_ERR_PARAM'];if((_0x2a1b09+=_0x2f9ad2)>this['nMaxPointNum']&&(this['nMaxPointNum']=_0x2a1b09,this['pLinePosVertices']=null,this['pLineClrVertices']=null),null==this['pLinePosVertices']&&(this['pLinePosVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x3),null==this['pLinePosVertices']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];if(this['pLinePosVertices']['fill'](0x0),null==this['pLineClrVertices']&&(this['pLineClrVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x4),null==this['pLineClrVertices']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];if(this['pLineClrVertices']['fill'](0x0),0x0==this['glLinePosBuffer']&&(this['glLinePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glLinePosBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(0x0==this['glLineClrBuffer']&&(this['glLineClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glLineClrBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];var _0x506d39=this['ComputeLinePoint'](_0x520761,_0x2f9ad2);if(_0x990bc1['SR_OK']!=_0x506d39)return _0x506d39;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFuncSeparate'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA'],this['ctx']['ONE'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x314afb=this['nLineShaderProgram'];this['ctx']['useProgram'](_0x314afb);var _0x2b4c5f=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x2b4c5f<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x2b4c5f,0x1):this['ctx']['uniform1i'](_0x2b4c5f,0x0);var _0x910ac5=this['glLinePosBuffer'],_0x396175=this['glLineClrBuffer'],_0x44c27f=this['nLineTriangleNum'],_0x2cf3ad=this['pLinePosVertices'],_0x1773c8=this['pLineClrVertices'];this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x910ac5),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2cf3ad,this['ctx']['STATIC_DRAW']);var _0x5f522b=this['ctx']['getAttribLocation'](_0x314afb,'position');this['ctx']['enableVertexAttribArray'](_0x5f522b),this['ctx']['vertexAttribPointer'](_0x5f522b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x396175),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x1773c8,this['ctx']['STATIC_DRAW']);var _0x55482c=this['ctx']['getAttribLocation'](_0x314afb,'color');this['ctx']['enableVertexAttribArray'](_0x55482c),this['ctx']['vertexAttribPointer'](_0x55482c,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x4bed99=this['ctx']['getUniformLocation'](_0x314afb,'matRotate');return _0x4bed99<=0x0?_0x990bc1['SR_ERR_WEBGL_RESOURCE']:(this['ctx']['uniformMatrix4fv'](_0x4bed99,!0x1,this['matRotate']),0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['nWndWidth'],this['nWndHeight']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x44c27f),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),_0x990bc1['SR_OK']);}},{'key':'DrawFillBlock','value':function(_0x20662b,_0x3468f8,_0x4c30ec){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x20662b||_0x3468f8<0x1||_0x4c30ec<0x2)return _0x990bc1['SR_ERR_PARAM'];for(var _0x416262=0x0,_0x24804b=0x0;_0x24804b<_0x3468f8;++_0x24804b){if(null==_0x20662b[_0x24804b]['pstPoints']||_0x20662b[_0x24804b]['nPointNum']<0x3||0x1!=_0x20662b[_0x24804b]['bLoop']||null==_0x20662b[_0x24804b]['pstColor'])return _0x990bc1['SR_ERR_PARAM'];_0x416262+=_0x20662b[_0x24804b]['nPointNum'];}if(_0x416262!==_0x4c30ec)return _0x990bc1['SR_ERR_PARAM'];var _0x34c8a4=_0x4c30ec-0x2*_0x3468f8;if(_0x34c8a4>this['nMaxFillBlockTriNum']&&(this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=_0x34c8a4),0x0==this['glBlockPosBuffer']&&(this['glBlockPosBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(0x0==this['glBlockClrBuffer']&&(this['glBlockClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockClrBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(null==this['pFillBlockPosVertices']){var _0x12ae5d=this['nMaxFillBlockTriNum'];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x12ae5d*0x3),null==this['pFillBlockPosVertices'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];}if(this['pFillBlockPosVertices']['fill'](0x0),null==this['pFillBlockClrVertices']){var _0x449cdb=this['nMaxFillBlockTriNum'];if(this['pFillBlockClrVertices']=new Float32Array(0x4*_0x449cdb*0x3),null==this['pFillBlockClrVertices'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];}this['pFillBlockClrVertices']['fill'](0x0);for(var _0x1a3bcb=0x0,_0xa6f316=0x0,_0x1a1f0d=0x0,_0x3d6108=null,_0x23ef05=null,_0x231ea2={},_0x31f636={},_0x22d67c={},_0x52e9de=0x0;_0x52e9de<_0x3468f8;++_0x52e9de){_0x1a1f0d=_0x20662b[_0x52e9de]['nPointNum'],_0x3d6108=_0x20662b[_0x52e9de]['pstPoints'],_0x23ef05=_0x20662b[_0x52e9de]['pstColor'],_0x231ea2['fX']=(_0x3d6108[0x0]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x231ea2['fX']=this['fDstUseLeft']+_0x231ea2['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x231ea2['fX']=0x2*_0x231ea2['fX']-0x1,_0x231ea2['fY']=(_0x3d6108[0x0]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x231ea2['fY']=this['fDstUseTop']+_0x231ea2['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x231ea2['fY']=0x1-0x2*_0x231ea2['fY'];for(var _0x494fe1=0x1;_0x494fe1<_0x1a1f0d-0x1;_0x494fe1++)_0x31f636['fX']=(_0x3d6108[_0x494fe1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x31f636['fX']=this['fDstUseLeft']+_0x31f636['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x31f636['fX']=0x2*_0x31f636['fX']-0x1,_0x31f636['fY']=(_0x3d6108[_0x494fe1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x31f636['fY']=this['fDstUseTop']+_0x31f636['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x31f636['fY']=0x1-0x2*_0x31f636['fY'],_0x22d67c['fX']=(_0x3d6108[_0x494fe1+0x1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x22d67c['fX']=this['fDstUseLeft']+_0x22d67c['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x22d67c['fX']=0x2*_0x22d67c['fX']-0x1,_0x22d67c['fY']=(_0x3d6108[_0x494fe1+0x1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x22d67c['fY']=this['fDstUseTop']+_0x22d67c['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x22d67c['fY']=0x1-0x2*_0x22d67c['fY'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x231ea2['fX'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x231ea2['fY'],this['pFillBlockPosVertices'][_0x1a3bcb++]=0x0,this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fR'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fG'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fB'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fA'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x31f636['fX'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x31f636['fY'],this['pFillBlockPosVertices'][_0x1a3bcb++]=0x0,this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fR'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fG'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fB'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fA'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x22d67c['fX'],this['pFillBlockPosVertices'][_0x1a3bcb++]=_0x22d67c['fY'],this['pFillBlockPosVertices'][_0x1a3bcb++]=0x0,this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fR'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fG'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fB'],this['pFillBlockClrVertices'][_0xa6f316++]=_0x23ef05['fA'];}if(0x0==this['nBlockShaderProgram']&&(this['nBlockShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x2fc445),this['nBlockShaderProgram']<=0x0))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFuncSeparate'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA'],this['ctx']['ONE'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockPosVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockClrVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](this['nBlockShaderProgram']);var _0x315cf1=this['ctx']['getUniformLocation'](this['nBlockShaderProgram'],'bCapture');if(_0x315cf1<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x315cf1,0x1):this['ctx']['uniform1i'](_0x315cf1,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']);var _0x4bf62e=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x4bf62e),this['ctx']['vertexAttribPointer'](_0x4bf62e,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']);var _0x2e26dd=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'color');return this['ctx']['enableVertexAttribArray'](_0x2e26dd),this['ctx']['vertexAttribPointer'](_0x2e26dd,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x34c8a4),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x990bc1['SR_OK'];}},{'key':'ComputeLinePoint','value':function(_0x50614c,_0x2d42fe){if(null==_0x50614c||_0x2d42fe<0x1)return _0x990bc1['SR_ERR_PARAM'];if(null==this['pLinePosVertices']||null==this['pLineClrVertices'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x136768=0x0,_0x3eedd8=0x0;0x1==this['bIsCapturing']?(_0x136768=(this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth'],_0x3eedd8=(this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']):(_0x136768=(this['fDstUseRight']-this['fDstUseLeft'])*this['nWndWidth'],_0x3eedd8=(this['fDstUseBottom']-this['fDstUseTop'])*this['nWndHeight']);for(var _0x21012c=0x0,_0x41a179=0x0,_0x4736f0=0x0,_0x1dd813=0x0,_0x44adf6=0x0,_0x2d0691=0x0,_0x42422a=0x0,_0x406ae8=0x0,_0x27bfb3=0x0,_0x7e26c9=0x0,_0x5dfd92=0x0,_0x3a917c=0x0;_0x3a917c<_0x2d42fe;++_0x3a917c){var _0x575605=[];if(!((_0x5dfd92=_0x50614c[_0x3a917c]['nPointNum'])<=0x0)){for(var _0x42b125=0x0;_0x42b125<_0x5dfd92;++_0x42b125){var _0x119ed4={};_0x119ed4['fX']=(_0x50614c[_0x3a917c]['pstPoints'][_0x42b125]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x119ed4['fX']=this['fDstUseLeft']+_0x119ed4['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x119ed4['fX']=0x2*_0x119ed4['fX']-0x1,_0x119ed4['fY']=(_0x50614c[_0x3a917c]['pstPoints'][_0x42b125]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x119ed4['fY']=this['fDstUseTop']+_0x119ed4['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x119ed4['fY']=0x1-0x2*_0x119ed4['fY'],_0x575605['push'](_0x119ed4);}if(this['nWndWidth']<=0x0||this['nWndHeight']<=0x0)return _0x990bc1['SR_ERR_CANVAS'];if(_0x2d0691=3.5*_0x50614c[_0x3a917c]['nLineWidth']/_0x136768,_0x42422a=3.5*_0x50614c[_0x3a917c]['nLineWidth']/_0x3eedd8,_0x2d0691<=0x0||_0x42422a<=0x0)return _0x990bc1['SR_ERR_PARAM'];var _0x5eed34=_0x50614c[_0x3a917c]['pstColor'];if(null==_0x5eed34||null==_0x5eed34)return _0x990bc1['SR_ERR_PARAM'];for(var _0x35c555=0x0;_0x35c555<_0x5dfd92-0x1;++_0x35c555)_0x41a179=_0x575605[_0x35c555+0x1]['fX']-_0x575605[_0x35c555]['fX'],_0x4736f0=_0x575605[_0x35c555+0x1]['fY']-_0x575605[_0x35c555]['fY'],_0x21012c=Math['sqrt'](_0x41a179*_0x41a179+_0x4736f0*_0x4736f0),Math['abs'](_0x21012c-0x0)<0.000001||(_0x1dd813=-_0x2d0691*_0x4736f0/_0x21012c/0x2,_0x44adf6=_0x42422a*_0x41a179/_0x21012c/0x2,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x35c555+0x1]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],_0x406ae8+=0x2);0x1==_0x50614c[_0x3a917c]['bLoop']&&0x2<_0x5dfd92&&(_0x41a179=_0x575605[_0x5dfd92-0x1]['fX']-_0x575605[0x0]['fX'],_0x4736f0=_0x575605[_0x5dfd92-0x1]['fY']-_0x575605[0x0]['fY'],_0x21012c=Math['sqrt'](_0x41a179*_0x41a179+_0x4736f0*_0x4736f0),Math['abs'](_0x21012c-0x0)>0.000001&&(_0x1dd813=-_0x2d0691*_0x4736f0/_0x21012c/0x2,_0x44adf6=_0x42422a*_0x41a179/_0x21012c/0x2,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[0x0]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fX']+_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fY']+_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=-0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fX']-_0x1dd813,this['pLinePosVertices'][_0x27bfb3++]=_0x575605[_0x5dfd92-0x1]['fY']-_0x44adf6,this['pLinePosVertices'][_0x27bfb3++]=0x1,this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fR'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fG'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fB'],this['pLineClrVertices'][_0x7e26c9++]=_0x5eed34['fA'],_0x406ae8+=0x2));}}return 0x0==_0x406ae8?_0x990bc1['SR_ERR_PARAM']:(this['nLineTriangleNum']=_0x406ae8,_0x990bc1['SR_OK']);}},{'key':'DrawFont','value':function(_0x2c1a9e,_0x1928c1,_0xa031b6,_0x5a6215,_0x2a98a0,_0x3233fb,_0x2635c3,_0x51d993,_0x175768,_0xb67f8f,_0x1b37a5){return _0x990bc1['SR_ERR_NOT_SUPPORT'];}},{'key':'DrawFontEx','value':function(_0x250546,_0x651399){var _0xede2c9=arguments['length']>0x2&&void 0x0!==arguments[0x2]?arguments[0x2]:0x0,_0x3b8126=arguments['length']>0x3?arguments[0x3]:void 0x0;if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(0x0>_0x651399||null==_0x250546)return _0x990bc1['SR_ERR_PARAM'];var _0x917ab6,_0x161525,_0x55c824=0x0,_0x3901ee=0x0;if(0x1==this['bIsCapturing']){if(0x0==this['nCaptureWidth']||0x0==this['nCaptureHeight'])return _0x990bc1['SR_ERR_CALL_ORDER'];_0x55c824=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth']),_0x3901ee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']);}else _0x55c824=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nWndWidth']),_0x3901ee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nWndHeight']);if(this['nDrawFontWidth']==_0x55c824&&this['nDrawFontHeight']==_0x3901ee||(this['pFontColorBuffer']=null,this['nFontColorTexture']=0x0,this['nDrawFontWidth']=_0x55c824,this['nDrawFontHeight']=_0x3901ee),0x0==this['nFontColorTexture']){if(this['nFontColorTexture']=this['ctx']['createTexture'](),0x0==this['nFontColorTexture'])return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(null==this['textCanvas']){if(this['textCanvas']=_0x3b8126,null==this['textCanvas'])return _0x990bc1['SR_ERR_FONT'];if(this['textCanvasCtx']=this['textCanvas']['getContext']('2d'),null==this['textCanvasCtx'])return _0x990bc1['SR_ERR_FONT'];}this['textCanvasCtx']['canvas']['width']=this['nDrawFontWidth'],this['textCanvasCtx']['canvas']['height']=this['nDrawFontHeight'],this['textCanvasCtx']['clearRect'](0x0,0x0,this['nDrawFontWidth'],this['nDrawFontHeight']);for(var _0x800ff2=0x0;_0x800ff2<_0x651399;++_0x800ff2){var _0x213b2e=_0x250546[_0x800ff2]['nFontWidth'],_0x4c36ec=_0x250546[_0x800ff2]['nFontHeight'];0x1==this['bIsCapturing']&&(_0x213b2e=Math['round'](this['nCaptureWidth']/this['nWndWidth']*_0x213b2e),_0x4c36ec=Math['round'](this['nCaptureHeight']/this['nWndHeight']*_0x4c36ec));var _0xba6cae=_0x213b2e<_0x4c36ec?_0x213b2e:_0x4c36ec;this['textCanvasCtx']['font']=''['concat'](_0xba6cae,'px\\x20')['concat'](_0x250546[_0x800ff2]['pFontFamily']),this['textCanvasCtx']['textAlign']=_0x250546[_0x800ff2]['textAlign']||'left',this['textCanvasCtx']['textBaseline']=_0x250546[_0x800ff2]['textBaseline']||'top',this['textCanvasCtx']['save']();var _0x3f34bf=_0x250546[_0x800ff2]['pstStartPos']['fX']*this['nDrawFontWidth'],_0xd28893=_0x250546[_0x800ff2]['pstStartPos']['fY']*this['nDrawFontHeight'];if(this['textCanvasCtx']['translate'](_0x3f34bf,_0xd28893),this['textCanvasCtx']['rotate'](_0x250546[_0x800ff2]['fRotateAngle']*Math['PI']/0xb4),_0x250546[_0x800ff2]['bBackGround']){var _0x46faf3=_0x250546[_0x800ff2]['pstStartPos']['fX'],_0x1ea9e1=_0x250546[_0x800ff2]['pstStartPos']['fY'],_0x5d1ef9=this['textCanvasCtx']['measureText'](_0x250546[_0x800ff2]['pString'])['width'],_0x169a0f=_0xba6cae;switch(this['textCanvasCtx']['textAlign']){case'center':_0x46faf3-=_0x5d1ef9/0x2;break;case'right':case'end':_0x46faf3-=_0x5d1ef9;}switch(this['textCanvasCtx']['textBaseline']){case'top':case'hanging':break;case'middle':_0x1ea9e1-=_0x169a0f/0x2;break;default:_0x1ea9e1-=_0x169a0f;}var _0x438e78=_0x250546[_0x800ff2]['pstBGColor'];this['textCanvasCtx']['fillStyle']='rgb('['concat'](0xff*_0x438e78['fR'],',\\x20')['concat'](0xff*_0x438e78['fG'],',\\x20')['concat'](0xff*_0x438e78['fB'],')'),this['textCanvasCtx']['globalAlpha']=_0x438e78['fA'],this['textCanvasCtx']['fillRect'](_0x46faf3,_0x1ea9e1,_0x5d1ef9,_0x169a0f);}var _0x15e723=_0x250546[_0x800ff2]['pstFontColor'];this['textCanvasCtx']['fillStyle']='rgb('['concat'](0xff*_0x15e723['fR'],',\\x20')['concat'](0xff*_0x15e723['fG'],',\\x20')['concat'](0xff*_0x15e723['fB'],')'),this['textCanvasCtx']['globalAlpha']=_0x250546[_0x800ff2]['pstFontColor']['fA'],this['textCanvasCtx']['fillText'](_0x250546[_0x800ff2]['pString'],0x0,0x0),this['textCanvasCtx']['restore']();}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],this['textCanvasCtx']['canvas']),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20matRotate\\x20*\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a'),this['nFontShaderProgram']<=0x0))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(0x1==this['bIsCapturing']?(_0x917ab6=this['nCaptureWidth'],_0x161525=this['nCaptureHeight']):(_0x917ab6=this['nWndWidth'],_0x161525=this['nWndHeight']),0x1==_0xede2c9){if(0x0==this['glFontVertexPosBuffer']){var _0x183b6e=new Float32Array([-0x1,-0x1,0x0,0x1,-0x1,0x0,0x1,0x1,0x0,-0x1,0x1,0x0]),_0xd24a9b=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0xd24a9b),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x183b6e,this['ctx']['STATIC_DRAW']),this['glFontVertexPosBuffer']=_0xd24a9b,_0x183b6e=0x0;}if(0x0==this['glFontTexturePosBuffer']){var _0x542353=new Float32Array([0x0,0x1,0x1,0x1,0x1,0x0,0x0,0x0]),_0x5b6ba6=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x5b6ba6),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x542353,this['ctx']['STATIC_DRAW']),this['glFontTexturePosBuffer']=_0x5b6ba6,_0x542353=0x0;}}this['ctx']['viewport'](0x0,0x0,_0x917ab6,_0x161525),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFuncSeparate'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA'],this['ctx']['ONE'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['useProgram'](this['nFontShaderProgram']);var _0x51b683=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'bCapture');if(_0x51b683<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x51b683,0x1):this['ctx']['uniform1i'](_0x51b683,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']);var _0x563900=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'texture');this['ctx']['uniform1i'](_0x563900,0x0);var _0x4f8c55=_0x3f2018(),_0x489fe7=_0x3f2018(),_0x4a2abf=_0x3f2018();_0x917050(_0x4a2abf,_0x4f8c55,_0x489fe7);var _0x288eed=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'matRotate');if(_0x288eed<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x288eed,!0x1,_0x4a2abf),0x1==_0xede2c9?this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glFontVertexPosBuffer']):this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x54b060=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x54b060),0x1==_0xede2c9?this['ctx']['vertexAttribPointer'](_0x54b060,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0):this['ctx']['vertexAttribPointer'](_0x54b060,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),0x1==_0xede2c9?this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glFontTexturePosBuffer']):this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x4ae676=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x4ae676),this['ctx']['vertexAttribPointer'](_0x4ae676,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),0x1==_0xede2c9?this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4):this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),_0x990bc1['SR_OK'];}},{'key':'DrawImage','value':function(_0x4af252,_0x433f29,_0x2e9286,_0x1cddd8,_0x3934c1,_0x31d763){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x4af252||_0x433f29<=0x0||_0x2e9286<=0x0||null==_0x1cddd8||_0x31d763<0x0||_0x31d763>0x1)return _0x990bc1['SR_ERR_PARAM'];if(this['nDrawImageWidth']=_0x433f29,this['nDrawImageHeight']=_0x2e9286,0x0==this['glImagePosBuffer']&&(this['glImagePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glImagePosBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(0x0==this['glImageClrBuffer']&&(this['glImageClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glImageClrBuffer']))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(null==this['pImageClrVertices']){if(this['pImageClrVertices']=new Float32Array(0xc),null==this['pImageClrVertices'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pImageClrVertices'][0x0]=0x0,this['pImageClrVertices'][0x1]=0x0,this['pImageClrVertices'][0x2]=0x0,this['pImageClrVertices'][0x3]=0x1,this['pImageClrVertices'][0x4]=0x1,this['pImageClrVertices'][0x5]=0x0,this['pImageClrVertices'][0x6]=0x1,this['pImageClrVertices'][0x7]=0x0,this['pImageClrVertices'][0x8]=0x0,this['pImageClrVertices'][0x9]=0x1,this['pImageClrVertices'][0xa]=0x1,this['pImageClrVertices'][0xb]=0x1;}var _0xe04a72={},_0x4223be={};if(_0xe04a72['fLeft']=(_0x1cddd8['fLeft']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0xe04a72['fRight']=(_0x1cddd8['fRight']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0xe04a72['fTop']=(_0x1cddd8['fTop']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0xe04a72['fBottom']=(_0x1cddd8['fBottom']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x4223be['fLeft']=this['fDstUseLeft']+_0xe04a72['fLeft']*(this['fDstUseRight']-this['fDstUseLeft']),_0x4223be['fRight']=this['fDstUseLeft']+_0xe04a72['fRight']*(this['fDstUseRight']-this['fDstUseLeft']),_0x4223be['fTop']=this['fDstUseTop']+_0xe04a72['fTop']*(this['fDstUseBottom']-this['fDstUseTop']),_0x4223be['fBottom']=this['fDstUseTop']+_0xe04a72['fBottom']*(this['fDstUseBottom']-this['fDstUseTop']),null==this['pImagePosVertices']&&(this['pImagePosVertices']=new Float32Array(0xc),null==this['pImagePosVertices']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];switch(this['pImagePosVertices']['fill'](0x0),this['pImagePosVertices'][0x0]=0x2*_0x4223be['fLeft']-0x1,this['pImagePosVertices'][0x1]=0x1-0x2*_0x4223be['fTop'],this['pImagePosVertices'][0x2]=0x2*_0x4223be['fLeft']-0x1,this['pImagePosVertices'][0x3]=0x1-0x2*_0x4223be['fBottom'],this['pImagePosVertices'][0x4]=0x2*_0x4223be['fRight']-0x1,this['pImagePosVertices'][0x5]=0x1-0x2*_0x4223be['fTop'],this['pImagePosVertices'][0x6]=0x2*_0x4223be['fRight']-0x1,this['pImagePosVertices'][0x7]=0x1-0x2*_0x4223be['fTop'],this['pImagePosVertices'][0x8]=0x2*_0x4223be['fLeft']-0x1,this['pImagePosVertices'][0x9]=0x1-0x2*_0x4223be['fBottom'],this['pImagePosVertices'][0xa]=0x2*_0x4223be['fRight']-0x1,this['pImagePosVertices'][0xb]=0x1-0x2*_0x4223be['fBottom'],0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['nWndWidth'],this['nWndHeight']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFuncSeparate'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA'],this['ctx']['ONE'],this['ctx']['ONE_MINUS_SRC_ALPHA']),_0x3934c1){case _0x43e6f4['SR_PF_SURFACE']:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x26ecb1=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'position');if(_0x26ecb1<0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['vertexAttribPointer'](_0x26ecb1,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x26ecb1),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x2daad0=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'texCoord');if(_0x2daad0<0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['vertexAttribPointer'](_0x2daad0,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x2daad0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](null),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4af252),0x0==this['nImageShaderProgram']){var _0x4cc0ec=this['CompileProgram'](_0x31ea18,_0x2a1640);if(_0x4cc0ec<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['nImageShaderProgram']=_0x4cc0ec;}break;case _0x43e6f4['SR_PF_RGBA32']:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4af252),0x0==this['nImageShaderProgram']){var _0x26c768=this['CompileProgram'](_0x31ea18,_0x2a1640);if(_0x26c768<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['nImageShaderProgram']=_0x26c768;}break;case _0x43e6f4['SR_PF_RGB565']:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGB'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGB'],this['ctx']['UNSIGNED_SHORT_5_6_5'],_0x4af252),0x0==this['nImageShaderProgram']){var _0x12e7d6=this['CompileProgram'](_0x31ea18,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x12e7d6<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['nImageShaderProgram']=_0x12e7d6;}break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}var _0x1d85f1=this['nImageShaderProgram'];this['ctx']['useProgram'](_0x1d85f1);var _0x17d9ab=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'bCapture');if(_0x17d9ab<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x17d9ab,0x1):this['ctx']['uniform1i'](_0x17d9ab,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']);var _0x39e76a=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'texture');this['ctx']['uniform1i'](_0x39e76a,0x0),_0x39e76a=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'fAlpha'),this['ctx']['uniform1f'](_0x39e76a,_0x31d763);var _0x11ddda=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'matRotate');if(_0x11ddda<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniformMatrix4fv'](_0x11ddda,!0x1,this['matRotate']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImagePosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImagePosVertices'],this['ctx']['STATIC_DRAW']);var _0x116ebc=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x116ebc),this['ctx']['vertexAttribPointer'](_0x116ebc,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImageClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImageClrVertices'],this['ctx']['STATIC_DRAW']);var _0x48978e=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x48978e),this['ctx']['vertexAttribPointer'](_0x48978e,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),_0x990bc1['SR_OK'];}},{'key':'DrawMosaic','value':function(_0x5ab598,_0x1fc2de,_0x11d0e6,_0x2e659a,_0x24f86f){if(_0x5ab598<0x0||_0x1fc2de<0x0||_0x11d0e6<0x0||_0x2e659a<0x0||_0x5ab598>0x1||_0x1fc2de>0x1||_0x11d0e6>0x1||_0x2e659a>0x1||_0x24f86f<=0x0)return _0x990bc1['SR_ERR_PARAM'];if(0x0==this['nMosaicShaderProgram']){var _0x45ebbf=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20out_texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20\\x20=\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20out_texCoord\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20out_texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20videoWidth;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20videoHeight;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20mosaicSize;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20left;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20right;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20top;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20bottom;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20lowp\\x20vec2\\x20uv;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv.x\\x20=\\x20floor(out_texCoord.x\\x20*\\x20videoWidth\\x20/\\x20mosaicSize)\\x20*\\x20mosaicSize\\x20/\\x20videoWidth;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv.y\\x20=\\x20floor(out_texCoord.y\\x20*\\x20videoHeight\\x20/\\x20mosaicSize)\\x20*\\x20mosaicSize\\x20/\\x20videoHeight;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20uv);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(out_texCoord.x\\x20<\\x20left\\x20||\\x20out_texCoord.x\\x20>\\x20right\\x20||\\x20out_texCoord.y\\x20<\\x20top\\x20||\\x20out_texCoord.y\\x20>\\x20bottom)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x201.0;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x45ebbf<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['nMosaicShaderProgram']=_0x45ebbf;}0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['nWndWidth'],this['nWndHeight']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFuncSeparate'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA'],this['ctx']['ONE'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x43f2f9=this['nMosaicShaderProgram'];this['ctx']['useProgram'](_0x43f2f9);var _0x3d0660=this['ctx']['getUniformLocation'](_0x43f2f9,'bCapture');if(_0x3d0660<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x3d0660,0x1):this['ctx']['uniform1i'](_0x3d0660,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]);var _0x266fe6=this['ctx']['getUniformLocation'](_0x43f2f9,'texture');this['ctx']['uniform1i'](_0x266fe6,0x0);var _0x1ea81b=this['ctx']['getUniformLocation'](_0x43f2f9,'videoWidth');if(_0x1ea81b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x1ea81b,this['frameDisplayWidth']);var _0x13094b=this['ctx']['getUniformLocation'](_0x43f2f9,'videoHeight');if(_0x13094b<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x13094b,this['frameDisplayHeight']);var _0x116ada=this['ctx']['getUniformLocation'](_0x43f2f9,'mosaicSize');if(_0x116ada<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x116ada,_0x24f86f);var _0x1f6cb6=this['ctx']['getUniformLocation'](_0x43f2f9,'left');if(_0x1f6cb6<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x1f6cb6,_0x5ab598);var _0x4adffd=this['ctx']['getUniformLocation'](_0x43f2f9,'right');if(_0x4adffd<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x4adffd,_0x1fc2de);var _0xb1be7=this['ctx']['getUniformLocation'](_0x43f2f9,'top');if(_0xb1be7<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0xb1be7,_0x11d0e6);var _0x588df7=this['ctx']['getUniformLocation'](_0x43f2f9,'bottom');if(_0x588df7<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['uniform1f'](_0x588df7,_0x2e659a);var _0xe97953=this['ctx']['getAttribLocation'](_0x43f2f9,'position');this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['vertexAttribPointer'](_0xe97953,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0xe97953);var _0x18a2cf=this['ctx']['getAttribLocation'](_0x43f2f9,'texCoord');return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['vertexAttribPointer'](_0x18a2cf,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x18a2cf),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0x990bc1['SR_OK'];}},{'key':'SetCallBack','value':function(_0x23850a,_0x30d74d,_0xe5ceb8){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];switch(_0xe5ceb8){case _0x315c65['SR_CBT_NULL']:this['pfuncCBIn']=_0x23850a,this['pUserIn']=_0x30d74d;break;case _0x315c65['SR_CBT_OUT']:this['pfuncCBOut']=_0x23850a,this['pUserOut']=_0x30d74d;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'DoCallBack','value':function(){return null==this['ctx']?_0x990bc1['SR_ERR_CALL_ORDER']:(null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x990bc1['SR_OK']);}},{'key':'SetViewParam','value':function(_0x4cf5e9,_0x447ad4){if(!this['b3DPort'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];switch(_0x4cf5e9){case _0xc57d71['SR_VT_ROTATION_X']:if((this['enDisplayEffect']==_0x593e88['SR_DE_FISH_PLANET']||this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_PLANET'])&&(_0x447ad4>1.57||_0x447ad4<-1.57))return _0x990bc1['SR_ERR_PARAM'];if(this['enDisplayEffect']==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']&&(_0x447ad4<this['fBlackModeMinY']||_0x447ad4>this['fBlackModeMaxY']))return _0x990bc1['SR_ERR_PARAM'];if((this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR'])&&(_0x447ad4>0.78539815||_0x447ad4<0x0))return _0x990bc1['SR_ERR_PARAM'];if((this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x447ad4>this['fRotateLimitX']||_0x447ad4<-this['fRotateLimitX']))return _0x990bc1['SR_ERR_PARAM'];this['fRotateX']=_0x447ad4;break;case _0xc57d71['SR_VT_ROTATION_Y']:if((this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x447ad4>this['fRotateLimitY']||_0x447ad4<-this['fRotateLimitY']))return _0x990bc1['SR_ERR_PARAM'];this['fRotateY']=_0x447ad4;break;case _0xc57d71['SR_VT_SCALE']:if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_PLANET']&&(_0x447ad4>1.2||_0x447ad4<-0.3))return _0x990bc1['SR_ERR_PARAM'];if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_SEMISPHERE']){if(_0x447ad4<-0.8||_0x447ad4>0x384)return _0x990bc1['SR_ERR_PARAM'];}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_SPHERE']){if(_0x447ad4<-0.95||_0x447ad4>0.95)return _0x990bc1['SR_ERR_PARAM'];}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']){var _0x3adfbf;if(this['enBlackSize']!==_0x1e5382['SR_VLR_BLACK_1216_2832'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if(_0x3adfbf=0.004,_0x447ad4<-0.84||_0x447ad4>0.18)return _0x990bc1['SR_ERR_PARAM'];var _0x5866c4=_0x447ad4-this['fScale'];_0x5866c4>0x0?(this['fBlackModeMaxY']-=_0x3adfbf,this['fBlackModeMinY']+=_0x3adfbf):_0x5866c4<0x0&&(this['fBlackModeMaxY']+=_0x3adfbf,this['fBlackModeMinY']-=_0x3adfbf),this['fRotateX']<this['fBlackModeMinY']?this['fRotateX']=this['fBlackModeMinY']:this['fRotateX']>this['fBlackModeMaxY']&&(this['fRotateX']=this['fBlackModeMaxY']);}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_PANORAMA_PLANET']){if(_0x447ad4<0.1||_0x447ad4>2.6)return _0x990bc1['SR_ERR_PARAM'];}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_CEILING']){if(_0x447ad4<0x0||_0x447ad4>0x384)return _0x990bc1['SR_ERR_PARAM'];}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(_0x447ad4<-0.3||_0x447ad4>0x5)return _0x990bc1['SR_ERR_PARAM'];this['_ComputeRotateLimits']();}else{if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];}}}}}}this['fScale']=_0x447ad4;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'GetViewParam','value':function(_0x4e7980,_0x4ebc53){if(!this['b3DPort'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x18afdf=0x0;switch(_0x4e7980){case _0xc57d71['SR_VT_ROTATION_X']:_0x18afdf=this['fRotateX'];break;case _0xc57d71['SR_VT_ROTATION_Y']:_0x18afdf=this['fRotateY'];break;case _0xc57d71['SR_VT_SCALE']:_0x18afdf=this['fScale'];break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x4ebc53['fValue']=_0x18afdf,_0x990bc1['SR_OK'];}},{'key':'SetViewLimitateRate','value':function(_0x3675ea){return this['enBlackSize']=_0x3675ea,_0x990bc1['SR_OK'];}},{'key':'SetRenderMode','value':function(_0x524e1f){return this['bRenderToTex']=_0x524e1f,_0x990bc1['SR_OK'];}},{'key':'_InitVideoShader','value':function(_0x39e393,_0x3554f1){var _0xd03636,_0x55a179;switch(_0x3554f1){case _0x593e88['SR_DE_NULL']:_0xd03636=_0x3a15be,_0x55a179='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec4\\x20pp;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0auniform\\x20int\\x20bDataFormat;\\x0a\\x0avec3\\x20rgb;\\x0avec3\\x20yuv2rgb(float\\x20y,\\x20float\\x20u,\\x20float\\x20v)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(r,\\x20g,\\x20b);\\x0a}\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20sharpen(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20sharpenColorU;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20sharpenColorV;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20c;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec2\\x20uv\\x20=\\x20pp.st;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20texture2D(Ytexture,\\x20uv).rgb;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(Ytexture,\\x20uv).rgb;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(Ytexture,\\x20uv).rgb;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(Ytexture,\\x20uv).rgb;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20pp.st\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColorY\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(Ytexture,\\x20uv).rgb;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,\\x20g,\\x20b,\\x20y,\\x20u,\\x20v;\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20pp.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20pp.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rgb\\x20=\\x20vec3(r,\\x20g,\\x20b);\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rgb\\x20=\\x20yuv2rgb(y,\\x20u,\\x20v);\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen(rgb);\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(rgb,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a';break;case _0x593e88['SR_DE_FISH_ORIGINAL']:_0xd03636=_0x3a15be,_0x55a179='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec4\\x20pp;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0auniform\\x20int\\x20bDataFormat;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b,y,u,v;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20pp.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20pp.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20origin.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20origin.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20origin.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20origin.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20origin.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20origin.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a';break;case _0x593e88['SR_DE_FISH_PTZ_CEILING']:_0xd03636=_0x3a15be,_0x55a179='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec4\\x20pp;\\x20\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0auniform\\x20int\\x20bDataFormat;\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x09float\\x20r,g,b,y,u,v;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20pp.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20pp.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a';break;case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:_0xd03636=_0x3a15be,_0x55a179='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec4\\x20pp;\\x20\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0auniform\\x20int\\x20bDataFormat;\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x09float\\x20r,g,b,y,u,v;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20pp.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20pp.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a';break;case _0x593e88['SR_DE_FISH_PTZ_WALL']:_0xd03636=_0x3a15be,_0x55a179='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec4\\x20pp;\\x20\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0auniform\\x20int\\x20bDataFormat;\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x09float\\x20r,g,b,y,u,v;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20pp.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20pp.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a';break;case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:_0xd03636=_0x3a15be,_0x55a179='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bDataFormat;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20pp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20pp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a';break;case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:_0xd03636=_0x3a15be,_0x55a179='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bDataFormat;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(pp.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20pp.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20pp.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20pp.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(pp.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a';break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:_0xd03636=_0x3a15be,_0x55a179='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bDataFormat;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20pp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20pp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a';break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']:_0xd03636=_0x3a15be,_0x55a179='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bDataFormat;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(pp.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20pp.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20pp.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20pp.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(pp.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a';break;case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:_0xd03636=_0x3a15be,_0x55a179='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bDataFormat;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b,y,u,v;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultTopCut\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultBottomCut\\x20=\\x200.9;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20leftCut\\x20=\\x200.0;\\x20\\x20\\x20\\x20///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20leftCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rightCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20defaultTopCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x201.0\\x20-\\x20defaultBottomCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20pp.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20pp.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpx\\x20=\\x20origin.s\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterX\\x20-\\x20fRadius;\\x20///<纹理坐标转化为原图上的实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpy\\x20=\\x20origin.t\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterY\\x20-\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20sqrt(fRadius*fRadius\\x20-\\x20(tmpy-fCenterY)*(tmpy-fCenterY));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20((tmpx-fCenterX)\\x20*\\x20d\\x20/\\x20fRadius\\x20+\\x20fCenterX)\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20tmpy\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bDataFormat\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(Ytexture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(Ytexture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20if(bDataFormat\\x20==\\x200)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y=1.1643*(y-0.0625);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u=u-0.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v=v-0.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r=y+1.5958*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g=y-0.39173*u-0.81290*v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b=y+2.017*u;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a';break;case _0x593e88['SR_DE_FISH_SEMISPHERE']:case _0x593e88['SR_DE_PANORAMA_SPHERE']:case _0x593e88['SR_DE_PANORAMA_PLANET']:case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:case _0x593e88['SR_DE_FISH_PLANET']:case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:_0xd03636='\\x0a\\x20\\x20\\x20\\x20precision\\x20lowp\\x20\\x20float;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20position;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-\\x20gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x55a179=_0x110aac;break;case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0xd03636='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20uniform\\x20highp\\x20vec4\\x20\\x20\\x20\\x20vecCylinderParam;\\x0a\\x20\\x20\\x20\\x20uniform\\x20highp\\x20float\\x20\\x20\\x20fTextureOffset;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mediump\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20dx\\x20\\x20\\x20\\x20\\x20=\\x20position.x\\x20-\\x20vecCylinderParam.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20dz\\x20\\x20\\x20\\x20\\x20=\\x20position.z\\x20-\\x20(vecCylinderParam.z\\x20+\\x20vecCylinderParam.y);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20theta\\x20\\x20=\\x20atan(abs(dx/dz));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20fDis\\x20\\x20\\x20=\\x20(3.1415926\\x20-\\x202.0\\x20*\\x20theta)\\x20*\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20fdx\\x20\\x20\\x20\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(dx\\x20>\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fdx\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fdx\\x20=\\x20-1.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fDis\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20fdx\\x20*\\x20fDis;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20lx\\x20\\x20\\x20\\x20\\x20=\\x20fDis;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20lz\\x20\\x20\\x20\\x20\\x20=\\x20vecCylinderParam.z\\x20+\\x20vecCylinderParam.y;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20fRate\\x20\\x20=\\x20(3.1415926\\x20/\\x202.0\\x20+\\x20vecCylinderParam.w)\\x20/\\x203.1415926\\x20*\\x202.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20vec4\\x20newPos\\x20\\x20=\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newPos.x\\x20\\x20\\x20\\x20\\x20=\\x20fRate\\x20*\\x20(lx\\x20-\\x20newPos.x)\\x20+\\x20newPos.x;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newPos.z\\x20\\x20\\x20\\x20\\x20=\\x20fRate\\x20*\\x20(lz\\x20-\\x20newPos.z)\\x20+\\x20newPos.z;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20newPos;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-\\x20gl_Position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20s\\x20=\\x20texCoord.s\\x20*\\x20w\\x20-\\x20fCenterX;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20highp\\x20float\\x20t\\x20=\\x20fCenterY\\x20-\\x20texCoord.t\\x20*\\x20h;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp.s\\x20=\\x20(s*cos(fTextureOffset)\\x20-\\x20t*sin(fTextureOffset)\\x20+\\x20fCenterX)\\x20/\\x20w;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp.t\\x20=\\x20(fCenterY\\x20-\\x20(s*sin(fTextureOffset)\\x20+\\x20t*cos(fTextureOffset)))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x55a179=_0x110aac;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}var _0x12cc8b=this['CompileProgram'](_0xd03636,_0x55a179);return _0x12cc8b<=0x0?_0x990bc1['SR_ERR_WEBGL_RESOURCE']:(this['videoShaderProgram']=_0x12cc8b,_0x990bc1['SR_OK']);}},{'key':'_InitVideoVertex','value':function(_0x51da06,_0x4eab44,_0x23626d){var _0x32b622=null,_0x3aea64=null,_0x5655ab=null,_0x2c833e=_0x990bc1['SR_OK'];if(0x0==this['b3DPort'])_0x32b622=new Float32Array([-0x1,0x1,-0x1,-0x1,0x1,0x1,0x1,0x1,-0x1,-0x1,0x1,-0x1]),_0x3aea64=new Float32Array([0x0,0x0,0x0,0x1,0x1,0x0,0x1,0x0,0x0,0x1,0x1,0x1]);else{if(this['fRX1']=_0x23626d['fRXLeft'],this['fRX2']=_0x23626d['fRXRight'],this['fRY1']=_0x23626d['fRYTop'],this['fRY2']=_0x23626d['fRYBottom'],_0x4eab44==_0x593e88['SR_DE_FISH_SEMISPHERE']||_0x4eab44==_0x593e88['SR_DE_FISH_PLANET'])_0x2c833e=this['_CreateSemiSphere'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2']),_0x32b622=this['pSemiSpherePos'],_0x3aea64=this['pSemiSphereTex'];else{if(_0x4eab44==_0x593e88['SR_DE_PANORAMA_SPHERE']||_0x4eab44==_0x593e88['SR_DE_PANORAMA_PLANET'])_0x2c833e=this['_CreateSphere'](),_0x32b622=this['pSpherePos'],_0x3aea64=this['pSphereTex'],_0x5655ab=this['pSphereInd'];else{if(_0x4eab44==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']){if(this['enBlackSize']!==_0x1e5382['SR_VLR_BLACK_1216_2832'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];_0x2c833e=this['_CreateEllipsoid'](),_0x32b622=this['pSpherePos'],_0x3aea64=this['pSphereTex'],_0x5655ab=this['pSphereInd'];}else{if(_0x4eab44==_0x593e88['SR_DE_FISH_CYLINDER_CEILING']||_0x4eab44==_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']||_0x4eab44==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']||_0x4eab44==_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR'])_0x2c833e=this['_CreateCylinder'](_0x4eab44,this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],0x0,0x0),_0x32b622=this['pCylinderPos'],_0x3aea64=this['pCylinderTex'];else{if(_0x4eab44!=_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x4eab44!=_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];_0x2c833e=_0x4eab44==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_CreateArcSphere'](_0x4eab44,0.05,0.95,-0.3,1.3):this['_CreateArcSphere'](_0x4eab44,-0.16,1.16,0.005,0.995),_0x32b622=this['pArcSpherePos'],_0x3aea64=this['pArcSphereTex'];}}}}if(_0x2c833e!=_0x990bc1['SR_OK'])return _0x2c833e;}if(null==_0x32b622||null==_0x3aea64)return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x423a56=this['ctx']['createBuffer']();if(this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x423a56),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x32b622,this['ctx']['STATIC_DRAW']),this['vertexPosBuffer']=_0x423a56,_0x4eab44==_0x593e88['SR_DE_PANORAMA_SPHERE']||_0x4eab44==_0x593e88['SR_DE_PANORAMA_PLANET']||_0x4eab44==_0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']){var _0x689063=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ELEMENT_ARRAY_BUFFER'],_0x689063),this['ctx']['bufferData'](this['ctx']['ELEMENT_ARRAY_BUFFER'],_0x5655ab,this['ctx']['STATIC_DRAW']),this['indicesPosBuffer']=_0x689063;}var _0x125f26=this['ctx']['createBuffer']();return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x125f26),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x3aea64,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0x125f26,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x32b622=null,_0x3aea64=null,_0x990bc1['SR_OK'];}},{'key':'_InitCamera','value':function(_0x42da68){if(null!=this['pCamera'])return _0x990bc1['SR_ERR_CALL_ORDER'];switch(_0x42da68){case _0x593e88['SR_DE_NULL']:case _0x593e88['SR_DE_FISH_ORIGINAL']:case _0x593e88['SR_DE_FISH_PTZ_CEILING']:case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:case _0x593e88['SR_DE_FISH_PTZ_WALL']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:return _0x990bc1['SR_OK'];case _0x593e88['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](_0xd5ab80),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=4.71,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x593e88['SR_DE_PANORAMA_SPHERE']:if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](_0xd5ab80),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=0x0,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x0,this['pCamera']['SetScale'](this['fScale']);break;case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:if(this['enBlackSize']!==_0x1e5382['SR_VLR_BLACK_1216_2832'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](_0xd5ab80),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=0.65,this['pCamera']['SetPitch'](this['fRotateX']),this['fScale']=0.18,this['pCamera']['SetEye'](0x0,-0.2,0.18),this['pCamera']['SetCenter'](0x0,-0.2,-0x64),this['fBlackModeMinY']=0.46,this['fBlackModeMaxY']=0.91;break;case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](_0xd5ab80),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=0.785,this['pCamera']['SetPitch'](-this['fRotateX']),this['fScale']=0x6,this['pCamera']['SetScale'](this['fScale']);break;case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetOrtho'](!0x0),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:if(this['pCamera']=new _0xfed662(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](1.25663704),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fScale']=0x2,this['pCamera']['SetScale'](this['fScale']),_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x42da68?(this['fRotateLimitX']=_0x2d8cf5,this['fRotateLimitY']=_0xbc8aa4):(this['fRotateLimitX']=_0x334a77,this['fRotateLimitY']=_0x3b1178);break;case _0x593e88['SR_DE_FISH_PLANET']:if(this['pCamera']=new _0x4afbfb(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetFov'](2.16),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=_0x122a3e,this['pCamera']['SetPitch'](this['fRotateX']),this['pCamera']['SetYaw'](_0x515c4d+this['fRotateY']),this['fScale']=0x1,this['pCamera']['SetScale'](this['fScale']);break;case _0x593e88['SR_DE_PANORAMA_PLANET']:if(this['pCamera']=new _0x4afbfb(),null==this['pCamera'])return _0x990bc1['SR_ERR_ALLOC_MEMORY'];this['pCamera']['SetPano'](!0x0),this['pCamera']['SetNear'](_0x39f2db),this['pCamera']['SetFar'](_0x5bbb66),this['fRotateX']=_0x122a3e,this['pCamera']['SetPitch'](this['fRotateX']),this['fRotateY']=-1.57,this['pCamera']['SetYaw'](_0x515c4d+this['fRotateY']),this['fScale']=2.6,this['pCamera']['SetScale'](this['fScale']);break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'CompileProgram','value':function(_0x407264,_0xdd7428){var _0x4a9d27=this['ctx'];if(null==_0x4a9d27||null==_0x407264||null==_0xdd7428)return-0x1;var _0x30959c=_0x4a9d27['createShader'](_0x4a9d27['VERTEX_SHADER']);if(_0x4a9d27['shaderSource'](_0x30959c,_0x407264),_0x4a9d27['compileShader'](_0x30959c),!_0x4a9d27['getShaderParameter'](_0x30959c,_0x4a9d27['COMPILE_STATUS']))return console['log']('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x4a9d27['getShaderInfoLog'](_0x30959c)),-0x1;var _0x54f150=_0x4a9d27['createShader'](_0x4a9d27['FRAGMENT_SHADER']);if(_0x4a9d27['shaderSource'](_0x54f150,_0xdd7428),_0x4a9d27['compileShader'](_0x54f150),!_0x4a9d27['getShaderParameter'](_0x54f150,_0x4a9d27['COMPILE_STATUS']))return console['log']('Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x4a9d27['getShaderInfoLog'](_0x54f150)),-0x1;var _0x11b756=_0x4a9d27['createProgram']();return _0x4a9d27['attachShader'](_0x11b756,_0x30959c),_0x4a9d27['attachShader'](_0x11b756,_0x54f150),_0x4a9d27['linkProgram'](_0x11b756),_0x4a9d27['getProgramParameter'](_0x11b756,_0x4a9d27['LINK_STATUS'])?(_0x4a9d27['deleteShader'](_0x30959c),_0x4a9d27['deleteShader'](_0x54f150),_0x11b756):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x4a9d27['getProgramInfoLog'](_0x11b756)),-0x1);}},{'key':'_CreateSemiSphere','value':function(_0x106879,_0x32fb72,_0x2d33d1,_0x2a093b){if(null!=this['pSemiSpherePos']||null!=this['pSemiSphereTex'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['pSemiSpherePos']=new Float32Array(0xa8c0),this['pSemiSphereTex']=new Float32Array(0x7080);for(var _0x2eb0fe=(_0x32fb72-_0x106879)/(_0x2a093b-_0x2d33d1),_0x3c10e5=(_0x32fb72-_0x106879)/0x2*0x1,_0x2c5566=6.2831852/0x3c,_0x5da12a=0.0392699075,_0x4f796d=0x0,_0x38701f=0x0,_0x3c9b73=0x0,_0x518854=0x0;_0x518854<0x3c;++_0x518854)for(var _0x19dd58=0x0;_0x19dd58<0x28;++_0x19dd58){var _0x5c8411=_0x518854*_0x2c5566;0x0==_0x518854&&(_0x4f796d=_0x5c8411);var _0x981d4c=0x3b==_0x518854?_0x4f796d:(_0x518854+0x1)*_0x2c5566,_0x571f3e=-_0x19dd58*_0x5da12a,_0x1f3d07=-(_0x19dd58+0x1)*_0x5da12a,_0x49087e=void 0x0,_0x5956dd=void 0x0;this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x571f3e)*Math['cos'](_0x5c8411),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x571f3e),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x571f3e)*Math['sin'](_0x5c8411),_0x5956dd=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['sin'](_0x5c8411),_0x49087e=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['cos'](_0x5c8411),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3,this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x1f3d07)*Math['cos'](_0x5c8411),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x1f3d07),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x1f3d07)*Math['sin'](_0x5c8411),_0x5956dd=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['sin'](_0x5c8411),_0x49087e=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['cos'](_0x5c8411),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3,this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x571f3e)*Math['cos'](_0x981d4c),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x571f3e),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x571f3e)*Math['sin'](_0x981d4c),_0x5956dd=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['sin'](_0x981d4c),_0x49087e=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['cos'](_0x981d4c),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3,this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x571f3e)*Math['cos'](_0x981d4c),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x571f3e),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x571f3e)*Math['sin'](_0x981d4c),_0x5956dd=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['sin'](_0x981d4c),_0x49087e=0.5-0.5*(0x1+_0x571f3e/1.5707963)*Math['cos'](_0x981d4c),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3,this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x1f3d07)*Math['cos'](_0x5c8411),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x1f3d07),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x1f3d07)*Math['sin'](_0x5c8411),_0x5956dd=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['sin'](_0x5c8411),_0x49087e=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['cos'](_0x5c8411),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3,this['pSemiSpherePos'][_0x38701f]=-0x1*Math['cos'](_0x1f3d07)*Math['cos'](_0x981d4c),this['pSemiSpherePos'][_0x38701f+0x1]=0x1*Math['sin'](_0x1f3d07),this['pSemiSpherePos'][_0x38701f+0x2]=-0x1*Math['cos'](_0x1f3d07)*Math['sin'](_0x981d4c),_0x5956dd=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['sin'](_0x981d4c),_0x49087e=0.5-0.5*(0x1+_0x1f3d07/1.5707963)*Math['cos'](_0x981d4c),this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x49087e*_0x3c10e5+0x1*_0x106879)/0x1,this['pSemiSphereTex'][_0x3c9b73++]=(0x2*_0x5956dd*_0x3c10e5+_0x2d33d1*_0x2eb0fe)/_0x2eb0fe,_0x38701f+=0x3;}return this['nSemiSpherePosNum']=_0x38701f/0x3,this['nSemiSpherePosSize']=0x3,this['nSemiSphereTexSize']=0x2,_0x990bc1['SR_OK'];}},{'key':'_CreateSphere','value':function(){if(null!=this['pSpherePos']||null!=this['pSphereTex'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['pSpherePos']=new Float32Array(0x1e7b),this['pSphereTex']=new Float32Array(0x1452),this['pSphereInd']=new Uint16Array(0x3a98);for(var _0x5a6909=0x0,_0x1c31dd=0x0,_0x832360=0x0;_0x832360<=_0x553509;++_0x832360)for(var _0x51b63e=_0x832360*_0x515c4d/_0x553509-1.5707963,_0x304ce8=Math['sin'](_0x51b63e),_0x14b117=Math['cos'](_0x51b63e),_0x20731a=0x0;_0x20731a<=_0x46bfa0;++_0x20731a){var _0x3cf778=0x2*_0x20731a*_0x515c4d/_0x46bfa0-_0x515c4d,_0x2aa6e0=Math['sin'](_0x3cf778),_0x16edfb=0x1*_0x14b117*Math['cos'](_0x3cf778),_0x12ac4d=0x1*_0x304ce8,_0x859a75=0x1*_0x14b117*_0x2aa6e0;this['pSpherePos'][_0x5a6909]=-_0x16edfb,this['pSpherePos'][_0x5a6909+0x1]=_0x12ac4d,this['pSpherePos'][_0x5a6909+0x2]=_0x859a75;var _0x773163=_0x20731a/_0x46bfa0,_0x4e41e9=_0x832360/_0x553509;this['pSphereTex'][_0x1c31dd++]=_0x773163,this['pSphereTex'][_0x1c31dd++]=_0x4e41e9,_0x5a6909+=0x3;}for(var _0x35b652=0x0,_0x207747=0x0;_0x207747<_0x553509;++_0x207747)for(var _0x8c981f=0x0;_0x8c981f<_0x46bfa0;++_0x8c981f){var _0x52b41e=0x33*_0x207747+_0x8c981f,_0x197982=_0x52b41e+_0x46bfa0+0x1;this['pSphereInd'][_0x35b652+0x0]=_0x52b41e,this['pSphereInd'][_0x35b652+0x1]=_0x197982,this['pSphereInd'][_0x35b652+0x2]=_0x52b41e+0x1,this['pSphereInd'][_0x35b652+0x3]=_0x197982,this['pSphereInd'][_0x35b652+0x4]=_0x197982+0x1,this['pSphereInd'][_0x35b652+0x5]=_0x52b41e+0x1,_0x35b652+=0x6;}return this['nSpherePosNum']=0x9c4,this['nSpherePosSize']=0x3,this['nSphereTexSize']=0x2,_0x990bc1['SR_OK'];}},{'key':'_CreateEllipsoid','value':function(){if(null!=this['pSpherePos']||null!=this['pSphereTex'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['pSpherePos']=new Float32Array(0x1e7b),this['pSphereTex']=new Float32Array(0x1452),this['pSphereInd']=new Uint16Array(0x3a98);for(var _0x187607=0x0,_0x273353=0x0,_0x364f5b=0x0;_0x364f5b<=_0x553509;++_0x364f5b)for(var _0x4130cf=_0x364f5b*_0x515c4d/_0x553509,_0x3e21da=Math['sin'](_0x4130cf),_0x2d6a21=Math['cos'](_0x4130cf),_0xa7fb0c=0x0;_0xa7fb0c<=_0x46bfa0;++_0xa7fb0c){var _0x122a6f=0x2*_0xa7fb0c*_0x515c4d/_0x46bfa0+_0x515c4d,_0x4401f7=Math['sin'](_0x122a6f),_0x465d8d=0x2*_0x3e21da*Math['cos'](_0x122a6f),_0x10a48f=0x1*_0x2d6a21,_0x499920=0x2*_0x3e21da*_0x4401f7;this['pSpherePos'][_0x187607++]=-_0x465d8d,this['pSpherePos'][_0x187607++]=-_0x10a48f,this['pSpherePos'][_0x187607++]=_0x499920;var _0x154d0b=_0xa7fb0c/_0x46bfa0,_0x1708a9=_0x364f5b/_0x553509;this['pSphereTex'][_0x273353++]=_0x154d0b,this['pSphereTex'][_0x273353++]=_0x1708a9;}for(var _0x20c56c=0x0,_0x4e244e=0x0;_0x4e244e<_0x553509;++_0x4e244e)for(var _0x4b2627=0x0;_0x4b2627<_0x46bfa0;++_0x4b2627){var _0x4f8567=0x33*_0x4e244e+_0x4b2627,_0x2ad463=_0x4f8567+_0x46bfa0+0x1;this['pSphereInd'][_0x20c56c+0x0]=_0x4f8567,this['pSphereInd'][_0x20c56c+0x1]=_0x2ad463,this['pSphereInd'][_0x20c56c+0x2]=_0x4f8567+0x1,this['pSphereInd'][_0x20c56c+0x3]=_0x2ad463,this['pSphereInd'][_0x20c56c+0x4]=_0x2ad463+0x1,this['pSphereInd'][_0x20c56c+0x5]=_0x4f8567+0x1,_0x20c56c+=0x6;}return this['nSpherePosNum']=0x9c4,this['nSpherePosSize']=0x3,this['nSphereTexSize']=0x2,_0x990bc1['SR_OK'];}},{'key':'_CreateCylinder','value':function(_0x3ca805,_0x524ef4,_0x59f054,_0x16d075,_0x4bef69,_0x1e8372,_0x4926ce){if(null!=this['pCylinderPos']||null!=this['pCylinderTex'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(Math['abs'](_0x1e8372-0x0)<_0x24183)this['fCylinderHeight']=0x2;else{if(_0x1e8372<0.5||_0x1e8372>0x6)return _0x990bc1['SR_ERR_PARAM'];this['fCylinderHeight']=_0x1e8372;}if(Math['abs'](_0x4926ce-0x0)<_0x24183)_0x3ca805==_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']||_0x3ca805==_0x593e88['SR_DE_FISH_CYLINDER_CEILING']?this['fCylinderRadius']=0x2:this['fCylinderRadius']=0x1;else{if(_0x4926ce<0.5||_0x4926ce>0x4)return _0x990bc1['SR_ERR_PARAM'];this['fCylinderRadius']=_0x4926ce;}if(this['pCylinderPos']=new Float32Array(0xa8c0),this['pCylinderTex']=new Float32Array(0x7080),null==this['pCylinderPos']||null==this['pCylinderTex'])return this['pCylinderPos']=null,this['pCylinderTex']=null,_0x990bc1['SR_ERR_ALLOC_MEMORY'];for(var _0xc27997=(_0x59f054-_0x524ef4)/(_0x4bef69-_0x16d075),_0x571f26=(_0x59f054-_0x524ef4)/0x2*0x1,_0x458f91=6.2831852/0x3c,_0x21841f=this['fCylinderHeight']/0x28,_0x2a04b7=0x0,_0x5e25f6=0x0,_0x376b88=0x0;_0x376b88<0x3c;++_0x376b88)for(var _0x26de1b=0x0;_0x26de1b<0x28;++_0x26de1b){var _0x1dba9b=_0x376b88*_0x458f91,_0x1ff15f=(_0x376b88+0x1)*_0x458f91,_0x26d34d=void 0x0,_0x1f0f63=void 0x0;this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1dba9b),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-_0x26de1b*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1dba9b),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*_0x26de1b)*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.1+0.01*_0x26de1b)*Math['cos'](_0x1dba9b)):(_0x26d34d=0.5-(0.5-0.01*_0x26de1b)*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.5-0.01*_0x26de1b)*Math['cos'](_0x1dba9b)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3,this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1dba9b),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-(_0x26de1b+0x1)*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1dba9b),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['cos'](_0x1dba9b)):(_0x26d34d=0.5-(0.5-0.01*(_0x26de1b+0x1))*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.5-0.01*(_0x26de1b+0x1))*Math['cos'](_0x1dba9b)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3,this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1ff15f),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-_0x26de1b*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1ff15f),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*_0x26de1b)*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.1+0.01*_0x26de1b)*Math['cos'](_0x1ff15f)):(_0x26d34d=0.5-(0.5-0.01*_0x26de1b)*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.5-0.01*_0x26de1b)*Math['cos'](_0x1ff15f)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3,this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1ff15f),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-_0x26de1b*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1ff15f),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*_0x26de1b)*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.1+0.01*_0x26de1b)*Math['cos'](_0x1ff15f)):(_0x26d34d=0.5-(0.5-0.01*_0x26de1b)*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.5-0.01*_0x26de1b)*Math['cos'](_0x1ff15f)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3,this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1dba9b),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-(_0x26de1b+0x1)*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1dba9b),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['cos'](_0x1dba9b)):(_0x26d34d=0.5-(0.5-0.01*(_0x26de1b+0x1))*Math['sin'](_0x1dba9b),_0x1f0f63=0.5+(0.5-0.01*(_0x26de1b+0x1))*Math['cos'](_0x1dba9b)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3,this['pCylinderPos'][_0x2a04b7]=-this['fCylinderRadius']*Math['sin'](_0x1ff15f),this['pCylinderPos'][_0x2a04b7+0x1]=this['fCylinderHeight']/0x2-(_0x26de1b+0x1)*_0x21841f,this['pCylinderPos'][_0x2a04b7+0x2]=-this['fCylinderRadius']*Math['cos'](_0x1ff15f),_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==_0x3ca805||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x3ca805?(_0x26d34d=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.1+0.01*(_0x26de1b+0x1))*Math['cos'](_0x1ff15f)):(_0x26d34d=0.5-(0.5-0.01*(_0x26de1b+0x1))*Math['sin'](_0x1ff15f),_0x1f0f63=0.5+(0.5-0.01*(_0x26de1b+0x1))*Math['cos'](_0x1ff15f)),this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x26d34d*_0x571f26+0x1*_0x524ef4)/0x1,this['pCylinderTex'][_0x5e25f6++]=(0x2*_0x1f0f63*_0x571f26+_0x16d075*_0xc27997)/_0xc27997,_0x2a04b7+=0x3;}return this['nCylinderPosNum']=_0x2a04b7/0x3,this['nCylinderPosSize']=0x3,this['nCylinderTexSize']=0x2,_0x990bc1['SR_OK'];}},{'key':'_CreateArcSphere','value':function(_0x8cc1d4,_0x16eb76,_0x54c7e7,_0x18a0b8,_0x488dc2){if(null!=this['pArcSpherePos']||null!=this['pArcSphereTex'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']){if(_0x18a0b8>0x0||_0x488dc2<0x1)return _0x990bc1['SR_ERR_PARAM'];}else{if(_0x8cc1d4!=_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if(_0x16eb76>0x0||_0x54c7e7<0x1)return _0x990bc1['SR_ERR_PARAM'];}if(this['fImageWidth']=0x1,this['fImageHeight']=(_0x54c7e7-_0x16eb76)/(_0x488dc2-_0x18a0b8),this['fTexCenterX']=(_0x16eb76+_0x54c7e7)/0x2*this['fImageWidth'],this['fTexCenterY']=(_0x18a0b8+_0x488dc2)/0x2*this['fImageHeight'],this['fTexRadius']=(_0x54c7e7-_0x16eb76)/0x2*this['fImageWidth'],null==this['pArcSphereTex']&&(this['pArcSphereTex']=new Float32Array(0x3960),null==this['pArcSphereTex']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];if(null==this['pArcSpherePos']&&(this['pArcSpherePos']=new Float32Array(0x5610),null==this['pArcSpherePos']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];var _0x5ebed6=new Float32Array(0x40);if(null==_0x5ebed6)return _0x990bc1['SR_ERR_ALLOC_MEMORY'];var _0x4056d1=_0x990bc1['SR_OK'];if(_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?_0x4056d1=this['_ComputeLatitudeHorizontal'](_0x5ebed6,0x19,0x28,0x1):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&(_0x4056d1=this['_ComputeLatitudeVertical'](_0x5ebed6,0x19,0x28,0x1)),_0x990bc1['SR_OK']!=_0x4056d1)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x4056d1;this['fFirstLatitude']=_0x5ebed6[0xc],this['fLastLatitude']=_0x5ebed6[0x33];var _0x336771=0x0,_0x8ed6ef=0x0,_0x29c4e0=new Float32Array(0x5);if(null==_0x29c4e0)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x990bc1['SR_ERR_ALLOC_MEMORY'];for(var _0xc4ddf4=_0x515c4d/0x18,_0x35af02=-0xc;_0x35af02<0xc;++_0x35af02)for(var _0x44de88=_0x35af02<0x0?-_0x35af02:_0x35af02,_0x738be1=_0x35af02<0x0?_0x44de88:_0x44de88+0x1,_0x5bae95=_0x35af02<0x0?0x40-0x2*(_0x44de88-0x1)-0x2:0x40-0x2*_0x44de88-0x2,_0x20a074=0x0;_0x20a074<_0x5bae95;++_0x20a074,++_0x738be1)_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3,_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3,_0x35af02>=0x0&&0x0==_0x20a074?_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1-0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1-0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1-0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1-0x1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3,_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3,_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3,_0x35af02<0x0&&_0x20a074==_0x5bae95-0x1?_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1+0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*(_0x35af02+0x1),_0x5ebed6[_0x738be1+0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1+0x1],_0x29c4e0):_0x8cc1d4==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0xc4ddf4*_0x35af02,_0x5ebed6[_0x738be1+0x1],_0x29c4e0),this['pArcSpherePos'][_0x336771]=_0x29c4e0[0x0],this['pArcSpherePos'][_0x336771+0x1]=_0x29c4e0[0x1],this['pArcSpherePos'][_0x336771+0x2]=_0x29c4e0[0x2],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x3],this['pArcSphereTex'][_0x8ed6ef++]=_0x29c4e0[0x4],_0x336771+=0x3;return this['nArcSpherePosNum']=_0x336771/0x3,this['nArcSpherePosSize']=0x3,this['nArcSphereTexSize']=0x2,_0x5ebed6=null,_0x29c4e0=null,_0x990bc1['SR_OK'];}},{'key':'_ComputeIntersectionOfPlaneAndLongtitude','value':function(_0xbe1366,_0x703369,_0x3de968){if(null==_0xbe1366)return _0x990bc1['SR_ERR_PARAM'];var _0x2da2e5,_0x5e134d=_0xbe1366[0x1]*_0x3de968,_0x41fcb3=_0xbe1366[0x2]*_0x3de968*Math['sin'](_0x703369),_0x58ffbc=-_0xbe1366[0x3],_0x1e5d19=0x0;if(_0xbe1366[0x1]>0x0){var _0x1d3357=_0x5e134d*_0x5e134d*_0x58ffbc*_0x58ffbc-(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3)*(_0x58ffbc*_0x58ffbc-_0x41fcb3*_0x41fcb3);_0x1e5d19=(-_0x5e134d*_0x58ffbc-Math['sqrt'](_0x1d3357))/(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3),_0x1d3357=_0x41fcb3*_0x41fcb3*_0x58ffbc*_0x58ffbc-(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3)*(_0x58ffbc*_0x58ffbc-_0x5e134d*_0x5e134d),Math['sqrt'](_0x1d3357);}if(_0xbe1366[0x1]<0x0){var _0x25575c=_0x5e134d*_0x5e134d*_0x58ffbc*_0x58ffbc-(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3)*(_0x58ffbc*_0x58ffbc-_0x41fcb3*_0x41fcb3);_0x1e5d19=(-_0x5e134d*_0x58ffbc+Math['sqrt'](_0x25575c))/(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3),_0x25575c=_0x41fcb3*_0x41fcb3*_0x58ffbc*_0x58ffbc-(_0x5e134d*_0x5e134d+_0x41fcb3*_0x41fcb3)*(_0x58ffbc*_0x58ffbc-_0x5e134d*_0x5e134d),Math['sqrt'](_0x25575c);}return Math['cos'](_0x703369),_0x2da2e5=-_0x3de968*_0x1e5d19,Math['sin'](_0x703369),Math['asin'](_0x2da2e5/_0x3de968);}},{'key':'_ComputeLatitudeHorizontal','value':function(_0x499ecf,_0x3fd979,_0x494545,_0x4f7d54){if(null==_0x499ecf)return _0x990bc1['SR_ERR_PARAM'];var _0x406340=0x0,_0x540c88=(this['fTexCenterY'],_0x515c4d/(_0x3fd979-0x1)),_0x5e5cdc=_0x515c4d*this['fTexCenterY']/(0x2*this['fTexRadius']),_0x379aaa=Math['asin'](this['fTexCenterY']/this['fTexRadius']),_0x4b90c7=Math['atan'](Math['cos'](_0x5e5cdc)/(Math['sin'](_0x5e5cdc)-Math['sin'](_0x379aaa))),_0x3a7bed=new Float32Array(0x4);_0x3a7bed[0x0]=0x0,_0x3a7bed[0x1]=Math['sin'](_0x4b90c7),_0x3a7bed[0x2]=Math['cos'](_0x4b90c7),_0x3a7bed[0x3]=-_0x4f7d54*Math['sin'](_0x4b90c7)*Math['sin'](_0x379aaa),_0x499ecf[_0x406340++]=_0x5e5cdc;for(var _0x32e28d=0x1;_0x32e28d<=(_0x3fd979-0x3)/0x2;++_0x32e28d){var _0x17acdf=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x3a7bed,1.5707963-_0x540c88*_0x32e28d,_0x4f7d54);_0x499ecf[_0x406340++]=_0x17acdf;}for(var _0x3509bf=-Math['asin']((this['fImageHeight']-this['fTexCenterY'])/this['fTexRadius']),_0x17a3ef=_0x379aaa,_0x1b5b6e=(_0x17a3ef-_0x3509bf)/(_0x494545-0x1),_0x5622b6=0x0;_0x5622b6<_0x494545;++_0x5622b6)_0x499ecf[_0x406340++]=_0x17a3ef-_0x5622b6*_0x1b5b6e;var _0x1b62ab=_0x3509bf,_0xa00704=_0x515c4d*(this['fTexCenterY']-this['fImageHeight'])/(0x2*this['fTexRadius']);_0x4b90c7=Math['atan'](Math['cos'](_0xa00704)/(Math['sin'](_0x1b62ab)-Math['sin'](_0xa00704)));var _0xc4daaf=new Float32Array(0x4);_0xc4daaf[0x0]=0x0,_0xc4daaf[0x1]=-Math['sin'](_0x4b90c7),_0xc4daaf[0x2]=Math['cos'](_0x4b90c7),_0xc4daaf[0x3]=_0x4f7d54*Math['sin'](_0x4b90c7)*Math['sin'](_0x1b62ab);for(var _0x462360=0x1;_0x462360<=(_0x3fd979-0x3)/0x2;++_0x462360){var _0x4d70c3=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0xc4daaf,_0x540c88*_0x462360,_0x4f7d54);_0x499ecf[_0x406340++]=_0x4d70c3;}return _0x499ecf[_0x406340++]=_0xa00704,_0x3a7bed=null,_0xc4daaf=null,_0x990bc1['SR_OK'];}},{'key':'_ComputeVertexAndTexturePosHorizontal','value':function(_0x5e32b2,_0x58cc16,_0x4e9566,_0x17cad6){if(null==_0x17cad6)return _0x990bc1['SR_ERR_PARAM'];_0x17cad6[0x2]=-_0x5e32b2*Math['cos'](_0x4e9566)*Math['sin'](_0x58cc16),_0x17cad6[0x0]=_0x5e32b2*Math['cos'](_0x4e9566)*Math['cos'](_0x58cc16),_0x17cad6[0x1]=_0x5e32b2*Math['sin'](_0x4e9566);var _0x11be44,_0x55c1ed=-Math['asin'](-_0x17cad6[0x2]/_0x5e32b2)/_0x515c4d;_0x11be44=_0x4e9566>=0x0?Math['acos'](_0x17cad6[0x0]/Math['sqrt'](_0x17cad6[0x0]*_0x17cad6[0x0]+_0x17cad6[0x1]*_0x17cad6[0x1])):6.2831852-Math['acos'](_0x17cad6[0x0]/Math['sqrt'](_0x17cad6[0x0]*_0x17cad6[0x0]+_0x17cad6[0x1]*_0x17cad6[0x1]));var _0x52bfa2=this['fTexCenterX']-this['fTexRadius'],_0x47f670=this['fTexRadius']-this['fTexCenterY'];return _0x17cad6[0x3]=(Math['cos'](_0x11be44)*this['fTexRadius']*(0x1+0x2*_0x55c1ed)+this['fTexRadius']+_0x52bfa2)/this['fImageWidth'],_0x17cad6[0x4]=(Math['sin'](_0x11be44)*this['fTexRadius']*(-0x1-0x2*_0x55c1ed)+this['fTexRadius']-_0x47f670)/this['fImageHeight'],_0x990bc1['SR_OK'];}},{'key':'_ComputeLatitudeVertical','value':function(_0x5a1563,_0x36f5ea,_0x366ed7,_0x261186){if(null==_0x5a1563)return _0x990bc1['SR_ERR_PARAM'];var _0x15de26=0x0,_0x41d43a=_0x515c4d/(_0x36f5ea-0x1),_0x39f38e=_0x515c4d*this['fTexCenterX']/(0x2*this['fTexRadius']),_0x5f2a52=Math['asin'](this['fTexCenterX']/this['fTexRadius']),_0x33b224=Math['atan'](Math['cos'](_0x39f38e)/(Math['sin'](_0x39f38e)-Math['sin'](_0x5f2a52))),_0x1c74ac=new Float32Array(0x4);_0x1c74ac[0x0]=0x0,_0x1c74ac[0x1]=Math['sin'](_0x33b224),_0x1c74ac[0x2]=Math['cos'](_0x33b224),_0x1c74ac[0x3]=-_0x261186*Math['sin'](_0x33b224)*Math['sin'](_0x5f2a52),_0x5a1563[_0x15de26++]=_0x39f38e;for(var _0x139e99=0x1;_0x139e99<=(_0x36f5ea-0x3)/0x2;++_0x139e99){var _0x48d704=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x1c74ac,1.5707963-_0x41d43a*_0x139e99,_0x261186);_0x5a1563[_0x15de26++]=_0x48d704;}for(var _0x2f3729=-Math['asin']((this['fImageWidth']-this['fTexCenterX'])/this['fTexRadius']),_0x403708=_0x5f2a52,_0xf55cf5=(_0x403708-_0x2f3729)/(_0x366ed7-0x1),_0x128bf0=0x0;_0x128bf0<_0x366ed7;++_0x128bf0)_0x5a1563[_0x15de26++]=_0x403708-_0x128bf0*_0xf55cf5;var _0x6bb68f=_0x2f3729,_0x33e3f1=_0x515c4d*(this['fTexCenterX']-this['fImageWidth'])/(0x2*this['fTexRadius']);_0x33b224=Math['atan'](Math['cos'](_0x33e3f1)/(Math['sin'](_0x6bb68f)-Math['sin'](_0x33e3f1)));var _0x59da8c=new Float32Array(0x4);_0x59da8c[0x0]=0x0,_0x59da8c[0x1]=-Math['sin'](_0x33b224),_0x59da8c[0x2]=Math['cos'](_0x33b224),_0x59da8c[0x3]=_0x261186*Math['sin'](_0x33b224)*Math['sin'](_0x6bb68f);for(var _0x4a7d73=0x1;_0x4a7d73<=(_0x36f5ea-0x3)/0x2;++_0x4a7d73){var _0x4ac627=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x59da8c,_0x41d43a*_0x4a7d73,_0x261186);_0x5a1563[_0x15de26++]=_0x4ac627;}return _0x5a1563[_0x15de26++]=_0x33e3f1,_0x1c74ac=null,_0x59da8c=null,_0x990bc1['SR_OK'];}},{'key':'_ComputeVertexAndTexturePosVertical','value':function(_0x392b87,_0x3cdbc0,_0x5c5005,_0x342efa){if(null==_0x342efa)return _0x990bc1['SR_ERR_PARAM'];_0x342efa[0x2]=-_0x392b87*Math['cos'](_0x5c5005)*Math['sin'](_0x3cdbc0),_0x342efa[0x1]=_0x392b87*Math['cos'](_0x5c5005)*Math['cos'](_0x3cdbc0),_0x342efa[0x0]=-_0x392b87*Math['sin'](_0x5c5005);var _0x435ead,_0x1a774f=-Math['asin'](-_0x342efa[0x2]/_0x392b87)/_0x515c4d;_0x435ead=_0x3cdbc0<=1.5707963?Math['acos'](_0x342efa[0x0]/Math['sqrt'](_0x342efa[0x0]*_0x342efa[0x0]+_0x342efa[0x1]*_0x342efa[0x1])):6.2831852-Math['acos'](_0x342efa[0x0]/Math['sqrt'](_0x342efa[0x0]*_0x342efa[0x0]+_0x342efa[0x1]*_0x342efa[0x1]));var _0x29f997=this['fTexCenterX']-this['fTexRadius'],_0x4c9e2f=this['fTexRadius']-this['fTexCenterY'];return _0x342efa[0x3]=(Math['cos'](_0x435ead)*this['fTexRadius']*(0x1+0x2*_0x1a774f)+this['fTexRadius']+_0x29f997)/this['fImageWidth'],_0x342efa[0x4]=(Math['sin'](_0x435ead)*this['fTexRadius']*(-0x1-0x2*_0x1a774f)+this['fTexRadius']-_0x4c9e2f)/this['fImageHeight'],_0x990bc1['SR_OK'];}},{'key':'_BeginCapture','value':function(){var _0x4f30c1=_0x990bc1['SR_OK'];return 0x0==this['bCaptureResInit']&&(_0x4f30c1=this['_InitRenderTarget'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0x990bc1['SR_OK']!=_0x4f30c1)?_0x4f30c1:(_0x4f30c1=this['_Resize'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0x990bc1['SR_OK']!=_0x4f30c1?_0x4f30c1:(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['bIsCapturing']=!0x0,_0x990bc1['SR_OK']));}},{'key':'_InitRenderTarget','value':function(_0x363163,_0xe3205,_0x5edcbc,_0x2b688e){if(0x0!=this['nCaptureRTTex']||0x0!=this['nCaptureFBO'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(_0x363163<=0x0||_0xe3205<=0x0)return _0x990bc1['SR_ERR_PARAM'];if(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MINMAP_LINEAR']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x363163,_0xe3205,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),0x0==this['nCaptureFBO']&&(this['nCaptureFBO']=this['ctx']['createFramebuffer'](),this['nCaptureFBO']<=0x0))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x2b688e&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x363163,_0xe3205),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}return this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['nCaptureFBOWidth']=_0x363163,this['nCaptureFBOHeight']=_0xe3205,this['bCaptureResInit']=!0x0,_0x990bc1['SR_OK'];}},{'key':'_Resize','value':function(_0x10beb8,_0x1db30c,_0x213bd3,_0x3a9a82){if(this['nCaptureFBOWidth']!=_0x10beb8||this['nCaptureFBOHeight']!=_0x1db30c){if(this['nCaptureFBOWidth']=_0x10beb8,this['nCaptureFBOHeight']=_0x1db30c,0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),0x0==this['nCaptureRTTex']&&(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0))return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MINMAP_LINEAR']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nCaptureFBOWidth'],this['nCaptureFBOHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x3a9a82&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x10beb8,_0x1db30c),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null);}return _0x990bc1['SR_OK'];}},{'key':'_EndCapture','value':function(_0x4841ff){return null==this['ctx']?(this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_CALL_ORDER']):null==_0x4841ff['pBuffer']||null==_0x4841ff['pBuffer']?(this['bIsCapturing']=!0x1,this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),_0x990bc1['SR_ERR_PARAM']):(this['ctx']['readPixels'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4841ff['pBuffer']),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['bIsCapturing']=!0x1,_0x990bc1['SR_OK']);}},{'key':'_ComputeRotateLimits','value':function(){if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){var _0x60ce58,_0x3feff6;if(this['enDisplayEffect']==_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?(_0x60ce58=_0x2d8cf5,_0x3feff6=_0xbc8aa4):(_0x60ce58=_0x334a77,_0x3feff6=_0x3b1178),0x0==this['nWndWidth']||0x0==this['nWndHeight'])this['fRotateLimitX']=_0x60ce58,this['fRotateLimitY']=_0x3feff6;else{var _0x30e875=Math['tan'](2.748893525);if(Math['abs'](_0x30e875*this['fScale'])<0x1){var _0xdba1a5=_0x30e875*_0x30e875+0x1,_0x4c3154=-0x2*_0x30e875*_0x30e875*this['fScale'],_0x3ed9e1=_0x30e875*_0x30e875*this['fScale']*this['fScale']-0x1,_0x2bfb0f=(-_0x4c3154-Math['sqrt'](_0x4c3154*_0x4c3154-0x4*_0xdba1a5*_0x3ed9e1))/(0x2*_0xdba1a5),_0x3eb74e=_0x30e875*(_0x2bfb0f-this['fScale']);this['fRotateLimitX']=Math['acos'](_0x3eb74e/Math['sqrt'](_0x2bfb0f*_0x2bfb0f+_0x3eb74e*_0x3eb74e)),this['fRotateLimitX']<_0x60ce58&&(this['fRotateLimitX']=_0x60ce58);}else this['fRotateLimitX']=_0x60ce58;var _0x56321e=Math['atan'](this['nWndWidth']/this['nWndHeight']*Math['tan'](_0xd5ab80/0x2));if(_0x30e875=Math['tan'](_0x515c4d-_0x56321e),Math['abs'](_0x30e875*this['fScale'])<0x1){var _0x13470c=_0x30e875*_0x30e875+0x1,_0x16856d=-0x2*_0x30e875*_0x30e875*this['fScale'],_0x1085a8=_0x30e875*_0x30e875*this['fScale']*this['fScale']-0x1,_0x45381f=(-_0x16856d-Math['sqrt'](_0x16856d*_0x16856d-0x4*_0x13470c*_0x1085a8))/(0x2*_0x13470c),_0x4874d7=_0x30e875*(_0x45381f-this['fScale']);this['fRotateLimitY']=Math['acos'](_0x4874d7/Math['sqrt'](_0x45381f*_0x45381f+_0x4874d7*_0x4874d7)),this['fRotateLimitY']<_0x3feff6&&(this['fRotateLimitY']=_0x3feff6);}else this['fRotateLimitY']=_0x3feff6;}this['fRotateX']>this['fRotateLimitX']&&(this['fRotateX']=this['fRotateLimitX']),this['fRotateX']<-this['fRotateLimitX']&&(this['fRotateX']=-this['fRotateLimitX']),this['fRotateY']>this['fRotateLimitY']&&(this['fRotateY']=this['fRotateLimitX']),this['fRotateY']<-this['fRotateLimitX']&&(this['fRotateY']=-this['fRotateLimitX']);}return _0x990bc1['SR_OK'];}},{'key':'SetMSAACache','value':function(_0x1774ea,_0x1c248e){return this['msaaFrameBuffer']=_0x1774ea,this['renderBuffer']=_0x1c248e,_0x990bc1['SR_OK'];}}]),_0x1a61f9=_0x3bf3f2(function _0x21e54a(){_0x9cc894(this,_0x21e54a),this['canvas']=null,this['ctx']=null,this['pFrameData']=null,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bAntialiasStateNeedChange']=!0x1,this['bRecreateTex']=!0x0,this['nSurfaceTexture']=[],this['nSurfaceTexture'][0x0]=0x0,this['nSurfaceTexture'][0x1]=0x0,this['nSurfaceTexture'][0x2]=0x0,this['bOpenMsaa']=!0x1,this['nMsaaFBO']=0x0,this['nResolveFBO']=0x0,this['nMsaaColorBuffer']=0x0,this['nResolveTexture']=0x0,this['nMsaaSample']=0x0,this['pFishParamManager']=null,this['enDisplayEffect']=_0x593e88['SR_DE_NULL'],this['nFECPort']=_0x547537,this['enPixelFormat']=_0x43e6f4['SR_PF_NULL'],this['nTextureNum']=0x0,this['nViewLimitateRate']=_0x1e5382['SR_VLR_BLACK_NULL'],this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['pSubDisplay']=null,this['nRTWidth']=0x0,this['nRTHeight']=0x0,this['pRenderToTex']=null,this['bRenderToTex']=!0x1,this['b3DPort']=!0x1,this['preImageRotateValue']=0x0;},[{'key':'SR_Init','value':function(_0x85468f,_0x1bea90){if(null==_0x85468f)return _0x990bc1['SR_ERR_PARAM'];if(this['canvas']=_0x85468f,this['ctx']=this['canvas']['getContext']('webgl2'),!this['ctx']){if(this['ctx']=this['canvas']['getContext']('webgl')||this['canvas']['getContext']('experimental-webgl'),!this['ctx'])return console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL'),_0x990bc1['SR_ERR_CANVAS'];this['onlySupportedWebGL1']=!0x0,console['log']('only\\x20support\\x20webgl1');}if(_0x1bea90==_0x43e6f4['SR_PF_NV12']||_0x1bea90==_0x43e6f4['SR_PF_NV21'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];switch(_0x1bea90){case _0x43e6f4['SR_PF_YV12']:case _0x43e6f4['SR_PF_I420']:this['nTextureNum']=0x3;break;case _0x43e6f4['SR_PF_SURFACE']:this['nTextureNum']=0x1;break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return this['enPixelFormat']=_0x1bea90,_0x990bc1['SR_OK'];}},{'key':'SR_AddSubPort','value':function(_0x106aca){var _0x100bc7=_0x547537;if(null==this['ctx'])return _0x100bc7;if(null!=this['pFishParamManager']?(_0x100bc7=this['pFishParamManager']['GetFECPort'](_0x106aca),this['b3DPort']=!0x0):_0x106aca==_0x593e88['SR_DE_NULL']&&(_0x100bc7=0x0),_0x100bc7==_0x547537)return _0x547537;this['nFECPort']=_0x100bc7;var _0x3fc90e=_0x990bc1['SR_OK'];if(null==this['pSubDisplay']&&(this['pSubDisplay']=new _0x1e2d96(),null==this['pSubDisplay']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];if((_0x3fc90e=this['pSubDisplay']['SetCanvasSize'](this['canvas']['width'],this['canvas']['height']))!=_0x990bc1['SR_OK'])return _0x3fc90e;if((_0x3fc90e=this['pSubDisplay']['SetWebGL2Support'](this['onlySupportedWebGL1']))!=_0x990bc1['SR_OK'])return _0x3fc90e;var _0x36ee18={};if(null!=this['pFishParamManager']){this['pSubDisplay']['SetFishParamManager'](this['pFishParamManager']),this['pSubDisplay']['SetFECPort'](this['nFECPort']);for(var _0x1e786c=0x0;_0x1e786c<_0x4fe2fc&&_0x990bc1['SR_OK']!=this['pFishParamManager']['GetRenderParam'](_0x1e786c,_0x36ee18);++_0x1e786c);}if(this['pSubDisplay']['SetViewLimitateRate'](this['nViewLimitateRate']),(_0x3fc90e=this['pSubDisplay']['Init'](this['ctx'],this['enPixelFormat'],_0x106aca,_0x36ee18))!=_0x990bc1['SR_OK'])return _0x3fc90e;if(_0x593e88['SR_DE_NULL']!=_0x106aca){_0x3fc90e=this['pFishParamManager']['SetPTZDisplayMode'](_0x28e52b['SR_DM_NULL']);var _0x1adf6a={};if((_0x3fc90e=this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x1adf6a))!=_0x990bc1['SR_OK'])return _0x3fc90e;if(_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x106aca){if(_0x1adf6a['nFishParamType']=_0x53c56d['SR_FPT_CENTER'],_0x1adf6a['fRXLeft']=0.05,_0x1adf6a['fRXRight']=0.95,_0x1adf6a['fRYTop']=-0.3,_0x1adf6a['fRYBottom']=1.3,(_0x3fc90e=this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x1adf6a))!=_0x990bc1['SR_OK'])return _0x3fc90e;}else{if(_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x106aca&&(_0x1adf6a['nFishParamType']=_0x53c56d['SR_FPT_CENTER'],_0x1adf6a['fRXLeft']=-0.16,_0x1adf6a['fRXRight']=1.16,_0x1adf6a['fRYTop']=0.005,_0x1adf6a['fRYBottom']=0.995,(_0x3fc90e=this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x1adf6a))!=_0x990bc1['SR_OK']))return _0x3fc90e;}}return null!=this['pFishParamManager']&&this['pFishParamManager']['ComputePTZPoints'](),this['enDisplayEffect']=_0x106aca,this['nFECPort'];}},{'key':'SR_UpdateFrameData','value':function(_0x26c16c,_0x497e19,_0x4a503e,_0x2ac0b2,_0x2b54e7){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x26c16c||_0x497e19<=0x0||_0x4a503e<=0x0)return _0x990bc1['SR_ERR_PARAM'];this['frameDisplayWidth']==_0x497e19&&this['frameDisplayHeight']==_0x4a503e||(this['bRecreateTex']=!0x0);var _0x5f403b=_0x990bc1['SR_OK'];if(_0x43e6f4['SR_PF_SURFACE']==this['enPixelFormat'])this['frameDisplayWidth']=_0x497e19,this['frameDisplayHeight']=_0x4a503e;else{if(_0x5f403b=this['_ResizeFrameData'](_0x26c16c,_0x497e19,_0x4a503e,_0x2ac0b2),_0x990bc1['SR_OK']!=_0x5f403b)return _0x5f403b;}if(0x1==this['bRecreateTex']){if(this['enPixelFormat']==_0x43e6f4['SR_PF_SURFACE']){if(0x0!=this['nSurfaceTexture'][0x0]){var _0x1cfe09=this['nSurfaceTexture'][0x0];this['ctx']['deleteTexture'](_0x1cfe09),this['nSurfaceTexture'][0x0]=0x0;}var _0x6231d9=this['ctx']['createTexture']();if(_0x6231d9<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x6231d9),this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['nSurfaceTexture'][0x0]=_0x6231d9;}else{if(this['enPixelFormat']==_0x43e6f4['SR_PF_YV12']||this['enPixelFormat']==_0x43e6f4['SR_PF_I420'])for(var _0x285227=0x0;_0x285227<this['nTextureNum'];_0x285227++){if(0x0!=this['nSurfaceTexture'][_0x285227]){var _0x3a6c3c=this['nSurfaceTexture'][_0x285227];this['ctx']['deleteTexture'](_0x3a6c3c),this['nSurfaceTexture'][_0x285227]=0x0;}var _0x4ef3b4=this['ctx']['createTexture']();if(_0x4ef3b4<=0x0)return _0x990bc1['SR_ERR_WEBGL_RESOURCE'];this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x4ef3b4),this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['nSurfaceTexture'][_0x285227]=_0x4ef3b4,this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null);}}this['bRecreateTex']=!0x1;}if(_0x43e6f4['SR_PF_YV12']==this['enPixelFormat']){var _0x5a2191=this['pFrameData']['subarray'](0x0,_0x497e19*_0x4a503e);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19,_0x4a503e,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x5a2191),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])));var _0x3640a7=this['pFrameData']['subarray'](_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2,_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2+_0x497e19/0x2*_0x4a503e/0x2);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19/0x2,_0x4a503e/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3640a7),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])));var _0x422c5b=this['pFrameData']['subarray'](_0x497e19*_0x4a503e,_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19/0x2,_0x4a503e/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x422c5b),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])),this['bAntialiasStateNeedChange']=!0x1),_0x5a2191=null,_0x3640a7=null,_0x422c5b=null;}else{if(_0x43e6f4['SR_PF_I420']==this['enPixelFormat']){var _0x583dea=this['pFrameData']['subarray'](0x0,_0x497e19*_0x4a503e);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19,_0x4a503e,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x583dea),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])));var _0x33c641=this['pFrameData']['subarray'](_0x497e19*_0x4a503e,_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19/0x2,_0x4a503e/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x33c641),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])));var _0x138e2c=this['pFrameData']['subarray'](_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2,_0x497e19*_0x4a503e+_0x497e19/0x2*_0x4a503e/0x2+_0x497e19/0x2*_0x4a503e/0x2);this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x497e19/0x2,_0x4a503e/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x138e2c),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])),this['bAntialiasStateNeedChange']=!0x1),_0x583dea=null,_0x33c641=null,_0x138e2c=null;}else _0x43e6f4['SR_PF_SURFACE']==this['enPixelFormat']&&(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x497e19,_0x4a503e,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x26c16c),this['bAntialiasStateNeedChange']&&(this['onlySupportedWebGL1']||0x1!=this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']):(this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']),this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D'])),this['bAntialiasStateNeedChange']=!0x1));}return _0x990bc1['SR_OK'];}},{'key':'SR_Display','value':function(_0x42b437){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['pSubDisplay']['SetTextureNum'](this['nTextureNum']);for(var _0x5c3b50=0x0;_0x5c3b50<this['nTextureNum'];_0x5c3b50++)this['pSubDisplay']['SetTextures'](_0x5c3b50,this['nSurfaceTexture'][_0x5c3b50]);if(null!=this['pFishParamManager']){var _0x185cab={};this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x185cab),this['pSubDisplay']['SetFishParam'](_0x185cab);}var _0x3533fb=this['pSubDisplay']['Render'](!0x1);if(_0x990bc1['SR_OK']!=_0x3533fb)return _0x3533fb;if(null!=this['pFishParamManager']){var _0x55cd74=this['pFishParamManager']['GetWndPort']();_0x55cd74!=_0x547537&&_0x55cd74==this['nFECPort']&&this['DrawPTZLines']();}return this['pSubDisplay']['SetVideoResolution'](this['frameDisplayWidth'],this['frameDisplayHeight']),_0x42b437||this['pSubDisplay']['DoCallBack'](),_0x990bc1['SR_OK'];}},{'key':'SR_SetDisplayRect','value':function(_0x22501b,_0x33069a,_0x56d26c,_0x5a88e6,_0x547f94){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x32c72f=_0x990bc1['SR_OK'];return(_0x32c72f=this['pSubDisplay']['SetDisplayRect'](_0x22501b,_0x33069a,_0x56d26c,_0x5a88e6,_0x547f94))!=_0x990bc1['SR_OK']?_0x32c72f:_0x990bc1['SR_OK'];}},{'key':'SR_SetImagePostProcess','value':function(_0x45a909,_0x21a84a){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay']&&(this['pSubDisplay']=new _0x1e2d96(),null==this['pSubDisplay']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];var _0x30f806=_0x990bc1['SR_OK'];return(_0x30f806=this['pSubDisplay']['SetImagePostProcess'](_0x45a909,_0x21a84a))!=_0x990bc1['SR_OK']?_0x30f806:_0x990bc1['SR_OK'];}},{'key':'SR_SetRenderState','value':function(_0x30b60a,_0x51f520){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x1fd295=_0x990bc1['SR_OK'];return(_0x1fd295=this['pSubDisplay']['SetRenderState'](_0x30b60a,_0x51f520))!=_0x990bc1['SR_OK']?_0x1fd295:(_0x30b60a==_0x1a32ef['SR_RST_IMAGE_ROTATE']&&(this['preImageRotateValue']=_0x51f520),_0x990bc1['SR_OK']);}},{'key':'SR_GetCaptureSize','value':function(_0x2e1789){var _0x3a0a3e=arguments['length']>0x1&&void 0x0!==arguments[0x1]&&arguments[0x1];if(null==_0x2e1789)return _0x990bc1['SR_ERR_PARAM'];if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x43a7a3=_0x990bc1['SR_OK'];return(_0x43a7a3=this['pSubDisplay']['GetCaptureSize'](_0x2e1789,_0x3a0a3e))!=_0x990bc1['SR_OK']?_0x43a7a3:(this['nCaptureWidth']=_0x2e1789['nWidth'],this['nCaptureHeight']=_0x2e1789['nHeight'],_0x990bc1['SR_OK']);}},{'key':'SR_CaptureScreen','value':function(_0x4d6adc){var _0x54ce33=arguments['length']>0x1&&void 0x0!==arguments[0x1]&&arguments[0x1];return 0x0==this['nSurfaceTexture'][0x0]||null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pSubDisplay']['CaptureScreen'](_0x4d6adc,_0x54ce33);}},{'key':'SR_DrawMosaic','value':function(_0x14ef5f,_0x520694,_0x336e60,_0x4ffe89,_0x3e9661){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x3575e7=_0x990bc1['SR_OK'];return(_0x3575e7=this['pSubDisplay']['DrawMosaic'](_0x14ef5f,_0x520694,_0x336e60,_0x4ffe89,_0x3e9661))!=_0x990bc1['SR_OK']?_0x3575e7:_0x990bc1['SR_OK'];}},{'key':'DrawPTZLines','value':function(){if(null==this['pFishParamManager'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x3473cb=this['pFishParamManager']['GetPTZDisplayMode']();if(_0x3473cb==_0x28e52b['SR_DM_RANGE']||_0x3473cb==_0x28e52b['SR_DM_RECT']){for(var _0x5eb7d1=0x0,_0x20da86={'fR':0x0,'fG':0x0,'fB':0x0,'fA':0x0},_0x11f13b=_0x990bc1['SR_OK'],_0x3bcd35=0x0;_0x3bcd35<_0x4fe2fc;++_0x3bcd35)if(0x0!=this['pFishParamManager']['IsPortAllocated'](_0x3bcd35)&&(_0x5eb7d1=0x2,_0x11f13b=this['pFishParamManager']['GetPTZColor'](_0x3bcd35,_0x20da86),_0x990bc1['SR_OK']==_0x11f13b)){0x1==this['pFishParamManager']['IsPTZSelected'](_0x3bcd35)&&(_0x5eb7d1+=0x1);var _0x116886=this['pFishParamManager']['GetWndPort']();if(_0x3bcd35!=_0x116886&&_0x28e52b['SR_DM_RANGE']==_0x3473cb){if(_0x593e88['SR_DE_FISH_ORIGINAL']==this['pFishParamManager']['GetDisplayEffect'](_0x116886)){var _0x51fbdb={};if(_0x11f13b=this['pFishParamManager']['GetPTZPoints'](_0x3bcd35,_0x51fbdb,_0x28e52b['SR_DM_RANGE']),_0x990bc1['SR_OK']!=_0x11f13b)continue;if(null!=_0x51fbdb['pstPoints']&&0x0!=_0x51fbdb['nPointNum']&&(_0x11f13b=this['SR_DrawLines'](_0x51fbdb['pstPoints'],_0x51fbdb['nPointNum'],!0x0,_0x20da86,_0x5eb7d1,!0x1),_0x990bc1['SR_OK']!=_0x11f13b))continue;}else{var _0x522b7a;if((_0x522b7a=this['pFishParamManager']['GetPTZFragmentNum'](_0x3bcd35))<=0x0)continue;for(var _0xd78890=0x0;_0xd78890<_0x522b7a;_0xd78890++){var _0x1e6cee={};this['pFishParamManager']['GetPTZFragmentPoints'](_0x3bcd35,_0x1e6cee,_0xd78890),null!=_0x1e6cee['pstPoints']&&0x0!=_0x1e6cee['nPointNum']&&this['SR_DrawLines'](_0x1e6cee['pstPoints'],_0x1e6cee['nPointNum'],!0x1,_0x20da86,_0x5eb7d1,!0x1);}}}else{if(_0x3bcd35!=_0x116886&&_0x28e52b['SR_DM_RECT']==_0x3473cb){var _0xfad334={};if(_0x11f13b=this['pFishParamManager']['GetPTZPoints'](_0x3bcd35,_0xfad334,_0x28e52b['SR_DM_RECT']),_0x990bc1['SR_OK']!=_0x11f13b)continue;if(null!=_0xfad334['pstPoints']&&0x0!=_0xfad334['nPointNum']&&(_0x11f13b=this['SR_DrawLines'](_0xfad334['pstPoints'],_0xfad334['nPointNum'],!0x0,_0x20da86,_0x5eb7d1,!0x1),_0x990bc1['SR_OK']!=_0x11f13b))continue;}}}}return _0x990bc1['SR_OK'];}},{'key':'SR_DrawLines','value':function(_0x2cdcb6,_0x26c628,_0xd85027,_0x3ba8e2,_0x20d41b,_0x3105c3){return null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pSubDisplay']['DrawLines'](_0x2cdcb6,_0x26c628,_0xd85027,_0x3ba8e2,_0x20d41b,_0x3105c3);}},{'key':'SR_DrawLinesEx','value':function(_0x4f0c6a,_0x111e43,_0x200194,_0x448e47){return null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pSubDisplay']['DrawLinesEx'](_0x4f0c6a,_0x111e43,_0x200194,_0x448e47);}},{'key':'SR_DrawFont','value':function(_0x5a163e,_0x4298e8,_0x13dfe0,_0x432ecc,_0xc4bbaf,_0x3d27a1,_0x5c1316,_0x296355,_0x193335,_0x13eee4,_0x2c0e89){return _0x990bc1['SR_ERR_NOT_SUPPORT'];}},{'key':'SR_DrawFontEx','value':function(_0x67ea2b,_0x220b4b){var _0x398041=arguments['length']>0x2&&void 0x0!==arguments[0x2]?arguments[0x2]:0x0,_0x15aab1=arguments['length']>0x3?arguments[0x3]:void 0x0;return null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pSubDisplay']['DrawFontEx'](_0x67ea2b,_0x220b4b,_0x398041,_0x15aab1);}},{'key':'SR_DrawImage','value':function(_0x54d47a,_0x240bfe,_0x2faaa0,_0x2f6062,_0x38394d,_0x459b9e){return null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pSubDisplay']['DrawImage'](_0x54d47a,_0x240bfe,_0x2faaa0,_0x2f6062,_0x38394d,_0x459b9e);}},{'key':'SR_DelSubPort','value':function(_0x11ce4e){return null==this['ctx']||null==this['pSubDisplay']?_0x990bc1['SR_ERR_CALL_ORDER']:(this['pSubDisplay']['DelSubPort'](),null!=this['pFishParamManager']&&this['nFECPort']==_0x11ce4e&&this['pFishParamManager']['FreeFECPort'](this['nFECPort']),this['enDisplayEffect']=_0x593e88['SR_DE_NULL'],this['pSubDisplay']=null,_0x990bc1['SR_OK']);}},{'key':'SR_GetFishParam','value':function(_0x2ef083){return null==_0x2ef083?_0x990bc1['SR_ERR_PARAM']:null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x2ef083);}},{'key':'SR_SetFishParam','value':function(_0x2d022d){return null==_0x2d022d?_0x990bc1['SR_ERR_PARAM']:null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x2d022d);}},{'key':'SR_Destroy','value':function(){var _0xe14daf=!(arguments['length']>0x0&&void 0x0!==arguments[0x0])||arguments[0x0];if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['pFrameData']=null;for(var _0x4a2f6a=0x0;_0x4a2f6a<this['nTextureNum'];_0x4a2f6a++)0x0!=this['nSurfaceTexture'][_0x4a2f6a]&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nSurfaceTexture'][_0x4a2f6a]),this['nSurfaceTexture'][_0x4a2f6a]=0x0);if(this['SR_DelSubPort'](this['nFECPort']),_0xe14daf){var _0x3e52e2=this['ctx']['getExtension']('WEBGL_lose_context');_0x3e52e2['loseContext']&&_0x3e52e2['loseContext']();}return this['ctx']=null,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bAntialiasStateNeedChange']=!0x1,this['bOpenMsaa']=!0x1,this['bRecreateTex']=!0x0,this['pFishParamManager']=null,_0x990bc1['SR_OK'];}},{'key':'SR_SetCanvasSize','value':function(_0x20d4b2,_0x23cd84){if(!this['pSubDisplay']||!this['canvas'])return _0x990bc1['SR_ERR_CALL_ORDER'];this['canvas']['width']=_0x20d4b2,this['canvas']['height']=_0x23cd84;var _0x467b9b=this['pSubDisplay']['SetCanvasSize'](_0x20d4b2,_0x23cd84);return _0x467b9b!=_0x990bc1['SR_OK']?_0x467b9b:_0x990bc1['SR_OK'];}},{'key':'SR_GetCanvasSize','value':function(){return this['canvas']?(console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']),_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_CALL_ORDER'];}},{'key':'SR_SetAntialias','value':function(_0x527cb0){if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(0x1==this['onlySupportedWebGL1'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];this['bAntialias']!=_0x527cb0&&(this['bAntialias']=_0x527cb0,this['bAntialiasStateNeedChange']=!0x0);var _0x3b1d4c=this['pSubDisplay']['SetAntialias'](this['bAntialias']);return _0x3b1d4c!=_0x990bc1['SR_OK']?_0x3b1d4c:_0x990bc1['SR_OK'];}},{'key':'SR_SetPTZDisplayMode','value':function(_0x37dc49){return null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['SetPTZDisplayMode'](_0x37dc49);}},{'key':'SR_SetFishParamManager','value':function(_0x234840){return null!=this['pFishParamManager']?_0x990bc1['SR_ERR_NOT_SUPPORT']:(this['pFishParamManager']=_0x234840,_0x990bc1['SR_OK']);}},{'key':'SR_SetViewParam','value':function(_0x13233b,_0x661d3d){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x2db306=this['pSubDisplay']['SetViewParam'](_0x13233b,_0x661d3d);return _0x2db306!=_0x990bc1['SR_OK']?_0x2db306:_0x990bc1['SR_OK'];}},{'key':'SR_GetViewParam','value':function(_0x3f9127,_0x325179){if(null==this['ctx'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x36f98=this['pSubDisplay']['GetViewParam'](_0x3f9127,_0x325179);return _0x36f98!=_0x990bc1['SR_OK']?_0x36f98:_0x990bc1['SR_OK'];}},{'key':'SR_SetCallBack','value':function(_0xe4b9e8,_0x46cc17,_0x388c38){if(null==this['pSubDisplay'])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x1f2017=_0x990bc1['SR_OK'];return(_0x1f2017=this['pSubDisplay']['SetCallBack'](_0xe4b9e8,_0x46cc17,_0x388c38))!=_0x990bc1['SR_OK']?_0x1f2017:_0x990bc1['SR_OK'];}},{'key':'SR_SetPTZColor','value':function(_0x3a3318,_0x33d453){return null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['SetPTZColor'](_0x3a3318,_0x33d453);}},{'key':'SR_GetPTZColor','value':function(_0x201350,_0x27135d){return null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['GetPTZColor'](_0x201350,_0x27135d);}},{'key':'SR_SetPTZPort','value':function(_0x511ba3){return null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:this['pFishParamManager']['SetPTZPort'](_0x511ba3);}},{'key':'SR_GetPTZPort','value':function(_0x465ce0,_0x668dd3,_0x4f1c8f){return null==this['pFishParamManager']?_0x990bc1['SR_ERR_CALL_ORDER']:null==_0x4f1c8f?_0x990bc1['SR_ERR_PARAM']:this['pFishParamManager']['GetPTZPort'](_0x465ce0,_0x668dd3,_0x4f1c8f);}},{'key':'SR_SetViewLimitateRate','value':function(_0x2f628b){return this['nViewLimitateRate']=_0x2f628b,_0x990bc1['SR_OK'];}},{'key':'SR_GetDllVersion','value':function(){return'V3.1.1.2_build20251119_svn98375';}},{'key':'_ResizeFrameData','value':function(_0x4976ad,_0x514fc3,_0x177574,_0x50a002){if(0x0==_0x514fc3%0x8&&null==_0x50a002)return this['frameDisplayWidth']=Math['round'](_0x514fc3),this['frameDisplayHeight']=Math['round'](_0x177574),this['pFrameData']=_0x4976ad,_0x990bc1['SR_OK'];if(null!=_0x50a002&&0x0==_0x50a002['nCropBottom']&&0x0==_0x50a002['nCropLeft']&&0x0==_0x50a002['nCropRight']&&0x0==_0x50a002['nCropTop']&&0x0==_0x514fc3%0x8)return this['frameDisplayWidth']=Math['round'](_0x514fc3),this['frameDisplayHeight']=Math['round'](_0x177574),this['pFrameData']=_0x4976ad,_0x990bc1['SR_OK'];if((null==this['pFrameData']||this['frameDisplayWidth']!=_0x514fc3/0x8*0x8||this['frameDisplayHeight']!=_0x177574)&&(this['frameDisplayWidth']=0x8*Math['round'](_0x514fc3/0x8),this['frameDisplayHeight']=Math['round'](_0x177574),this['pFrameData']=null,this['pFrameData']=new Uint8Array(this['frameDisplayWidth']*this['frameDisplayHeight']*0x3/0x2),null==this['pFrameData']))return _0x990bc1['SR_ERR_ALLOC_MEMORY'];var _0xa89528=0x0,_0x24b2e2=0x0,_0xe9fe51=Math['round'](_0x50a002['nCodeWidth']),_0x2b9a43=Math['round'](_0x50a002['nCodeHeight']),_0x4281ae=0x0;if(_0x43e6f4['SR_PF_YV12']==this['enPixelFormat']||_0x43e6f4['SR_PF_I420']==this['enPixelFormat']){var _0x356270,_0x3e23ad,_0xbe6984;null!=_0x50a002?(_0xa89528=Math['round'](_0x50a002['nCropLeft']),_0x24b2e2=Math['round'](_0x50a002['nCropTop']),_0x356270=_0x4976ad['subarray'](_0xa89528*_0xe9fe51+_0x24b2e2,_0xe9fe51*_0x2b9a43),_0x3e23ad=_0x4976ad['subarray'](_0xe9fe51*_0x2b9a43+_0x24b2e2*_0xe9fe51/0x4+_0xa89528/0x2,_0xe9fe51*_0x2b9a43*0x5/0x4),_0xbe6984=_0x4976ad['subarray'](_0xe9fe51*_0x2b9a43*0x5/0x4+_0x24b2e2*_0xe9fe51/0x4+_0xa89528/0x2,_0xe9fe51*_0x2b9a43*0x3/0x2),_0x4281ae=_0xe9fe51):(_0x356270=_0x4976ad['subarray'](0x0,_0x514fc3*_0x177574),_0x3e23ad=_0x4976ad['subarray'](_0x514fc3*_0x177574,_0x514fc3*_0x177574*0x5/0x4),_0xbe6984=_0x4976ad['subarray'](_0x514fc3*_0x177574*0x5/0x4,_0x514fc3*_0x177574*0x3/0x2),_0x4281ae=this['frameDisplayWidth']);for(var _0x559842=null,_0xffbfc5=0x0;_0xffbfc5<this['frameDisplayHeight'];++_0xffbfc5){var _0x331569=Math['round'](_0xffbfc5*_0x4281ae),_0x78780a=Math['round'](_0xffbfc5*_0x4281ae+this['frameDisplayWidth']);_0x559842=_0x356270['slice'](_0x331569,_0x78780a);var _0x300d80=Math['round'](_0xffbfc5*this['frameDisplayWidth']);this['pFrameData']['set'](_0x559842,_0x300d80);}for(var _0x2cf436=0x0;_0x2cf436<this['frameDisplayHeight']/0x2;++_0x2cf436){var _0x3ec4d7=Math['round'](_0x2cf436*_0x4281ae/0x2),_0x33185f=Math['round'](_0x2cf436*_0x4281ae/0x2+this['frameDisplayWidth']/0x2);_0x559842=_0x3e23ad['slice'](_0x3ec4d7,_0x33185f);var _0x5457d6=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x2cf436*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x559842,_0x5457d6);}for(var _0x522288=0x0;_0x522288<this['frameDisplayHeight']/0x2;++_0x522288){var _0x5a7009=Math['round'](_0x522288*_0x4281ae/0x2),_0x3d85ca=Math['round'](_0x522288*_0x4281ae/0x2+this['frameDisplayWidth']/0x2);_0x559842=_0xbe6984['slice'](_0x5a7009,_0x3d85ca);var _0x65ad50=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']*0x5/0x4+_0x522288*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x559842,_0x65ad50);}_0x356270=null,_0x3e23ad=null,_0xbe6984=null,_0x559842=null;}else{if(_0x43e6f4['SR_PF_NV12']==this['enPixelFormat']){var _0x553fef,_0x2bdccb,_0x50ccaf;null!=_0x50a002?(_0xa89528=Math['round'](_0x50a002['nCropLeft']),_0x24b2e2=Math['round'](_0x50a002['nCropTop']),_0x553fef=_0x4976ad['subarray'](_0x24b2e2*_0xe9fe51+_0xa89528,_0xe9fe51*_0x2b9a43),_0x2bdccb=_0x4976ad['subarray'](_0xe9fe51*_0x2b9a43+_0x24b2e2*_0xe9fe51/0x4+_0xa89528/0x2,_0xe9fe51*_0x2b9a43*0x3/0x2),_0x4281ae=Math['round'](_0x50a002['nCodeWidth'])):(_0x553fef=_0x4976ad['subarray'](0x0,_0xe9fe51*_0x2b9a43),_0x2bdccb=_0x4976ad['subarray'](_0xe9fe51*_0x2b9a43,_0xe9fe51*_0x2b9a43*0x3/0x2),_0x4281ae=this['frameDisplayWidth']);for(var _0x15aa21=0x0;_0x15aa21<this['frameDisplayHeight'];++_0x15aa21){var _0x5464fe=Math['round'](_0x15aa21*_0x4281ae),_0x48cb93=Math['round'](_0x15aa21*_0x4281ae+this['frameDisplayWidth']);_0x50ccaf=_0x553fef['slice'](_0x5464fe,_0x48cb93);var _0x3b76d=Math['round'](_0x15aa21*this['frameDisplayWidth']);this['pFrameData']['set'](_0x50ccaf,_0x3b76d);}for(var _0xb9ce77=0x0;_0xb9ce77<this['frameDisplayHeight']/0x2;++_0xb9ce77){var _0xf59031=Math['round'](_0xb9ce77*_0x4281ae),_0x18c3e1=Math['round'](_0xb9ce77*_0x4281ae+this['frameDisplayWidth']);_0x50ccaf=_0x2bdccb['slice'](_0xf59031,_0x18c3e1);var _0x23eba3=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0xb9ce77*this['frameDisplayWidth']);this['pFrameData']['set'](_0x50ccaf,_0x23eba3);}_0x553fef=null,_0x2bdccb=null,_0x50ccaf=null;}}return _0x990bc1['SR_OK'];}}]),_0x1655ca=_0x3bf3f2(function _0x5e5682(){_0x9cc894(this,_0x5e5682),this['bPortAllocated']=[],this['pRenderParam']=[],this['pFishParam']=[],this['stPTZColor']=[],this['pPTZSetColor']=[];for(var _0x570585=0x0;_0x570585<_0x4fe2fc;++_0x570585)this['pPTZSetColor'][_0x570585]={},this['pPTZSetColor'][_0x570585]['fR']=0x0,this['pPTZSetColor'][_0x570585]['fG']=0x0,this['pPTZSetColor'][_0x570585]['fB']=0x0,this['pPTZSetColor'][_0x570585]['fA']=0x1,this['pPTZSetColor'][_0x570585]['bSetColor']=!0x1;this['nBasePTZPointNum']=[],this['nOriPTZPointNum']=[],this['nPanoPTZPointNum']=[],this['nPTZFragmentNum']=[],this['pBasePTZPoints']=[],this['pPanoPTZPoints']=[],this['pRectPoints']=[],this['nPTZRectNum']=[],this['nPTZDisplayMode']=_0x28e52b['SR_DM_NULL'],this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=[],this['nWndPort']=_0x547537,this['nPlaceType']=0x0,this['nPTZFragmentNode']=[],this['bPTZSelected']=[],this['nPTZDisplayMode']=_0x28e52b['SR_DM_RANGE'];for(var _0x2875e6=0x0;_0x2875e6<_0x4fe2fc;++_0x2875e6){this['bPortAllocated'][_0x2875e6]=!0x1,this['bPTZSelected'][_0x2875e6]=!0x1,this['pRenderParam'][_0x2875e6]=null,this['pFishParam'][_0x2875e6]=null,this['stPTZColor'][_0x2875e6]={},this['stPTZColor'][_0x2875e6]['fR']=0x0,this['stPTZColor'][_0x2875e6]['fG']=0x0,this['stPTZColor'][_0x2875e6]['fB']=0x0,this['stPTZColor'][_0x2875e6]['fA']=0x0,this['nBasePTZPointNum'][_0x2875e6]=0x0,this['nOriPTZPointNum'][_0x2875e6]=0x0,this['nPanoPTZPointNum'][_0x2875e6]=0x0,this['nPTZRectNum'][_0x2875e6]=0x0,this['pPanoPTZPoints'][_0x2875e6]=[],this['pRectPoints'][_0x2875e6]=[],this['pBasePTZPoints'][_0x2875e6]=[],this['pOriPTZPoints'][_0x2875e6]=[];for(var _0x440200=0x0;_0x440200<0x4;++_0x440200)this['pRectPoints'][_0x2875e6][_0x440200]={},this['pRectPoints'][_0x2875e6][_0x440200]['fX']=0x0,this['pRectPoints'][_0x2875e6][_0x440200]['fY']=0x0;for(var _0x4102f9=0x0;_0x4102f9<_0x3fca2c;++_0x4102f9)this['pBasePTZPoints'][_0x2875e6][_0x4102f9]={},this['pBasePTZPoints'][_0x2875e6][_0x4102f9]['fX']=0x0,this['pBasePTZPoints'][_0x2875e6][_0x4102f9]['fY']=0x0,this['pOriPTZPoints'][_0x2875e6][_0x4102f9]={},this['pOriPTZPoints'][_0x2875e6][_0x4102f9]['fX']=0x0,this['pOriPTZPoints'][_0x2875e6][_0x4102f9]['fY']=0x0,this['pPanoPTZPoints'][_0x2875e6][_0x4102f9]={},this['pPanoPTZPoints'][_0x2875e6][_0x4102f9]['fX']=0x0,this['pPanoPTZPoints'][_0x2875e6][_0x4102f9]['fY']=0x0;this['nPTZFragmentNum'][_0x2875e6]=0x0,this['nPTZFragmentNode'][_0x2875e6]=[];for(var _0x582aa2=0x0;_0x582aa2<0x64;++_0x582aa2)this['nPTZFragmentNode'][_0x2875e6][_0x582aa2]=0x0;}this['InitColorList']();},[{'key':'GetFECPort','value':function(_0x4deb6e){for(var _0x3ea2f0=_0x547537,_0x2d54db=0x0;_0x2d54db<_0x4fe2fc;++_0x2d54db)if(0x0==this['bPortAllocated'][_0x2d54db]){_0x3ea2f0=_0x2d54db;break;}if(_0x3ea2f0==_0x547537)return _0x3ea2f0;if(_0x4deb6e==_0x593e88['SR_DE_NULL'])return _0x3ea2f0;var _0x1f9ec8=this['JudgeDisplayEffect'](_0x4deb6e);if(_0x990bc1['SR_OK']!=_0x1f9ec8)return this['FreeFECPort'](_0x3ea2f0),_0x547537;if(_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']==_0x4deb6e||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']==_0x4deb6e||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x4deb6e||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x4deb6e||_0x593e88['SR_DE_FISH_PANORAMA_WALL']==_0x4deb6e||_0x593e88['SR_DE_FISH_ORIGINAL']==_0x4deb6e){if(_0x547537!=this['nWndPort'])return this['FreeFECPort'](_0x3ea2f0),_0x547537;this['nWndPort']=_0x3ea2f0;}if(!(_0x593e88['SR_DE_FISH_PTZ_CEILING']!=_0x4deb6e&&_0x593e88['SR_DE_FISH_PTZ_FLOOR']!=_0x4deb6e&&_0x593e88['SR_DE_FISH_PTZ_WALL']!=_0x4deb6e||_0x547537==this['nWndPort']||null==this['pRenderParam'][this['nWndPort']]||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']))return this['FreeFECPort'](_0x3ea2f0),_0x547537;if(_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']==_0x4deb6e||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x4deb6e){for(var _0x44cf86=0x0;_0x44cf86<_0x4fe2fc;++_0x44cf86)if(null!=this['pRenderParam'][_0x44cf86]&&(_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x44cf86]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x44cf86]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x44cf86]['nDisplayEffect']))return this['FreeFECPort'](_0x3ea2f0),_0x547537;}if(_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x4deb6e){for(var _0x425292=0x0;_0x425292<_0x4fe2fc;++_0x425292)if(null!=this['pRenderParam'][_0x425292]&&_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x425292]['nDisplayEffect'])return this['FreeFECPort'](_0x3ea2f0),_0x547537;}if(_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x4deb6e){for(var _0x2edd28=0x0;_0x2edd28<_0x4fe2fc;++_0x2edd28)if(null!=this['pRenderParam'][_0x2edd28]&&_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x2edd28]['nDisplayEffect'])return this['FreeFECPort'](_0x3ea2f0),_0x547537;}return this['pRenderParam'][_0x3ea2f0]={},this['pRenderParam'][_0x3ea2f0]['fCosH']=0x1,this['pRenderParam'][_0x3ea2f0]['fSinH']=0x0,this['pRenderParam'][_0x3ea2f0]['fCosV']=0x1,this['pRenderParam'][_0x3ea2f0]['fSinV']=0x0,this['pRenderParam'][_0x3ea2f0]['fAngle']=0x0,this['pRenderParam'][_0x3ea2f0]['fRX1']=this['fRX1'],this['pRenderParam'][_0x3ea2f0]['fRX2']=this['fRX2'],this['pRenderParam'][_0x3ea2f0]['fRY1']=this['fRY1'],this['pRenderParam'][_0x3ea2f0]['fRY2']=this['fRY2'],this['pRenderParam'][_0x3ea2f0]['bBlack']=this['bBlack'],this['pRenderParam'][_0x3ea2f0]['fZoom']=0.035+0.8,this['pRenderParam'][_0x3ea2f0]['nDisplayEffect']=_0x4deb6e,this['pRenderParam'][_0x3ea2f0]['bBlack']=!0x1,this['pRenderParam'][_0x3ea2f0]['bCut']=!0x1,this['pFishParam'][_0x3ea2f0]={},this['pFishParam'][_0x3ea2f0]['nFishParamType']=0x0,this['pFishParam'][_0x3ea2f0]['bCut']=!0x1,this['pFishParam'][_0x3ea2f0]['fAngle']=this['pRenderParam'][_0x3ea2f0]['fAngle'],this['pFishParam'][_0x3ea2f0]['fPTZX']=0.5,this['pFishParam'][_0x3ea2f0]['fPTZY']=0.5,this['pFishParam'][_0x3ea2f0]['fRXLeft']=this['pRenderParam'][_0x3ea2f0]['fRX1'],this['pFishParam'][_0x3ea2f0]['fRXRight']=this['pRenderParam'][_0x3ea2f0]['fRX2'],this['pFishParam'][_0x3ea2f0]['fRYTop']=this['pRenderParam'][_0x3ea2f0]['fRY1'],this['pFishParam'][_0x3ea2f0]['fRYBottom']=this['pRenderParam'][_0x3ea2f0]['fRY2'],this['pFishParam'][_0x3ea2f0]['bBlack']=this['pRenderParam'][_0x3ea2f0]['bBlack'],this['pFishParam'][_0x3ea2f0]['fZoom']=(this['pRenderParam'][_0x3ea2f0]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0x3ea2f0]=!0x0,_0x3ea2f0;}},{'key':'FreeFECPort','value':function(_0x574ee9){if(_0x574ee9<0x0||_0x574ee9>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];this['nWndPort']==_0x574ee9&&(this['nWndPort']=_0x547537),null!=this['pRenderParam'][_0x574ee9]&&(this['pRenderParam'][_0x574ee9]['fCosH']=0x1,this['pRenderParam'][_0x574ee9]['fSinH']=0x0,this['pRenderParam'][_0x574ee9]['fCosV']=0x1,this['pRenderParam'][_0x574ee9]['fSinV']=0x0,this['pRenderParam'][_0x574ee9]['fAngle']=0x0,this['pRenderParam'][_0x574ee9]['fZoom']=0x0,this['pRenderParam'][_0x574ee9]['fRX1']=0x0,this['pRenderParam'][_0x574ee9]['fRX2']=0x1,this['pRenderParam'][_0x574ee9]['fRY1']=0x0,this['pRenderParam'][_0x574ee9]['fRY2']=0x1,this['pRenderParam'][_0x574ee9]['nDisplayEffect']=0x0,this['pRenderParam'][_0x574ee9]['bBlack']=!0x1,this['pRenderParam'][_0x574ee9]['bCut']=!0x1),null!=this['pFishParam'][_0x574ee9]&&(this['pFishParam'][_0x574ee9]['nFishParamType']=0x0,this['pFishParam'][_0x574ee9]['fRXLeft']=0x0,this['pFishParam'][_0x574ee9]['fRXRight']=0x1,this['pFishParam'][_0x574ee9]['fRYTop']=0x0,this['pFishParam'][_0x574ee9]['fRYBottom']=0x1,this['pFishParam'][_0x574ee9]['bBlack']=!0x1,this['pFishParam'][_0x574ee9]['bCut']=!0x1,this['pFishParam'][_0x574ee9]['fAngle']=0x0,this['pFishParam'][_0x574ee9]['fZoom']=0x0,this['pFishParam'][_0x574ee9]['fPTZX']=0.5,this['pFishParam'][_0x574ee9]['fPTZY']=0.5),this['nBasePTZPointNum'][_0x574ee9]=0x0,this['nOriPTZPointNum'][_0x574ee9]=0x0,this['nPanoPTZPointNum'][_0x574ee9]=0x0,this['nPTZRectNum'][_0x574ee9]=0x0;for(var _0x10d10e=0x0;_0x10d10e<0x4;++_0x10d10e)this['pRectPoints'][_0x574ee9][_0x10d10e]['fX']=0x0,this['pRectPoints'][_0x574ee9][_0x10d10e]['fY']=0x0;for(var _0xd129a5=0x0;_0xd129a5<_0x3fca2c;++_0xd129a5)this['pBasePTZPoints'][_0x574ee9][_0xd129a5]['fX']=0x0,this['pBasePTZPoints'][_0x574ee9][_0xd129a5]['fY']=0x0,this['pOriPTZPoints'][_0x574ee9][_0xd129a5]['fX']=0x0,this['pOriPTZPoints'][_0x574ee9][_0xd129a5]['fY']=0x0,this['pPanoPTZPoints'][_0x574ee9][_0xd129a5]['fX']=0x0,this['pPanoPTZPoints'][_0x574ee9][_0xd129a5]['fY']=0x0;if(this['pPTZSetColor'][_0x574ee9]['bSetColor']&&(this['pPTZSetColor'][_0x574ee9]['fA']=0x0,this['pPTZSetColor'][_0x574ee9]['fR']=0x0,this['pPTZSetColor'][_0x574ee9]['fG']=0x0,this['pPTZSetColor'][_0x574ee9]['fB']=0x0,this['pPTZSetColor'][_0x574ee9]['bSetColor']=!0x1),this['bPTZSelected'][_0x574ee9]=!0x1,0x0!=this['nPlaceType']){for(var _0x1db32c=!0x1,_0x8a9328=0x0;_0x8a9328<_0x4fe2fc;++_0x8a9328)if(null!=this['pRenderParam'][_0x8a9328]&&(_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_WALL']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_CYLINDER_CEILING']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_CYLINDER_FLOOR']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x8a9328]['nDisplayEffect']||_0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x8a9328]['nDisplayEffect'])){_0x1db32c=!0x0;break;}_0x1db32c||(this['nPlaceType']=0x0);}for(var _0xfbaec=!0x1,_0x1e22f4=0x0;_0x1e22f4<_0x4fe2fc;++_0x1e22f4)if(null!=this['pRenderParam'][_0x1e22f4]){_0xfbaec=!0x0;break;}_0xfbaec||(this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1),this['nPTZFragmentNum'][_0x574ee9]=0x0;for(var _0x1a8451=0x0;_0x1a8451<0x64;++_0x1a8451)this['nPTZFragmentNode'][_0x574ee9][_0x1a8451]=0x0;return this['bPortAllocated'][_0x574ee9]=!0x1,_0x990bc1['SR_OK'];}},{'key':'DeInit','value':function(){for(var _0x485da7=0x0;_0x485da7<_0x4fe2fc;++_0x485da7){for(var _0x357af9=0x0;_0x357af9<0x4;++_0x357af9)this['pRectPoints'][_0x485da7][_0x357af9]=null;for(var _0x2f7d74=0x0;_0x2f7d74<_0x3fca2c;++_0x2f7d74)this['pBasePTZPoints'][_0x485da7][_0x2f7d74]=null,this['pOriPTZPoints'][_0x485da7][_0x2f7d74]=null,this['pPanoPTZPoints'][_0x485da7][_0x2f7d74]=null;this['nPTZFragmentNum'][_0x485da7]=0x0,this['nPTZFragmentNode'][_0x485da7]=null,this['bPortAllocated'][_0x485da7]=!0x1,this['bPTZSelected'][_0x485da7]=!0x1,this['pRenderParam'][_0x485da7]=null,this['pFishParam'][_0x485da7]=null,this['stPTZColor'][_0x485da7]=null,this['nBasePTZPointNum'][_0x485da7]=0x0,this['nOriPTZPointNum'][_0x485da7]=0x0,this['nPanoPTZPointNum'][_0x485da7]=0x0,this['nPTZRectNum'][_0x485da7]=0x0,this['pPanoPTZPoints'][_0x485da7]=null,this['pRectPoints'][_0x485da7]=null,this['pBasePTZPoints'][_0x485da7]=null,this['pOriPTZPoints'][_0x485da7]=null;}return this['bPortAllocated']=null,this['pRenderParam']=null,this['pFishParam']=null,this['stPTZColor']=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this['nPanoPTZPointNum']=null,this['nPTZFragmentNum']=null,this['pBasePTZPoints']=null,this['pPanoPTZPoints']=null,this['pRectPoints']=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x28e52b['SR_DM_NULL'],this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=null,this['pBasePTZPoints']=null,this['nWndPort']=_0x547537,this['nPlaceType']=0x0,this['nPTZFragmentNode']=null,this['bPTZSelected']=null,this['nPTZDisplayMode']=_0x28e52b['SR_DM_RANGE'],_0x990bc1['SR_OK'];}},{'key':'InitColorList','value':function(){this['stPTZColor'][0x0]['fR']=0.5,this['stPTZColor'][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this['stPTZColor'][0x0]['fA']=0x1,this['stPTZColor'][0x1]['fR']=0x1,this['stPTZColor'][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this['stPTZColor'][0x1]['fA']=0x1,this['stPTZColor'][0x2]['fR']=0x0,this['stPTZColor'][0x2]['fG']=0x1,this['stPTZColor'][0x2]['fB']=0x0,this['stPTZColor'][0x2]['fA']=0x1,this['stPTZColor'][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this['stPTZColor'][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this['stPTZColor'][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this['stPTZColor'][0x4]['fB']=0x0,this['stPTZColor'][0x4]['fA']=0x1,this['stPTZColor'][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this['stPTZColor'][0x5]['fB']=0x1,this['stPTZColor'][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this['stPTZColor'][0x6]['fG']=0x1,this['stPTZColor'][0x6]['fB']=0x1,this['stPTZColor'][0x6]['fA']=0x1,this['stPTZColor'][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this['stPTZColor'][0x7]['fB']=0x0,this['stPTZColor'][0x7]['fA']=0x1,this['stPTZColor'][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this['stPTZColor'][0x8]['fB']=0.5,this['stPTZColor'][0x8]['fA']=0x1;for(var _0x47943b=0x9;_0x47943b<_0x4fe2fc;_0x47943b++)this['stPTZColor'][_0x47943b]['fR']=0x1*_0x47943b/_0x4fe2fc,this['stPTZColor'][_0x47943b]['fG']=0x1*_0x47943b/_0x4fe2fc,this['stPTZColor'][_0x47943b]['fB']=0x1*_0x47943b/_0x4fe2fc,this['stPTZColor'][_0x47943b]['fA']=0x1;return _0x990bc1['SR_OK'];}},{'key':'GetRangePoints','value':function(_0x301dbb){if(_0x301dbb<0x0||_0x301dbb>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];if(null==this['pRenderParam'][_0x301dbb])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x2b0793=0x0,_0x17ddb1=0x0;switch(this['nOriPTZPointNum'][_0x301dbb]=0x0,this['nBasePTZPointNum'][_0x301dbb]=0x0,this['pRenderParam'][_0x301dbb]['nDisplayEffect']){case _0x593e88['SR_DE_FISH_PTZ_CEILING']:for(_0x17ddb1=0x0;_0x17ddb1<0x1;_0x17ddb1+=0.01)this['GetFishPTZCeiling'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0.9995,_0x2b0793=0x0;_0x2b0793<0x1;_0x2b0793+=0.02)this['GetFishPTZCeiling'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x2b0793=0.999,_0x17ddb1=0.9995;_0x17ddb1>=0x0;_0x17ddb1-=0.01)this['GetFishPTZCeiling'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0x0,_0x2b0793=0.999;_0x2b0793>=0x0;_0x2b0793-=0.02)this['GetFishPTZCeiling'](_0x2b0793,_0x17ddb1,_0x301dbb);break;case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:for(_0x17ddb1=0x0;_0x17ddb1<0x1;_0x17ddb1+=0.01)this['GetFishPTZFloor'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0.9995,_0x2b0793=0x0;_0x2b0793<0x1;_0x2b0793+=0.02)this['GetFishPTZFloor'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x2b0793=0.999,_0x17ddb1=0.9995;_0x17ddb1>=0x0;_0x17ddb1-=0.01)this['GetFishPTZFloor'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0x0,_0x2b0793=0.999;_0x2b0793>=0x0;_0x2b0793-=0.02)this['GetFishPTZFloor'](_0x2b0793,_0x17ddb1,_0x301dbb);break;case _0x593e88['SR_DE_FISH_PTZ_WALL']:for(_0x17ddb1=0x0;_0x17ddb1<0x1;_0x17ddb1+=0.01)this['GetFishPTZWALL'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0.9995,_0x2b0793=0x0;_0x2b0793<0x1;_0x2b0793+=0.02)this['GetFishPTZWALL'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x2b0793=0.999,_0x17ddb1=0.9995;_0x17ddb1>=0x0;_0x17ddb1-=0.01)this['GetFishPTZWALL'](_0x2b0793,_0x17ddb1,_0x301dbb);for(_0x17ddb1=0x0,_0x2b0793=0.999;_0x2b0793>=0x0;_0x2b0793-=0.02)this['GetFishPTZWALL'](_0x2b0793,_0x17ddb1,_0x301dbb);break;default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_OK'];}},{'key':'TransformPTZRangePoints','value':function(_0x8235d2){if(_0x547537==this['nWndPort'])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x8235d2]||null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];this['nPanoPTZPointNum'][_0x8235d2]=0x0;var _0x592dcc=_0x990bc1['SR_OK'],_0x285c0e=this['nWndPort'];switch(this['pRenderParam'][_0x285c0e]['nDisplayEffect']){case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:if(_0x592dcc=this['GetPanoPTZWall'](_0x8235d2),_0x990bc1['SR_OK']!=_0x592dcc)return _0x592dcc;break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x592dcc=this['GetPanoPTZFloor'](_0x8235d2),_0x990bc1['SR_OK']!=_0x592dcc)return _0x592dcc;break;case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x592dcc=this['GetPanoPTZCeiling'](_0x8235d2),_0x990bc1['SR_OK']!=_0x592dcc)return _0x592dcc;}return this['CalcPTZFragmentPoints'](_0x8235d2),_0x990bc1['SR_OK'];}},{'key':'GetRectPoints','value':function(_0x34ee98){if(_0x34ee98<0x0||_0x34ee98>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];if(this['nWndPort']==_0x547537)return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pRenderParam'][this['nWndPort']]||null==this['pFishParam'][_0x34ee98])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x4e2dab=this['pRenderParam'][this['nWndPort']]['nDisplayEffect'],_0x114e84=_0x990bc1['SR_OK'],_0x7b8429={'fX':0x0,'fY':0x0};switch(_0x4e2dab){case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:if(_0x114e84=this['GetPointFish2PanoWall'](_0x7b8429,this['pFishParam'][_0x34ee98]['fPTZX'],this['pFishParam'][_0x34ee98]['fPTZY']),_0x990bc1['SR_OK']!=_0x114e84)return _0x114e84;break;case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x114e84=this['GetPointFish2PanoFloor'](_0x7b8429,this['pFishParam'][_0x34ee98]['fPTZX'],this['pFishParam'][_0x34ee98]['fPTZY']),_0x990bc1['SR_OK']!=_0x114e84)return _0x990bc1['SR_ERR_NOT_SUPPORT']==_0x114e84&&(this['pRectPoints'][_0x34ee98]=null),_0x114e84;break;case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x114e84=this['GetPointFish2PanoCeiling'](_0x7b8429,this['pFishParam'][_0x34ee98]['fPTZX'],this['pFishParam'][_0x34ee98]['fPTZY']),_0x990bc1['SR_OK']!=_0x114e84)return _0x990bc1['SR_ERR_NOT_SUPPORT']==_0x114e84&&(this['pRectPoints'][_0x34ee98]=null),_0x114e84;break;case _0x593e88['SR_DE_FISH_ORIGINAL']:_0x7b8429['fX']=this['pFishParam'][_0x34ee98]['fPTZX'],_0x7b8429['fY']=this['pFishParam'][_0x34ee98]['fPTZY'];}if(null==this['pRectPoints'][_0x34ee98]){this['pRectPoints'][_0x34ee98]=[];for(var _0x5348aa=0x0;_0x5348aa<0x4;++_0x5348aa)this['pRectPoints'][_0x34ee98][_0x5348aa]={},this['pRectPoints'][_0x34ee98][_0x5348aa]['fX']=0x0,this['pRectPoints'][_0x34ee98][_0x5348aa]['fY']=0x0;}return this['pRectPoints'][_0x34ee98][0x0]['fX']=_0x7b8429['fX']-_0x4d0f95,this['pRectPoints'][_0x34ee98][0x0]['fY']=_0x7b8429['fY']-_0x4d0f95,this['pRectPoints'][_0x34ee98][0x1]['fX']=_0x7b8429['fX']+_0x4d0f95,this['pRectPoints'][_0x34ee98][0x1]['fY']=_0x7b8429['fY']-_0x4d0f95,this['pRectPoints'][_0x34ee98][0x2]['fX']=_0x7b8429['fX']+_0x4d0f95,this['pRectPoints'][_0x34ee98][0x2]['fY']=_0x7b8429['fY']+_0x4d0f95,this['pRectPoints'][_0x34ee98][0x3]['fX']=_0x7b8429['fX']-_0x4d0f95,this['pRectPoints'][_0x34ee98][0x3]['fY']=_0x7b8429['fY']+_0x4d0f95,this['nPTZRectNum'][_0x34ee98]=0x4,_0x990bc1['SR_OK'];}},{'key':'GetFishPTZCeiling','value':function(_0x14a678,_0x117aa2,_0x37bc8b){var _0xdab417,_0x5bd560,_0x5b26cd,_0x4123c4,_0x3fbd70,_0x4e9e40,_0x472d78,_0x5dd917={'fX':0x0,'fY':0x0},_0x318555={'fX':0x0,'fY':0x0},_0x268ce9={'fX':0x0,'fY':0x0},_0x20ded7={};_0x4123c4=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x3fbd70=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x4e9e40=(this['fRY1']+this['fRY2'])/0x2*_0x4123c4,_0x472d78=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x5dd917['fX']=_0x117aa2-0.5,_0x5dd917['fY']=0.5-_0x14a678,_0xdab417=this['pRenderParam'][_0x37bc8b]['fZoom'],_0x318555['fX']=_0x5dd917['fX'],_0x318555['fY']=_0x5dd917['fY']*this['pRenderParam'][_0x37bc8b]['fCosV']+_0xdab417*this['pRenderParam'][_0x37bc8b]['fSinV'],_0x5bd560=_0xdab417*this['pRenderParam'][_0x37bc8b]['fCosV']-_0x5dd917['fY']*this['pRenderParam'][_0x37bc8b]['fSinV'],_0x5b26cd=Math['sqrt'](_0x318555['fX']*_0x318555['fX']+_0x318555['fY']*_0x318555['fY']);var _0x1f9115=Math['sqrt'](_0x318555['fX']*_0x318555['fX']+_0x318555['fY']*_0x318555['fY']+_0x5bd560*_0x5bd560),_0x43fcf0=Math['asin'](_0x5b26cd/_0x1f9115)/1.5707963*0.5;_0x318555['fX']=_0x43fcf0*_0x318555['fX']/_0x5b26cd,_0x318555['fY']=_0x43fcf0*_0x318555['fY']/_0x5b26cd,_0x268ce9['fX']=_0x318555['fX']*this['pRenderParam'][_0x37bc8b]['fCosH']-_0x318555['fY']*this['pRenderParam'][_0x37bc8b]['fSinH'],_0x268ce9['fY']=_0x318555['fX']*this['pRenderParam'][_0x37bc8b]['fSinH']+_0x318555['fY']*this['pRenderParam'][_0x37bc8b]['fCosH'],_0x20ded7['fX']=0x2*_0x268ce9['fX']*_0x472d78+_0x3fbd70,_0x20ded7['fY']=0x2*-_0x268ce9['fY']*_0x472d78+_0x4e9e40;var _0x40fbf4=this['nBasePTZPointNum'][_0x37bc8b];this['pBasePTZPoints'][_0x37bc8b][_0x40fbf4]['fX']=_0x268ce9['fX']+0.5,this['pBasePTZPoints'][_0x37bc8b][_0x40fbf4]['fY']=0.5-_0x268ce9['fY'],this['nBasePTZPointNum'][_0x37bc8b]=this['nBasePTZPointNum'][_0x37bc8b]+0x1;var _0x1551fa=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x2bb9fc=this['fRY1']<=0x0?0x0:this['fRY1']*_0x4123c4,_0x181265=this['fRX2']>=0x1?0x1-_0x1551fa:0x1*this['fRX2']-_0x1551fa,_0x3a8ec3=this['fRY2']>=0x1?_0x4123c4-_0x2bb9fc:this['fRY2']*_0x4123c4-_0x2bb9fc;if(_0x20ded7['fX']=(_0x20ded7['fX']-_0x1551fa)/_0x181265,_0x20ded7['fY']=(_0x20ded7['fY']-_0x2bb9fc)/_0x3a8ec3,_0x20ded7['fX']<=0x1&&_0x20ded7['fY']<=0x1&&_0x20ded7['fX']>=0x0&&_0x20ded7['fY']>=0x0){var _0x5cc859=this['nOriPTZPointNum'][_0x37bc8b];this['pOriPTZPoints'][_0x37bc8b][_0x5cc859]['fX']=_0x20ded7['fX'],this['pOriPTZPoints'][_0x37bc8b][_0x5cc859]['fY']=_0x20ded7['fY'],this['nOriPTZPointNum'][_0x37bc8b]=this['nOriPTZPointNum'][_0x37bc8b]+0x1;}return _0x990bc1['SR_OK'];}},{'key':'GetFishPTZFloor','value':function(_0x40b469,_0x1e38fc,_0x50a2ec){var _0x335411,_0x57190e,_0x23f404,_0x414223,_0x5df97f,_0x4c701d,_0x553ebf,_0x422529={'fX':0x0,'fY':0x0},_0x29ba02={'fX':0x0,'fY':0x0},_0x34d320={'fX':0x0,'fY':0x0},_0x4ed9ee={};_0x414223=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x5df97f=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x4c701d=(this['fRY1']+this['fRY2'])/0x2*_0x414223,_0x553ebf=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x422529['fX']=_0x40b469-0.5,_0x422529['fY']=_0x1e38fc-0.5,_0x335411=this['pRenderParam'][_0x50a2ec]['fZoom'],_0x29ba02['fX']=_0x422529['fX'],_0x29ba02['fY']=_0x422529['fY']*this['pRenderParam'][_0x50a2ec]['fCosV']+_0x335411*this['pRenderParam'][_0x50a2ec]['fSinV'],_0x57190e=_0x335411*this['pRenderParam'][_0x50a2ec]['fCosV']-_0x422529['fY']*this['pRenderParam'][_0x50a2ec]['fSinV'],_0x23f404=Math['sqrt'](_0x29ba02['fX']*_0x29ba02['fX']+_0x29ba02['fY']*_0x29ba02['fY']);var _0x380ebe=Math['sqrt'](_0x29ba02['fX']*_0x29ba02['fX']+_0x29ba02['fY']*_0x29ba02['fY']+_0x57190e*_0x57190e),_0xecda4f=Math['asin'](_0x23f404/_0x380ebe)/1.5707963*0.5;_0x29ba02['fX']=_0xecda4f*_0x29ba02['fX']/_0x23f404,_0x29ba02['fY']=_0xecda4f*_0x29ba02['fY']/_0x23f404,_0x34d320['fX']=_0x29ba02['fX']*this['pRenderParam'][_0x50a2ec]['fCosH']-_0x29ba02['fY']*this['pRenderParam'][_0x50a2ec]['fSinH'],_0x34d320['fY']=_0x29ba02['fX']*this['pRenderParam'][_0x50a2ec]['fSinH']+_0x29ba02['fY']*this['pRenderParam'][_0x50a2ec]['fCosH'],_0x4ed9ee['fX']=0x2*_0x34d320['fX']*_0x553ebf+_0x5df97f,_0x4ed9ee['fY']=0x2*_0x34d320['fY']*_0x553ebf+_0x4c701d;var _0x208b0c=this['nBasePTZPointNum'][_0x50a2ec];this['pBasePTZPoints'][_0x50a2ec][_0x208b0c]['fX']=_0x34d320['fX']+0.5,this['pBasePTZPoints'][_0x50a2ec][_0x208b0c]['fY']=_0x34d320['fY']+0.5,this['nBasePTZPointNum'][_0x50a2ec]=this['nBasePTZPointNum'][_0x50a2ec]+0x1;var _0x4beed4=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x48c2bc=this['fRY1']<=0x0?0x0:this['fRY1']*_0x414223,_0x137789=this['fRX2']>=0x1?0x1-_0x4beed4:0x1*this['fRX2']-_0x4beed4,_0x15bfef=this['fRY2']>=0x1?_0x414223-_0x48c2bc:this['fRY2']*_0x414223-_0x48c2bc;if(_0x4ed9ee['fX']=(_0x4ed9ee['fX']-_0x4beed4)/_0x137789,_0x4ed9ee['fY']=(_0x4ed9ee['fY']-_0x48c2bc)/_0x15bfef,_0x4ed9ee['fX']<=0x1&&_0x4ed9ee['fY']<=0x1&&_0x4ed9ee['fX']>=0x0&&_0x4ed9ee['fY']>=0x0){var _0xe61869=this['nOriPTZPointNum'][_0x50a2ec];this['pOriPTZPoints'][_0x50a2ec][_0xe61869]['fX']=_0x4ed9ee['fX'],this['pOriPTZPoints'][_0x50a2ec][_0xe61869]['fY']=_0x4ed9ee['fY'],this['nOriPTZPointNum'][_0x50a2ec]=this['nOriPTZPointNum'][_0x50a2ec]+0x1;}return _0x990bc1['SR_OK'];}},{'key':'GetFishPTZWALL','value':function(_0x35025e,_0x35e92a,_0x2784a6){var _0x17985d,_0x13f3bb,_0x3aadf4,_0x4589e3,_0x5922b3,_0x2c7ace,_0x34e59d,_0x5bc992,_0x2d415b={'fX':0x0,'fY':0x0},_0x442ca0={'fX':0x0,'fY':0x0},_0x3d925a={'fX':0x0,'fY':0x0},_0x5c00bb={};_0x5922b3=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2c7ace=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x34e59d=(this['fRY1']+this['fRY2'])/0x2*_0x5922b3,_0x5bc992=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x2d415b['fX']=_0x35e92a-0.5,_0x2d415b['fY']=_0x35025e-0.5,_0x17985d=this['pRenderParam'][_0x2784a6]['fZoom'],_0x442ca0['fX']=_0x2d415b['fX'],_0x442ca0['fY']=_0x2d415b['fY']*this['pRenderParam'][_0x2784a6]['fCosV']+_0x17985d*this['pRenderParam'][_0x2784a6]['fSinV'],_0x13f3bb=_0x17985d*this['pRenderParam'][_0x2784a6]['fCosV']-_0x2d415b['fY']*this['pRenderParam'][_0x2784a6]['fSinV'],_0x3d925a['fX']=_0x442ca0['fX']*this['pRenderParam'][_0x2784a6]['fCosH']+_0x13f3bb*this['pRenderParam'][_0x2784a6]['fSinH'],_0x3d925a['fY']=_0x442ca0['fY'],_0x3aadf4=_0x13f3bb*this['pRenderParam'][_0x2784a6]['fCosH']-_0x442ca0['fX']*this['pRenderParam'][_0x2784a6]['fSinH'],_0x4589e3=Math['sqrt'](_0x3d925a['fX']*_0x3d925a['fX']+_0x3d925a['fY']*_0x3d925a['fY']);var _0x14481b=Math['sqrt'](_0x3d925a['fX']*_0x3d925a['fX']+_0x3d925a['fY']*_0x3d925a['fY']+_0x3aadf4*_0x3aadf4),_0x274fc1=Math['asin'](_0x4589e3/_0x14481b)/1.5707963*0.5;_0x5c00bb['fX']=_0x274fc1*_0x3d925a['fX']/_0x4589e3*_0x5bc992*0x2+_0x2c7ace,_0x5c00bb['fY']=_0x274fc1*_0x3d925a['fY']/_0x4589e3*_0x5bc992*0x2+_0x34e59d;var _0x3d155a=this['nBasePTZPointNum'][_0x2784a6];this['pBasePTZPoints'][_0x2784a6][_0x3d155a]['fX']=_0x274fc1*_0x3d925a['fX']/_0x4589e3+0.5,this['pBasePTZPoints'][_0x2784a6][_0x3d155a]['fY']=_0x274fc1*_0x3d925a['fY']/_0x4589e3+0.5,this['nBasePTZPointNum'][_0x2784a6]=this['nBasePTZPointNum'][_0x2784a6]+0x1;var _0x111640=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x4850c7=this['fRY1']<=0x0?0x0:this['fRY1']*_0x5922b3,_0x4f579e=this['fRX2']>=0x1?0x1-_0x111640:0x1*this['fRX2']-_0x111640,_0x18fda2=this['fRY2']>=0x1?_0x5922b3-_0x4850c7:this['fRY2']*_0x5922b3-_0x4850c7;if(_0x5c00bb['fX']=(_0x5c00bb['fX']-_0x111640)/_0x4f579e,_0x5c00bb['fY']=(_0x5c00bb['fY']-_0x4850c7)/_0x18fda2,_0x5c00bb['fX']<=0x1&&_0x5c00bb['fY']<=0x1&&_0x5c00bb['fX']>=0x0&&_0x5c00bb['fY']>=0x0){var _0x3f786d=this['nOriPTZPointNum'][_0x2784a6];this['pOriPTZPoints'][_0x2784a6][_0x3f786d]['fX']=_0x5c00bb['fX'],this['pOriPTZPoints'][_0x2784a6][_0x3f786d]['fY']=_0x5c00bb['fY'],this['nOriPTZPointNum'][_0x2784a6]=this['nOriPTZPointNum'][_0x2784a6]+0x1;}return _0x990bc1['SR_OK'];}},{'key':'GetPanoPTZCeiling','value':function(_0x2c4442){if(null==this['pRenderParam'][_0x2c4442]||null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x2c4442])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x5eba87,_0x53c3f1,_0x2509f0=this['nBasePTZPointNum'][_0x2c4442];_0x5eba87=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x53c3f1=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x32b30f,_0x1de474=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x32b30f=0x1*-this['fRX1'])>_0x1de474&&(_0x1de474=_0x32b30f),this['fRX2']>0x1&&(_0x32b30f=0x1*(this['fRX2']-0x1))>_0x1de474&&(_0x1de474=_0x32b30f),this['fRY1']<0x0&&(_0x32b30f=-this['fRY1']*_0x5eba87)>_0x1de474&&(_0x1de474=_0x32b30f),this['fRY2']>0x1&&(_0x32b30f=(this['fRY2']-0x1)*_0x5eba87)>_0x1de474&&(_0x1de474=_0x32b30f));for(var _0x26f944,_0x5e0d06=_0x1de474/_0x53c3f1,_0x5e391a={'fX':0x0,'fY':0x0},_0x4ac595={'fX':0x0,'fY':0x0},_0x2f5341=0x0;_0x2f5341<_0x2509f0;++_0x2f5341)if(_0x4ac595['fX']=this['pBasePTZPoints'][_0x2c4442][_0x2f5341]['fX'],_0x4ac595['fY']=this['pBasePTZPoints'][_0x2c4442][_0x2f5341]['fY'],!(Math['abs'](_0x4ac595['fX']-0.5)<_0x24183&&Math['abs'](_0x4ac595['fY']-0.5)<_0x24183)){var _0x44848f={'fX':0x0,'fY':0x0},_0x577156={'fX':0x0,'fY':0x0};_0x44848f['fX']=_0x4ac595['fX']-0.5,_0x44848f['fY']=_0x4ac595['fY']-0.5,_0x577156['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x577156['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x20172e=Math['sqrt'](_0x44848f['fX']*_0x44848f['fX']+_0x44848f['fY']*_0x44848f['fY']),_0x7de20f=Math['sqrt'](_0x577156['fX']*_0x577156['fX']+_0x577156['fY']*_0x577156['fY']);if(_0x26f944=Math['acos']((_0x44848f['fX']*_0x577156['fX']+_0x44848f['fY']*_0x577156['fY'])/(_0x20172e*_0x7de20f)),_0x44848f['fX']*_0x577156['fY']-_0x44848f['fY']*_0x577156['fX']>0x0&&(_0x26f944=6.2831852-_0x26f944),_0x5e391a['fX']=_0x26f944/6.2831853,_0x5e391a['fY']=(0x2*(0.5-_0x20172e)-_0x5e0d06)/(0.8-_0x5e0d06),_0x5e391a['fY']>=0x0&&_0x5e391a['fX']>=0x0&&_0x5e391a['fY']<=0x1&&_0x5e391a['fX']<=0x1){var _0x1e8ec7=this['nPanoPTZPointNum'][_0x2c4442];this['pPanoPTZPoints'][_0x2c4442][_0x1e8ec7]['fX']=_0x5e391a['fX'],this['pPanoPTZPoints'][_0x2c4442][_0x1e8ec7]['fY']=_0x5e391a['fY'],this['nPanoPTZPointNum'][_0x2c4442]=this['nPanoPTZPointNum'][_0x2c4442]+0x1;}}return _0x990bc1['SR_OK'];}},{'key':'GetPanoPTZFloor','value':function(_0x225558){if(null==this['pRenderParam'][_0x225558]||null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x225558])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x2cf837,_0x1f32f0,_0x551ecd=this['nBasePTZPointNum'][_0x225558];_0x2cf837=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x1f32f0=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x5746bf,_0x414436=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x5746bf=0x1*-this['fRX1'])>_0x414436&&(_0x414436=_0x5746bf),this['fRX2']>0x1&&(_0x5746bf=0x1*(this['fRX2']-0x1))>_0x414436&&(_0x414436=_0x5746bf),this['fRY1']<0x0&&(_0x5746bf=-this['fRY1']*_0x2cf837)>_0x414436&&(_0x414436=_0x5746bf),this['fRY2']>0x1&&(_0x5746bf=(this['fRY2']-0x1)*_0x2cf837)>_0x414436&&(_0x414436=_0x5746bf));for(var _0x196227,_0x22e78f=_0x414436/_0x1f32f0,_0x40e848={'fX':0x0,'fY':0x0},_0x5cc65f={'fX':0x0,'fY':0x0},_0x5db342=0x0;_0x5db342<_0x551ecd;++_0x5db342)if(_0x5cc65f['fX']=this['pBasePTZPoints'][_0x225558][_0x5db342]['fX'],_0x5cc65f['fY']=this['pBasePTZPoints'][_0x225558][_0x5db342]['fY'],!(Math['abs'](_0x5cc65f['fX']-0.5)<_0x24183&&Math['abs'](_0x5cc65f['fY']-0.5)<_0x24183)){var _0x187c04={'fX':0x0,'fY':0x0},_0x1039fb={'fX':0x0,'fY':0x0};_0x187c04['fX']=_0x5cc65f['fX']-0.5,_0x187c04['fY']=_0x5cc65f['fY']-0.5,_0x1039fb['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x1039fb['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0xe26d09=Math['sqrt'](_0x187c04['fX']*_0x187c04['fX']+_0x187c04['fY']*_0x187c04['fY']),_0x4163ef=Math['sqrt'](_0x1039fb['fX']*_0x1039fb['fX']+_0x1039fb['fY']*_0x1039fb['fY']);if(_0x196227=Math['acos']((_0x187c04['fX']*_0x1039fb['fX']+_0x187c04['fY']*_0x1039fb['fY'])/(_0xe26d09*_0x4163ef)),_0x187c04['fX']*_0x1039fb['fY']-_0x187c04['fY']*_0x1039fb['fX']>0x0&&(_0x196227=6.2831852-_0x196227),_0x40e848['fX']=0x1-_0x196227/6.2831853,_0x40e848['fY']=0x1-(0x2*(0.5-_0xe26d09)-_0x22e78f)/(0.8-_0x22e78f),_0x40e848['fY']>=0x0&&_0x40e848['fX']>=0x0&&_0x40e848['fY']<=0x1&&_0x40e848['fX']<=0x1){var _0x5583d0=this['nPanoPTZPointNum'][_0x225558];this['pPanoPTZPoints'][_0x225558][_0x5583d0]['fX']=_0x40e848['fX'],this['pPanoPTZPoints'][_0x225558][_0x5583d0]['fY']=_0x40e848['fY'],this['nPanoPTZPointNum'][_0x225558]=this['nPanoPTZPointNum'][_0x225558]+0x1;}}return _0x990bc1['SR_OK'];}},{'key':'GetPanoPTZWall','value':function(_0x4f12f2){if(null==this['pRenderParam'][_0x4f12f2]||null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pBasePTZPoints'][_0x4f12f2])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x2c166b,_0x4c5763,_0x9031e=this['nBasePTZPointNum'][_0x4f12f2];_0x2c166b=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4c5763=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x2549e0,_0xc0c08c,_0xfef1a,_0x31244a,_0x49ad54,_0x56f57c=0x0,_0x342b20=0x1,_0x4c4e7a=0.1,_0x21489d=0.9;this['fRX1']<0x0&&(_0x2549e0=0x1*-this['fRX1'],_0x56f57c=_0x2549e0/=0x2*_0x4c5763),this['fRX2']>0x1&&(_0xc0c08c=0x1*(this['fRX2']-0x1),_0x342b20=0x1-(_0xc0c08c/=0x2*_0x4c5763)),this['fRY1']<0x0&&(_0xfef1a=-this['fRY1']*_0x2c166b,_0x4c4e7a=(_0xfef1a/=0x2*_0x4c5763)>0.1?_0xfef1a:0.1),this['fRY2']>0x1&&(_0x31244a=(this['fRY2']-0x1)*_0x2c166b,_0x21489d=(_0x31244a/=0x2*_0x4c5763)>0x1-0.9?0x1-_0x31244a:0.9);for(var _0x554298={'fX':0x0,'fY':0x0},_0x3b645c={'fX':0x0,'fY':0x0},_0x5513a0=0x0;_0x5513a0<_0x9031e;++_0x5513a0){_0x3b645c['fX']=this['pBasePTZPoints'][_0x4f12f2][_0x5513a0]['fX'],_0x3b645c['fY']=this['pBasePTZPoints'][_0x4f12f2][_0x5513a0]['fY'];var _0x556870=0x2*_0x3b645c['fX']*_0x4c5763,_0x541156=0x2*_0x3b645c['fY']*_0x4c5763;if(_0x49ad54=Math['sqrt'](_0x4c5763*_0x4c5763-(_0x541156-_0x4c5763)*(_0x541156-_0x4c5763)),!(Math['abs'](_0x49ad54)<_0x24183)&&(_0x3b645c['fX']=_0x4c5763*(_0x556870-_0x4c5763)/_0x49ad54+_0x4c5763,_0x3b645c['fY']=_0x541156,_0x554298['fX']=(_0x3b645c['fX']-0x2*_0x56f57c*_0x4c5763)/(0x2*(_0x342b20-_0x56f57c)*_0x4c5763),_0x554298['fY']=(_0x3b645c['fY']-0x2*_0x4c4e7a*_0x4c5763)/(0x2*(_0x21489d-_0x4c4e7a)*_0x4c5763),_0x554298['fY']>=0x0&&_0x554298['fX']>=0x0&&_0x554298['fY']<=0x1&&_0x554298['fX']<=0x1)){var _0x1f7cae=this['nPanoPTZPointNum'][_0x4f12f2];this['pPanoPTZPoints'][_0x4f12f2][_0x1f7cae]['fX']=_0x554298['fX'],this['pPanoPTZPoints'][_0x4f12f2][_0x1f7cae]['fY']=_0x554298['fY'],this['nPanoPTZPointNum'][_0x4f12f2]=this['nPanoPTZPointNum'][_0x4f12f2]+0x1;}}return _0x990bc1['SR_OK'];}},{'key':'GetPointPano2FishCeiling','value':function(_0x554751,_0x5df104,_0x5e53c6){if(null==_0x554751||null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x215957,_0x8c33a8;_0x215957=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x8c33a8=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x47420f,_0x1df340=0x0,_0x11a3f0=0x1,_0x1db710=0x0,_0x286afe=0x1,_0x512296=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x47420f=0x1*-this['fRX1'])>_0x512296&&(_0x512296=_0x47420f),_0x1df340=_0x47420f/=0x2*_0x8c33a8),this['fRX2']>0x1&&((_0x47420f=0x1*(this['fRX2']-0x1))>_0x512296&&(_0x512296=_0x47420f),_0x11a3f0=0x1-(_0x47420f/=0x2*_0x8c33a8)),this['fRY1']<0x0&&((_0x47420f=-this['fRY1']*_0x215957)>_0x512296&&(_0x512296=_0x47420f),_0x1db710=_0x47420f/=0x2*_0x8c33a8),this['fRY2']>0x1&&((_0x47420f=(this['fRY2']-0x1)*_0x215957)>_0x512296&&(_0x512296=_0x47420f),_0x286afe=0x1-(_0x47420f/=0x2*_0x8c33a8)));var _0x2aada9,_0x412563,_0x2b9df0=_0x512296/_0x8c33a8,_0x812eb6={},_0x46ea1c={};return _0x812eb6['fX']=_0x5df104,_0x812eb6['fY']=(0.8-_0x2b9df0)*_0x5e53c6+_0x2b9df0,_0x2aada9=6.2831853*_0x812eb6['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x412563=0.5*(0x1-_0x812eb6['fY']),_0x46ea1c['fX']=0.5-_0x412563*Math['sin'](_0x2aada9),_0x46ea1c['fY']=0.5+_0x412563*Math['cos'](_0x2aada9),_0x46ea1c['fX']=(_0x46ea1c['fX']-_0x1df340)/(_0x11a3f0-_0x1df340),_0x46ea1c['fY']=(_0x46ea1c['fY']-_0x1db710)/(_0x286afe-_0x1db710),_0x554751['fX']=_0x46ea1c['fX'],_0x554751['fY']=_0x46ea1c['fY'],_0x990bc1['SR_OK'];}},{'key':'GetPointPano2FishFloor','value':function(_0x443faf,_0x2c6a9d,_0x3b54d5){if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x443faf)return _0x990bc1['SR_ERR_PARAM'];var _0xf34402,_0x180a92;_0xf34402=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x180a92=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0xa67729,_0x1b0714=0x0,_0x240cf1=0x1,_0x4cc089=0x0,_0x9eab80=0x1,_0x423714=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0xa67729=0x1*-this['fRX1'])>_0x423714&&(_0x423714=_0xa67729),_0x1b0714=_0xa67729/=0x2*_0x180a92),this['fRX2']>0x1&&((_0xa67729=0x1*(this['fRX2']-0x1))>_0x423714&&(_0x423714=_0xa67729),_0x240cf1=0x1-(_0xa67729/=0x2*_0x180a92)),this['fRY1']<0x0&&((_0xa67729=-this['fRY1']*_0xf34402)>_0x423714&&(_0x423714=_0xa67729),_0x4cc089=_0xa67729/=0x2*_0x180a92),this['fRY2']>0x1&&((_0xa67729=(this['fRY2']-0x1)*_0xf34402)>_0x423714&&(_0x423714=_0xa67729),_0x9eab80=0x1-(_0xa67729/=0x2*_0x180a92)));var _0x26705a,_0x77e32b,_0x5422c4=_0x423714/_0x180a92,_0x7e09ad={},_0x52f66d={};return _0x7e09ad['fX']=0x1-_0x2c6a9d,_0x7e09ad['fY']=(0.8-_0x5422c4)*(0x1-_0x3b54d5)+_0x5422c4,_0x26705a=6.2831853*_0x7e09ad['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x77e32b=0.5*(0x1-_0x7e09ad['fY']),_0x52f66d['fX']=0.5-_0x77e32b*Math['sin'](_0x26705a),_0x52f66d['fY']=0.5+_0x77e32b*Math['cos'](_0x26705a),_0x52f66d['fX']=(_0x52f66d['fX']-_0x1b0714)/(_0x240cf1-_0x1b0714),_0x52f66d['fY']=(_0x52f66d['fY']-_0x4cc089)/(_0x9eab80-_0x4cc089),_0x443faf['fX']=_0x52f66d['fX'],_0x443faf['fY']=_0x52f66d['fY'],_0x990bc1['SR_OK'];}},{'key':'GetPointPano2FishWall','value':function(_0x586029,_0x242977,_0x3db47d){if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x586029)return _0x990bc1['SR_ERR_PARAM'];var _0x18da4c,_0x1196bd;_0x18da4c=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x1196bd=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x32b45f,_0x3e1fd8,_0x3899f2,_0x178b7b,_0x4fe758=0x0,_0x2beec4=0x1,_0x5ad81f=0.1,_0x2ddfbc=0.9,_0x325cf9=0x0,_0x3c7574=0x1,_0x46a728=0x0,_0x3b5c34=0x1;this['fRX1']<0x0&&(_0x32b45f=0x1*-this['fRX1'],_0x4fe758=_0x32b45f/=0x2*_0x1196bd,_0x325cf9=_0x32b45f),this['fRX2']>0x1&&(_0x3e1fd8=0x1*(this['fRX2']-0x1),_0x2beec4=0x1-(_0x3e1fd8/=0x2*_0x1196bd),_0x3c7574=0x1-_0x3e1fd8),this['fRY1']<0x0&&(_0x3899f2=-this['fRY1']*_0x18da4c,_0x5ad81f=(_0x3899f2/=0x2*_0x1196bd)>0.1?_0x3899f2:0.1,_0x46a728=_0x3899f2),this['fRY2']>0x1&&(_0x178b7b=(this['fRY2']-0x1)*_0x18da4c,_0x2ddfbc=(_0x178b7b/=0x2*_0x1196bd)>0x1-0.9?0x1-_0x178b7b:0.9,_0x3b5c34=0x1-_0x178b7b);var _0x1cb92c={},_0xee769f={};_0x1cb92c['fX']=_0x242977*(_0x2beec4-_0x4fe758)+_0x4fe758,_0x1cb92c['fY']=_0x3db47d*(_0x2ddfbc-_0x5ad81f)+_0x5ad81f;var _0x2ec25e=Math['sqrt'](0.25-(_0x1cb92c['fY']-0.5)*(_0x1cb92c['fY']-0.5));return _0xee769f['fX']=(_0x1cb92c['fX']-0.5)*_0x2ec25e/0.5+0.5,_0xee769f['fY']=_0x1cb92c['fY'],_0xee769f['fX']=(_0xee769f['fX']-_0x325cf9)/(_0x3c7574-_0x325cf9),_0xee769f['fY']=(_0xee769f['fY']-_0x46a728)/(_0x3b5c34-_0x46a728),_0x586029['fX']=_0xee769f['fX'],_0x586029['fY']=_0xee769f['fY'],_0x990bc1['SR_OK'];}},{'key':'UpdatePTZPosition','value':function(_0x511760,_0x30230f,_0x357d73){if(null==this['pRenderParam'][_0x511760])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x3c204a={'fHAngleSin':0x0,'fHAngleCos':0x0,'fVAngleSin':0x0,'fVAngleCos':0x0},_0x231459=_0x990bc1['SR_OK'];if(_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x511760]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x511760]['nDisplayEffect']){if((_0x231459=this['ComputeAngleVertical'](_0x30230f,_0x357d73,_0x3c204a,this['pRenderParam'][_0x511760]['nDisplayEffect']))!=_0x990bc1['SR_OK'])return _0x231459;}else{if(_0x593e88['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x511760]['nDisplayEffect'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if((_0x231459=this['ComputeAngleHorizontal'](_0x30230f,_0x357d73,_0x3c204a))!=_0x990bc1['SR_OK'])return _0x231459;}return 0x0==this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],_0x3c204a,this['pRenderParam'][_0x511760]['fZoom'],this['pRenderParam'][_0x511760]['nDisplayEffect'])?_0x990bc1['SR_ERR_PARAM']:(this['pRenderParam'][_0x511760]['fCosH']=_0x3c204a['fHAngleCos'],this['pRenderParam'][_0x511760]['fSinH']=_0x3c204a['fHAngleSin'],this['pRenderParam'][_0x511760]['fCosV']=_0x3c204a['fVAngleCos'],this['pRenderParam'][_0x511760]['fSinV']=_0x3c204a['fVAngleSin'],_0x990bc1['SR_OK']);}},{'key':'JudgeDisplayEffect','value':function(_0x321c7f){var _0x1b2b64=0x0;switch(_0x1b2b64){case 0x0:return _0x1b2b64=this['GetPlaceType'](_0x321c7f),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0x990bc1['SR_OK'];case 0x3:return(_0x1b2b64=this['GetPlaceType'](_0x321c7f))==this['nPlaceType']||0x4==this['nPlaceType']?_0x990bc1['SR_OK']:_0x990bc1['SR_ERR_NOT_SUPPORT'];case 0x2:case 0x1:return(_0x1b2b64=this['GetPlaceType'](_0x321c7f))==this['nPlaceType']||0x4==_0x1b2b64?_0x990bc1['SR_OK']:_0x990bc1['SR_ERR_NOT_SUPPORT'];default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return _0x990bc1['SR_ERR_NOT_SUPPORT'];}},{'key':'GetPlaceType','value':function(_0x69dd02){switch(_0x69dd02){case _0x593e88['SR_DE_FISH_PTZ_CEILING']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x593e88['SR_DE_FISH_CYLINDER_CEILING']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:return 0x3;case _0x593e88['SR_DE_FISH_PTZ_FLOOR']:case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x593e88['SR_DE_FISH_PANARAMA_FLOOR_180']:case _0x593e88['SR_DE_FISH_CYLINDER_FLOOR']:case _0x593e88['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x593e88['SR_DE_FISH_PTZ_WALL']:case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x593e88['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:return 0x1;case _0x593e88['SR_DE_FISH_SEMISPHERE']:case _0x593e88['SR_DE_FISH_ORIGINAL']:case _0x593e88['SR_DE_FISH_PLANET']:case _0x593e88['SR_DE_PANORAMA_SPHERE']:case _0x593e88['SR_DE_PANORAMA_PLANET']:case _0x593e88['SR_DE_ELLIPSOID_VIEWLIMITED']:return 0x4;default:return 0x0;}return 0x0;}},{'key':'SetFishParam','value':function(_0x4b7c85,_0x5c74c5){if(_0x4b7c85<0x0||_0x4b7c85>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];if(null==_0x5c74c5)return _0x990bc1['SR_ERR_PARAM'];if(null==this['pRenderParam'][_0x4b7c85])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x14fb26=_0x990bc1['SR_OK'];switch(_0x5c74c5['nFishParamType']){case _0x53c56d['SR_FPT_CENTER']:if((_0x14fb26=this['UpdateCircyeParam'](_0x5c74c5['fRXLeft'],_0x5c74c5['fRXRight'],_0x5c74c5['fRYTop'],_0x5c74c5['fRYBottom']))!=_0x990bc1['SR_OK'])return _0x14fb26;this['pRenderParam'][_0x4b7c85]['bCut']=_0x5c74c5['bCut'],this['bBlack']=_0x5c74c5['bBlack'];break;case _0x53c56d['SR_FPT_ANGLE']:if(_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if((_0x14fb26=this['UpdateWideScanAngle'](_0x4b7c85,_0x5c74c5['fAngle']))!=_0x990bc1['SR_OK'])return _0x14fb26;this['pFishParam'][_0x4b7c85]['fAngle']=_0x5c74c5['fAngle'];break;case _0x53c56d['SR_FPT_ZOOM']:if(_0x593e88['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if((_0x14fb26=this['UpdateRangeParam'](_0x4b7c85,_0x5c74c5['fZoom']))!=_0x990bc1['SR_OK'])return _0x14fb26;this['pFishParam'][_0x4b7c85]['fZoom']=_0x5c74c5['fZoom'];break;case _0x53c56d['SR_FPT_PTZ']:if(_0x593e88['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x4b7c85]['nDisplayEffect'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];if((_0x14fb26=this['UpdatePTZPosition'](_0x4b7c85,_0x5c74c5['fPTZX'],_0x5c74c5['fPTZY'],this['pRenderParam'][_0x4b7c85]['fZoom'],!0x0))!=_0x990bc1['SR_OK'])return _0x14fb26;this['pFishParam'][_0x4b7c85]['fPTZX']=_0x5c74c5['fPTZX'],this['pFishParam'][_0x4b7c85]['fPTZY']=_0x5c74c5['fPTZY'];break;case _0x53c56d['SR_FPT_NULL']:default:return _0x990bc1['SR_ERR_NOT_SUPPORT'];}return this['ComputePTZPoints'](),_0x990bc1['SR_OK'];}},{'key':'GetFishParam','value':function(_0x3afaaf,_0x43f80d){return _0x3afaaf<0x0||_0x3afaaf>=_0x4fe2fc||null==_0x43f80d||null==this['pFishParam'][_0x3afaaf]?_0x990bc1['SR_ERR_PARAM']:(_0x43f80d['fRXLeft']=this['fRX1'],_0x43f80d['fRXRight']=this['fRX2'],_0x43f80d['fRYTop']=this['fRY1'],_0x43f80d['fRYBottom']=this['fRY2'],_0x43f80d['bBlack']=this['bBlack'],_0x43f80d['bCut']=this['pRenderParam'][_0x3afaaf]['bCut'],_0x43f80d['nFishParamType']=this['pFishParam'][_0x3afaaf]['nFishParamType'],_0x43f80d['fAngle']=this['pFishParam'][_0x3afaaf]['fAngle'],_0x43f80d['fZoom']=this['pFishParam'][_0x3afaaf]['fZoom'],_0x43f80d['fPTZX']=this['pFishParam'][_0x3afaaf]['fPTZX'],_0x43f80d['fPTZY']=this['pFishParam'][_0x3afaaf]['fPTZY'],_0x990bc1['SR_OK']);}},{'key':'GetRenderParam','value':function(_0x4d895a,_0x213248){return _0x4d895a<0x0||_0x4d895a>=_0x4fe2fc||null==_0x213248||null==this['pRenderParam'][_0x4d895a]?_0x990bc1['SR_ERR_PARAM']:(_0x213248['fRXLeft']=this['fRX1'],_0x213248['fRXRight']=this['fRX2'],_0x213248['fRYTop']=this['fRY1'],_0x213248['fRYBottom']=this['fRY2'],_0x213248['bBlack']=this['bBlack'],_0x213248['fCosH']=this['pRenderParam'][_0x4d895a]['fCosH'],_0x213248['fSinH']=this['pRenderParam'][_0x4d895a]['fSinH'],_0x213248['fCosV']=this['pRenderParam'][_0x4d895a]['fCosV'],_0x213248['fSinV']=this['pRenderParam'][_0x4d895a]['fSinV'],_0x213248['fAngle']=this['pRenderParam'][_0x4d895a]['fAngle'],_0x213248['fZoom']=this['pRenderParam'][_0x4d895a]['fZoom'],_0x213248['nDisplayEffect']=this['pRenderParam'][_0x4d895a]['nDisplayEffect'],_0x213248['bCut']=this['pRenderParam'][_0x4d895a]['bCut'],_0x990bc1['SR_OK']);}},{'key':'UpdateCircyeParam','value':function(_0x34af4c,_0x1317a5,_0x2a9dc7,_0x5e344c){if(_0x34af4c<=-0.5||_0x34af4c>=0.4||_0x1317a5<=0.6||_0x1317a5>=1.5||_0x2a9dc7<=-0.5||_0x2a9dc7>=0.4||_0x5e344c<=0.6||_0x5e344c>=1.5||_0x34af4c+_0x1317a5<=0.8||_0x34af4c+_0x1317a5>=1.2||_0x2a9dc7+_0x5e344c<=0.8||_0x2a9dc7+_0x5e344c>=1.2)return _0x990bc1['SR_ERR_PARAM'];if(_0x34af4c<0x0||_0x1317a5>0x1||_0x2a9dc7<0x0||_0x5e344c>0x1){for(var _0x235d54=0x0;_0x235d54<_0x4fe2fc;++_0x235d54)if(null!=this['pRenderParam'][_0x235d54]&&(_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x235d54]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x235d54]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x235d54]['nDisplayEffect'])){var _0x2acf50={};if(_0x2acf50['fHAngleCos']=this['pRenderParam'][_0x235d54]['fCosH'],_0x2acf50['fHAngleSin']=this['pRenderParam'][_0x235d54]['fSinH'],_0x2acf50['fVAngleCos']=this['pRenderParam'][_0x235d54]['fCosV'],_0x2acf50['fVAngleSin']=this['pRenderParam'][_0x235d54]['fSinV'],0x0==this['IsInImage'](_0x34af4c,_0x1317a5,_0x2a9dc7,_0x5e344c,_0x2acf50,this['pRenderParam'][_0x235d54]['fZoom'],this['pRenderParam'][_0x235d54]['nDisplayEffect']))return _0x990bc1['SR_ERR_PARAM'];}}return this['fRX1']=_0x34af4c,this['fRX2']=_0x1317a5,this['fRY1']=_0x2a9dc7,this['fRY2']=_0x5e344c,_0x990bc1['SR_OK'];}},{'key':'UpdateWideScanAngle','value':function(_0x3e950b,_0x1ef2bf){return null==this['pRenderParam'][_0x3e950b]?_0x990bc1['SR_ERR_CALL_ORDER']:(_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x3e950b]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x3e950b]['nDisplayEffect']?this['pRenderParam'][_0x3e950b]['fAngle']=_0x1ef2bf:_0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x3e950b]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x3e950b]['nDisplayEffect']||(this['pRenderParam'][_0x3e950b]['fAngle']=-_0x1ef2bf),_0x990bc1['SR_OK']);}},{'key':'ComputeAngleVertical','value':function(_0x21705e,_0x5abb57,_0x533aca,_0x458e5b){var _0x176cbc=_0x21705e,_0x1a5aaa=_0x5abb57,_0x5c71ac=Math['sqrt']((_0x1a5aaa-0.5)*(_0x1a5aaa-0.5)+(_0x176cbc-0.5)*(_0x176cbc-0.5));if(_0x5c71ac>0.5)return _0x990bc1['SR_ERR_PARAM'];if(_0x5c71ac<0.001)return _0x533aca['fVAngleCos']=0x1,_0x533aca['fVAngleSin']=0x0,_0x533aca['fHAngleCos']=0x1,_0x533aca['fHAngleSin']=0x0,_0x990bc1['SR_OK'];if(_0x458e5b==_0x593e88['SR_DE_FISH_PTZ_CEILING']){_0x533aca['fHAngleCos']=(0.5-_0x1a5aaa)/_0x5c71ac,_0x533aca['fHAngleSin']=(0.5-_0x176cbc)/_0x5c71ac;var _0x2e59a4=_0x5c71ac*_0x515c4d;_0x533aca['fVAngleCos']=Math['cos'](_0x2e59a4),_0x533aca['fVAngleSin']=Math['sin'](_0x2e59a4);}else{if(_0x458e5b!=_0x593e88['SR_DE_FISH_PTZ_FLOOR'])return _0x990bc1['SR_ERR_PARAM'];_0x533aca['fHAngleCos']=(_0x1a5aaa-0.5)/_0x5c71ac,_0x533aca['fHAngleSin']=(0.5-_0x176cbc)/_0x5c71ac;var _0x289b1c=_0x5c71ac*_0x515c4d;_0x533aca['fVAngleCos']=Math['cos'](_0x289b1c),_0x533aca['fVAngleSin']=Math['sin'](_0x289b1c);}return _0x990bc1['SR_OK'];}},{'key':'ComputeAngleHorizontal','value':function(_0x2d6757,_0x35a9c9,_0x1a8cb5){var _0x107e37,_0x16d341,_0x1446d6,_0x152f52,_0x4baaf9,_0x2c64ef,_0x90ed9,_0x15df14=_0x2d6757,_0x4549a3=_0x35a9c9;return(_0x4549a3-(_0x4baaf9=0.5))*(_0x4549a3-_0x4baaf9)+(_0x15df14-_0x4baaf9)*(_0x15df14-_0x4baaf9)>0.25?_0x990bc1['SR_ERR_PARAM']:(_0x2c64ef=(_0x4549a3-_0x4baaf9)/_0x4baaf9*_0x515c4d/0x2,_0x107e37=Math['cos'](_0x2c64ef),_0x16d341=Math['sin'](_0x2c64ef),(_0x15df14-_0x4baaf9)/_0x4baaf9/_0x107e37>0x1||(_0x15df14-_0x4baaf9)/_0x4baaf9/_0x107e37<-0x1?_0x990bc1['SR_ERR_PARAM']:(_0x90ed9=(_0x15df14-_0x4baaf9)/_0x4baaf9/_0x107e37*_0x515c4d/0x2,_0x1446d6=Math['cos'](_0x90ed9),_0x152f52=Math['sin'](_0x90ed9),_0x1a8cb5['fVAngleCos']=_0x107e37,_0x1a8cb5['fVAngleSin']=_0x16d341,_0x1a8cb5['fHAngleCos']=_0x1446d6,_0x1a8cb5['fHAngleSin']=_0x152f52,_0x990bc1['SR_OK']));}},{'key':'IsInImage','value':function(_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c,_0x10109a,_0x2c96bc){return 0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x1,0.5,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x0,0.5,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0.5,0x1,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0.5,0x0,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x0,0x0,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x0,0x1,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x1,0x1,_0x2c96bc)&&0x1!=this['IsOutofImage'](_0xe3b966,_0x5b09ab,_0x1fa01a,_0x429622,_0x27549c['fHAngleCos'],_0x27549c['fHAngleSin'],_0x27549c['fVAngleCos'],_0x27549c['fVAngleSin'],_0x10109a,0x1,0x0,_0x2c96bc);}},{'key':'IsOutofImage','value':function(_0x10a5f9,_0xda1dab,_0x2d11d2,_0x92a993,_0x294d25,_0x33118c,_0x58b944,_0x3b3a54,_0x4d9425,_0x6b8bc0,_0x1a340a,_0x35373c){var _0x551d8f,_0x5bb120,_0x2c2268,_0x7773ca,_0x5dc46b,_0x5e2d25,_0x1e10fe,_0x49bdfa,_0x30c09b,_0x561085,_0x48f735,_0x44a676,_0x176037;if(_0x48f735=(_0x10a5f9+_0xda1dab)/0x2*0x1,_0x44a676=(_0x2d11d2+_0x92a993)/0x2*(_0x561085=(_0xda1dab-_0x10a5f9)/(_0x92a993-_0x2d11d2)),_0x176037=(_0xda1dab-_0x10a5f9)/0x2*0x1,_0x35373c==_0x593e88['SR_DE_FISH_PTZ_CEILING']){if(_0x5bb120=_0x6b8bc0-0.5,_0x2c2268=(_0x551d8f=0.5-_0x1a340a)*_0x58b944+(_0x5e2d25=_0x4d9425)*_0x3b3a54,(_0x1e10fe=_0x5e2d25*_0x58b944-_0x551d8f*_0x3b3a54)<=0x0)return!0x0;_0x30c09b=Math['sqrt'](_0x5bb120*_0x5bb120+_0x2c2268*_0x2c2268);var _0x3dc451=Math['sqrt'](_0x5bb120*_0x5bb120+_0x2c2268*_0x2c2268+_0x1e10fe*_0x1e10fe),_0x7b16f2=Math['asin'](_0x30c09b/_0x3dc451)/1.5707963*0.5;if(_0x5dc46b=(-((_0x5bb120=_0x7b16f2*_0x5bb120/_0x30c09b)*_0x33118c+(_0x2c2268=_0x7b16f2*_0x2c2268/_0x30c09b)*_0x294d25)*_0x176037*0x2+_0x44a676)/_0x561085,(_0x7773ca=((_0x5bb120*_0x294d25-_0x2c2268*_0x33118c)*_0x176037*0x2+_0x48f735)/0x1)<0x0||_0x7773ca>0x1||_0x5dc46b<0x0||_0x5dc46b>0x1)return!0x0;}if(_0x35373c==_0x593e88['SR_DE_FISH_PTZ_FLOOR']){if(_0x5bb120=_0x6b8bc0-0.5,_0x2c2268=(_0x551d8f=_0x1a340a-0.5)*_0x58b944+(_0x5e2d25=_0x4d9425)*_0x3b3a54,(_0x1e10fe=_0x5e2d25*_0x58b944-_0x551d8f*_0x3b3a54)<=0x0)return!0x0;_0x30c09b=Math['sqrt'](_0x5bb120*_0x5bb120+_0x2c2268*_0x2c2268);var _0xf47932=Math['sqrt'](_0x5bb120*_0x5bb120+_0x2c2268*_0x2c2268+_0x1e10fe*_0x1e10fe),_0xabfaca=Math['asin'](_0x30c09b/_0xf47932)/1.5707963*0.5;if(_0x5dc46b=(((_0x5bb120=_0xabfaca*_0x5bb120/_0x30c09b)*_0x33118c+(_0x2c2268=_0xabfaca*_0x2c2268/_0x30c09b)*_0x294d25)*_0x176037*0x2+_0x44a676)/_0x561085,(_0x7773ca=((_0x5bb120*_0x294d25-_0x2c2268*_0x33118c)*_0x176037*0x2+_0x48f735)/0x1)<0x0||_0x7773ca>0x1||_0x5dc46b<0x0||_0x5dc46b>0x1)return!0x0;}if(_0x35373c==_0x593e88['SR_DE_FISH_PTZ_WALL']){if(_0x7773ca=(_0x5bb120=_0x6b8bc0-0.5)*_0x294d25+(_0x1e10fe=(_0x5e2d25=_0x4d9425)*_0x58b944-(_0x551d8f=_0x1a340a-0.5)*_0x3b3a54)*_0x33118c,_0x5dc46b=_0x2c2268=_0x551d8f*_0x58b944+_0x5e2d25*_0x3b3a54,(_0x49bdfa=_0x1e10fe*_0x294d25-_0x5bb120*_0x33118c)<=0x0)return!0x0;_0x30c09b=Math['sqrt'](_0x7773ca*_0x7773ca+_0x5dc46b*_0x5dc46b);var _0x5caf2d=Math['sqrt'](_0x7773ca*_0x7773ca+_0x5dc46b*_0x5dc46b+_0x49bdfa*_0x49bdfa),_0x1c29bb=Math['asin'](_0x30c09b/_0x5caf2d)/1.5707963*0.5;if(_0x5dc46b=(_0x1c29bb*_0x5dc46b/_0x30c09b*_0x176037*0x2+_0x44a676)/_0x561085,(_0x7773ca=(_0x1c29bb*_0x7773ca/_0x30c09b*_0x176037*0x2+_0x48f735)/0x1)<0x0||_0x7773ca>0x1||_0x5dc46b<0x0||_0x5dc46b>0x1)return!0x0;}return!0x1;}},{'key':'ComputePTZPoints','value':function(){if(_0x547537==this['nWndPort'])return _0x990bc1['SR_ERR_CALL_ORDER'];for(var _0x1bd88b=0x0;_0x1bd88b<_0x4fe2fc;++_0x1bd88b)if(null!=this['pRenderParam'][_0x1bd88b]&&(_0x593e88['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x1bd88b]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x1bd88b]['nDisplayEffect']||_0x593e88['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x1bd88b]['nDisplayEffect'])){var _0x25dfb3=_0x990bc1['SR_OK'];if(this['nPTZDisplayMode']==_0x28e52b['SR_DM_RANGE']){if(_0x25dfb3=this['GetRangePoints'](_0x1bd88b),_0x990bc1['SR_OK']!=_0x25dfb3)continue;if(_0x25dfb3=this['TransformPTZRangePoints'](_0x1bd88b),_0x990bc1['SR_OK']!=_0x25dfb3)continue;}else{if(this['nPTZDisplayMode']==_0x28e52b['SR_DM_RECT']&&(_0x25dfb3=this['GetRectPoints'](_0x1bd88b),_0x990bc1['SR_OK']!=_0x25dfb3))continue;}}return _0x990bc1['SR_OK'];}},{'key':'GetWndPort','value':function(){return this['nWndPort'];}},{'key':'GetPTZDisplayMode','value':function(){return this['nPTZDisplayMode'];}},{'key':'GetPTZColor','value':function(_0x389e96,_0x1d867a){return _0x389e96<0x0||_0x389e96>=_0x4fe2fc||null==_0x1d867a?_0x990bc1['SR_ERR_PARAM']:(_0x1d867a['fA']=this['stPTZColor'][_0x389e96]['fA'],_0x1d867a['fR']=this['stPTZColor'][_0x389e96]['fR'],_0x1d867a['fG']=this['stPTZColor'][_0x389e96]['fG'],_0x1d867a['fB']=this['stPTZColor'][_0x389e96]['fB'],this['pPTZSetColor'][_0x389e96]['bSetColor']&&(Math['abs'](this['pPTZSetColor'][_0x389e96]['fA'])<_0x24183||Math['abs'](this['pPTZSetColor'][_0x389e96]['fR'])<_0x24183||Math['abs'](this['pPTZSetColor'][_0x389e96]['fG'])<_0x24183||Math['abs'](this['pPTZSetColor'][_0x389e96]['fB'])<_0x24183)&&(_0x1d867a['fA']=this['pPTZSetColor'][_0x389e96]['fA'],_0x1d867a['fR']=this['pPTZSetColor'][_0x389e96]['fR'],_0x1d867a['fG']=this['pPTZSetColor'][_0x389e96]['fG'],_0x1d867a['fB']=this['pPTZSetColor'][_0x389e96]['fB']),_0x990bc1['SR_OK']);}},{'key':'SetPTZColor','value':function(_0x52db2d,_0x13d78b){return _0x52db2d<0x0||_0x52db2d>=_0x4fe2fc||null==_0x13d78b?_0x990bc1['SR_ERR_PARAM']:(this['pPTZSetColor'][_0x52db2d]['fR']=_0x13d78b['fR'],this['pPTZSetColor'][_0x52db2d]['fG']=_0x13d78b['fG'],this['pPTZSetColor'][_0x52db2d]['fB']=_0x13d78b['fB'],this['pPTZSetColor'][_0x52db2d]['fA']=_0x13d78b['fA'],this['pPTZSetColor'][_0x52db2d]['bSetColor']=!0x0,_0x990bc1['SR_OK']);}},{'key':'IsPTZSelected','value':function(_0x31abcb){return!(_0x31abcb<0x0||_0x31abcb>=_0x4fe2fc)&&this['bPTZSelected'][_0x31abcb];}},{'key':'GetPTZPort','value':function(_0x2d3ce3,_0x5b7a7d,_0x4cc805){if(this['nWndPort']==_0x547537)return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];var _0x10404b=_0x4fe2fc,_0x4de216={};_0x4de216['fX']=_0x2d3ce3,_0x4de216['fY']=_0x5b7a7d;for(var _0x2add83=0x0;_0x2add83<_0x4fe2fc;++_0x2add83)this['bPTZSelected'][_0x2add83]=!0x1;if(this['nPTZDisplayMode']==_0x28e52b['SR_DM_RANGE']){switch(this['pRenderParam'][this['nWndPort']]['nDisplayEffect']){case _0x593e88['SR_DE_FISH_PANORAMA_FLOOR_360']:this['GetPointPano2FishFloor'](_0x4de216,_0x2d3ce3,_0x5b7a7d);break;case _0x593e88['SR_DE_FISH_PANORAMA_CEILING_360']:this['GetPointPano2FishCeiling'](_0x4de216,_0x2d3ce3,_0x5b7a7d);break;case _0x593e88['SR_DE_FISH_PANORAMA_WALL']:this['GetPointPano2FishWall'](_0x4de216,_0x2d3ce3,_0x5b7a7d);}for(var _0x14d2a9=0x0;_0x14d2a9<_0x4fe2fc;++_0x14d2a9)if(0x0!=this['nOriPTZPointNum'][_0x14d2a9]){var _0x4a0a5e={};_0x4a0a5e['fX']=this['pOriPTZPoints'][_0x14d2a9][0x0]['fX'],_0x4a0a5e['fY']=this['pOriPTZPoints'][_0x14d2a9][0x0]['fY'];var _0x139be7={};_0x139be7['fX']=this['pOriPTZPoints'][_0x14d2a9][0x0]['fX'],_0x139be7['fY']=this['pOriPTZPoints'][_0x14d2a9][0x0]['fY'];for(var _0x2ba427=0x1;_0x2ba427<this['nOriPTZPointNum'][_0x14d2a9];++_0x2ba427)this['GetPTZRectange'](_0x4a0a5e,_0x139be7,this['pOriPTZPoints'][_0x14d2a9][_0x2ba427]);if(_0x4de216['fX']<=_0x4a0a5e['fX']&&_0x4de216['fX']>=_0x139be7['fX']&&_0x4de216['fY']>=_0x139be7['fY']&&_0x4de216['fY']<=_0x4a0a5e['fY']){_0x10404b=_0x14d2a9;break;}}}else{if(this['nPTZDisplayMode']!=_0x28e52b['SR_DM_RECT'])return _0x990bc1['SR_ERR_NOT_SUPPORT'];for(var _0x39a0a4=0x0;_0x39a0a4<_0x4fe2fc;++_0x39a0a4)if(_0x4de216['fX']<=this['pRectPoints'][_0x39a0a4][0x2]['fX']&&_0x4de216['fX']>=this['pRectPoints'][_0x39a0a4][0x0]['fX']&&_0x4de216['fY']>=this['pRectPoints'][_0x39a0a4][0x0]['fY']&&_0x4de216['fY']<=this['pRectPoints'][_0x39a0a4][0x2]['fY']){_0x10404b=_0x39a0a4;break;}}return _0x10404b<_0x4fe2fc?(this['bPTZSelected'][_0x10404b]=!0x0,_0x4cc805['nPTZPort']=_0x10404b,_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_NOT_SUPPORT'];}},{'key':'SetPTZPort','value':function(_0x4ae595){if(_0x4ae595<0x0||_0x4ae595>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];for(var _0x221e67=0x0;_0x221e67<_0x4fe2fc;++_0x221e67)this['bPTZSelected'][_0x221e67]=!0x1;if(this['nPTZDisplayMode']==_0x28e52b['SR_DM_RANGE']){if(0x0==this['nOriPTZPointNum'][_0x4ae595])return _0x990bc1['SR_ERR_PARAM'];this['bPTZSelected'][_0x4ae595]=!0x0;}else{if(0x0==this['nPTZRectNum'][_0x4ae595])return _0x990bc1['SR_ERR_PARAM'];this['bPTZSelected'][_0x4ae595]=!0x0;}return _0x990bc1['SR_OK'];}},{'key':'GetPTZRectange','value':function(_0x2bfe4b,_0x1845a4,_0x45cd2a){return _0x45cd2a['fX']<_0x1845a4['fX']&&(_0x1845a4['fX']=_0x45cd2a['fX']),_0x45cd2a['fY']<_0x1845a4['fY']&&(_0x1845a4['fY']=_0x45cd2a['fY']),_0x45cd2a['fX']>_0x2bfe4b['fX']&&(_0x2bfe4b['fX']=_0x45cd2a['fX']),_0x45cd2a['fY']>_0x2bfe4b['fY']&&(_0x2bfe4b['fY']=_0x45cd2a['fY']),_0x990bc1['SR_OK'];}},{'key':'GetPTZPoints','value':function(_0x19b519,_0x37a7b5,_0x406807){return _0x19b519<0x0||_0x19b519>=_0x4fe2fc?_0x990bc1['SR_ERR_PARAM']:null==this['pRenderParam'][this['nWndPort']]?_0x990bc1['SR_ERR_CALL_ORDER']:(_0x28e52b['SR_DM_RANGE']==_0x406807?null!=this['pOriPTZPoints'][_0x19b519]&&0x0!=this['nOriPTZPointNum'][_0x19b519]&&(_0x37a7b5['pstPoints']=this['pOriPTZPoints'][_0x19b519],_0x37a7b5['nPointNum']=this['nOriPTZPointNum'][_0x19b519]):_0x28e52b['SR_DM_RECT']==_0x406807&&null!=this['pRectPoints'][_0x19b519]&&(_0x37a7b5['pstPoints']=this['pRectPoints'][_0x19b519],_0x37a7b5['nPointNum']=0x4),_0x990bc1['SR_OK']);}},{'key':'SetPTZDisplayMode','value':function(_0x5b1620){return this['nPTZDisplayMode']=_0x5b1620,this['ComputePTZPoints']();}},{'key':'GetDisplayEffect','value':function(_0x55ee1c){return _0x55ee1c<0x0||_0x55ee1c>=_0x4fe2fc||null==this['pRenderParam']?_0x593e88['SR_DE_NULL']:this['pRenderParam'][_0x55ee1c]['nDisplayEffect'];}},{'key':'GetPTZFragmentPoints','value':function(_0x3461df,_0x474e1f,_0x4cb2e2){if(_0x3461df<0x0||_0x3461df>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];if(null==this['pPanoPTZPoints'][_0x3461df]||0x0==this['nPanoPTZPointNum'][_0x3461df])return _0x990bc1['SR_ERR_PARAM'];var _0x14df24=this['nPTZFragmentNode'][_0x3461df][_0x4cb2e2];if(_0x474e1f['nPointNum']=this['nPTZFragmentNode'][_0x3461df][_0x4cb2e2+0x1]-this['nPTZFragmentNode'][_0x3461df][_0x4cb2e2],_0x474e1f['nPointNum']<0x0)return _0x990bc1['SR_ERR_CALL_ORDER'];_0x474e1f['pstPoints']=[];for(var _0x51960c=0x0;_0x51960c<_0x474e1f['nPointNum'];++_0x51960c){var _0x5a3424={};_0x5a3424['fX']=this['pPanoPTZPoints'][_0x3461df][_0x14df24+_0x51960c]['fX'],_0x5a3424['fY']=this['pPanoPTZPoints'][_0x3461df][_0x14df24+_0x51960c]['fY'],_0x474e1f['pstPoints']['push'](_0x5a3424);}return _0x990bc1['SR_OK'];}},{'key':'GetPTZFragmentNum','value':function(_0x25e553){return _0x25e553<0x0||_0x25e553>=_0x4fe2fc||0x0==this['nPTZFragmentNum'][_0x25e553]?0x0:this['nPTZFragmentNum'][_0x25e553];}},{'key':'CalcPTZFragmentPoints','value':function(_0x4ce839){if(_0x4ce839<0x0||_0x4ce839>=_0x4fe2fc)return _0x990bc1['SR_ERR_PARAM'];if(null==this['pPanoPTZPoints'][_0x4ce839]||0x0==this['nPanoPTZPointNum'][_0x4ce839])return _0x990bc1['SR_ERR_CALL_ORDER'];this['nPTZFragmentNode'][_0x4ce839][0x0]=0x0,this['nPTZFragmentNum'][_0x4ce839]=0x1;for(var _0x5070d9=0x0,_0x56dc97=0x0;_0x56dc97<this['nPanoPTZPointNum'][_0x4ce839]-0x1;_0x56dc97++)Math['abs'](this['pPanoPTZPoints'][_0x4ce839][_0x56dc97+0x1]['fX']-this['pPanoPTZPoints'][_0x4ce839][_0x56dc97]['fX'])>0.5&&(_0x5070d9=this['nPTZFragmentNum'][_0x4ce839],this['nPTZFragmentNode'][_0x4ce839][_0x5070d9]=_0x56dc97+0x1,this['nPTZFragmentNum'][_0x4ce839]=this['nPTZFragmentNum'][_0x4ce839]+0x1);var _0x3562f4=this['nPanoPTZPointNum'][_0x4ce839];return Math['abs'](this['pPanoPTZPoints'][_0x4ce839][0x0]['fX']-this['pPanoPTZPoints'][_0x4ce839][_0x3562f4-0x1]['fX'])<0.5&&(this['pPanoPTZPoints'][_0x4ce839][_0x3562f4]['fX']=this['pPanoPTZPoints'][_0x4ce839][0x0]['fX'],this['pPanoPTZPoints'][_0x4ce839][_0x3562f4]['fY']=this['pPanoPTZPoints'][_0x4ce839][0x0]['fY'],this['nPanoPTZPointNum'][_0x4ce839]=this['nPanoPTZPointNum'][_0x4ce839]+0x1),_0x5070d9=this['nPTZFragmentNum'][_0x4ce839],this['nPTZFragmentNode'][_0x4ce839][_0x5070d9]=this['nPanoPTZPointNum'][_0x4ce839],_0x990bc1['SR_OK'];}},{'key':'IsPortAllocated','value':function(_0x14815c){return this['bPortAllocated'][_0x14815c];}},{'key':'GetPointFish2PanoCeiling','value':function(_0x463468,_0x193513,_0x29e30b){if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x463468)return _0x990bc1['SR_ERR_PARAM'];var _0x6ba03c,_0xb3517e;_0x6ba03c=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0xb3517e=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x3942d3,_0x1ef6c5=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x3942d3=0x1*-this['fRX1'])>_0x1ef6c5&&(_0x1ef6c5=_0x3942d3),this['fRX2']>0x1&&(_0x3942d3=0x1*(this['fRX2']-0x1))>_0x1ef6c5&&(_0x1ef6c5=_0x3942d3),this['fRY1']<0x0&&(_0x3942d3=-this['fRY1']*_0x6ba03c)>_0x1ef6c5&&(_0x1ef6c5=_0x3942d3),this['fRY2']>0x1&&(_0x3942d3=(this['fRY2']-0x1)*_0x6ba03c)>_0x1ef6c5&&(_0x1ef6c5=_0x3942d3));var _0x2002ba,_0x2e421a=_0x1ef6c5/_0xb3517e,_0x4f0b55={'fX':0x0,'fY':0x0};if(Math['abs'](_0x193513-0.5)<_0x24183&&Math['abs'](_0x29e30b-0.5)<_0x24183)return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0xebdf01={},_0x3176dd={};_0xebdf01['fX']=_0x193513-0.5,_0xebdf01['fY']=_0x29e30b-0.5,_0x3176dd['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x3176dd['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x575bd3=Math['sqrt'](_0xebdf01['fX']*_0xebdf01['fX']+_0xebdf01['fY']*_0xebdf01['fY']),_0x10951d=Math['sqrt'](_0x3176dd['fX']*_0x3176dd['fX']+_0x3176dd['fY']*_0x3176dd['fY']);return _0x2002ba=Math['acos']((_0xebdf01['fX']*_0x3176dd['fX']+_0xebdf01['fY']*_0x3176dd['fY'])/(_0x575bd3*_0x10951d)),_0xebdf01['fX']*_0x3176dd['fY']-_0xebdf01['fY']*_0x3176dd['fX']>0x0&&(_0x2002ba=6.2831852-_0x2002ba),_0x4f0b55['fX']=_0x2002ba/6.2831853,_0x4f0b55['fY']=(0x2*(0.5-_0x575bd3)-_0x2e421a)/(0.8-_0x2e421a),_0x4f0b55['fY']>=0x0&&_0x4f0b55['fX']>=0x0&&_0x4f0b55['fY']<=0x1&&_0x4f0b55['fX']<=0x1?(_0x463468['fX']=_0x4f0b55['fX'],_0x463468['fY']=_0x4f0b55['fY'],_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_PARAM'];}},{'key':'GetPointFish2PanoFloor','value':function(_0x24ebc6,_0x4f1252,_0x366519){if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x24ebc6)return _0x990bc1['SR_ERR_PARAM'];var _0x110430,_0x1bc305;_0x110430=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x1bc305=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1bdae1,_0x1861cb=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x1bdae1=0x1*-this['fRX1'])>_0x1861cb&&(_0x1861cb=_0x1bdae1),this['fRX2']>0x1&&(_0x1bdae1=0x1*(this['fRX2']-0x1))>_0x1861cb&&(_0x1861cb=_0x1bdae1),this['fRY1']<0x0&&(_0x1bdae1=-this['fRY1']*_0x110430)>_0x1861cb&&(_0x1861cb=_0x1bdae1),this['fRY2']>0x1&&(_0x1bdae1=(this['fRY2']-0x1)*_0x110430)>_0x1861cb&&(_0x1861cb=_0x1bdae1));var _0x588f25,_0x5b76bc=_0x1861cb/_0x1bc305,_0x16bd78={'fX':0x0,'fY':0x0};if(Math['abs'](_0x4f1252-0.5)<_0x24183&&Math['abs'](_0x366519-0.5)<_0x24183)return _0x990bc1['SR_ERR_NOT_SUPPORT'];var _0x15fe40={},_0x23a889={};_0x15fe40['fX']=_0x4f1252-0.5,_0x15fe40['fY']=_0x366519-0.5,_0x23a889['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x23a889['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x10b24f=Math['sqrt'](_0x15fe40['fX']*_0x15fe40['fX']+_0x15fe40['fY']*_0x15fe40['fY']),_0x4cbb8e=Math['sqrt'](_0x23a889['fX']*_0x23a889['fX']+_0x23a889['fY']*_0x23a889['fY']);return _0x588f25=Math['acos']((_0x15fe40['fX']*_0x23a889['fX']+_0x15fe40['fY']*_0x23a889['fY'])/(_0x10b24f*_0x4cbb8e)),_0x15fe40['fX']*_0x23a889['fY']-_0x15fe40['fY']*_0x23a889['fX']>0x0&&(_0x588f25=6.2831852-_0x588f25),_0x16bd78['fX']=0x1-_0x588f25/6.2831853,_0x16bd78['fY']=0x1-(0x2*(0.5-_0x10b24f)-_0x5b76bc)/(0.8-_0x5b76bc),_0x16bd78['fY']>=0x0&&_0x16bd78['fX']>=0x0&&_0x16bd78['fY']<=0x1&&_0x16bd78['fX']<=0x1?(_0x24ebc6['fX']=_0x16bd78['fX'],_0x24ebc6['fY']=_0x16bd78['fY'],_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_PARAM'];}},{'key':'GetPointFish2PanoWall','value':function(_0x2ec1fa,_0x3e71ba,_0x150116){if(null==this['pRenderParam'][this['nWndPort']])return _0x990bc1['SR_ERR_CALL_ORDER'];if(null==_0x2ec1fa)return _0x990bc1['SR_ERR_PARAM'];var _0x171865,_0xf20eab;_0x171865=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0xf20eab=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1fdb2e,_0x4662d3,_0x5f40f3,_0x2f3a76,_0x66a249,_0x3cba73=0x0,_0x2dc684=0x1,_0x189cd9=0.1,_0x254325=0.9;this['fRX1']<0x0&&(_0x1fdb2e=0x1*-this['fRX1'],_0x3cba73=_0x1fdb2e/=0x2*_0xf20eab),this['fRX2']>0x1&&(_0x4662d3=0x1*(this['fRX2']-0x1),_0x2dc684=0x1-(_0x4662d3/=0x2*_0xf20eab)),this['fRY1']<0x0&&(_0x5f40f3=-this['fRY1']*_0x171865,_0x189cd9=(_0x5f40f3/=0x2*_0xf20eab)>0.1?_0x5f40f3:0.1),this['fRY2']>0x1&&(_0x2f3a76=(this['fRY2']-0x1)*_0x171865,_0x254325=(_0x2f3a76/=0x2*_0xf20eab)>0x1-0.9?0x1-_0x2f3a76:0.9);var _0x5ed5fc={'fX':0x0,'fY':0x0},_0x296ba9=0x2*_0x3e71ba*_0xf20eab,_0x433356=0x2*_0x150116*_0xf20eab;return _0x66a249=Math['sqrt'](_0xf20eab*_0xf20eab-(_0x433356-_0xf20eab)*(_0x433356-_0xf20eab)),Math['abs'](_0x66a249)<_0x24183?_0x990bc1['SR_ERR_PARAM']:(_0x3e71ba=_0xf20eab*(_0x296ba9-_0xf20eab)/_0x66a249+_0xf20eab,_0x150116=_0x433356,_0x5ed5fc['fX']=(_0x3e71ba-0x2*_0x3cba73*_0xf20eab)/(0x2*(_0x2dc684-_0x3cba73)*_0xf20eab),_0x5ed5fc['fY']=(_0x150116-0x2*_0x189cd9*_0xf20eab)/(0x2*(_0x254325-_0x189cd9)*_0xf20eab),_0x5ed5fc['fY']>=0x0&&_0x5ed5fc['fX']>=0x0&&_0x5ed5fc['fY']<=0x1&&_0x5ed5fc['fX']<=0x1?(_0x2ec1fa['fX']=_0x5ed5fc['fX'],_0x2ec1fa['fY']=_0x5ed5fc['fY'],_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_PARAM']);}},{'key':'UpdateRangeParam','value':function(_0x2455ae,_0x55cdf4){if(null==this['pRenderParam'][_0x2455ae])return _0x990bc1['SR_ERR_CALL_ORDER'];if(_0x55cdf4<0.00001||_0x55cdf4>0.6)return _0x990bc1['SR_ERR_PARAM'];var _0x539c6d=0x0;return _0x593e88['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x2455ae]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x2455ae]['nDisplayEffect']&&_0x593e88['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x2455ae]['nDisplayEffect']||(_0x539c6d=0x7*_0x55cdf4+0.8,this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],this['pRenderParam'][_0x2455ae]['fCosH'],this['pRenderParam'][_0x2455ae]['fSinH'],this['pRenderParam'][_0x2455ae]['fCosV'],this['pRenderParam'][_0x2455ae]['fSinV'],_0x539c6d,this['pRenderParam'][_0x2455ae]['nDisplayEffect']))?(this['pRenderParam'][_0x2455ae]['fZoom']=_0x539c6d,_0x990bc1['SR_OK']):_0x990bc1['SR_ERR_PARAM'];}}]),_0x2bd9e1=(function(){function _0x5b26eb(){_0x311c09(this,_0x5b26eb),this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1,this['bAntialias']=!0x1,this['bRecreateAntia']=!0x1,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null;}return _0x50c85d(_0x5b26eb,[{'key':'SR_Init','value':function(_0x46cb6d){this['canvas']=_0x46cb6d,this['ctx']=this['canvas']['getContext']('2d'),console['log']('2d\\x20render\\x20init'),this['ctx']||console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render');}},{'key':'SR_Draw','value':function(_0x1ecb67){return this['needRect']?this['ctx']['drawImage'](_0x1ecb67,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x1ecb67,0x0,0x0,_0x1ecb67['displayWidth'],_0x1ecb67['displayHeight'],0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'SR_UpdateFrameData','value':function(_0x32e4db,_0x762a82,_0x35e31f,_0x4ea2dc,_0x12067d){return this['needRect']?this['ctx']['drawImage'](_0x32e4db,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x32e4db,0x0,0x0,_0x762a82,_0x35e31f,0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'SR_Display','value':function(_0x19f511){return 0x1;}},{'key':'SR_GetCaptureSize','value':function(){return 0x0;}},{'key':'GetCanvasData','value':function(_0x506246){console['log']('%c\\x20start\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x2d42d4=this['ctx']['getImageData'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);console['log']('%c\\x202\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x403286='jpeg',_0x396980='image/jpeg',_0x37955d=document['createElement']('canvas'),_0xc0073c=_0x37955d['getContext']('2d');_0x37955d['width']=this['canvas']['width'],_0x37955d['height']=this['canvas']['height'],_0xc0073c['putImageData'](_0x2d42d4,0x0,0x0);var _0x4fc15a=_0x37955d['toDataURL'](),_0xf03a29=document['createElement']('a');_0xf03a29['download']=new Date()['getTime']()+'.'+_0x403286,_0xf03a29['href']=_0x4fc15a,_0xf03a29['dataset']['downloadurl']=[_0x396980,_0xf03a29['download'],_0xf03a29['href']]['join'](':'),document['body']['appendChild'](_0xf03a29),_0xf03a29['click'](),document['body']['removeChild'](_0xf03a29),console['log']('%c\\x20end\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');}},{'key':'SR_DelSubPort','value':function(_0x349e53){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x1331d5){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x384e8c,_0x123bb9,_0x4359fd,_0xbf7d02){this['regionSx']=_0x384e8c,this['regionSy']=_0x123bb9,this['regionSw']=_0x4359fd,this['regionSh']=_0xbf7d02,this['needRect']=!0x0;}},{'key':'SR_Destroy','value':function(){this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1;}},{'key':'SR_SetCanvasSize','value':function(_0x54a6a2,_0x272e9a){this['canvas']['width']=_0x54a6a2,this['canvas']['height']=_0x272e9a;}},{'key':'SR_GetCanvasSize','value':function(){console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']);}},{'key':'SR_SetAntialias','value':function(_0x3e1e56){return _0x3e1e56!=this['bAntialias']?(this['bAntialias']=_0x3e1e56,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this['bRecreateAntia']&&(this['bAntialias']?(this['canvas']['width']=0x5*this['canvas']['width'],this['canvas']['height']=0x5*this['canvas']['height'],this['canvas']['style']['transform']='scale(0.2)',this['canvas']['style']['transformOrigin']='0\\x200'):(this['canvas']['width']=this['canvas']['width']/0x5,this['canvas']['height']=this['canvas']['height']/0x5,this['canvas']['style']['transform']='scale(1)',this['canvas']['style']['transformOrigin']='0\\x200')),0x1;}},{'key':'SR_SetCallBack','value':function(_0x46ca63,_0x7a6a86,_0x1a7655){switch(_0x1a7655){case _0x137b8e['SRCALLBACKTYPE']['SR_CBT_NULL']:this['pfuncCBIn']=_0x46ca63,this['pUserIn']=_0x7a6a86;break;case _0x137b8e['SRCALLBACKTYPE']['SR_CBT_OUT']:this['pfuncCBOut']=_0x46ca63,this['pUserOut']=_0x7a6a86;break;default:return 0x0;}return 0x1;}},{'key':'SR_DrawFont','value':function(_0x95752,_0xdff791,_0x3625e9,_0x1bd32a,_0x39251d,_0x5f9559,_0xa3184d,_0xd7a749,_0x29e742){var _0x3a3c57=[],_0x5a9a05={};return _0x5a9a05['bBackground']=_0x5f9559,_0x5a9a05['nFontWidth']=_0x1bd32a,_0x5a9a05['nFontHeight']=_0x39251d,_0x5a9a05['pstBGColor']=_0xa3184d,_0x5a9a05['pstFontColor']=_0x3625e9,_0x5a9a05['pString']=_0x95752,_0x5a9a05['pstStartPos']=_0xdff791,_0x5a9a05['fRotateAngle']=_0xd7a749,_0x5a9a05['pFontFamily']=_0x29e742,_0x3a3c57['push'](_0x5a9a05),this['SR_DrawFontEx'](_0x3a3c57,0x1),0x1;}},{'key':'SR_DrawFontEx','value':function(_0x31cf83,_0x55bc9f){for(var _0x197f92=0x0;_0x197f92<_0x55bc9f;_0x197f92++){this['ctx']['textBaseline']='top';var _0x2e1b3d=_0x31cf83[_0x197f92]['nFontWidth'],_0xb11202=_0x31cf83[_0x197f92]['nFontHeight'],_0xd8810d=(_0x2e1b3d=Math['round'](_0x2e1b3d))<(_0xb11202=Math['round'](_0xb11202))?_0x2e1b3d:_0xb11202;this['ctx']['font']=_0xd8810d['toString']()+'px\\x20'+_0x31cf83[_0x197f92]['pFontFamily'];var _0x3ff139=parseInt(0xff*_0x31cf83[_0x197f92]['pstFontColor']['fR']),_0x4ef019=parseInt(0xff*_0x31cf83[_0x197f92]['pstFontColor']['fG']),_0x575e0e=parseInt(0xff*_0x31cf83[_0x197f92]['pstFontColor']['fB']),_0x33ac5d=_0x3ff139<0x10?'0'+_0x3ff139['toString'](0x10):_0x3ff139['toString'](0x10),_0xeede43=_0x4ef019<0x10?'0'+_0x4ef019['toString'](0x10):_0x4ef019['toString'](0x10),_0x52cca0=_0x575e0e<0x10?'0'+_0x575e0e['toString'](0x10):_0x575e0e['toString'](0x10);this['ctx']['fillStyle']='#'+_0x33ac5d+_0xeede43+_0x52cca0,this['ctx']['globalAlpha']=_0x31cf83[_0x197f92]['pstFontColor']['fA'],this['ctx']['fillText'](_0x31cf83[_0x197f92]['pString'],_0x31cf83[_0x197f92]['pstStartPos']['fX']*this['canvas']['width'],_0x31cf83[_0x197f92]['pstStartPos']['fY']*this['canvas']['height']);}return 0x1;}},{'key':'SR_DrawImage','value':function(_0x13effa,_0x3b88fb,_0x50b015,_0x37515a,_0x5e90d7,_0x494291){return 0x1;}},{'key':'SR_DrawLinesEx','value':function(_0x1b940b,_0x47daae,_0x514410,_0x40870e){return 0x1;}}]),_0x5b26eb;}());function _0x4359a4(_0x243492,_0x18ca8f){var _0x5e9b8b=Object['keys'](_0x243492);if(Object['getOwnPropertySymbols']){var _0x548f65=Object['getOwnPropertySymbols'](_0x243492);_0x18ca8f&&(_0x548f65=_0x548f65['filter'](function(_0x19b763){return Object['getOwnPropertyDescriptor'](_0x243492,_0x19b763)['enumerable'];})),_0x5e9b8b['push']['apply'](_0x5e9b8b,_0x548f65);}return _0x5e9b8b;}function _0x33147b(_0x2cd2ab){for(var _0x1a93a3=0x1;_0x1a93a3<arguments['length'];_0x1a93a3++){var _0x4f6e47=null!=arguments[_0x1a93a3]?arguments[_0x1a93a3]:{};_0x1a93a3%0x2?_0x4359a4(Object(_0x4f6e47),!0x0)['forEach'](function(_0x2c4ab1){_0x46fc9f(_0x2cd2ab,_0x2c4ab1,_0x4f6e47[_0x2c4ab1]);}):Object['getOwnPropertyDescriptors']?Object['defineProperties'](_0x2cd2ab,Object['getOwnPropertyDescriptors'](_0x4f6e47)):_0x4359a4(Object(_0x4f6e47))['forEach'](function(_0x16508c){Object['defineProperty'](_0x2cd2ab,_0x16508c,Object['getOwnPropertyDescriptor'](_0x4f6e47,_0x16508c));});}return _0x2cd2ab;}var _0xec23f4=0x10,_0x1e3d15=0x10,_0x42efab=0x1e,_0x5ab295=(function(){function _0x2cf248(_0x37ad7f){_0x311c09(this,_0x2cf248),this['oVideoRenderHandle']=_0x37ad7f,this['renderEngine']='webgl',this['oVideoHandle']=null,this['mainCanvasID']=null,this['curTimestamp']=0x0,this['mainSubPort']=0x0,this['mainVaildSubPort']=0x0,this['mainFECCorrect']=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'],this['FECErrorCode']=0x0,this['subPortNum']=0x0,this['FECShowMode']=_0x137b8e['SRPTZDISPLAYMODE']['SR_DM_RANGE'],this['pFishParamManager']=null,this['enPixelFormat']=_0x137b8e['SRPIXELFORMAT']['SR_PF_NULL'],this['InitFECParam'](),this['nTimePerFrame']=0x0,this['nFrameRate']=0x0,this['privateNormalLinesInfo']=[],this['maxNormalPrivateLineTimeStamp']=0x0,this['curNormalLinesInfo']=null,this['privateThermalLinesInfo']=[],this['curThermalLinesInfo']=null,this['privateTemLinesInfo']=[],this['maxTemPrivateLineTimeStamp']=0x0,this['curTemLinesInfo']=null,this['m_nTEMDrawLinescount']=0x0,this['m_nTEMDrawFontscount']=0x0,this['privateTargetLinesInfo']=[],this['maxTargetPrivateLineTimeStamp']=0x0,this['curTargetLinesInfo']=null,this['privateMDLinesInfo']=[],this['maxMDPrivateLineTimeStamp']=0x0,this['curMDLinesInfo']=null,this['privateExactLinesInfo']=[],this['maxExactPrivateLineTimeStamp']=0x0,this['curExactLinesInfo']=null,this['privateExactRuleLinesInfo']=[],this['maxExactRulePrivateLineTimeStamp']=0x0,this['curExactRuleLinesInfo']=null,this['DrawlinesParamArray']=[],this['DrawlinesParamArrayAllPointNum']=0x0,this['bDrawlinesParamArrayFill']=0x0,this['DrawMosaiclinesParamArray']=[],this['DrawTargetlinesParamArray']=[],this['DrawPOSFontsParamArray']=[],this['DrawTargetEventIDList']=[],this['privateNormalFontsInfo']=[],this['maxNormalPrivateFontTimeStamp']=0x0,this['curNormalFontsInfo']=null,this['curNormalPOSFontsInfo']=null,this['privateTemFontsInfo']=[],this['maxTemPrivateFontTimeStamp']=0x0,this['curTemFontsInfo']=null,this['privateTargetFontsInfo']=[],this['maxTargetPrivateFontTimeStamp']=0x0,this['curTargetFontsInfo']=null,this['privateExactPOSFontsInfo']=[],this['maxExactPOSPrivateFontTimeStamp']=0x0,this['curExactPOSFontsInfo']=null,this['privateExactFontsInfo']=[],this['maxExactPrivateFontTimeStamp']=0x0,this['curExactFontsInfo']=null,this['DrawFontParamArray']=[],this['privateImageInfo']=[],this['maxPrivateImageTimeStamp']=0x0,this['curImagesInfo']={},this['privatePNGImageInfo']=[],this['m_bEnableIVSEx']=!0x0,this['m_bEnableMDEx']=!0x0,this['m_bEnablePICEx']=!0x1,this['m_bDisPos']=!0x1,this['m_bEnableTEMEx']=!0x1,this['m_bEnableTEMBox']=!0x1,this['m_bEnableTEMLine']=!0x1,this['m_bEnableTEMPoint']=!0x1,this['m_bEnableTrackEx']=!0x1,this['m_bEnableTrackPeople']=!0x0,this['m_bEnableTrackVehicle']=!0x0,this['m_bEnableThermal']=!0x1,this['m_bEnableThermalFireMask']=!0x1,this['m_bEnableThermalRuleGas']=!0x1,this['m_bEnableThermalTargetGas']=!0x1,this['m_bEnableFIREEx']=!0x0,this['m_bEnableFireDis']=!0x0,this['m_bEnableFireMax']=!0x1,this['m_bEnableFireMaxPos']=!0x0,this['m_bEnableFireDistance']=!0x0,this['bSRCallBackFlag']=!0x1,this['hasSetFECParamManager']=!0x1,this['panoramaDisplayEffect']=0x0,this['viewParamType']=0x3,this['viewParamValue']=0.2,this['VRViewLimitRate']=0x0,this['pstWaterFontParamArray']=[];for(var _0x4b3eb2=0x0;_0x4b3eb2<_0xec23f4;_0x4b3eb2++)this['pstWaterFontParamArray'][_0x4b3eb2]=[];this['pstWaterFontParam']=null,this['pWaterImageParam']=[],this['waterMarkImageIndex']=0x0,this['waterMarkImageMax']=0x1,this['baseWaterMarkImageTime']=0x0,this['finishDecodeImage']=!0x1,this['aPOSAdaptBuf']=[],this['textCanvas']=null,this['MosaicType']=0x0,this['MosaicSize']=0x0,this['MosaicColorR']=0x0,this['MosaicColorG']=0x0,this['MosaicColorB']=0x0,this['MosaicColorA']=0x0;}return _0x50c85d(_0x2cf248,[{'key':'InitDisplay','value':function(_0x106add,_0x1140d3,_0xc4e444){if(this['renderEngine']=_0x1140d3,this['mainCanvasID']=_0x106add,this['printfFlag']=this['oVideoRenderHandle']['printfFlag'],'2d'===this['renderEngine']||'2D'===this['renderEngine'])this['oVideoHandle']=new _0x2bd9e1(),this['printfFlag']>=0x0&&console['log']('2d\\x20render');else{this['oVideoHandle']=new _0x1a61f9(),this['mainFECCorrect']==_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL']&&0x0==this['panoramaDisplayEffect']||(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x1655ca()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0);var _0x9c475a=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'];(_0x9c475a=0x1==this['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']:0x3==this['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'])!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']&&_0x9c475a!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']||0x0!=this['VRViewLimitRate']&&(_0x9c475a=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_ELLIPSOID_VIEWLIMITED'],this['oVideoHandle']['SR_SetViewLimitateRate'](_0x137b8e['SRVIEWLIMITATERATE']['SR_VLR_BLACK_1216_2832'])),this['printfFlag']>=0x0&&console['log']('webgl\\x20render\\x20this.printfFlag:'+this['printfFlag']);}return this['enPixelFormat']=_0xc4e444,this['oVideoHandle']['SR_Init'](_0x106add,_0xc4e444),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](this['mainFECCorrect']),-0x1==this['mainVaildSubPort']?(console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0):(this['mainFECCorrect']==_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']&&this['oVideoHandle']['SR_SetViewParam'](this['viewParamType'],this['viewParamValue']),0x1);}},{'key':'ReleaseDisplay','value':function(){if(null!=this['oVideoHandle']&&(this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),this['oVideoHandle']['SR_Destroy'](),this['oVideoHandle']=null),this['subPortNum']>0x0){for(var _0x388c97=0x1;_0x388c97<_0xec23f4;_0x388c97++)0x0!=this['stFishEyeManager'][_0x388c97]['nSubPort']&&null!=this['stFishEyeManager'][_0x388c97]['sCanvasID']&&0x0!=this['stFishEyeManager'][_0x388c97]['bInited']&&(this['FEC_Disable'](_0x388c97),this['FEC_DelPort'](_0x388c97));}for(var _0x5f371a=0x0;_0x5f371a<_0xec23f4;_0x5f371a++)this['stFishEyeManager'][_0x5f371a]['pRender']=null;return this['stFishEyeManager']['splice'](0x0,this['stFishEyeManager']['length']),this['stFishParam']['splice'](0x0,this['stFishParam']['length']),null!=this['pFishParamManager']&&(this['pFishParamManager']['DeInit'](),this['pFishParamManager']=null),this['FECShowMode']=_0x137b8e['SRPTZDISPLAYMODE']['SR_DM_RANGE'],this['DeInitPrivateParam'](),0x1;}},{'key':'DeInitPrivateParam','value':function(){this['privateNormalLinesInfo']['splice'](0x0,this['privateNormalLinesInfo']['length']),this['curNormalLinesInfo']=null,this['privateThermalLinesInfo']['splice'](0x0,this['privateThermalLinesInfo']['length']),this['curThermalLinesInfo']=null,this['privateTemLinesInfo']['splice'](0x0,this['privateTemLinesInfo']['length']),this['curTemLinesInfo']=null,this['privateTargetLinesInfo']['splice'](0x0,this['privateTargetLinesInfo']['length']),this['curTargetLinesInfo']=null,this['privateMDLinesInfo']['splice'](0x0,this['privateMDLinesInfo']['length']),this['curMDLinesInfo']=null,this['privateExactLinesInfo']['splice'](0x0,this['privateExactLinesInfo']['length']),this['curExactLinesInfo']=null,this['privateExactRuleLinesInfo']['splice'](0x0,this['privateExactRuleLinesInfo']['length']),this['curExactRuleLinesInfo']=null,this['privateNormalFontsInfo']['splice'](0x0,this['privateNormalFontsInfo']['length']),this['curNormalFontsInfo']=null,this['curNormalPOSFontsInfo']=null,this['privateTemFontsInfo']['splice'](0x0,this['privateTemFontsInfo']['length']),this['curTemFontsInfo']=null,this['privateTargetFontsInfo']['splice'](0x0,this['privateTargetFontsInfo']['length']),this['curTargetFontsInfo']=null,this['privateExactPOSFontsInfo']['splice'](0x0,this['privateExactPOSFontsInfo']['length']),this['curExactPOSFontsInfo']=null,this['privateExactFontsInfo']['splice'](0x0,this['privateExactFontsInfo']['length']),this['curExactFontsInfo']=null,this['privateImageInfo']['splice'](0x0,this['privateImageInfo']['length']),this['curImagesInfo']=null,this['privatePNGImageInfo']['splice'](0x0,this['privatePNGImageInfo']['length']),this['DrawlinesParamArray']['splice'](0x0,this['DrawlinesParamArray']['length']),this['DrawTargetlinesParamArray']['splice'](0x0,this['DrawTargetlinesParamArray']['length']),this['DrawMosaiclinesParamArray']['splice'](0x0,this['DrawMosaiclinesParamArray']['length']),this['DrawPOSFontsParamArray']['splice'](0x0,this['DrawPOSFontsParamArray']['length']),this['DrawTargetEventIDList']['splice'](0x0,this['DrawTargetEventIDList']['length']),this['DrawFontParamArray']['splice'](0x0,this['DrawFontParamArray']['length']);for(var _0x4d2b1d=0x0;_0x4d2b1d<_0xec23f4;_0x4d2b1d++)this['pstWaterFontParamArray'][_0x4d2b1d]['splice'](0x0,this['pstWaterFontParamArray'][_0x4d2b1d]['length']);this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),this['bSRCallBackFlag']=!0x1,this['textCanvas']=null,this['curLinesInfo']=null,this['pstWaterFontParam']=null;}},{'key':'DisplayFrame','value':function(_0x28fac1,_0x3fc498,_0x366a22,_0x150f7e,_0x13f757,_0x4daf3c,_0x75a3a1,_0x558883,_0x1841bb){var _0x4c7a07=this;return new Promise(function(_0x19b72d){if(null!=_0x4c7a07['oVideoHandle']&&_0x1841bb!=_0x4c7a07['VRViewLimitRate']&&_0x4c7a07['enPixelFormat']==_0x137b8e['SRPIXELFORMAT']['SR_PF_SURFACE']){_0x4c7a07['VRViewLimitRate']=_0x1841bb,_0x4c7a07['oVideoHandle']['SR_DelSubPort'](_0x4c7a07['mainVaildSubPort']),_0x4c7a07['oVideoHandle']['SR_Destroy'](),_0x4c7a07['oVideoHandle']=null,_0x4c7a07['oVideoHandle']=new _0x1a61f9(),null==_0x4c7a07['pFishParamManager']&&(_0x4c7a07['pFishParamManager']=new _0x1655ca()),_0x4c7a07['oVideoHandle']['SR_SetFishParamManager'](_0x4c7a07['pFishParamManager']),_0x4c7a07['hasSetFECParamManager']=!0x0;var _0x487bd0=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'];if((_0x487bd0=0x1==_0x4c7a07['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']:0x3==_0x4c7a07['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'])!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']&&_0x487bd0!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']||0x0!=_0x4c7a07['VRViewLimitRate']&&(_0x487bd0=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_ELLIPSOID_VIEWLIMITED'],_0x4c7a07['oVideoHandle']['SR_SetViewLimitateRate'](_0x137b8e['SRVIEWLIMITATERATE']['SR_VLR_BLACK_1216_2832'])),_0x4c7a07['oVideoHandle']['SR_Init'](_0x4c7a07['mainCanvasID'],_0x4c7a07['enPixelFormat']),_0x4c7a07['mainVaildSubPort']=_0x4c7a07['oVideoHandle']['SR_AddSubPort'](_0x487bd0),-0x1==_0x4c7a07['mainVaildSubPort'])return console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x4c7a07['mainVaildSubPort']),0x0;}(null!=_0x28fac1&&(_0x4c7a07['curTimestamp']=_0x150f7e,_0x4c7a07['displayWidth']=_0x3fc498,_0x4c7a07['displayHeight']=_0x366a22),_0x4c7a07['bSRCallBackFlag'])||null!=_0x4c7a07['oVideoHandle']&&_0x4c7a07['oVideoHandle']['SR_SetCallBack'](_0x4c7a07['WebGLDisplayCallBack'],_0x4c7a07,_0x137b8e['SRCALLBACKTYPE']['SR_CBT_NULL'])==_0x137b8e['ERRCODE']['SR_OK']&&(_0x4c7a07['bSRCallBackFlag']=!0x0);var _0x5832ce=0x1;if(0x2==_0x4c7a07['panoramaDisplayEffect']&&(_0x3fc498==0x2*_0x366a22?_0x4c7a07['SetPanoramaDisplayEffect'](0x1):_0x4c7a07['SetPanoramaDisplayEffect'](0x0)),null!=_0x28fac1&&(_0x4c7a07['nFrameRate']=_0x75a3a1,_0x4c7a07['nTimePerFrame']=0x3e8/_0x75a3a1,0x0==_0x558883&&(_0x4c7a07['FindIntelNodefromList'](_0x4c7a07['curTimestamp']),_0x4c7a07['CheckLinesInfo'](),_0x4c7a07['CheckFontsInfo']()),null!=_0x4c7a07['oVideoHandle']&&0x1==(_0x5832ce=_0x4c7a07['oVideoHandle']['SR_UpdateFrameData'](_0x28fac1,_0x3fc498,_0x366a22,_0x13f757,_0x4daf3c))&&(_0x5832ce=_0x4c7a07['oVideoHandle']['SR_Display'](!0x1)),_0x4c7a07['subPortNum']>0x0)){for(var _0x22ef25=0x1;_0x22ef25<_0xec23f4;_0x22ef25++)0x0!=_0x4c7a07['stFishEyeManager'][_0x22ef25]['nSubPort']&&null!=_0x4c7a07['stFishEyeManager'][_0x22ef25]['sCanvasID']&&0x0!=_0x4c7a07['stFishEyeManager'][_0x22ef25]['bInited']&&null!=_0x4c7a07['stFishEyeManager'][_0x22ef25]['pRender']&&0x1==(_0x5832ce=_0x4c7a07['stFishEyeManager'][_0x22ef25]['pRender']['SR_UpdateFrameData'](_0x28fac1,_0x3fc498,_0x366a22,null,null))&&(_0x5832ce=_0x4c7a07['stFishEyeManager'][_0x22ef25]['pRender']['SR_Display'](!0x1));}_0x19b72d({'timestamp':_0x4c7a07['curTimestamp'],'DrawRet':_0x5832ce});});}},{'key':'SetDisplayRect','value':function(_0x4fe65d,_0x137b61,_0x476d93,_0x3da4f4){if(null!=this['oVideoHandle']){var _0x3f3d91=0x0,_0x209980=0x0,_0x14c5c3=0x1,_0x385fea=0x1;0x0!=this['displayHeight']&&0x0!=this['displayWidth']&&(_0x3f3d91=_0x4fe65d/this['displayWidth'],_0x209980=_0x137b61/this['displayHeight'],_0x14c5c3=_0x476d93/this['displayWidth'],_0x385fea=_0x3da4f4/this['displayHeight']),this['oVideoHandle']['SR_SetDisplayRect'](_0x3f3d91,_0x209980,_0x14c5c3,_0x385fea,_0x137b8e['SRSETRECTTYPE']['SR_SRT_SRC']),null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][0x0]['splice'](0x0,this['pstWaterFontParamArray'][0x0]['length']),this['CalculateWaterMarkParam'](this['oVideoHandle'],0x0,this['pstWaterFontParam']));}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x486d99,_0x16e313,_0x5454fd){var _0x4e812f=this['oVideoHandle'];if(_0x5454fd>0x0&&(_0x4e812f=this['stFishEyeManager'][_0x5454fd]['pRender']),null!=_0x4e812f){if(_0x4e812f['SR_SetCanvasSize'](_0x486d99,_0x16e313),0x0!=this['pstWaterFontParamArray'][_0x5454fd]['length']&&null!=this['pstWaterFontParam']){if(0x1==this['pstWaterFontParam']['pstCanvasAdapt']['nCanvasAdaptMode'])this['pstWaterFontParamArray'][_0x5454fd]['splice'](0x0,this['pstWaterFontParamArray'][_0x5454fd]['length']),this['CalculateWaterMarkParam'](_0x4e812f,_0x5454fd,this['pstWaterFontParam']);else{if(0x2==this['pstWaterFontParam']['pstCanvasAdapt']['nCanvasAdaptMode']){var _0x4376e0=this['mainCanvasID']['width'],_0x6e8ca0=this['mainCanvasID']['height'];_0x5454fd>0x0&&(_0x4376e0=this['stFishEyeManager'][_0x5454fd]['sCanvasID']['width'],_0x6e8ca0=this['stFishEyeManager'][_0x5454fd]['sCanvasID']['height']);for(var _0x234567=0x0;_0x234567<this['pstWaterFontParamArray'][_0x5454fd]['length'];++_0x234567)this['pstWaterFontParamArray'][_0x5454fd][_0x234567]['nFontWidth']=this['pstWaterFontParam']['pstFontSize']['nFontWidth']*_0x4376e0/this['pstWaterFontParam']['pstCanvasAdapt']['nBaseCanvasWidth'],this['pstWaterFontParamArray'][_0x5454fd][_0x234567]['nFontHeight']=this['pstWaterFontParam']['pstFontSize']['nFontHeight']*_0x6e8ca0/this['pstWaterFontParam']['pstCanvasAdapt']['nBaseCanvasHeight'];}}}return 0x1;}return 0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_GetCanvasSize']():0x0;}},{'key':'SetAntialias','value':function(_0x4fec50){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetAntialias'](_0x4fec50):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x165fa5,_0x5dea0d){var _0x32f482=0x1;return null!=this['oVideoHandle']?(_0x32f482=this['oVideoHandle']['SR_SetImagePostProcess'](_0x165fa5,_0x5dea0d),null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][0x0]['splice'](0x0,this['pstWaterFontParamArray'][0x0]['length']),this['CalculateWaterMarkParam'](this['oVideoHandle'],0x0,this['pstWaterFontParam']))):_0x32f482=0x0,_0x32f482;}},{'key':'InitFECParam','value':function(){this['stFishEyeManager']=[];for(var _0x4b446c=0x0;_0x4b446c<_0xec23f4;_0x4b446c++)this['stFishEyeManager'][_0x4b446c]={},this['stFishEyeManager'][_0x4b446c]['pRender']=null,this['stFishEyeManager'][_0x4b446c]['nSubPort']=0x0,this['stFishEyeManager'][_0x4b446c]['sCanvasID']=null,this['stFishEyeManager'][_0x4b446c]['bUsed']=0x0,this['stFishEyeManager'][_0x4b446c]['bInited']=0x0,this['stFishEyeManager'][_0x4b446c]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x4b446c]['emPlaceType']=_0x128d88,this['stFishEyeManager'][_0x4b446c]['emCorrectType']=_0x21ccda,this['stFishEyeManager'][_0x4b446c]['emEffect']=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];this['stFishParam']=[];for(var _0x581606=0x0;_0x581606<_0xec23f4;_0x581606++)this['stFishParam'][_0x581606]={},this['stFishParam'][_0x581606]['nUpDateType']=0x0,this['stFishParam'][_0x581606]['stPTZParam']={},this['stFishParam'][_0x581606]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x581606]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x581606]['stCycleParam']={},this['stFishParam'][_0x581606]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x581606]['stCycleParam']['fRadiusRight']=0x0,this['stFishParam'][_0x581606]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x581606]['stCycleParam']['fRadiusBottom']=0x0,this['stFishParam'][_0x581606]['fZoom']=0x0,this['stFishParam'][_0x581606]['fWideScanOffset']=0x0,this['stFishParam'][_0x581606]['stPTZColor']={},this['stFishParam'][_0x581606]['stPTZColor']['nR']=0x0,this['stFishParam'][_0x581606]['stPTZColor']['nG']=0x0,this['stFishParam'][_0x581606]['stPTZColor']['nB']=0x0,this['stFishParam'][_0x581606]['stPTZColor']['nAlpha']=0x0,this['stFishParam'][_0x581606]['stPTZSelect']={},this['stFishParam'][_0x581606]['stPTZSelect']['fTop']=0x0,this['stFishParam'][_0x581606]['stPTZSelect']['fBottom']=0x0,this['stFishParam'][_0x581606]['stPTZSelect']['fLeft']=0x0,this['stFishParam'][_0x581606]['stPTZSelect']['fRight']=0x0,this['stFishParam'][_0x581606]['nCut']=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x428eca){return this['mainFECCorrect']=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'],0x1;}},{'key':'FEC_ResetCorrectType','value':function(_0x49e148,_0x898336,_0x3ebf3c){if(!0x1===this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x1655ca()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),_0x3ebf3c!=_0x21ccda&&_0x3ebf3c!=_0x1ef416&&_0x3ebf3c!=_0x26d787&&_0x3ebf3c!=_0x5c32d1&&_0x3ebf3c!=_0x10161a&&_0x3ebf3c!=_0x5d8b15&&_0x3ebf3c!=_0x5bd051&&_0x3ebf3c!=_0x285594&&_0x3ebf3c!=_0x313b18&&_0x3ebf3c!=_0x55119e&&_0x3ebf3c!=_0x2da057)return console['log']('%c\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','color:red',_0x3ebf3c),this['FECErrorCode']=0x10,0x0;if(0x1!=this['FECParamJudge'](_0x49e148,_0x898336,_0x3ebf3c))return 0x0;var _0x382a0d=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];if(_0x382a0d=this['_ConvertDisplayEffect'](_0x898336,_0x3ebf3c),0x0==_0x49e148&&null==this['stFishEyeManager'][_0x49e148]['pRender']&&(this['stFishEyeManager'][_0x49e148]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][_0x49e148]['nSubPort']=_0x49e148,this['stFishEyeManager'][_0x49e148]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][_0x49e148]['bUsed']=0x1,this['stFishEyeManager'][_0x49e148]['bInited']=0x1,this['stFishEyeManager'][_0x49e148]['nValidSubPort']=this['mainVaildSubPort'],this['stFishEyeManager'][_0x49e148]['emPlaceType']=_0x898336,this['stFishEyeManager'][_0x49e148]['emCorrectType']=_0x3ebf3c,this['stFishEyeManager'][_0x49e148]['emEffect']=_0x382a0d,this['mainFECCorrect']=_0x382a0d),null!=this['stFishEyeManager'][_0x49e148]['pRender']){this['stFishEyeManager'][_0x49e148]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x49e148]['nValidSubPort']);var _0xadfcb9=this['stFishEyeManager'][_0x49e148]['pRender']['SR_AddSubPort'](_0x382a0d);if(0x0==_0x49e148?this['oVideoHandle']['SR_SetCallBack'](this['WebGLDisplayCallBack'],this,_0x137b8e['SRCALLBACKTYPE']['SR_CBT_NULL']):this['stFishEyeManager'][_0x49e148]['pRender']['SR_SetCallBack'](this['WebGLDisplaySubCallBack'],{'nUser':this,'handle':this['stFishEyeManager'][_0x49e148]['pRender'],'nSubPort':_0x49e148},_0x137b8e['SRCALLBACKTYPE']['SR_CBT_NULL']),null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][_0x49e148]['splice'](0x0,this['pstWaterFontParamArray'][_0x49e148]['length']),this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0x49e148]['pRender'],_0x49e148,this['pstWaterFontParam'])),-0x1==_0xadfcb9)return console['info']('%c\\x20FEC_ResetCorrectType\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0xadfcb9),0x0;if(this['stFishEyeManager'][_0x49e148]['nValidSubPort']=_0xadfcb9,this['stFishEyeManager'][_0x49e148]['emPlaceType']=_0x898336,this['stFishEyeManager'][_0x49e148]['emCorrectType']=_0x3ebf3c,this['stFishEyeManager'][_0x49e148]['emEffect']=_0x382a0d,_0x5c32d1<=this['stFishEyeManager'][_0x49e148]['emCorrectType']){var _0x5654a3=this['stFishEyeManager'][_0x49e148]['pRender']['SR_SetRenderState'](_0x137b8e['SRRENDERSTATETYPE']['SR_RST_BACK_CULL'],0x0);_0x137b8e['ERRCODE']['SR_OK']!=_0x5654a3&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x5654a3);}}return this['FECShowMode']>0x0&&null!=this['stFishEyeManager'][_0x49e148]['pRender']&&this['stFishEyeManager'][_0x49e148]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x0==_0x49e148&&(this['mainVaildSubPort']=this['stFishEyeManager'][_0x49e148]['nValidSubPort']),0x1;}},{'key':'FEC_GetPort','value':function(_0x564cc3,_0x3e9335){if(_0x3e9335!=_0x21ccda&&_0x3e9335!=_0x1ef416&&_0x3e9335!=_0x26d787&&_0x3e9335!=_0x5c32d1&&_0x3e9335!=_0x10161a&&_0x3e9335!=_0x5d8b15&&_0x3e9335!=_0x5bd051&&_0x3e9335!=_0x55119e&&_0x3e9335!=_0x2da057)return console['log']('%c\\x2020231112\\x20hardDecoder\\x20not\\x20support\\x20emCorrectType:%d','color:red',_0x3e9335),this['FECErrorCode']=0x10,-0x1;var _0x4feadd;if(0x1!=this['FECParamJudge'](-0x1,_0x564cc3,_0x3e9335))return console['log']('VideoRender.js\\x20FEC_GetPort\\x20FECParamJudge\\x20Get\\x20error'),-0x1;var _0x4ec68a=0x0;for(_0x4feadd=0x1;_0x4feadd<_0xec23f4;_0x4feadd++)if(0x0==this['stFishEyeManager'][_0x4feadd]['nSubPort']&&0x0==this['stFishEyeManager'][_0x4feadd]['bUsed']){this['stFishEyeManager'][_0x4feadd]['nSubPort']=_0x4feadd,this['stFishEyeManager'][_0x4feadd]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x4feadd]['bUsed']=0x1,this['stFishEyeManager'][_0x4feadd]['emPlaceType']=_0x564cc3,this['stFishEyeManager'][_0x4feadd]['emCorrectType']=_0x3e9335,_0x4ec68a=_0x4feadd;break;}if(_0xec23f4==_0x4feadd)return console['info']('%c\\x20FEC_GetPort-12\\x20fish\\x20subport\\x20max','color:\\x20red'),this['FECErrorCode']=0x504,-0x1;var _0x5b5751=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];return _0x5b5751=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x4ec68a]['emPlaceType'],this['stFishEyeManager'][_0x4ec68a]['emCorrectType']),_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL']!=_0x5b5751?(0x0==this['stFishEyeManager'][_0x4ec68a]['bInited']&&(this['stFishEyeManager'][_0x4ec68a]['emEffect']=_0x5b5751,this['stFishEyeManager'][_0x4ec68a]['bInited']=0x0,this['stFishParam'][_0x4ec68a]['fZoom']=0.005,this['stFishParam'][_0x4ec68a]['stPTZParam']['fPTZPositionX']=0.5,this['stFishParam'][_0x4ec68a]['stPTZParam']['fPTZPositionY']=0.5,this['stFishParam'][_0x4ec68a]['fWideScanOffset']=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x4ec68a):_0x4ec68a<_0xec23f4&&0x0==this['stFishEyeManager'][_0x4ec68a]['bInited']?(this['stFishEyeManager'][_0x4ec68a]['emEffect']=_0x5b5751,this['stFishEyeManager'][_0x4ec68a]['bInited']=0x0,this['stFishParam'][_0x4ec68a]['fZoom']=0x0,this['stFishParam'][_0x4ec68a]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x4ec68a]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x4ec68a]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this['subPortNum']++,_0x4ec68a):(this['stFishEyeManager'][_0x4feadd]['pRender']=null,this['stFishEyeManager'][_0x4feadd]['nSubPort']=0x0,this['stFishEyeManager'][_0x4feadd]['sCanvasID']=null,this['stFishEyeManager'][_0x4feadd]['bUsed']=0x0,this['stFishEyeManager'][_0x4feadd]['bInited']=0x0,this['stFishEyeManager'][_0x4feadd]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x4feadd]['emPlaceType']=_0x128d88,this['stFishEyeManager'][_0x4feadd]['emCorrectType']=_0x21ccda,this['stFishEyeManager'][_0x4feadd]['emEffect']=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'],this['FECErrorCode']=_0x524588,-0x1);}},{'key':'FECParamJudge','value':function(_0x5dd94a,_0x589880,_0x2bd494){if(0x0!=_0x5dd94a){if(_0x2bd494==_0x21ccda||_0x2bd494==_0x1ef416||_0x2bd494==_0x26d787||_0x2bd494==_0x5d8b15||_0x2bd494==_0x313b18||_0x2bd494==_0x55119e||_0x2bd494==_0x2da057)return console['log']('VideoRender.js\\x20FECParamJudge\\x201\\x20emCorrectType:'+_0x2bd494),this['FECErrorCode']=_0x524588,0x0;if(this['stFishEyeManager'][0x0]['emCorrectType']==_0x2da057||this['stFishEyeManager'][0x0]['emCorrectType']==_0x55119e)return this['FECErrorCode']=_0x524588,console['log']('VideoRender.js\\x20FECParamJudge\\x202\\x20emCorrectType:'+_0x2bd494),0x0;}if(0x0==_0x5dd94a&&(_0x55119e==_0x2bd494||_0x2da057==_0x2bd494)){for(var _0x42a7c6=0x1;_0x42a7c6<_0xec23f4;_0x42a7c6++)if(this['stFishEyeManager'][_0x42a7c6]['bUsed'])return this['FECErrorCode']=_0x524588,console['log']('VideoRender.js\\x20FECParamJudge\\x203\\x20subPort:'+_0x5dd94a+',emCorrectType:'+_0x2bd494),0x0;}if(!(_0x347826!=_0x589880&&_0x128d88!=_0x589880||_0x5d8b15!=_0x2bd494&&_0x55119e!=_0x2bd494&&_0x2da057!=_0x2bd494))return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x204\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20lat','color:\\x20red'),this['FECErrorCode']=_0x524588,0x0;if(_0x1237f0==_0x589880&&(_0x5bd051==_0x2bd494||_0x285594==_0x2bd494||_0x1ef416==_0x2bd494))return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x205\\x20wall\\x20not\\x20support\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0x524588,0x0;if(_0x1237f0!=_0x589880&&_0x347826!=_0x589880&&_0x128d88!=_0x589880)return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x206\\x20emPlaceType\\x20only\\x20support\\x20floor,\\x20ceiling\\x20and\\x20wall','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;if(0x0!=_0x2bd494&&_0x2bd494!=_0x10161a&&_0x2bd494!=_0x1ef416&&_0x2bd494!=_0x26d787&&_0x2bd494!=_0x5d8b15&&_0x2bd494!=_0x5c32d1&&_0x2bd494!=_0x5bd051&&_0x2bd494!=_0x285594&&_0x2bd494!=_0x313b18&&_0x2bd494!=_0x55119e&&_0x2bd494!=_0x2da057)return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x207\\x20emCorrectType\\x20error','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;for(var _0x5d35a0=0x0;_0x5d35a0<_0xec23f4;_0x5d35a0++){if(this['stFishEyeManager'][_0x5d35a0]['bUsed']&&this['stFishEyeManager'][_0x5d35a0]['emPlaceType']!=_0x589880)return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x208\\x20emPlaceType\\x20changed','color:\\x20red'),this['FECErrorCode']=0x517,0x0;if(_0x5d35a0!=_0x5dd94a){if(this['stFishEyeManager'][_0x5d35a0]['bUsed']&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x10161a&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x5c32d1&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x5bd051&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x285594&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x313b18&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x55119e&&this['stFishEyeManager'][_0x5d35a0]['emCorrectType']!=_0x2da057&&_0x2bd494!=_0x10161a&&_0x2bd494!=_0x5c32d1&&_0x2bd494!=_0x5bd051&&_0x2bd494!=_0x285594&&_0x2bd494!=_0x313b18&&_0x2bd494!=_0x55119e&&_0x2bd494!=_0x2da057)return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x209\\x20origin/180/360/lat\\x20only\\x20display\\x20one\\x20port','color:\\x20red'),this['FECErrorCode']=0x518,0x0;if(this['stFishEyeManager'][_0x5d35a0]['bUsed']&&(this['stFishEyeManager'][_0x5d35a0]['emCorrectType']==_0x10161a&&_0x2bd494==_0x1ef416||this['stFishEyeManager'][_0x5d35a0]['emCorrectType']==_0x1ef416&&_0x2bd494==_0x10161a))return console['info']('%c\\x20VideoRender.js\\x20FECParamJudge\\x2010\\x20180\\x20cannot\\x20support\\x20ptz','color:\\x20red'),this['FECErrorCode']=0x518,0x0;}}return 0x1;}},{'key':'FEC_Enable','value':function(_0x13b924){return _0x13b924<0x1||_0x13b924>0x1f||null==_0x13b924?(console['info']('%c\\x20FEC_Enable-1\\x20nSubPort:%d','color:\\x20red',_0x13b924),this['FECErrorCode']=_0x41280d,0x0):null!==this['stFishEyeManager'][_0x13b924]['pRender']?(console['info']('%c\\x20FEC_Enable-2\\x20nSubPort:%d','color:\\x20red',_0x13b924),this['FECErrorCode']=0x515,0x0):(null==this['stFishEyeManager'][_0x13b924]['pRender']&&(this['stFishEyeManager'][_0x13b924]['pRender']=new _0x1a61f9(),null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x1655ca()),this['stFishEyeManager'][_0x13b924]['pRender']['SR_SetFishParamManager'](this['pFishParamManager'])),0x1);}},{'key':'FEC_SetWnd','value':function(_0xe8a206,_0x1b887a){if(_0xe8a206<0x1||_0xe8a206>0x1f||null==_0xe8a206)return console['info']('%c\\x20FEC_SetWnd-1\\x20nSubPort:%d','color:\\x20red',_0xe8a206),this['FECErrorCode']=_0x41280d,0x0;if(null==this['stFishEyeManager'][_0xe8a206]['pRender'])return console['info']('%c\\x20FEC_SetWnd-2\\x20nSubPort:%d\\x20pRender\\x20is\\x20null','color:\\x20red',_0xe8a206),this['FECErrorCode']=_0x532c7f,0x0;if(0x0==this['stFishEyeManager'][_0xe8a206]['bUsed'])return console['info']('%c\\x20FEC_SetWnd-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0xe8a206,this['stFishEyeManager'][_0xe8a206]['bUsed']),this['FECErrorCode']=_0x23abc0,0x0;if(null==_0x1b887a)return console['info']('%c\\x20FEC_SetWnd-4\\x20nSubPort:%d\\x20sCanvasID:%s','color:\\x20red',_0xe8a206,_0x1b887a),this['FECErrorCode']=0x519,0x0;if(0x0!=this['stFishEyeManager'][_0xe8a206]['nSubPort']&&0x0!=this['stFishEyeManager'][_0xe8a206]['bUsed']){if(0x0!=this['stFishEyeManager'][_0xe8a206]['bInited']&&null!=this['stFishEyeManager'][_0xe8a206]['sCanvasID'])return _0x1b887a!=this['stFishEyeManager'][_0xe8a206]['sCanvasID']?(console['info']('%c\\x20FEC_SetWnd-5\\x20nSubPort:%d\\x20sCanvasID:%s\\x20already\\x20init','color:\\x20red',_0xe8a206,_0x1b887a),this['FECErrorCode']=0x506,0x0):0x1;var _0xfe925d=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];_0xfe925d=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0xe8a206]['emPlaceType'],this['stFishEyeManager'][_0xe8a206]['emCorrectType']);var _0x184c72=this['stFishEyeManager'][_0xe8a206]['pRender']['SR_Init'](_0x1b887a,this['enPixelFormat']),_0x65f855=this['stFishEyeManager'][_0xe8a206]['pRender']['SR_AddSubPort'](_0xfe925d);if(-0x1==_0x65f855)return console['info']('%c\\x20FEC_SetWnd\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0xe8a206),0x0;if(this['stFishEyeManager'][_0xe8a206]['nValidSubPort']=_0x65f855,_0x137b8e['ERRCODE']['SR_OK']!=_0x184c72)return this['stFishEyeManager'][_0xe8a206]['bInited']=0x0,this['stFishEyeManager'][_0xe8a206]['sCanvasID']=null,this['FECErrorCode']=_0x23abc0,0x0;if(this['stFishEyeManager'][_0xe8a206]['bInited']=0x1,this['stFishEyeManager'][_0xe8a206]['sCanvasID']=_0x1b887a,_0x5c32d1<=this['stFishEyeManager'][_0xe8a206]['emCorrectType']){var _0x4eca04=this['stFishEyeManager'][_0xe8a206]['pRender']['SR_SetRenderState'](_0x137b8e['SRRENDERSTATETYPE']['SR_RST_BACK_CULL'],0x0);_0x137b8e['ERRCODE']['SR_OK']!=_0x4eca04&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x4eca04);}return this['stFishEyeManager'][_0xe8a206]['pRender']['SR_SetCallBack'](this['WebGLDisplaySubCallBack'],{'nUser':this,'handle':this['stFishEyeManager'][_0xe8a206]['pRender'],'nSubPort':_0xe8a206},_0x137b8e['SRCALLBACKTYPE']['SR_CBT_NULL']),null!=this['pstWaterFontParam']&&this['SetWaterMarkFont'](this['pstWaterFontParam']),this['FECShowMode']>0x0&&this['stFishEyeManager'][_0xe8a206]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x1;}return this['FECErrorCode']=_0x23abc0,0x0;}},{'key':'FEC_Disable','value':function(_0x248c3a,_0x2a20ec,_0x5d2f30){if(_0x248c3a<0x1||_0x248c3a>0x1f||null==_0x248c3a)return console['info']('%c\\x20FEC_Disable-1\\x20nSubPort:%d','color:\\x20red',_0x248c3a),this['FECErrorCode']=_0x41280d,0x0;if(0x1==this['stFishEyeManager'][_0x248c3a]['bInited']&&null!=this['stFishEyeManager'][_0x248c3a]['pRender']){if(_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0x248c3a]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x248c3a]['nValidSubPort']))return console['info']('%c\\x20FEC_Disable-2\\x20SR_DelSubPort\\x20error\\x20nSubPort:%d','color:\\x20red',_0x248c3a),0x0;this['stFishEyeManager'][_0x248c3a]['bInited']=0x0,this['stFishEyeManager'][_0x248c3a]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x248c3a]['pRender']['SR_Destroy'](),this['stFishEyeManager'][_0x248c3a]['pRender']=null;}return 0x1;}},{'key':'FEC_DelPort','value':function(_0x401854){return _0x401854<0x1||_0x401854>0x1f||null==_0x401854?(console['info']('%c\\x20FEC_DelPort-1\\x20nSubPort:%d','color:\\x20red',_0x401854),this['FECErrorCode']=_0x41280d,0x0):0x0==this['stFishEyeManager'][_0x401854]['bUsed']?(console['info']('%c\\x20FEC_DelPort-2\\x20nSubPort:%d\\x20bUsed：%d','color:\\x20red',_0x401854,this['stFishEyeManager'][_0x401854]['bUsed']),this['FECErrorCode']=_0x23abc0,0x0):(this['stFishEyeManager'][_0x401854]['nSubPort']=0x0,this['stFishEyeManager'][_0x401854]['sCanvasID']=null,this['stFishEyeManager'][_0x401854]['bUsed']=0x0,this['stFishEyeManager'][_0x401854]['bInited']=0x0,this['stFishEyeManager'][_0x401854]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x401854]['emPlaceType']=_0x128d88,this['stFishEyeManager'][_0x401854]['emCorrectType']=_0x21ccda,this['stFishEyeManager'][_0x401854]['emEffect']=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'],this['stFishParam'][_0x401854]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x401854]['stCycleParam']['fRadiusRight']=0x1,this['stFishParam'][_0x401854]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x401854]['stCycleParam']['fRadiusBottom']=0x1,this['subPortNum']>0x0&&this['subPortNum']--,0x1);}},{'key':'FEC_SetParam','value':function(_0xe13d6d,_0x3d82b8){if(this['FECErrorCode']=0x0,_0xe13d6d<0x0||_0xe13d6d>0x1f||null==_0xe13d6d)return console['info']('%c\\x20FEC_SetParam-1\\x20nSubPort:%d','color:\\x20red',_0xe13d6d),this['FECErrorCode']=_0x41280d,0x0;if(null==this['stFishEyeManager'][_0xe13d6d]['pRender'])return console['info']('%c\\x20FEC_SetParam-2\\x20nSubPort:%d\\x20pRender:%d','color:\\x20red',_0xe13d6d,this['stFishEyeManager'][_0xe13d6d]['pRender']),this['FECErrorCode']=_0x532c7f,0x0;if(0x0==this['stFishEyeManager'][_0xe13d6d]['bUsed'])return console['info']('%c\\x20FEC_SetParam-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0xe13d6d,this['stFishEyeManager'][_0xe13d6d]['bUsed']),this['FECErrorCode']=_0x23abc0,0x0;if(this['stFishEyeManager'][_0xe13d6d]['emCorrectType']>=_0x5c32d1&&this['stFishEyeManager'][_0xe13d6d]['emCorrectType']<=_0x2da057&&0x1e&_0x3d82b8['upDateType'])return console['info']('%c\\x20FEC_SetParam-4\\x20nSubPort:%d\\x20not\\x203D','color:\\x20red',_0xe13d6d),this['FECErrorCode']=_0x48536d,0x0;if(_0x5bc2b2&_0x3d82b8['upDateType']){if(null==_0x3d82b8['stCycleParam'])return this['FECErrorCode']=_0x2c4e6b,0x0;for(var _0x4ed818=0x1;_0x4ed818<_0xec23f4;_0x4ed818++){if(this['stFishEyeManager'][_0x4ed818]['bUsed']&&this['stFishEyeManager'][_0x4ed818]['nSubPort']&&_0x55119e==this['stFishEyeManager'][_0x4ed818]['emCorrectType']&&(_0x3d82b8['stCycleParam']['fRadiusLeft']<=-0.5||_0x3d82b8['stCycleParam']['fRadiusLeft']>=0.4||_0x3d82b8['stCycleParam']['fRadiusRight']<=0.6||_0x3d82b8['stCycleParam']['fRadiusRight']>=1.5||_0x3d82b8['stCycleParam']['fRadiusTop']<=-0.5||_0x3d82b8['stCycleParam']['fRadiusTop']>0x0||_0x3d82b8['stCycleParam']['fRadiusBottom']<0x1||_0x3d82b8['stCycleParam']['fRadiusBottom']>=1.5||_0x3d82b8['stCycleParam']['fRadiusLeft']+_0x3d82b8['stCycleParam']['fRadiusRight']<=0.8||_0x3d82b8['stCycleParam']['fRadiusLeft']+_0x3d82b8['stCycleParam']['fRadiusRight']>=1.2||_0x3d82b8['stCycleParam']['fRadiusTop']+_0x3d82b8['stCycleParam']['fRadiusBottom']<=0.8||_0x3d82b8['stCycleParam']['fRadiusTop']+_0x3d82b8['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x2c4e6b,0x0;if(this['stFishEyeManager'][_0x4ed818]['bUsed']&&this['stFishEyeManager'][_0x4ed818]['nSubPort']&&_0x2da057==this['stFishEyeManager'][_0x4ed818]['emCorrectType']&&(_0x3d82b8['stCycleParam']['fRadiusLeft']<=-0.5||_0x3d82b8['stCycleParam']['fRadiusLeft']>0x0||_0x3d82b8['stCycleParam']['fRadiusRight']<0x1||_0x3d82b8['stCycleParam']['fRadiusRight']>=1.5||_0x3d82b8['stCycleParam']['fRadiusTop']<=-0.5||_0x3d82b8['stCycleParam']['fRadiusTop']>=0.4||_0x3d82b8['stCycleParam']['fRadiusBottom']<=0.6||_0x3d82b8['stCycleParam']['fRadiusBottom']>=1.5||_0x3d82b8['stCycleParam']['fRadiusLeft']+_0x3d82b8['stCycleParam']['fRadiusRight']<=0.8||_0x3d82b8['stCycleParam']['fRadiusLeft']+_0x3d82b8['stCycleParam']['fRadiusRight']>=1.2||_0x3d82b8['stCycleParam']['fRadiusTop']+_0x3d82b8['stCycleParam']['fRadiusBottom']<=0.8||_0x3d82b8['stCycleParam']['fRadiusTop']+_0x3d82b8['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x2c4e6b,0x0;}}if(0x0==this['stFishEyeManager'][_0xe13d6d]['bInited']){if(_0x232e49&_0x3d82b8['upDateType']){if(_0x1ef416!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType']&&_0x26d787!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType']||_0x1237f0==this['stFishEyeManager'][_0xe13d6d]['emPlaceType'])return this['FECErrorCode']=_0x48536d,0x0;for(var _0x4a197a=0x1;_0x4a197a<_0xec23f4;_0x4a197a++)if(this['stFishEyeManager'][_0x4a197a]['nSubPort']&&this['stFishEyeManager'][_0x4a197a]['bUsed']&&this['stFishEyeManager'][_0x4a197a]['emCorrectType']==_0x10161a)return this['FECErrorCode']=_0x276ff7,0x0;this['stFishParam'][_0xe13d6d]['fWideScanOffset']=_0x3d82b8['fValue'];}if(_0x4f9b53&_0x3d82b8['upDateType']){if(null==_0x3d82b8['stPTZColor'])return this['FECErrorCode']=_0x2c4e6b,0x0;if(_0x3d82b8['stPTZColor']['nR']>0xff||_0x3d82b8['stPTZColor']['nG']>0xff||_0x3d82b8['stPTZColor']['nB']>0xff||_0x3d82b8['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x48536d,0x0;this['stFishParam'][_0xe13d6d]['stPTZColor']['nR']=_0x3d82b8['stPTZColor']['nR'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nG']=_0x3d82b8['stPTZColor']['nG'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nB']=_0x3d82b8['stPTZColor']['nB'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nAlpha']=_0x3d82b8['stPTZColor']['nAlpha'];}if(_0x44e7dd&_0x3d82b8['upDateType']){if(_0x10161a!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType'])return this['FECErrorCode']=_0x48536d,0x0;this['stFishParam'][_0xe13d6d]['stPTZParam']['fPTZPositionX']=_0x3d82b8['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0xe13d6d]['stPTZParam']['fPTZPositionY']=_0x3d82b8['fPTZParam']['fPTZPositionY'];}if(_0x44f236&_0x3d82b8['upDateType']){if(_0x10161a!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType'])return this['FECErrorCode']=_0x48536d,0x0;this['stFishParam'][_0xe13d6d]['fZoom']=_0x3d82b8['fPTZZoom'];}if(_0x3c4c48&_0x3d82b8['upDateType']){if(null==this['stFishParam']['stPTZSelect'])return 0x0;if(_0x10161a!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType'])return this['FECErrorCode']=_0x48536d,0x0;this['stFishParam']['stPTZSelect']['fTop']=_0x3d82b8['stPTZSelect']['fTop'],this['stFishParam']['stPTZSelect']['fBottom']=_0x3d82b8['stPTZSelect']['fBottom'],this['stFishParam']['stPTZSelect']['fLeft']=_0x3d82b8['stPTZSelect']['fLeft'],this['stFishParam']['stPTZSelect']['fRight']=_0x3d82b8['stPTZSelect']['fRight'];}if(_0x5bc2b2&_0x3d82b8['upDateType']){if(null==_0x3d82b8['stCycleParam'])return this['FECErrorCode']=_0x2c4e6b,0x0;if(0x0==this['_IsValidRadiusParam'](_0x3d82b8['stCycleParam']))return this['FECErrorCode']=_0x2c4e6b,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x3d82b8['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x3d82b8['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x3d82b8['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x3d82b8['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x232e49&_0x3d82b8['upDateType']){if(_0x1ef416!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType']&&_0x26d787!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType']||_0x1237f0==this['stFishEyeManager'][_0xe13d6d]['emPlaceType'])return this['FECErrorCode']=_0x48536d,0x0;for(var _0x22d047=0x1;_0x22d047<_0xec23f4;_0x22d047++)if(this['stFishEyeManager'][_0x22d047]['nSubPort']&&this['stFishEyeManager'][_0x22d047]['bUsed']&&this['stFishEyeManager'][_0x22d047]['emCorrectType']==_0x10161a)return this['FECErrorCode']=_0x276ff7,0x0;var _0x51ad92={};if(_0x51ad92['nFishParamType']=_0x137b8e['SRFISHPARAMTYPE']['SR_FPT_ANGLE'],_0x51ad92['bBlack']=0x0,_0x51ad92['fAngle']=_0x3d82b8['fValue'],_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetFishParam'](_0x51ad92))return this['FECErrorCode']=_0x276ff7,0x0;this['stFishParam'][_0xe13d6d]['fWideScanOffset']=_0x3d82b8['fValue'];}if(_0x4f9b53&_0x3d82b8['upDateType']){if(null==_0x3d82b8['stPTZColor'])return this['FECErrorCode']=_0x48536d,0x0;if(_0x3d82b8['stPTZColor']['nR']>0xff||_0x3d82b8['stPTZColor']['nG']>0xff||_0x3d82b8['stPTZColor']['nB']>0xff||_0x3d82b8['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x48536d,0x0;var _0x85e801={};if(_0x85e801['fR']=_0x3d82b8['stPTZColor']['nR']/0xff,_0x85e801['fG']=_0x3d82b8['stPTZColor']['nG']/0xff,_0x85e801['fB']=_0x3d82b8['stPTZColor']['nB']/0xff,_0x85e801['fA']=_0x3d82b8['stPTZColor']['nAlpha']/0xff,_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetPTZColor'](_0xe13d6d,_0x85e801))return this['FECErrorCode']=_0x276ff7,_0x276ff7;this['stFishParam'][_0xe13d6d]['stPTZColor']['nR']=_0x3d82b8['stPTZColor']['nR'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nG']=_0x3d82b8['stPTZColor']['nG'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nB']=_0x3d82b8['stPTZColor']['nB'],this['stFishParam'][_0xe13d6d]['stPTZColor']['nAlpha']=_0x3d82b8['stPTZColor']['nAlpha'];}if(_0x44e7dd&_0x3d82b8['upDateType']){if(_0x10161a!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType'])return this['FECErrorCode']=_0x48536d,0x0;var _0x887ee9={};_0x887ee9['nFishParamType']=_0x137b8e['SRFISHPARAMTYPE']['SR_FPT_PTZ'],_0x887ee9['bBlack']=0x0,_0x887ee9['fPTZX']=_0x3d82b8['fPTZParam']['fPTZPositionX'],_0x887ee9['fPTZY']=_0x3d82b8['fPTZParam']['fPTZPositionY'];var _0x4b52c8=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetFishParam'](_0x887ee9);if(_0x137b8e['ERRCODE']['SR_OK']!=_0x4b52c8)return this['FECErrorCode']=_0x276ff7,0x0;this['stFishParam'][_0xe13d6d]['stPTZParam']['fPTZPositionX']=_0x3d82b8['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0xe13d6d]['stPTZParam']['fPTZPositionY']=_0x3d82b8['fPTZParam']['fPTZPositionY'];}if(_0x44f236&_0x3d82b8['upDateType']){if(_0x10161a!=this['stFishEyeManager'][_0xe13d6d]['emCorrectType'])return this['FECErrorCode']=_0x48536d,0x0;var _0x1968ba={};if(_0x1968ba['nFishParamType']=_0x137b8e['SRFISHPARAMTYPE']['SR_FPT_ZOOM'],_0x1968ba['bBlack']=0x0,_0x1968ba['fZoom']=_0x3d82b8['fPTZZoom'],_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetFishParam'](_0x1968ba))return this['FECErrorCode']=_0x276ff7,0x0;this['stFishParam'][_0xe13d6d]['fZoom']=_0x3d82b8['fPTZZoom'];}if(_0x5bc2b2&_0x3d82b8['upDateType']){if(0x0==this['_IsValidRadiusParam'](_0x3d82b8['stCycleParam']))return this['FECErrorCode']=_0x2c4e6b,0x0;var _0x3caf69={};if(_0x3caf69['nFishParamType']=_0x137b8e['SRFISHPARAMTYPE']['SR_FPT_CENTER'],_0x3caf69['bBlack']=0x1,_0x3caf69['fRXLeft']=_0x3d82b8['stCycleParam']['fRadiusLeft'],_0x3caf69['fRXRight']=_0x3d82b8['stCycleParam']['fRadiusRight'],_0x3caf69['fRYTop']=_0x3d82b8['stCycleParam']['fRadiusTop'],_0x3caf69['fRYBottom']=_0x3d82b8['stCycleParam']['fRadiusBottom'],_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0xe13d6d]['nValidSubPort'],_0x3caf69))return this['FECErrorCode']=_0x2c4e6b,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x3d82b8['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x3d82b8['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x3d82b8['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x3d82b8['stCycleParam']['fRadiusBottom'];}return _0x3c4c48&_0x3d82b8['upDateType']&&_0x10161a==this['stFishEyeManager'][_0xe13d6d]['emCorrectType']&&_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0xe13d6d]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0xe13d6d]['stPTZSelect'])?(this['FECErrorCode']=0x513,0x0):(null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][_0xe13d6d]['splice'](_0xe13d6d,this['pstWaterFontParamArray'][_0xe13d6d]['length']),this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0xe13d6d]['pRender'],_0xe13d6d,this['pstWaterFontParam'])),0x1);}},{'key':'FEC_GetParam','value':function(_0x30856f,_0x599839){return _0x30856f<0x0||_0x30856f>0x1f||null==_0x30856f?(console['info']('%c\\x20FEC_GetParam-1\\x20nSubPort:%d','color:\\x20red',_0x30856f),this['FECErrorCode']=_0x41280d,0x0):null==this['stFishEyeManager'][_0x30856f]['pRender']?(console['info']('%c\\x20FEC_GetParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x30856f]['pRender']),this['FECErrorCode']=_0x532c7f,0x0):(this['stFishEyeManager'][_0x30856f]['pRender']['SR_GetFishParam'](_0x599839),_0x599839['emCorrectType']=this['stFishEyeManager'][_0x30856f]['emCorrectType'],0x1);}},{'key':'_IsValidRadiusParam','value':function(_0x3063fe){return _0x3063fe['fRadiusBottom']<=_0x3063fe['fRadiusTop']||_0x3063fe['fRadiusRight']<=_0x3063fe['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x588b71,_0x1762db,_0xcbb014){return _0x588b71<0x0||_0x588b71>0x1f||null==_0x588b71?(console['info']('%c\\x20FEC_SetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x588b71),this['FECErrorCode']=_0x41280d,0x0):null==this['stFishEyeManager'][_0x588b71]['pRender']?(console['info']('%c\\x20FEC_SetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x588b71]['pRender']),this['FECErrorCode']=_0x532c7f,0x0):_0x1762db<_0x137b8e['SRVIEWTYPE']['SR_VT_ROTATION_X']||_0x1762db>_0x137b8e['SRVIEWTYPE']['SR_VT_SCALE']?(this['FECErrorCode']=_0x4e1d0a,0x0):(this['FECErrorCode']=0x0,0x0==this['stFishEyeManager'][_0x588b71]['bInited']?(this['FECErrorCode']=_0x23abc0,0x0):_0x5c32d1<=this['stFishEyeManager'][_0x588b71]['emCorrectType']?_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0x588b71]['pRender']['SR_SetViewParam'](_0x1762db,_0xcbb014)?(this['FECErrorCode']=_0x4e1d0a,0x0):(null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][_0x588b71]['splice'](0x0,this['pstWaterFontParamArray'][_0x588b71]['length']),this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0x588b71]['pRender'],_0x588b71,this['pstWaterFontParam'])),0x1):(this['FECErrorCode']=_0x48536d,0x0));}},{'key':'FEC_GetViewParam','value':function(_0x111d1c,_0x5e7188,_0x1b4d97){if(_0x1b4d97['fValue']=-0x1,_0x111d1c<0x0||_0x111d1c>0x1f||null==_0x111d1c)return console['info']('%c\\x20FEC_GetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x111d1c),this['FECErrorCode']=_0x41280d,0x0;if(null==this['stFishEyeManager'][_0x111d1c]['pRender'])return console['info']('%c\\x20FEC_GetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x111d1c]['pRender']),this['FECErrorCode']=_0x532c7f,0x0;if(_0x5e7188<0x1||_0x5e7188>0x3||0x0==this['stFishEyeManager'][_0x111d1c]['bInited'])return 0x0;if(_0x5c32d1<=this['stFishEyeManager'][_0x111d1c]['emCorrectType'])this['stFishEyeManager'][_0x111d1c]['pRender']['SR_GetViewParam'](_0x5e7188,_0x1b4d97);return 0x1;}},{'key':'FEC_SetDisplayRegion','value':function(_0x1d7ae5,_0x5d4e42,_0x56f1a9,_0x4baf57,_0xe15345,_0x3cbe94,_0xcb3ed6){if(_0x1d7ae5<0x0||_0x1d7ae5>0x1f||null==_0x1d7ae5)return console['info']('%c\\x20FEC_SetDisplayRegion-1\\x20nSubPort:%d','color:\\x20red',_0x1d7ae5),this['FECErrorCode']=_0x41280d,0x0;if(null==this['stFishEyeManager'][_0x1d7ae5]['pRender'])return console['info']('%c\\x20FEC_SetDisplayRegion-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x1d7ae5]['pRender']),this['FECErrorCode']=_0x532c7f,0x0;if(0x0!=_0x5d4e42||0x0!=_0x56f1a9)return this['FECErrorCode']=_0x4e1d0a,0x0;if(this['stFishEyeManager'][_0x1d7ae5]['emCorrectType']!=_0x21ccda&&this['stFishEyeManager'][_0x1d7ae5]['emCorrectType']!=_0x1ef416&&this['stFishEyeManager'][_0x1d7ae5]['emCorrectType']!=_0x26d787&&this['stFishEyeManager'][_0x1d7ae5]['emCorrectType']!=_0x5d8b15)return this['FECErrorCode']=_0x524588,0x0;if(0x0==this['stFishEyeManager'][_0x1d7ae5]['bInited'])return this['FECErrorCode']=_0x23abc0,0x0;if(_0x4baf57<0x0||_0xe15345<0x0||_0x3cbe94<0x0||_0xcb3ed6<0x0)return this['FECErrorCode']=_0x4e1d0a,0x0;var _0x378c3a=0x0,_0x3a64fa=0x0,_0x3e1095=0x1,_0x45503d=0x1;return 0x0!=this['displayHeight']&&0x0!=this['displayWidth']&&(_0x378c3a=_0x4baf57/this['displayWidth'],_0x3a64fa=_0xe15345/this['displayHeight'],_0x3e1095=_0x3cbe94/this['displayWidth'],_0x45503d=_0xcb3ed6/this['displayHeight']),_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0x1d7ae5]['pRender']['SR_SetDisplayRect'](_0x378c3a,_0x3a64fa,_0x3e1095,_0x45503d,_0x137b8e['SRSETRECTTYPE']['SR_SRT_SRC'])?(this['FECErrorCode']=0x511,0x0):(null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][_0x1d7ae5]['splice'](0x0,this['pstWaterFontParamArray'][_0x1d7ae5]['length']),this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0x1d7ae5]['pRender'],_0x1d7ae5,this['pstWaterFontParam'])),0x1);}},{'key':'FEC_SetBackCilling','value':function(_0x362a32,_0x1aa0a2){return _0x362a32<0x0||_0x362a32>0x1f||null==_0x362a32?(this['FECErrorCode']=_0x41280d,0x0):null==this['stFishEyeManager'][_0x362a32]['pRender']?(this['FECErrorCode']=_0x532c7f,0x0):0x0==this['stFishEyeManager'][_0x362a32]['bInited']?(this['FECErrorCode']=_0x23abc0,0x0):_0x137b8e['ERRCODE']['SR_OK']!=this['stFishEyeManager'][_0x362a32]['pRender']['SR_SetRenderState'](_0x137b8e['SRRENDERSTATETYPE']['SR_RST_BACK_CULL'],_0x1aa0a2)?(this['FECErrorCode']=0x511,0x0):(null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][_0x362a32]['splice'](0x0,this['pstWaterFontParamArray'][_0x362a32]['length']),this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0x362a32]['pRender'],_0x362a32,this['pstWaterFontParam'])),0x1);}},{'key':'FEC_GetPTZPort','value':function(_0x16c082,_0x3380c5,_0x1f06a7){if(null!=this['stFishEyeManager'][_0x16c082]['pRender']){var _0x54ccec={'nPTZPort':-0x1};if(this['stFishEyeManager'][_0x16c082]['pRender']['SR_GetPTZPort'](_0x3380c5,_0x1f06a7,_0x54ccec)==_0x137b8e['ERRCODE']['SR_OK'])return _0x54ccec['nPTZPort'];}return-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x1d1c32){return _0x1d1c32>=0x0&&_0x1d1c32<=0x2?(null!=this['stFishEyeManager'][0x0]['pRender']&&this['stFishEyeManager'][0x0]['pRender']['SR_SetPTZDisplayMode'](_0x1d1c32),this['FECShowMode']=_0x1d1c32,0x1):(console['info']('%c\\x20FEC_SetPTZDisplayMode\\x20ptzMode:%d','color:\\x20red',_0x1d1c32),0x0);}},{'key':'FEC_Capture','value':function(_0x2c3caa,_0x2dd1d6){if(null!=this['stFishEyeManager'][_0x2c3caa]['pRender']){var _0x5cb9b0={'nWidth':0x0,'nHeight':0x0,'nBufferLen':0x0},_0x592942=this['stFishEyeManager'][_0x2c3caa]['pRender']['SR_GetCaptureSize'](_0x5cb9b0);if(_0x137b8e['ERRCODE']['SR_OK']!=_0x592942||_0x5cb9b0['nBufferLen']<=0x0)return _0x2dd1d6(null,0x0,0x0,_0x2c3caa),0x0;var _0x3521fd=new Uint8Array(_0x5cb9b0['nBufferLen']);if(null==_0x3521fd)return _0x2dd1d6(null,0x0,0x0,_0x2c3caa),0x0;var _0x44752e={};return _0x44752e['pBuffer']=_0x3521fd,this['stFishEyeManager'][_0x2c3caa]['pRender']['SR_CaptureScreen'](_0x44752e),_0x2dd1d6(_0x3521fd,_0x5cb9b0['nWidth'],_0x5cb9b0['nHeight'],_0x2c3caa),_0x3521fd=null,0x1;}return _0x2dd1d6(null,0x0,0x0,_0x2c3caa),0x0;}},{'key':'CheckFrameRGB','value':function(_0xc7605,_0x483865,_0x57ef2f,_0x169157,_0x113554,_0x18b80c){if(null==_0xc7605||null==_0xc7605['width']||null==_0xc7605['height']||null==_0xc7605['pBuffer']||_0xc7605['width']<=0x0||_0xc7605['height']<=0x0||_0xc7605['pBuffer']['length']<=0x0)return 0x0;for(var _0x41808a=_0xc7605['width']/(_0x169157-0x1),_0xf7b622=_0xc7605['height']/(_0x57ef2f-0x1),_0x2b409f=0x0,_0x381f77=0x0,_0x3493aa=[],_0x5b5ef4=0x0;_0x5b5ef4<_0x57ef2f*_0x169157;_0x5b5ef4++)_0x3493aa[_0x5b5ef4]=0x0,this['aPOSAdaptBuf'][_0x5b5ef4]=0x0;if(_0x483865){for(var _0x3ac33e=0x0,_0x17c5a4=0x0;_0x17c5a4<_0xc7605['height'];_0x17c5a4++)for(var _0x44d32=0x0;_0x44d32<_0xc7605['width'];_0x44d32++){_0x2b409f=(_0x2b409f=Math['round'](_0x44d32/(_0x41808a/0x2)/0x2))<_0x169157?_0x2b409f:_0x169157-0x1,_0x381f77=(_0x381f77=Math['round'](_0x17c5a4/(_0xf7b622/0x2)/0x2))<_0x57ef2f?_0x381f77:_0x57ef2f-0x1;var _0x15f154=_0xc7605['pBuffer'][_0x3ac33e],_0x1399af=_0xc7605['pBuffer'][_0x3ac33e+0x1],_0x275afe=_0xc7605['pBuffer'][_0x3ac33e+0x2],_0x2565f9=Math['round'](0.299*_0x15f154+0.587*_0x1399af+0.114*_0x275afe);this['aPOSAdaptBuf'][_0x2b409f+_0x381f77*_0x169157]+=_0x2565f9,_0x3493aa[_0x2b409f+_0x381f77*_0x169157]++,_0x3ac33e+=0x4;}for(var _0x5654b2=0x0,_0xe67f7f=0x0;_0xe67f7f<_0x57ef2f*_0x169157;_0xe67f7f++)_0x5654b2=this['aPOSAdaptBuf'][_0xe67f7f]/_0x3493aa[_0xe67f7f],this['aPOSAdaptBuf'][_0xe67f7f]=_0x5654b2>0x80?0x0:0x1;}else{var _0x151f4a=Math['round'](_0x113554*_0xc7605['width']),_0x39946c=Math['round'](_0x18b80c*_0xc7605['height']),_0x570029=_0x151f4a-0x2;_0x570029=(_0x570029=_0x570029>0x0?_0x570029:0x0)<_0xc7605['width']?_0x570029:_0xc7605['width']-0x1;var _0x443dcd=_0x151f4a+0x2;_0x443dcd=(_0x443dcd=_0x443dcd>0x0?_0x443dcd:0x0)<_0xc7605['width']?_0x443dcd:_0xc7605['width']-0x1;var _0x56bc4d=_0x39946c-0x2;_0x56bc4d=(_0x56bc4d=_0x56bc4d>0x0?_0x56bc4d:0x0)<_0xc7605['height']?_0x56bc4d:_0xc7605['height']-0x1;var _0xd27638=_0x39946c+0x2;_0xd27638=(_0xd27638=_0xd27638>0x0?_0xd27638:0x0)<_0xc7605['height']?_0xd27638:_0xc7605['height']-0x1;for(var _0x4072c6=_0x56bc4d;_0x4072c6<_0xd27638;_0x4072c6++)for(var _0xb2afcb=_0x570029;_0xb2afcb<_0x443dcd;_0xb2afcb++){var _0x383b5c=0x4*Math['floor']((0x4*_0xb2afcb+_0x4072c6*_0xc7605['width']*0x4)/0x4),_0x398144=_0xc7605['pBuffer'][_0x383b5c],_0x792122=_0xc7605['pBuffer'][_0x383b5c+0x1],_0x52b23a=_0xc7605['pBuffer'][_0x383b5c+0x2],_0x54e387=Math['round'](0.299*_0x398144+0.587*_0x792122+0.114*_0x52b23a);this['aPOSAdaptBuf'][0x0]+=_0x54e387,_0x3493aa[0x0]++;}this['aPOSAdaptBuf'][0x0]=this['aPOSAdaptBuf'][0x0]/_0x3493aa[0x0]>0x80?0x0:0x1;}return 0x1;}},{'key':'GetWaterFontParam','value':function(_0x55f1cb,_0x5d3f39,_0x48c7bd,_0x2ab68e,_0x7105e8,_0x2ddafb,_0x18fb1a){var _0x28d778=_0x48c7bd['pFontString']['length'],_0x272f9b=_0x48c7bd['pstFontRotate']['fRotateAngle']%0x168/0x168*0x2*Math['PI'],_0x14e854=Math['min'](_0x48c7bd['pstFontSize']['nFontWidth'],_0x48c7bd['pstFontSize']['nFontHeight']);if(0x2==_0x48c7bd['pstCanvasAdapt']['nCanvasAdaptMode']){var _0x4dd983=_0x48c7bd['pstFontSize']['nFontWidth']*_0x2ab68e/_0x48c7bd['pstCanvasAdapt']['nBaseCanvasWidth'],_0x2d5a9f=_0x48c7bd['pstFontSize']['nFontHeight']*_0x7105e8/_0x48c7bd['pstCanvasAdapt']['nBaseCanvasHeight'];_0x14e854=Math['min'](_0x4dd983,_0x2d5a9f);}var _0x287581=_0x14e854/_0x2ab68e,_0xfcfe30=_0x14e854/_0x7105e8,_0x28df30=_0x287581*Math['cos'](Math['PI']/0x2-_0x272f9b)*_0x48c7bd['pSpace'],_0x58eabe=_0xfcfe30*Math['sin'](Math['PI']/0x2-_0x272f9b)*_0x48c7bd['pSpace'],_0x35df4a=[],_0x2709ab=[],_0x872f95=[];if(_0x48c7bd['nFontAlign']){for(var _0xc7971f=0x0;_0xc7971f<_0x28d778;_0xc7971f++)_0x35df4a[_0xc7971f]=_0x48c7bd['pFontString'][0x0]['length']*_0x287581/0x6,_0x2709ab[_0xc7971f]=Math['atan2'](_0x35df4a[0x0],_0x58eabe),_0x872f95[_0xc7971f]=Math['sqrt'](_0x35df4a[0x0]*_0x35df4a[0x0],_0x58eabe*_0x58eabe);}else{for(var _0x1226f6=0x0;_0x1226f6<_0x28d778;_0x1226f6++)_0x35df4a[_0x1226f6]=0x0,_0x2709ab[_0x1226f6]=0x0,_0x872f95[_0x1226f6]=0x0;}var _0x40f110={};if(this['pstWaterFontParam']['nColorAdapt']){var _0x24abcb={'nWidth':0x10,'nHeight':0x10,'nBufferLen':0x0},_0x398850=_0x55f1cb['SR_GetCaptureSize'](_0x24abcb);if(_0x137b8e['ERRCODE']['SR_OK']==_0x398850){var _0x7af0a1=new Uint8Array(_0x24abcb['nBufferLen']);_0x40f110['pBuffer']=_0x7af0a1,_0x55f1cb['SR_CaptureScreen'](_0x40f110,!0x0),_0x40f110['width']=_0x24abcb['nWidth'],_0x40f110['height']=_0x24abcb['nHeight'],_0x7af0a1=null;}}var _0x494696=_0x2ddafb*_0x18fb1a;if(_0x48c7bd['pstFontRotate']['fFillFullScreen']){var _0x2e1d47=[],_0x14c477=[];if(0x1==_0x48c7bd['pstCanvasAdapt']['nCanvasAdaptMode']){if(_0x18fb1a<_0x1e3d15){for(var _0x5ca140=0x0;_0x5ca140*_0x48c7bd['pstCanvasAdapt']['ntotalColSpace']<=_0x2ab68e;_0x5ca140++)_0x14c477[_0x5ca140]=(_0x5ca140*_0x48c7bd['pstCanvasAdapt']['ntotalColSpace']+_0x48c7bd['pstCanvasAdapt']['nColSpace']/0x2)/_0x2ab68e;}else{for(var _0x37d1d0=0x1/(_0x18fb1a-0x1),_0x2d881e=0x0;_0x2d881e<_0x18fb1a;_0x2d881e++)_0x14c477[_0x2d881e]=_0x37d1d0*_0x2d881e+_0x28df30*((_0x28d778-0x1)/0x2);}if(_0x2ddafb<_0x1e3d15){for(var _0xd3bc5a=0x0;_0xd3bc5a*_0x48c7bd['pstCanvasAdapt']['ntotalRowSpace']<=_0x7105e8;_0xd3bc5a++)_0x2e1d47[_0xd3bc5a]=(_0xd3bc5a*_0x48c7bd['pstCanvasAdapt']['ntotalRowSpace']+_0x48c7bd['pstCanvasAdapt']['nRowSpace']/0x2)/_0x7105e8;}else{for(var _0x20f4cd=0x1/(_0x2ddafb-0x1),_0x58f46c=0x0;_0x58f46c<_0x2ddafb;_0x58f46c++)_0x2e1d47[_0x58f46c]=_0x20f4cd*_0x58f46c-_0x58eabe*((_0x28d778-0x1)/0x2);}for(var _0x307f76=0x0;_0x307f76<_0x28d778;_0x307f76++)_0x35df4a[_0x307f76]=0x0,_0x2709ab[_0x307f76]=0x0,_0x872f95[_0x307f76]=0x0;}else{if(0x1==_0x2ddafb)_0x2e1d47[0x0]=0.5;else{for(var _0x19addc=0x1/(_0x2ddafb-0x1),_0x4f4e95=0x0;_0x4f4e95<_0x2ddafb;_0x4f4e95++)_0x2e1d47[_0x4f4e95]=_0x19addc*_0x4f4e95-_0x58eabe*((_0x28d778-0x1)/0x2);}if(0x1==_0x18fb1a)_0x14c477[0x0]=0.5;else{for(var _0x34f97f=0x1/(_0x18fb1a-0x1),_0x148bda=0x0;_0x148bda<_0x18fb1a;_0x148bda++)_0x14c477[_0x148bda]=_0x34f97f*_0x148bda+_0x28df30*((_0x28d778-0x1)/0x2);}}this['pstWaterFontParamArray'][_0x5d3f39]=[];for(var _0x4a7551=0x0;_0x4a7551<_0x494696;++_0x4a7551)for(var _0x408dc6=0x0;_0x408dc6<_0x28d778;_0x408dc6++){this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]={},this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pString']=_0x48c7bd['pFontString'][_0x408dc6],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['nFontWidth']=_0x14e854,this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['nFontHeight']=_0x14e854,this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstStartPos']={};var _0x4c3307=_0x4a7551%_0x18fb1a,_0x465fc5=Math['floor'](_0x4a7551/_0x18fb1a),_0x532703=Math['PI']/0x2-_0x272f9b+_0x2709ab[_0x408dc6];this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstStartPos']['fX']=_0x14c477[_0x4c3307]-_0x408dc6*_0x28df30+_0x872f95[_0x408dc6]*Math['cos'](_0x532703),this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstStartPos']['fY']=_0x2e1d47[_0x465fc5]+_0x408dc6*_0x58eabe-_0x872f95[_0x408dc6]*Math['sin'](_0x532703),_0x48c7bd['nColorAdapt']?(0x0==_0x408dc6&&this['CheckFrameRGB'](_0x40f110,0x0,0x1,0x1,this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstStartPos']['fX'],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstStartPos']['fY']),this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']={},this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']['fR']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']['fG']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']['fB']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']['fA']=_0x48c7bd['pstFontColor']['fA']):this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstFontColor']=_0x48c7bd['pstFontColor'],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['bBackGround']=!0x1,this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pstBGColor']=null,this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['fRotateAngle']=_0x48c7bd['pstFontRotate']['fRotateAngle'],this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['pFontFamily']=_0x48c7bd['pFontFamily'],_0x48c7bd['nFontAlign']?(this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['textAlign']='left',this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['textBaseline']='top'):(this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['textAlign']='center',this['pstWaterFontParamArray'][_0x5d3f39][_0x28d778*_0x4a7551+_0x408dc6]['textBaseline']='middle');}}else{for(var _0x27fb61=0x0;_0x27fb61<_0x48c7bd['pFontString']['length'];_0x27fb61++)this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]={},this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pString']=_0x48c7bd['pFontString'][_0x27fb61],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['nFontWidth']=_0x14e854,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['nFontHeight']=_0x14e854,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstStartPos']={},this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstStartPos']['fX']=_0x48c7bd['pstStartPos']['fX']-_0x27fb61*_0x28df30,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstStartPos']['fY']=_0x48c7bd['pstStartPos']['fY']+_0x27fb61*_0x58eabe,_0x48c7bd['nColorAdapt']?(this['CheckFrameRGB'](_0x40f110,0x0,0x1,0x1,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstStartPos']['fX'],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstStartPos']['fY']),this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']={},this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']['fR']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']['fG']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']['fB']=this['aPOSAdaptBuf'][0x0],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']['fA']=_0x48c7bd['pstFontColor']['fA']):this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstFontColor']=_0x48c7bd['pstFontColor'],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['bBackGround']=!0x1,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pstBGColor']=null,this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['fRotateAngle']=_0x48c7bd['pstFontRotate']['fRotateAngle'],this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['pFontFamily']=_0x48c7bd['pFontFamily'],_0x48c7bd['nFontAlign']?(this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['textAlign']='left',this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['textBaseline']='top'):(this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['textAlign']='center',this['pstWaterFontParamArray'][_0x5d3f39][_0x27fb61]['textBaseline']='middle');}return 0x1;}},{'key':'CalculateWaterMarkParam','value':function(_0x2fb540,_0x547a86,_0x512985){var _0x1fd1bf=this['mainCanvasID']['width'],_0x40fd5b=this['mainCanvasID']['height'];_0x547a86>0x0&&(_0x1fd1bf=this['stFishEyeManager'][_0x547a86]['sCanvasID']['width'],_0x40fd5b=this['stFishEyeManager'][_0x547a86]['sCanvasID']['height']);var _0x3af903=Math['floor'](_0x512985['pstFontNumber']['nRowNumber']),_0x109c8f=Math['floor'](_0x512985['pstFontNumber']['nColNumber']);0x1==_0x512985['pstCanvasAdapt']['nCanvasAdaptMode']&&(_0x3af903=(_0x3af903=(_0x3af903=Math['floor'](_0x40fd5b/_0x512985['pstCanvasAdapt']['ntotalRowSpace']+0x1))<0x1?0x1:_0x3af903)>_0x1e3d15?_0x1e3d15:_0x3af903,_0x109c8f=(_0x109c8f=(_0x109c8f=Math['floor'](_0x1fd1bf/_0x512985['pstCanvasAdapt']['ntotalColSpace']+0x1))<0x1?0x1:_0x109c8f)>_0x1e3d15?_0x1e3d15:_0x109c8f),this['GetWaterFontParam'](_0x2fb540,_0x547a86,_0x512985,_0x1fd1bf,_0x40fd5b,_0x3af903,_0x109c8f);}},{'key':'SetWaterMarkFont','value':function(_0x2dac57){if(0x0!=this['pstWaterFontParamArray']['length']){for(var _0x5ba803=0x0;_0x5ba803<_0xec23f4;_0x5ba803++)this['pstWaterFontParamArray'][_0x5ba803]['splice'](0x0,this['pstWaterFontParamArray'][_0x5ba803]['length']);}if(this['pstWaterFontParam']=_0x2dac57,null===_0x2dac57)return 0x1;this['CalculateWaterMarkParam'](this['oVideoHandle'],0x0,_0x2dac57);for(var _0x326b0a=0x1;_0x326b0a<_0xec23f4;_0x326b0a++)null!=this['stFishEyeManager'][_0x326b0a]['pRender']&&this['CalculateWaterMarkParam'](this['stFishEyeManager'][_0x326b0a]['pRender'],_0x326b0a,_0x2dac57);return 0x1;}},{'key':'SetMosaicType','value':function(_0x48b96b){return this['MosaicType']=_0x48b96b['nMosaicType'],this['MosaicSize']=_0x48b96b['nMosaicSize'],this['MosaicColorR']=_0x48b96b['pstMosaicColor']['fMosaicColorR']/0xff,this['MosaicColorG']=_0x48b96b['pstMosaicColor']['fMosaicColorG']/0xff,this['MosaicColorB']=_0x48b96b['pstMosaicColor']['fMosaicColorB']/0xff,this['MosaicColorA']=_0x48b96b['pstMosaicColor']['fMosaicColorA']/0x64,0x1;}},{'key':'SetTextCanvas','value':function(_0x25598c){return this['textCanvas']=_0x25598c,0x1;}},{'key':'SetPrintLogFlag','value':function(_0x4d3464){return this['printfFlag']=_0x4d3464,0x1;}},{'key':'SetRotateAngle','value':function(_0xb4f64e){if(null!=this['oVideoHandle']){var _0x553b69;if(_0x553b69=this['oVideoHandle']['SR_SetRenderState'](_0x137b8e['SRRENDERSTATETYPE']['SR_RST_IMAGE_ROTATE'],_0xb4f64e),null!=this['pstWaterFontParam']&&this['pstWaterFontParam']['nColorAdapt']&&(this['pstWaterFontParamArray'][0x0]['splice'](0x0,this['pstWaterFontParamArray'][0x0]['length']),this['CalculateWaterMarkParam'](this['oVideoHandle'],0x0,this['pstWaterFontParam'])),_0x553b69==_0x137b8e['ERRCODE']['SR_OK'])return 0x1;}return 0x0;}},{'key':'ImageDecoder','value':function(_0x551b96,_0x1f7771,_0x1e9feb){var _0x563752=this;_0x551b96['decode']({'frameIndex':_0x1e9feb})['then'](function(_0x4e1bac){_0x563752['pWaterImageParam'][_0x1e9feb]={},_0x563752['pWaterImageParam'][_0x1e9feb]['videoStream']=_0x4e1bac['image'],_0x563752['pWaterImageParam'][_0x1e9feb]['nImageWidth']=_0x4e1bac['image']['displayWidth'],_0x563752['pWaterImageParam'][_0x1e9feb]['nImageHeight']=_0x4e1bac['image']['displayHeight'],_0x563752['pWaterImageParam'][_0x1e9feb]['timeStamp']=_0x4e1bac['image']['timestamp']/0x3e8,_0x563752['pWaterImageParam'][_0x1e9feb]['duration']=_0x4e1bac['image']['duration']/0x3e8,null!=_0x1f7771['pstRectPos']?_0x563752['pWaterImageParam'][_0x1e9feb]['pstRectPos']=_0x1f7771['pstRectPos']:_0x563752['pWaterImageParam'][_0x1e9feb]['pstRectPos']={'fLeft':0x0,'fRight':0.1,'fTop':0x0,'fBottom':0.1},null!=_0x1f7771['fAlpha']&&_0x1f7771['fAlpha']<=0x1&&_0x1f7771['fAlpha']>=0x0?_0x563752['pWaterImageParam'][_0x1e9feb]['fAlpha']=_0x1f7771['fAlpha']:_0x563752['pWaterImageParam'][_0x1e9feb]['fAlpha']=0x1,_0x563752['waterMarkImageMax']=_0x551b96['tracks']['selectedTrack']['frameCount'],_0x1e9feb<_0x551b96['tracks']['selectedTrack']['frameCount']-0x1?_0x563752['ImageDecoder'](_0x551b96,_0x1f7771,_0x1e9feb+0x1):(_0x563752['baseWaterMarkImageTime']=_0x563752['curTimestamp'],_0x563752['finishDecodeImage']=!0x0);});}},{'key':'SetWaterMarkImage','value':function(_0x2c2bdf){var _0x87b793=this;if(this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),null===_0x2c2bdf)return 0x1;if(null!=_0x2c2bdf['pImageData']){var _0xd7d10d=new ImageDecoder({'data':_0x2c2bdf['pImageData'],'type':'image/'+_0x2c2bdf['pImageType']});_0xd7d10d['tracks']['ready']['then'](function(){_0xd7d10d['completed']['then'](function(){_0x87b793['ImageDecoder'](_0xd7d10d,_0x2c2bdf,0x0);});});}return this['waterMarkImageIndex']=0x0,0x1;}},{'key':'SelectIntelInfoFeatureToDraw','value':function(_0x46d4e5){if(this['DrawTargetEventIDList']['splice'](0x0,this['DrawTargetEventIDList']['length']),null===_0x46d4e5)return 0x0;if(pImageParam['NodeNumber']>0x0){for(var _0x2fc573=0x0;_0x2fc573<pImageParam['NodeNumber'];_0x2fc573++)this['DrawTargetEventIDList']['push'](_0x46d4e5['pIntelInfoNode'][_0x2fc573]);}return 0x1;}},{'key':'_ConvertDisplayEffect','value':function(_0x4f74c9,_0xb49ea0){switch(_0x4f74c9){case _0x1237f0:return _0x10161a==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PTZ_WALL']:_0x26d787==_0xb49ea0||_0x5d8b15==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PANORAMA_WALL']:_0x5c32d1==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_SEMISPHERE']:_0x313b18==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PLANET']:_0x55119e==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:_0x2da057==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];case _0x347826:return _0x10161a==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PTZ_FLOOR']:_0x26d787==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x1ef416==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x5c32d1==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_SEMISPHERE']:_0x5bd051==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_CYLINDER_FLOOR']:_0x285594==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x313b18==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PLANET']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];case _0x128d88:return _0x10161a==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PTZ_CEILING']:_0x26d787==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PANORAMA_CEILING_360']:_0x1ef416==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PANORAMA_CEILING_180']:_0x5c32d1==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_SEMISPHERE']:_0x5bd051==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_CYLINDER_CEILING']:_0x285594==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:_0x313b18==_0xb49ea0?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_PLANET']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];default:return _0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];}return _0x137b8e['SRDISPLAYEFFECT']['SR_DE_FISH_ORIGINAL'];}},{'key':'GetCanvasData','value':function(_0x4bdc22){var _0x52305f=arguments['length']>0x1&&void 0x0!==arguments[0x1]?arguments[0x1]:0x0,_0x23214d=arguments['length']>0x2&&void 0x0!==arguments[0x2]?arguments[0x2]:0x0,_0x403e64=arguments['length']>0x3&&void 0x0!==arguments[0x3]?arguments[0x3]:0x0,_0x95d7e2={};_0x95d7e2['nWidth']=_0x52305f,_0x95d7e2['nHeight']=_0x23214d,_0x95d7e2['nBufferLen']=0x0;var _0x70e7d1=this['oVideoHandle']['SR_GetCaptureSize'](_0x95d7e2,_0x403e64);if(_0x137b8e['ERRCODE']['SR_OK']!=_0x70e7d1||_0x95d7e2['nBufferLen']<=0x0)_0x4bdc22(null);else{var _0x707a5c=new Uint8Array(_0x95d7e2['nBufferLen']);if(null!=_0x707a5c){var _0x4eb0f2={};_0x4eb0f2['pBuffer']=_0x707a5c,this['oVideoHandle']['SR_CaptureScreen'](_0x4eb0f2),_0x4bdc22(_0x707a5c,_0x95d7e2['nWidth'],_0x95d7e2['nHeight']);}else _0x4bdc22(null);}}},{'key':'FindIntelNodefromList','value':function(_0x1a05fd){if(0x0!=this['privateNormalLinesInfo']['length']){for(var _0x33c637=!0x1,_0x34f11d=0x0,_0x51631a=!0x1,_0x59ea3f=0x0,_0x14410c=0x0,_0x42dcb7=0x5f5e100,_0x6f5498=0x0;_0x6f5498<this['privateNormalLinesInfo']['length'];_0x6f5498++){if(0x0==(_0x14410c=Math['abs'](this['privateNormalLinesInfo'][_0x6f5498]['absTimeStamp']-_0x1a05fd))){_0x51631a=!0x0,_0x59ea3f=_0x6f5498;break;}_0x14410c<=this['nTimePerFrame']+0x3e8&&_0x14410c<_0x42dcb7&&(_0x33c637=!0x0,_0x34f11d=_0x6f5498,_0x42dcb7=_0x14410c);}_0x51631a?(this['curNormalLinesInfo']=this['privateNormalLinesInfo'][_0x59ea3f],this['privateNormalLinesInfo']['shift']()):_0x33c637&&(this['curNormalLinesInfo']=this['privateNormalLinesInfo'][_0x34f11d],this['privateNormalLinesInfo']['shift']());}if(0x0!=this['privateThermalLinesInfo']['length']&&(this['curThermalLinesInfo']=this['privateThermalLinesInfo'][0x0]),0x0!=this['privateTemLinesInfo']['length']){for(var _0x4d0a92=!0x1,_0x49ce65=0x0,_0x251887=!0x1,_0x25cb23=0x0,_0x4f94a2=0x0,_0x795235=0x5f5e100,_0x1a8917=0x0;_0x1a8917<this['privateTemLinesInfo']['length'];_0x1a8917++){if(0x0==(_0x4f94a2=Math['abs'](this['privateTemLinesInfo'][_0x1a8917]['absTimeStamp']-_0x1a05fd))){_0x251887=!0x0,_0x25cb23=_0x1a8917;break;}_0x4f94a2<=this['nTimePerFrame']+0x3e8&&_0x4f94a2<_0x795235&&(_0x4d0a92=!0x0,_0x49ce65=_0x1a8917,_0x795235=_0x4f94a2);}_0x251887?(this['curTemLinesInfo']=this['privateTemLinesInfo'][_0x25cb23],this['privateTemLinesInfo']['shift']()):_0x4d0a92?(this['curTemLinesInfo']=this['privateTemLinesInfo'][_0x49ce65],this['privateTemLinesInfo']['shift']()):this['nFrameRate']<=0x1e?this['m_nTEMDrawLinescount']<=0x1e?this['m_nTEMDrawLinescount']++:this['curTemLinesInfo']=null:this['m_nTEMDrawLinescount']<=0x3c?this['m_nTEMDrawLinescount']++:this['curTemLinesInfo']=null;}else this['nFrameRate']<=0x1e?this['m_nTEMDrawLinescount']<=0x1e?this['m_nTEMDrawLinescount']++:this['curTemLinesInfo']=null:this['m_nTEMDrawLinescount']<=0x3c?this['m_nTEMDrawLinescount']++:this['curTemLinesInfo']=null;if(0x0!=this['privateTargetLinesInfo']['length']){for(var _0x53c22a=!0x1,_0x3d4210=0x0,_0x418e83=!0x1,_0x177b35=0x0,_0xb2d10e=0x0,_0x28a1ba=0x5f5e100,_0x22aa46=0x0;_0x22aa46<this['privateTargetLinesInfo']['length'];_0x22aa46++){if(0x0==(_0xb2d10e=Math['abs'](this['privateTargetLinesInfo'][_0x22aa46]['absTimeStamp']-_0x1a05fd))){_0x418e83=!0x0,_0x177b35=_0x22aa46;break;}_0xb2d10e<=this['nTimePerFrame']+0x3e8&&_0xb2d10e<_0x28a1ba&&(_0x53c22a=!0x0,_0x3d4210=_0x22aa46,_0x28a1ba=_0xb2d10e);}_0x418e83?(this['curTargetLinesInfo']=this['privateTargetLinesInfo'][_0x177b35],this['privateTargetLinesInfo']['shift']()):_0x53c22a?(this['curTargetLinesInfo']=this['privateTargetLinesInfo'][_0x3d4210],this['privateTargetLinesInfo']['shift']()):this['curTargetLinesInfo']=null;}else this['curTargetLinesInfo']=null;if(0x0!=this['privateMDLinesInfo']['length']){for(var _0x13562f=!0x1,_0x40cd60=0x0,_0x1a68a8=!0x1,_0x4c4f52=0x0,_0x4a1dc1=0x0,_0x3e14f5=0x5f5e100,_0x3d8975=0x0;_0x3d8975<this['privateMDLinesInfo']['length'];_0x3d8975++){if(0x0==(_0x4a1dc1=Math['abs'](this['privateMDLinesInfo'][_0x3d8975]['absTimeStamp']-_0x1a05fd))){_0x1a68a8=!0x0,_0x4c4f52=_0x3d8975;break;}_0x4a1dc1<=this['nTimePerFrame']+0x3e8&&_0x4a1dc1<_0x3e14f5&&(_0x13562f=!0x0,_0x40cd60=_0x3d8975,_0x3e14f5=_0x4a1dc1);}_0x1a68a8?(this['curMDLinesInfo']=this['privateMDLinesInfo'][_0x4c4f52],this['privateMDLinesInfo']['shift']()):_0x13562f?(this['curMDLinesInfo']=this['privateMDLinesInfo'][_0x40cd60],this['privateMDLinesInfo']['shift']()):this['curMDLinesInfo']=null;}else this['curMDLinesInfo']=null;if(0x0!=this['privateExactLinesInfo']['length']){for(var _0x318bad=!0x1,_0x25d930=0x0,_0x4ddc50=!0x1,_0x43fae8=0x0,_0x231347=0x0,_0x129581=0x5f5e100,_0x446d1e=0x0;_0x446d1e<this['privateExactLinesInfo']['length'];_0x446d1e++){if(0x0==(_0x231347=Math['abs'](this['privateExactLinesInfo'][_0x446d1e]['absTimeStamp']-_0x1a05fd))){_0x4ddc50=!0x0,_0x43fae8=_0x446d1e;break;}_0x231347<=this['nTimePerFrame']/0x2&&_0x231347<_0x129581&&(_0x318bad=!0x0,_0x25d930=_0x446d1e,_0x129581=_0x231347);}_0x4ddc50?(this['curExactLinesInfo']=this['privateExactLinesInfo'][_0x43fae8],this['privateExactLinesInfo']['shift']()):_0x318bad?(this['curExactLinesInfo']=this['privateExactLinesInfo'][_0x25d930],this['privateExactLinesInfo']['shift']()):this['curExactLinesInfo']=null;}else this['curExactLinesInfo']=null;if(0x0!=this['privateExactRuleLinesInfo']['length']){for(var _0x5e0b34=!0x1,_0x18967a=0x0,_0x4ee941=!0x1,_0x5149d3=0x0,_0x48264b=0x0,_0x3377e4=0x5f5e100,_0x16d76f=0x0;_0x16d76f<this['privateExactRuleLinesInfo']['length'];_0x16d76f++){if(0x0==(_0x48264b=Math['abs'](this['privateExactRuleLinesInfo'][_0x16d76f]['absTimeStamp']-_0x1a05fd))){_0x4ee941=!0x0,_0x5149d3=_0x16d76f;break;}_0x48264b<=this['nTimePerFrame']/0x2&&_0x48264b<_0x3377e4&&(_0x5e0b34=!0x0,_0x18967a=_0x16d76f,_0x3377e4=_0x48264b);}_0x4ee941?(this['curExactRuleLinesInfo']=this['privateExactRuleLinesInfo'][_0x5149d3],this['privateExactRuleLinesInfo']['shift']()):_0x5e0b34&&(this['curExactRuleLinesInfo']=this['privateExactRuleLinesInfo'][_0x18967a],this['privateExactRuleLinesInfo']['shift']());}if(0x0!=this['privateNormalFontsInfo']['length']){for(var _0x3483f2=!0x1,_0x4194c2=0x0,_0x162b98=!0x1,_0x32bae7=0x0,_0x57adb5=0x0,_0x4728be=0x5f5e100,_0x417f8f=0x0;_0x417f8f<this['privateNormalFontsInfo']['length'];_0x417f8f++){if(0x0==(_0x57adb5=Math['abs'](this['privateNormalFontsInfo'][_0x417f8f]['absTimeStamp']-_0x1a05fd))){_0x162b98=!0x0,_0x32bae7=_0x417f8f;break;}_0x57adb5<=this['nTimePerFrame']+0x3e8&&_0x57adb5<_0x4728be&&(_0x3483f2=!0x0,_0x4194c2=_0x417f8f,_0x4728be=_0x57adb5);}_0x162b98?(this['curNormalFontsInfo']=this['privateNormalFontsInfo'][_0x32bae7],this['privateNormalFontsInfo']['shift']()):_0x3483f2&&(this['curNormalFontsInfo']=this['privateNormalFontsInfo'][_0x4194c2],this['privateNormalFontsInfo']['shift']());}if(0x0!=this['privateTemFontsInfo']['length']){for(var _0x402cd2=!0x1,_0x5ca1ea=0x0,_0x159b91=!0x1,_0x9a0218=0x0,_0x8310ad=0x0,_0x3a6301=0x5f5e100,_0x5eea74=0x0;_0x5eea74<this['privateTemFontsInfo']['length'];_0x5eea74++){if(0x0==(_0x8310ad=Math['abs'](this['privateTemFontsInfo'][_0x5eea74]['absTimeStamp']-_0x1a05fd))){_0x159b91=!0x0,_0x9a0218=_0x5eea74;break;}_0x8310ad<=this['nTimePerFrame']+0x3e8&&_0x8310ad<_0x3a6301&&(_0x402cd2=!0x0,_0x5ca1ea=_0x5eea74,_0x3a6301=_0x8310ad);}_0x159b91?(this['curTemFontsInfo']=this['privateTemFontsInfo'][_0x9a0218],this['privateTemFontsInfo']['shift']()):_0x402cd2?(this['curTemFontsInfo']=this['privateTemFontsInfo'][_0x5ca1ea],this['privateTemFontsInfo']['shift']()):this['nFrameRate']<=0x1e?this['m_nTEMDrawFontscount']<=0x1e?this['m_nTEMDrawFontscount']++:this['curTemFontsInfo']=null:this['m_nTEMDrawFontscount']<=0x3c?this['m_nTEMDrawFontscount']++:this['curTemFontsInfo']=null;}else this['nFrameRate']<=0x1e?this['m_nTEMDrawFontscount']<=0x1e?this['m_nTEMDrawFontscount']++:this['curTemFontsInfo']=null:this['m_nTEMDrawFontscount']<=0x3c?this['m_nTEMDrawFontscount']++:this['curTemFontsInfo']=null;if(0x0!=this['privateTargetFontsInfo']['length']){for(var _0x3750d7=!0x1,_0x10099f=0x0,_0x57256b=!0x1,_0x4a2370=0x0,_0xb79fed=0x0,_0x469916=0x5f5e100,_0x3dd073=0x0;_0x3dd073<this['privateTargetFontsInfo']['length'];_0x3dd073++){if(0x0==(_0xb79fed=Math['abs'](this['privateTargetFontsInfo'][_0x3dd073]['absTimeStamp']-_0x1a05fd))){_0x57256b=!0x0,_0x4a2370=_0x3dd073;break;}_0xb79fed<=this['nTimePerFrame']+0x3e8&&_0xb79fed<_0x469916&&(_0x3750d7=!0x0,_0x10099f=_0x3dd073,_0x469916=_0xb79fed);}_0x57256b?(this['curTargetFontsInfo']=this['privateTargetFontsInfo'][_0x4a2370],this['privateTargetFontsInfo']['shift']()):_0x3750d7?(this['curTargetFontsInfo']=this['privateTargetFontsInfo'][_0x10099f],this['privateTargetFontsInfo']['shift']()):this['curTargetFontsInfo']=null;}else this['curTargetFontsInfo']=null;if(0x0!=this['privateExactPOSFontsInfo']['length']){for(var _0x3e4995=!0x1,_0x1fa24b=0x0,_0x11d450=!0x1,_0x3cf838=0x0,_0x4b3eeb=0x0,_0x1fb651=0x5f5e100,_0x47a92c=0x0;_0x47a92c<this['privateExactPOSFontsInfo']['length'];_0x47a92c++){if(0x0==(_0x4b3eeb=Math['abs'](this['privateExactPOSFontsInfo'][_0x47a92c]['absTimeStamp']-_0x1a05fd))){_0x11d450=!0x0,_0x3cf838=_0x47a92c;break;}_0x4b3eeb<=this['nTimePerFrame']/0x2&&_0x4b3eeb<_0x1fb651&&(_0x3e4995=!0x0,_0x1fa24b=_0x47a92c,_0x1fb651=_0x4b3eeb);}_0x11d450?(this['curExactPOSFontsInfo']=this['privateExactPOSFontsInfo'][_0x3cf838],this['privateExactPOSFontsInfo']['shift']()):_0x3e4995?(this['curExactPOSFontsInfo']=this['privateExactPOSFontsInfo'][_0x1fa24b],this['privateExactPOSFontsInfo']['shift']()):this['curExactPOSFontsInfo']=null;}else this['curExactPOSFontsInfo']=null;if(0x0!=this['privateExactFontsInfo']['length']){for(var _0x21027d=!0x1,_0x39dbd8=0x0,_0x40ed57=!0x1,_0x3e1523=0x0,_0x390825=0x0,_0x54c09b=0x5f5e100,_0x460cdd=0x0;_0x460cdd<this['privateExactFontsInfo']['length'];_0x460cdd++){if(0x0==(_0x390825=Math['abs'](this['privateExactFontsInfo'][_0x460cdd]['absTimeStamp']-_0x1a05fd))){_0x40ed57=!0x0,_0x3e1523=_0x460cdd;break;}_0x390825<=this['nTimePerFrame']/0x2&&_0x390825<_0x54c09b&&(_0x21027d=!0x0,_0x39dbd8=_0x460cdd,_0x54c09b=_0x390825);}_0x40ed57?(this['curExactFontsInfo']=this['privateExactFontsInfo'][_0x3e1523],this['privateExactFontsInfo']['shift']()):_0x21027d?(this['curExactFontsInfo']=this['privateExactFontsInfo'][_0x39dbd8],this['privateExactFontsInfo']['shift']()):this['curExactFontsInfo']=null;}else this['curExactFontsInfo']=null;if(0x0!=this['privateImageInfo']['length']){for(var _0x50e572=!0x1,_0x401f6c=0x0,_0x455985=!0x1,_0x54e597=0x0,_0x514e39=0x0,_0x168dbc=0x5f5e100,_0x298b7a=0x0;_0x298b7a<this['privateImageInfo']['length'];_0x298b7a++){if(0x0==(_0x514e39=Math['abs'](this['privateImageInfo'][_0x298b7a]['absTimeStamp']-_0x1a05fd))){_0x455985=!0x0,_0x54e597=_0x298b7a;break;}_0x514e39<=this['nTimePerFrame']+0x5f5e100&&_0x514e39<_0x168dbc&&(_0x50e572=!0x0,_0x401f6c=_0x298b7a,_0x168dbc=_0x514e39);}_0x455985?(this['curImagesInfo']=this['privateImageInfo'][_0x54e597],this['privateImageInfo']['shift']()):_0x50e572&&(this['curImagesInfo']=this['privateImageInfo'][_0x401f6c],this['privateImageInfo']['shift']());}return 0x1;}},{'key':'RenderPrivateData','value':function(_0x24d2ca,_0x4cf38c){return 0x1&_0x24d2ca&&(this['m_bEnableIVSEx']=_0x4cf38c),0x2&_0x24d2ca&&(this['m_bEnableMDEx']=_0x4cf38c),0x4&_0x24d2ca&&(this['m_bDisPos']=_0x4cf38c),0x8&_0x24d2ca&&(this['m_bEnablePICEx']=_0x4cf38c),0x10&_0x24d2ca&&(this['m_bEnableFIREEx']=_0x4cf38c),0x20&_0x24d2ca&&(this['m_bEnableTEMEx']=_0x4cf38c),0x40&_0x24d2ca&&(this['m_bEnableTrackEx']=_0x4cf38c),0x80&_0x24d2ca&&(this['m_bEnableThermal']=_0x4cf38c),0x1;}},{'key':'RenderPrivateDataEx','value':function(_0xc024e9,_0x57e9f8,_0xaf2cff){return 0x10==_0xc024e9&&(0x1&_0x57e9f8&&(this['m_bEnableFireDis']=_0xaf2cff),0x4&_0x57e9f8&&(this['m_bEnableFireMaxPos']=_0xaf2cff),0x8&_0x57e9f8&&(this['m_bEnableFireDistance']=_0xaf2cff)),0x20==_0xc024e9&&(0x1&_0x57e9f8&&(this['m_bEnableTEMBox']=_0xaf2cff),0x2&_0x57e9f8&&(this['m_bEnableTEMLine']=_0xaf2cff),0x4&_0x57e9f8&&(this['m_bEnableTEMPoint']=_0xaf2cff)),0x40==_0xc024e9&&(0x1&_0x57e9f8&&(this['m_bEnableTrackPeople']=_0xaf2cff),0x2&_0x57e9f8&&(this['m_bEnableTrackVehicle']=_0xaf2cff)),0x80==_0xc024e9&&(0x1&_0x57e9f8&&(this['m_bEnableThermalFireMask']=_0xaf2cff),0x2&_0x57e9f8&&(this['m_bEnableThermalRuleGas']=_0xaf2cff),0x4&_0x57e9f8&&(this['m_bEnableThermalTargetGas']=_0xaf2cff)),0x1;}},{'key':'InputPrivateInfo','value':function(_0x10a7bd,_0x2a5022,_0x1e4842){var _0x207879=this,_0x16dcbe=!0x1,_0x3b9181=0x0;if(_0x10a7bd['linesNum']>0x0){var _0x4206e1={'linesNum':0x0};_0x4206e1['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x4206e1['stDrawLinesArray']=[];var _0x5708fb={'linesNum':0x0};_0x5708fb['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x5708fb['stDrawLinesArray']=[];var _0x9849e6={'linesNum':0x0};_0x9849e6['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x9849e6['stDrawLinesArray']=[];var _0x1655cd={'linesNum':0x0};_0x1655cd['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x1655cd['stDrawLinesArray']=[];var _0x516599={'linesNum':0x0};_0x516599['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x516599['stDrawLinesArray']=[];var _0x3b0b37={'linesNum':0x0};_0x3b0b37['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x3b0b37['stDrawLinesArray']=[];var _0x2ce025={'linesNum':0x0};_0x2ce025['absTimeStamp']=_0x10a7bd['absTimeStamp'],_0x2ce025['stDrawLinesArray']=[];for(var _0x32e502=0x0;_0x32e502<_0x10a7bd['linesNum'];_0x32e502++)0x1==_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwMatchType']?0x2==_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwIntelFlag']?(_0x3b0b37['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x3b0b37['linesNum']):(_0x516599['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x516599['linesNum']):0x1==_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwIntelFlag']?(_0x4206e1['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x4206e1['linesNum']):0x4==_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwIntelFlag']?(this['m_nTEMDrawLinescount']=0x0,_0x5708fb['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x5708fb['linesNum']):0x6==_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwIntelFlag']?(_0x9849e6['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x9849e6['linesNum']):0x8!=_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwIntelFlag']||0x1!=_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwSubIntelFlag']&&0x2!=_0x10a7bd['stDrawLinesArray'][_0x32e502]['dwSubIntelFlag']?(_0x1655cd['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x1655cd['linesNum']):(_0x2ce025['stDrawLinesArray']['push'](_0x10a7bd['stDrawLinesArray'][_0x32e502]),++_0x2ce025['linesNum']);if(_0x516599['linesNum']>0x0){if(_0x516599['absTimeStamp']<=this['maxExactPrivateLineTimeStamp']){var _0x5940a4=0x0;for(_0x5940a4=0x0;_0x5940a4<this['privateExactLinesInfo']['length'];_0x5940a4++)if(this['privateExactLinesInfo'][_0x5940a4]['absTimeStamp']==_0x516599['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x5940a4;break;}}if(_0x16dcbe){this['privateExactLinesInfo'][_0x3b9181]['linesNum']=_0x516599['linesNum'];for(var _0x239ebb=0x0;_0x239ebb<_0x516599['linesNum'];_0x239ebb++){this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]={},this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['vertex_num']=_0x516599['stDrawLinesArray'][_0x239ebb]['vertex_num'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['lineWidth']=_0x516599['stDrawLinesArray'][_0x239ebb]['lineWidth'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['bFill']=_0x516599['stDrawLinesArray'][_0x239ebb]['bFill'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['bLoop']=_0x516599['stDrawLinesArray'][_0x239ebb]['bLoop'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['dwMatchType']=_0x516599['stDrawLinesArray'][_0x239ebb]['dwMatchType'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['dwIntelFlag']=_0x516599['stDrawLinesArray'][_0x239ebb]['dwIntelFlag'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['dwSubIntelFlag']=_0x516599['stDrawLinesArray'][_0x239ebb]['dwSubIntelFlag'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['color']={},this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['color']['R']=_0x516599['stDrawLinesArray'][_0x239ebb]['color']['R'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['color']['G']=_0x516599['stDrawLinesArray'][_0x239ebb]['color']['G'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['color']['B']=_0x516599['stDrawLinesArray'][_0x239ebb]['color']['B'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['color']['A']=_0x516599['stDrawLinesArray'][_0x239ebb]['color']['A'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['stPoint']=[];for(var _0x1f4fbf=0x0;_0x1f4fbf<_0x516599['stDrawLinesArray'][_0x239ebb]['vertex_num'];_0x1f4fbf++)this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['stPoint'][_0x1f4fbf]={},this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['stPoint'][_0x1f4fbf]['x']=_0x516599['stDrawLinesArray'][_0x239ebb]['stPoint'][_0x1f4fbf]['x'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['stPoint'][_0x1f4fbf]['y']=_0x516599['stDrawLinesArray'][_0x239ebb]['stPoint'][_0x1f4fbf]['y'];this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['dwFillPicID']=_0x516599['stDrawLinesArray'][_0x239ebb]['dwFillPicID'],this['privateExactLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x239ebb]['eventid']=_0x516599['stDrawLinesArray'][_0x239ebb]['dwEventID'];}}else this['maxExactPrivateLineTimeStamp']<_0x516599['absTimeStamp']&&(this['maxExactPrivateLineTimeStamp']=_0x516599['absTimeStamp']),this['privateExactLinesInfo']['push'](_0x516599);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x1655cd['linesNum']>0x0){if(this['privateNormalLinesInfo']['length']>=_0x42efab&&this['privateNormalLinesInfo']['shift'](),_0x1655cd['absTimeStamp']<=this['maxNormalPrivateLineTimeStamp']){var _0x1c7ed6=0x0;for(_0x1c7ed6=0x0;_0x1c7ed6<this['privateNormalLinesInfo']['length'];_0x1c7ed6++)if(this['privateNormalLinesInfo'][_0x1c7ed6]['absTimeStamp']==_0x1655cd['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x1c7ed6;break;}}if(_0x16dcbe){for(var _0x201924=0x0;_0x201924<_0x1655cd['linesNum'];_0x201924++)this['privateNormalLinesInfo'][_0x3b9181]['stDrawLinesArray']['push'](_0x1655cd['stDrawLinesArray'][_0x201924]),++this['privateNormalLinesInfo'][_0x3b9181]['linesNum'];}else this['maxNormalPrivateLineTimeStamp']<_0x1655cd['absTimeStamp']&&(this['maxNormalPrivateLineTimeStamp']=_0x1655cd['absTimeStamp']),this['privateNormalLinesInfo']['push'](_0x1655cd);}if(_0x2ce025['linesNum']>0x0){if(this['privateThermalLinesInfo']['length']>=_0x42efab&&this['privateThermalLinesInfo']['shift'](),0x0!=this['privateThermalLinesInfo']['length']){this['privateThermalLinesInfo'][0x0]['linesNum']=_0x2ce025['linesNum'];for(var _0x895e03=0x0;_0x895e03<_0x2ce025['linesNum'];_0x895e03++){this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]={},this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['vertex_num']=_0x2ce025['stDrawLinesArray'][_0x895e03]['vertex_num'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['lineWidth']=_0x2ce025['stDrawLinesArray'][_0x895e03]['lineWidth'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['bFill']=_0x2ce025['stDrawLinesArray'][_0x895e03]['bFill'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['bLoop']=_0x2ce025['stDrawLinesArray'][_0x895e03]['bLoop'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['dwMatchType']=_0x2ce025['stDrawLinesArray'][_0x895e03]['dwMatchType'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['dwIntelFlag']=_0x2ce025['stDrawLinesArray'][_0x895e03]['dwIntelFlag'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['dwSubIntelFlag']=_0x2ce025['stDrawLinesArray'][_0x895e03]['dwSubIntelFlag'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['color']={},this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['color']['R']=_0x2ce025['stDrawLinesArray'][_0x895e03]['color']['R'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['color']['G']=_0x2ce025['stDrawLinesArray'][_0x895e03]['color']['G'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['color']['B']=_0x2ce025['stDrawLinesArray'][_0x895e03]['color']['B'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['color']['A']=_0x2ce025['stDrawLinesArray'][_0x895e03]['color']['A'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['stPoint']=[];for(var _0x54c416=0x0;_0x54c416<_0x2ce025['stDrawLinesArray'][_0x895e03]['vertex_num'];_0x54c416++)this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['stPoint'][_0x54c416]={},this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['stPoint'][_0x54c416]['x']=_0x2ce025['stDrawLinesArray'][_0x895e03]['stPoint'][_0x54c416]['x'],this['privateThermalLinesInfo'][0x0]['stDrawLinesArray'][_0x895e03]['stPoint'][_0x54c416]['y']=_0x2ce025['stDrawLinesArray'][_0x895e03]['stPoint'][_0x54c416]['y'];}}else this['privateThermalLinesInfo']['push'](_0x2ce025);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x3b0b37['linesNum']>0x0){if(_0x3b0b37['absTimeStamp']<=this['maxExactRulePrivateLineTimeStamp']){var _0x35964b=0x0;for(_0x35964b=0x0;_0x35964b<this['privateExactRuleLinesInfo']['length'];_0x35964b++)if(this['privateExactRuleLinesInfo'][_0x35964b]['absTimeStamp']==_0x3b0b37['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x35964b;break;}}if(_0x16dcbe){this['privateExactRuleLinesInfo'][_0x3b9181]['linesNum']=_0x3b0b37['linesNum'];for(var _0x35945c=0x0;_0x35945c<_0x3b0b37['linesNum'];_0x35945c++){this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]={},this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['vertex_num']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['vertex_num'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['lineWidth']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['lineWidth'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['bFill']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['bFill'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['bLoop']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['bLoop'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['dwMatchType']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['dwMatchType'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['dwIntelFlag']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['dwIntelFlag'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['dwSubIntelFlag']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['dwSubIntelFlag'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['color']={},this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['color']['R']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['color']['R'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['color']['G']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['color']['G'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['color']['B']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['color']['B'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['color']['A']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['color']['A'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['stPoint']=[];for(var _0x4f718c=0x0;_0x4f718c<_0x3b0b37['stDrawLinesArray'][_0x35945c]['vertex_num'];_0x4f718c++)this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['stPoint'][_0x4f718c]={},this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['stPoint'][_0x4f718c]['x']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['stPoint'][_0x4f718c]['x'],this['privateExactRuleLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x35945c]['stPoint'][_0x4f718c]['y']=_0x3b0b37['stDrawLinesArray'][_0x35945c]['stPoint'][_0x4f718c]['y'];}}else this['maxExactRulePrivateLineTimeStamp']<_0x3b0b37['absTimeStamp']&&(this['maxExactRulePrivateLineTimeStamp']=_0x3b0b37['absTimeStamp']),this['privateExactRuleLinesInfo']['push'](_0x3b0b37);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x4206e1['linesNum']>0x0){if(_0x4206e1['absTimeStamp']<=this['maxTargetPrivateLineTimeStamp']){var _0x21ec3a=0x0;for(_0x21ec3a=0x0;_0x21ec3a<this['privateTargetLinesInfo']['length'];_0x21ec3a++)if(this['privateTargetLinesInfo'][_0x21ec3a]['absTimeStamp']==_0x4206e1['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x21ec3a;break;}}if(_0x16dcbe){this['privateTargetLinesInfo'][_0x3b9181]['linesNum']=_0x4206e1['linesNum'];for(var _0x1d30b1=0x0;_0x1d30b1<_0x4206e1['linesNum'];_0x1d30b1++){this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]={},this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['vertex_num']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['vertex_num'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['lineWidth']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['lineWidth'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['bFill']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['bFill'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['bLoop']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['bLoop'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['dwMatchType']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['dwMatchType'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['dwIntelFlag']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['dwIntelFlag'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['dwSubIntelFlag']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['dwSubIntelFlag'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['color']={},this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['color']['R']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['color']['R'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['color']['G']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['color']['G'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['color']['B']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['color']['B'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['color']['A']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['color']['A'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['stPoint']=[];for(var _0x22ef17=0x0;_0x22ef17<_0x4206e1['stDrawLinesArray'][_0x1d30b1]['vertex_num'];_0x22ef17++)this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['stPoint'][_0x22ef17]={},this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['stPoint'][_0x22ef17]['x']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['stPoint'][_0x22ef17]['x'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['stPoint'][_0x22ef17]['y']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['stPoint'][_0x22ef17]['y'];this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['dwFillPicID']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['dwFillPicID'],this['privateTargetLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x1d30b1]['eventid']=_0x4206e1['stDrawLinesArray'][_0x1d30b1]['dwEventID'];}}else this['maxTargetPrivateLineTimeStamp']<_0x4206e1['absTimeStamp']&&(this['maxTargetPrivateLineTimeStamp']=_0x4206e1['absTimeStamp']),this['privateTargetLinesInfo']['push'](_0x4206e1);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x9849e6['linesNum']>0x0){if(this['privateMDLinesInfo']['length']>=_0x42efab&&this['privateMDLinesInfo']['shift'](),_0x9849e6['absTimeStamp']<=this['maxMDPrivateLineTimeStamp']){var _0x242e26=0x0;for(_0x242e26=0x0;_0x242e26<this['privateMDLinesInfo']['length'];_0x242e26++)if(this['privateMDLinesInfo'][_0x242e26]['absTimeStamp']==_0x9849e6['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x242e26;break;}}if(_0x16dcbe){this['privateMDLinesInfo'][_0x3b9181]['linesNum']=_0x9849e6['linesNum'];for(var _0x5e16be=0x0;_0x5e16be<_0x9849e6['linesNum'];_0x5e16be++){this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]={},this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['vertex_num']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['vertex_num'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['lineWidth']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['lineWidth'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['bFill']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['bFill'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['bLoop']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['bLoop'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['dwMatchType']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['dwMatchType'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['dwIntelFlag']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['dwIntelFlag'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['dwSubIntelFlag']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['dwSubIntelFlag'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['color']={},this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['color']['R']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['color']['R'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['color']['G']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['color']['G'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['color']['B']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['color']['B'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['color']['A']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['color']['A'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['stPoint']=[];for(var _0x2c9b7e=0x0;_0x2c9b7e<_0x9849e6['stDrawLinesArray'][_0x5e16be]['vertex_num'];_0x2c9b7e++)this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['stPoint'][_0x2c9b7e]={},this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['stPoint'][_0x2c9b7e]['x']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['stPoint'][_0x2c9b7e]['x'],this['privateMDLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x5e16be]['stPoint'][_0x2c9b7e]['y']=_0x9849e6['stDrawLinesArray'][_0x5e16be]['stPoint'][_0x2c9b7e]['y'];}}else this['maxMDPrivateLineTimeStamp']<_0x9849e6['absTimeStamp']&&(this['maxMDPrivateLineTimeStamp']=_0x9849e6['absTimeStamp']),this['privateMDLinesInfo']['push'](_0x9849e6);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x5708fb['linesNum']>0x0){if(this['privateTemLinesInfo']['length']>=_0x42efab&&this['privateTemLinesInfo']['shift'](),_0x5708fb['absTimeStamp']<=this['maxTemPrivateLineTimeStamp']){var _0x1ff712=0x0;for(_0x1ff712=0x0;_0x1ff712<this['privateTemLinesInfo']['length'];_0x1ff712++)if(this['privateTemLinesInfo'][_0x1ff712]['absTimeStamp']==_0x5708fb['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x1ff712;break;}}if(_0x16dcbe){this['privateTemLinesInfo'][_0x3b9181]['linesNum']=_0x5708fb['linesNum'];for(var _0x4d4715=0x0;_0x4d4715<_0x5708fb['linesNum'];_0x4d4715++){this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]={},this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['vertex_num']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['vertex_num'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['lineWidth']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['lineWidth'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['bFill']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['bFill'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['bLoop']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['bLoop'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['dwMatchType']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['dwMatchType'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['dwIntelFlag']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['dwIntelFlag'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['dwSubIntelFlag']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['dwSubIntelFlag'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['color']={},this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['color']['R']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['color']['R'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['color']['G']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['color']['G'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['color']['B']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['color']['B'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['color']['A']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['color']['A'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['stPoint']=[];for(var _0x1698b8=0x0;_0x1698b8<_0x5708fb['stDrawLinesArray'][_0x4d4715]['vertex_num'];_0x1698b8++)this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['stPoint'][_0x1698b8]={},this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['stPoint'][_0x1698b8]['x']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['stPoint'][_0x1698b8]['x'],this['privateTemLinesInfo'][_0x3b9181]['stDrawLinesArray'][_0x4d4715]['stPoint'][_0x1698b8]['y']=_0x5708fb['stDrawLinesArray'][_0x4d4715]['stPoint'][_0x1698b8]['y'];}}else this['maxTemPrivateLineTimeStamp']<_0x5708fb['absTimeStamp']&&(this['maxTemPrivateLineTimeStamp']=_0x5708fb['absTimeStamp']),this['privateTemLinesInfo']['push'](_0x5708fb);}}if(_0x2a5022['nFontsNum']>0x0){var _0x7f9c91={'nFontsNum':0x0};_0x7f9c91['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x7f9c91['stDrawFontsArray']=[];var _0x490a79={'nFontsNum':0x0};_0x490a79['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x490a79['stDrawFontsArray']=[];var _0x4cc99c={'nFontsNum':0x0};_0x4cc99c['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x4cc99c['stDrawFontsArray']=[];var _0x3e0059={'nFontsNum':0x0};_0x3e0059['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x3e0059['stDrawFontsArray']=[];var _0x45c071={'nFontsNum':0x0};_0x45c071['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x45c071['stDrawFontsArray']=[];var _0x72a318={'nFontsNum':0x0};_0x72a318['absTimeStamp']=_0x2a5022['absTimeStamp'],_0x72a318['stDrawFontsArray']=[];for(var _0x41c8d4=0x0;_0x41c8d4<_0x2a5022['nFontsNum'];_0x41c8d4++)0x1==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwMatchType']?0x1==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwIntelFlag']?(_0x45c071['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x45c071['nFontsNum']):0x3==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwIntelFlag']&&(_0x72a318['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x72a318['nFontsNum']):0x1==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwIntelFlag']?(_0x7f9c91['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x7f9c91['nFontsNum']):0x4==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwIntelFlag']?(this['m_nTEMDrawFontscount']=0x0,_0x490a79['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x490a79['nFontsNum']):0x3==_0x2a5022['stDrawFontsArray'][_0x41c8d4]['dwIntelFlag']?_0x2a5022['stDrawFontsArray'][_0x41c8d4]['NeedClearNormalPos']?this['curNormalPOSFontsInfo']=null:(_0x3e0059['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x3e0059['nFontsNum']):(_0x4cc99c['stDrawFontsArray']['push'](_0x2a5022['stDrawFontsArray'][_0x41c8d4]),++_0x4cc99c['nFontsNum']);if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x72a318['nFontsNum']>0x0){if(this['privateExactPOSFontsInfo']['length']>=_0x42efab&&this['privateExactPOSFontsInfo']['shift'](),_0x72a318['absTimeStamp']<=this['maxExactPOSPrivateFontTimeStamp']){var _0xbac467=0x0;for(_0xbac467=0x0;_0xbac467<this['privateExactPOSFontsInfo']['length'];_0xbac467++)if(this['privateExactPOSFontsInfo'][_0xbac467]['absTimeStamp']==_0x72a318['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0xbac467;break;}}if(_0x16dcbe){this['privateExactPOSFontsInfo'][_0x3b9181]['nFontsNum']=_0x72a318['nFontsNum'];for(var _0x9dfee4=0x0;_0x9dfee4<_0x72a318['nFontsNum'];_0x9dfee4++)this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]={},this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['nFontSizeW']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['nFontSizeW'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['nFontSizeH']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['nFontSizeH'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['dwMatchType']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['dwMatchType'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['dwIntelFlag']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['dwIntelFlag'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['dwSubIntelFlag']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['dwSubIntelFlag'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['color']={},this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['color']['R']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['color']['R'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['color']['G']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['color']['G'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['color']['B']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['color']['B'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['color']['A']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['color']['A'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['stPoint']={},this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['stPoint']['x']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['stPoint']['x'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['stPoint']['y']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['stPoint']['y'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['fontString']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['fontString'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['BGcolor']={},this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['BGcolor']['R']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['BGcolor']['R'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['BGcolor']['G']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['BGcolor']['G'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['BGcolor']['B']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['BGcolor']['B'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['BGcolor']['A']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['BGcolor']['A'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['bBackGround']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['bBackGround'],this['privateExactPOSFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x9dfee4]['EventID']=_0x72a318['stDrawFontsArray'][_0x9dfee4]['dwEventID'];}else this['maxExactPOSPrivateFontTimeStamp']<_0x72a318['absTimeStamp']&&(this['maxExactPOSPrivateFontTimeStamp']=_0x72a318['absTimeStamp']),this['privateExactPOSFontsInfo']['push'](_0x72a318);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x45c071['nFontsNum']>0x0){if(this['privateExactFontsInfo']['length']>=_0x42efab&&this['privateExactFontsInfo']['shift'](),_0x45c071['absTimeStamp']<=this['maxExactPrivateFontTimeStamp']){var _0x340e2b=0x0;for(_0x340e2b=0x0;_0x340e2b<this['privateExactFontsInfo']['length'];_0x340e2b++)if(this['privateExactFontsInfo'][_0x340e2b]['absTimeStamp']==_0x45c071['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x340e2b;break;}}if(_0x16dcbe){for(var _0x1d6527=0x0;_0x1d6527<_0x45c071['nFontsNum'];_0x1d6527++)this['privateExactFontsInfo'][_0x3b9181]['stDrawFontsArray']['push'](_0x45c071['stDrawFontsArray'][_0x1d6527]),++this['privateExactFontsInfo'][_0x3b9181]['nFontsNum'];}else this['maxExactPrivateFontTimeStamp']<_0x45c071['absTimeStamp']&&(this['maxExactPrivateFontTimeStamp']=_0x45c071['absTimeStamp']),this['privateExactFontsInfo']['push'](_0x45c071);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x4cc99c['nFontsNum']>0x0){if(this['privateNormalFontsInfo']['length']>=_0x42efab&&this['privateNormalFontsInfo']['shift'](),_0x4cc99c['absTimeStamp']<=this['maxNormalPrivateFontTimeStamp']){var _0x3c63bc=0x0;for(_0x3c63bc=0x0;_0x3c63bc<this['privateNormalFontsInfo']['length'];_0x3c63bc++)if(this['privateNormalFontsInfo'][_0x3c63bc]['absTimeStamp']==_0x4cc99c['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x3c63bc;break;}}if(_0x16dcbe){for(var _0x46fa39=0x0;_0x46fa39<_0x4cc99c['nFontsNum'];_0x46fa39++)this['privateNormalFontsInfo'][_0x3b9181]['stDrawFontsArray']['push'](_0x4cc99c['stDrawFontsArray'][_0x46fa39]),++this['privateNormalFontsInfo'][_0x3b9181]['nFontsNum'];}else this['maxNormalPrivateFontTimeStamp']<_0x4cc99c['absTimeStamp']&&(this['maxNormalPrivateFontTimeStamp']=_0x4cc99c['absTimeStamp']),this['privateNormalFontsInfo']['push'](_0x4cc99c);}if(_0x3e0059['nFontsNum']>0x0){if(null==this['curNormalPOSFontsInfo'])this['curNormalPOSFontsInfo']=_0x3e0059;else{this['curNormalPOSFontsInfo']['nFontsNum']=_0x3e0059['nFontsNum'],this['curNormalPOSFontsInfo']['absTimeStamp']=_0x3e0059['absTimeStamp'];for(var _0x1d49b8=0x0;_0x1d49b8<_0x3e0059['nFontsNum'];_0x1d49b8++)this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]={},this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['nFontSizeW']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['nFontSizeW'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['nFontSizeH']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['nFontSizeH'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['dwMatchType']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['dwMatchType'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['dwIntelFlag']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['dwIntelFlag'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['dwSubIntelFlag']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['dwSubIntelFlag'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['color']={},this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['color']['R']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['color']['R'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['color']['G']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['color']['G'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['color']['B']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['color']['B'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['color']['A']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['color']['A'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['stPoint']={},this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['stPoint']['x']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['stPoint']['x'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['stPoint']['y']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['stPoint']['y'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['fontString']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['fontString'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['BGcolor']={},this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['BGcolor']['R']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['BGcolor']['R'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['BGcolor']['G']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['BGcolor']['G'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['BGcolor']['B']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['BGcolor']['B'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['BGcolor']['A']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['BGcolor']['A'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['bBackGround']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['bBackGround'],this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x1d49b8]['EventID']=_0x3e0059['stDrawFontsArray'][_0x1d49b8]['dwEventID'];}}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x7f9c91['nFontsNum']>0x0){if(this['privateTargetFontsInfo']['length']>=_0x42efab&&this['privateTargetFontsInfo']['shift'](),_0x7f9c91['absTimeStamp']<=this['maxTargetPrivateFontTimeStamp']){var _0x55245c=0x0;for(_0x55245c=0x0;_0x55245c<this['privateTargetFontsInfo']['length'];_0x55245c++)if(this['privateTargetFontsInfo'][_0x55245c]['absTimeStamp']==_0x7f9c91['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x55245c;break;}}if(_0x16dcbe){this['privateTargetFontsInfo'][_0x3b9181]['nFontsNum']=_0x7f9c91['nFontsNum'];for(var _0x20b36b=0x0;_0x20b36b<_0x7f9c91['nFontsNum'];_0x20b36b++)this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]={},this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['nFontSizeW']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['nFontSizeW'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['nFontSizeH']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['nFontSizeH'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['dwMatchType']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['dwMatchType'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['dwIntelFlag']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['dwIntelFlag'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['dwSubIntelFlag']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['dwSubIntelFlag'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['color']={},this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['color']['R']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['color']['R'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['color']['G']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['color']['G'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['color']['B']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['color']['B'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['color']['A']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['color']['A'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['stPoint']={},this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['stPoint']['x']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['stPoint']['x'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['stPoint']['y']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['stPoint']['y'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['fontString']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['fontString'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['BGcolor']={},this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['BGcolor']['R']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['BGcolor']['R'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['BGcolor']['G']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['BGcolor']['G'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['BGcolor']['B']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['BGcolor']['B'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['BGcolor']['A']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['BGcolor']['A'],this['privateTargetFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x20b36b]['bBackGround']=_0x7f9c91['stDrawFontsArray'][_0x20b36b]['bBackGround'];}else this['maxTargetPrivateFontTimeStamp']<_0x7f9c91['absTimeStamp']&&(this['maxTargetPrivateFontTimeStamp']=_0x7f9c91['absTimeStamp']),this['privateTargetFontsInfo']['push'](_0x7f9c91);}if(_0x16dcbe=!0x1,_0x3b9181=0x0,_0x490a79['nFontsNum']>0x0){if(this['privateTemFontsInfo']['length']>=_0x42efab&&this['privateTemFontsInfo']['shift'](),_0x490a79['absTimeStamp']<=this['maxTemPrivateFontTimeStamp']){var _0x2252be=0x0;for(_0x2252be=0x0;_0x2252be<this['privateTemFontsInfo']['length'];_0x2252be++)if(this['privateTemFontsInfo'][_0x2252be]['absTimeStamp']==_0x490a79['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x2252be;break;}}if(_0x16dcbe){this['privateTemFontsInfo'][_0x3b9181]['nFontsNum']=_0x490a79['nFontsNum'];for(var _0x26c257=0x0;_0x26c257<_0x490a79['nFontsNum'];_0x26c257++)this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]={},this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['nFontSizeW']=_0x490a79['stDrawFontsArray'][_0x26c257]['nFontSizeW'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['nFontSizeH']=_0x490a79['stDrawFontsArray'][_0x26c257]['nFontSizeH'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['dwMatchType']=_0x490a79['stDrawFontsArray'][_0x26c257]['dwMatchType'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['dwIntelFlag']=_0x490a79['stDrawFontsArray'][_0x26c257]['dwIntelFlag'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['dwSubIntelFlag']=_0x490a79['stDrawFontsArray'][_0x26c257]['dwSubIntelFlag'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['color']={},this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['color']['R']=_0x490a79['stDrawFontsArray'][_0x26c257]['color']['R'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['color']['G']=_0x490a79['stDrawFontsArray'][_0x26c257]['color']['G'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['color']['B']=_0x490a79['stDrawFontsArray'][_0x26c257]['color']['B'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['color']['A']=_0x490a79['stDrawFontsArray'][_0x26c257]['color']['A'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['stPoint']={},this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['stPoint']['x']=_0x490a79['stDrawFontsArray'][_0x26c257]['stPoint']['x'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['stPoint']['y']=_0x490a79['stDrawFontsArray'][_0x26c257]['stPoint']['y'],this['privateTemFontsInfo'][_0x3b9181]['stDrawFontsArray'][_0x26c257]['fontString']=_0x490a79['stDrawFontsArray'][_0x26c257]['fontString'];}else this['maxTemPrivateFontTimeStamp']<_0x490a79['absTimeStamp']&&(this['maxTemPrivateFontTimeStamp']=_0x490a79['absTimeStamp']),this['privateTemFontsInfo']['push'](_0x490a79);}}if(_0x16dcbe=!0x1,_0x3b9181=0x0,0x4==_0x1e4842['nPixelFormat']){if(this['privateImageInfo']['length']>=_0x42efab&&this['privateImageInfo']['shift'](),_0x1e4842['absTimeStamp']<=this['maxPrivateImageTimeStamp']){var _0x4b6b90=0x0;for(_0x4b6b90=0x0;_0x4b6b90<this['privateImageInfo']['length'];_0x4b6b90++)if(this['privateImageInfo'][_0x4b6b90]['absTimeStamp']==_0x1e4842['absTimeStamp']){_0x16dcbe=!0x0,_0x3b9181=_0x4b6b90;break;}}_0x16dcbe?(this['privateImageInfo'][_0x3b9181]['nWidth']=_0x1e4842['nWidth'],this['privateImageInfo'][_0x3b9181]['nHeight']=_0x1e4842['nHeight'],this['privateImageInfo'][_0x3b9181]['pstRect']={},this['privateImageInfo'][_0x3b9181]['pstRect']['fTop']=_0x1e4842['pstRect']['fTop'],this['privateImageInfo'][_0x3b9181]['pstRect']['fBottom']=_0x1e4842['pstRect']['fBottom'],this['privateImageInfo'][_0x3b9181]['pstRect']['fLeft']=_0x1e4842['pstRect']['fLeft'],this['privateImageInfo'][_0x3b9181]['pstRect']['fRight']=_0x1e4842['pstRect']['fRight'],this['privateImageInfo'][_0x3b9181]['nPixelFormat']=_0x1e4842['nPixelFormat'],this['privateImageInfo'][_0x3b9181]['fAlpha']=_0x1e4842['fAlpha'],this['privateImageInfo'][_0x3b9181]['picImageData']=_0x1e4842['picImageData']):(this['maxPrivateImageTimeStamp']<_0x1e4842['absTimeStamp']&&(this['maxPrivateImageTimeStamp']=_0x1e4842['absTimeStamp']),this['privateImageInfo']['push'](_0x1e4842));}else{if(0x100==_0x1e4842['nPixelFormat']&&null!=_0x1e4842['picImageData'])try{var _0x3b8215=new ImageDecoder({'data':_0x1e4842['picImageData'],'type':'image/png'});_0x3b8215['tracks']['ready']['then'](function(){return _0x3b8215['completed'];})['then'](function(){return _0x3b8215['decode']({'frameIndex':0x0});})['then'](function(_0x257807){_0x207879['privatePNGImageInfo']['length']>=0x14&&_0x207879['privatePNGImageInfo']['shift']();var _0x27a366=_0x207879['privatePNGImageInfo']['findIndex'](function(_0x20d30e){return _0x20d30e['PicID']===_0x1e4842['PicID'];});-0x1!==_0x27a366?_0x207879['privatePNGImageInfo'][_0x27a366]=_0x33147b(_0x33147b({},_0x207879['privatePNGImageInfo'][_0x27a366]),{},{'PicID':_0x1e4842['PicID'],'videoStream':_0x257807['image'],'nImageWidth':_0x257807['image']['displayWidth'],'nImageHeight':_0x257807['image']['displayHeight'],'pstRectPos':{'fTop':_0x1e4842['pstRect']['fTop'],'fBottom':_0x1e4842['pstRect']['fBottom'],'fLeft':_0x1e4842['pstRect']['fLeft'],'fRight':_0x1e4842['pstRect']['fRight']},'nPixelFormat':_0x1e4842['nPixelFormat'],'fAlpha':_0x1e4842['fAlpha']}):_0x207879['privatePNGImageInfo']['push']({'PicID':_0x1e4842['PicID'],'videoStream':_0x257807['image'],'nImageWidth':_0x257807['image']['displayWidth'],'nImageHeight':_0x257807['image']['displayHeight'],'pstRectPos':{'fTop':_0x1e4842['pstRect']['fTop'],'fBottom':_0x1e4842['pstRect']['fBottom'],'fLeft':_0x1e4842['pstRect']['fLeft'],'fRight':_0x1e4842['pstRect']['fRight']},'nPixelFormat':_0x1e4842['nPixelFormat'],'fAlpha':_0x1e4842['fAlpha']});})['catch'](function(_0x4709b5){console['error']('Image\\x20processing\\x20failed:',_0x4709b5);});}catch(_0xc9bd09){console['error']('ImageDecoder\\x20initialization\\x20failed:',_0xc9bd09);}}return 0x1;}},{'key':'CheckLinesInfo','value':function(){if(this['DrawlinesParamArray']['splice'](0x0,this['DrawlinesParamArray']['length']),this['DrawlinesParamArrayAllPointNum']=0x0,this['bDrawlinesParamArrayFill']=0x0,this['DrawMosaiclinesParamArray']['splice'](0x0,this['DrawMosaiclinesParamArray']['length']),this['DrawTargetlinesParamArray']['splice'](0x0,this['DrawTargetlinesParamArray']['length']),null!=this['curNormalLinesInfo']){for(var _0x16df6d=[],_0x443378=0x0,_0x487a39=0x0;_0x487a39<this['curNormalLinesInfo']['linesNum'];_0x487a39++)if(0x2==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwIntelFlag']&&0x1==this['m_bEnableIVSEx']||0x7==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwIntelFlag']&&0x1==this['m_bEnableFIREEx']&&(0x1==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag']&&0x1==this['m_bEnableFireDis']||0x4==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag']&&0x1==this['m_bEnableFireMaxPos'])||0x8==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwIntelFlag']&&0x1==this['m_bEnableThermal']&&0x4==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag']&&0x1==this['m_bEnableThermalTargetGas']||0x9==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwIntelFlag']&&0x1==this['m_bEnableTrackEx']&&(0x1==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag']&&0x1==this['m_bEnableTrackPeople']||0x2==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag']&&0x1==this['m_bEnableTrackVehicle']||0x0==this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwSubIntelFlag'])){_0x16df6d[_0x443378]={},_0x16df6d[_0x443378]['nPointNum']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['vertex_num'],_0x16df6d[_0x443378]['nLineWidth']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['lineWidth'],this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['bFill'],_0x16df6d[_0x443378]['bLoop']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['bLoop'],_0x16df6d[_0x443378]['pstColor']={},_0x16df6d[_0x443378]['pstColor']['fR']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['color']['R'],_0x16df6d[_0x443378]['pstColor']['fG']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['color']['G'],_0x16df6d[_0x443378]['pstColor']['fB']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['color']['B'],_0x16df6d[_0x443378]['pstColor']['fA']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['color']['A'],_0x16df6d[_0x443378]['pstPoints']=[];for(var _0x1447cc=0x0;_0x1447cc<_0x16df6d[_0x443378]['nPointNum'];_0x1447cc++)_0x16df6d[_0x443378]['pstPoints'][_0x1447cc]={},_0x16df6d[_0x443378]['pstPoints'][_0x1447cc]['fX']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['stPoint'][_0x1447cc]['x'],_0x16df6d[_0x443378]['pstPoints'][_0x1447cc]['fY']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['stPoint'][_0x1447cc]['y'];_0x16df6d[_0x443378]['dwMosaictype']=this['curNormalLinesInfo']['stDrawLinesArray'][_0x487a39]['dwMosaictype'],_0x16df6d[_0x443378]['dwMosaictype']?this['DrawMosaiclinesParamArray']['push'](_0x16df6d[_0x443378]):(this['DrawlinesParamArray']['push'](_0x16df6d[_0x443378]),this['DrawlinesParamArrayAllPointNum']+=_0x16df6d[_0x443378]['nPointNum'],_0x16df6d[_0x443378]['nPointNum']),++_0x443378;}}if(null!=this['curThermalLinesInfo']){for(var _0x2db66b=[],_0x5de18c=0x0,_0x3956fc=0x0;_0x3956fc<this['curThermalLinesInfo']['linesNum'];_0x3956fc++)if(0x8==this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['dwIntelFlag']&&0x1==this['m_bEnableThermal']&&(0x1==this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['dwSubIntelFlag']&&0x1==this['m_bEnableThermalFireMask']||0x2==this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['dwSubIntelFlag']&&0x1==this['m_bEnableThermalRuleGas'])){_0x2db66b[_0x5de18c]={},_0x2db66b[_0x5de18c]['nPointNum']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['vertex_num'],_0x2db66b[_0x5de18c]['nLineWidth']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['lineWidth'],this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['bFill'],_0x2db66b[_0x5de18c]['bLoop']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['bLoop'],_0x2db66b[_0x5de18c]['pstColor']={},_0x2db66b[_0x5de18c]['pstColor']['fR']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['color']['R'],_0x2db66b[_0x5de18c]['pstColor']['fG']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['color']['G'],_0x2db66b[_0x5de18c]['pstColor']['fB']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['color']['B'],_0x2db66b[_0x5de18c]['pstColor']['fA']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['color']['A'],_0x2db66b[_0x5de18c]['pstPoints']=[];for(var _0x3f7d97=0x0;_0x3f7d97<_0x2db66b[_0x5de18c]['nPointNum'];_0x3f7d97++)_0x2db66b[_0x5de18c]['pstPoints'][_0x3f7d97]={},_0x2db66b[_0x5de18c]['pstPoints'][_0x3f7d97]['fX']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['stPoint'][_0x3f7d97]['x'],_0x2db66b[_0x5de18c]['pstPoints'][_0x3f7d97]['fY']=this['curThermalLinesInfo']['stDrawLinesArray'][_0x3956fc]['stPoint'][_0x3f7d97]['y'];this['DrawlinesParamArray']['push'](_0x2db66b[_0x5de18c]),this['DrawlinesParamArrayAllPointNum']+=_0x2db66b[_0x5de18c]['nPointNum'],_0x2db66b[_0x5de18c]['nPointNum'],++_0x5de18c;}}if(null!=this['curTemLinesInfo']){for(var _0x1f13cc=[],_0x5537f7=0x0,_0x5610d5=0x0;_0x5610d5<this['curTemLinesInfo']['linesNum'];_0x5610d5++)if(0x1==this['m_bEnableTEMEx']&&(0x1==this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMBox']||0x2==this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMLine']||0x4==this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMPoint'])){_0x1f13cc[_0x5537f7]={},_0x1f13cc[_0x5537f7]['nPointNum']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['vertex_num'],_0x1f13cc[_0x5537f7]['nLineWidth']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['lineWidth'],this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['bFill'],_0x1f13cc[_0x5537f7]['bLoop']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['bLoop'],_0x1f13cc[_0x5537f7]['pstColor']={},_0x1f13cc[_0x5537f7]['pstColor']['fR']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['color']['R'],_0x1f13cc[_0x5537f7]['pstColor']['fG']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['color']['G'],_0x1f13cc[_0x5537f7]['pstColor']['fB']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['color']['B'],_0x1f13cc[_0x5537f7]['pstColor']['fA']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['color']['A'],_0x1f13cc[_0x5537f7]['pstPoints']=[];for(var _0x2fe252=0x0;_0x2fe252<_0x1f13cc[_0x5537f7]['nPointNum'];_0x2fe252++)_0x1f13cc[_0x5537f7]['pstPoints'][_0x2fe252]={},_0x1f13cc[_0x5537f7]['pstPoints'][_0x2fe252]['fX']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['stPoint'][_0x2fe252]['x'],_0x1f13cc[_0x5537f7]['pstPoints'][_0x2fe252]['fY']=this['curTemLinesInfo']['stDrawLinesArray'][_0x5610d5]['stPoint'][_0x2fe252]['y'];this['DrawlinesParamArray']['push'](_0x1f13cc[_0x5537f7]),this['DrawlinesParamArrayAllPointNum']+=_0x1f13cc[_0x5537f7]['nPointNum'],_0x1f13cc[_0x5537f7]['nPointNum'],++_0x5537f7;}}if(null!=this['curTargetLinesInfo']){for(var _0x9a14c2=[],_0x2e25e6=0x0,_0x9d6db1=0x0;_0x9d6db1<this['curTargetLinesInfo']['linesNum'];_0x9d6db1++)if(0x1==this['m_bEnableIVSEx']){_0x9a14c2[_0x2e25e6]={},_0x9a14c2[_0x2e25e6]['nPointNum']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['vertex_num'],_0x9a14c2[_0x2e25e6]['nLineWidth']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['lineWidth'],this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['bFill'],_0x9a14c2[_0x2e25e6]['bLoop']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['bLoop'],_0x9a14c2[_0x2e25e6]['pstColor']={},_0x9a14c2[_0x2e25e6]['pstColor']['fR']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['color']['R'],_0x9a14c2[_0x2e25e6]['pstColor']['fG']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['color']['G'],_0x9a14c2[_0x2e25e6]['pstColor']['fB']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['color']['B'],_0x9a14c2[_0x2e25e6]['pstColor']['fA']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['color']['A'],_0x9a14c2[_0x2e25e6]['pstPoints']=[];for(var _0x161810=0x0;_0x161810<_0x9a14c2[_0x2e25e6]['nPointNum'];_0x161810++)_0x9a14c2[_0x2e25e6]['pstPoints'][_0x161810]={},_0x9a14c2[_0x2e25e6]['pstPoints'][_0x161810]['fX']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['stPoint'][_0x161810]['x'],_0x9a14c2[_0x2e25e6]['pstPoints'][_0x161810]['fY']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['stPoint'][_0x161810]['y'];_0x9a14c2[_0x2e25e6]['dwFillPicID']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['dwFillPicID'],_0x9a14c2[_0x2e25e6]['eventid']=this['curTargetLinesInfo']['stDrawLinesArray'][_0x9d6db1]['eventid'],this['DrawTargetlinesParamArray']['push'](_0x9a14c2[_0x2e25e6]),++_0x2e25e6;}}if(null!=this['curMDLinesInfo']){for(var _0x3ed6ca=[],_0x3ea18e=0x0,_0x60e5b1=0x0;_0x60e5b1<this['curMDLinesInfo']['linesNum'];_0x60e5b1++)if(0x1==this['m_bEnableMDEx']){_0x3ed6ca[_0x3ea18e]={},_0x3ed6ca[_0x3ea18e]['nPointNum']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['vertex_num'],_0x3ed6ca[_0x3ea18e]['nLineWidth']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['lineWidth'],this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['bFill'],_0x3ed6ca[_0x3ea18e]['bLoop']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['bLoop'],_0x3ed6ca[_0x3ea18e]['pstColor']={},_0x3ed6ca[_0x3ea18e]['pstColor']['fR']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['color']['R'],_0x3ed6ca[_0x3ea18e]['pstColor']['fG']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['color']['G'],_0x3ed6ca[_0x3ea18e]['pstColor']['fB']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['color']['B'],_0x3ed6ca[_0x3ea18e]['pstColor']['fA']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['color']['A'],_0x3ed6ca[_0x3ea18e]['pstPoints']=[];for(var _0x5cdce8=0x0;_0x5cdce8<_0x3ed6ca[_0x3ea18e]['nPointNum'];_0x5cdce8++)_0x3ed6ca[_0x3ea18e]['pstPoints'][_0x5cdce8]={},_0x3ed6ca[_0x3ea18e]['pstPoints'][_0x5cdce8]['fX']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['stPoint'][_0x5cdce8]['x'],_0x3ed6ca[_0x3ea18e]['pstPoints'][_0x5cdce8]['fY']=this['curMDLinesInfo']['stDrawLinesArray'][_0x60e5b1]['stPoint'][_0x5cdce8]['y'];this['DrawlinesParamArray']['push'](_0x3ed6ca[_0x3ea18e]),this['DrawlinesParamArrayAllPointNum']+=_0x3ed6ca[_0x3ea18e]['nPointNum'],_0x3ed6ca[_0x3ea18e]['nPointNum'],++_0x3ea18e;}}if(null!=this['curExactLinesInfo']){for(var _0xe847d6=[],_0xc54fbd=0x0,_0x55962b=0x0;_0x55962b<this['curExactLinesInfo']['linesNum'];_0x55962b++)if(0x1==this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwIntelFlag']&&0x1==this['m_bEnableIVSEx']||0x9==this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwIntelFlag']&&0x1==this['m_bEnableTrackEx']&&(0x1==this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwSubIntelFlag']&&0x1==this['m_bEnableTrackPeople']||0x2==this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwSubIntelFlag']&&0x1==this['m_bEnableTrackVehicle']||0x0==this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwSubIntelFlag'])){_0xe847d6[_0xc54fbd]={},_0xe847d6[_0xc54fbd]['nPointNum']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['vertex_num'],_0xe847d6[_0xc54fbd]['nLineWidth']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['lineWidth'],this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['bFill'],_0xe847d6[_0xc54fbd]['bLoop']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['bLoop'],_0xe847d6[_0xc54fbd]['pstColor']={},_0xe847d6[_0xc54fbd]['pstColor']['fR']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['color']['R'],_0xe847d6[_0xc54fbd]['pstColor']['fG']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['color']['G'],_0xe847d6[_0xc54fbd]['pstColor']['fB']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['color']['B'],_0xe847d6[_0xc54fbd]['pstColor']['fA']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['color']['A'],_0xe847d6[_0xc54fbd]['pstPoints']=[];for(var _0x32ba2d=0x0;_0x32ba2d<_0xe847d6[_0xc54fbd]['nPointNum'];_0x32ba2d++)_0xe847d6[_0xc54fbd]['pstPoints'][_0x32ba2d]={},_0xe847d6[_0xc54fbd]['pstPoints'][_0x32ba2d]['fX']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['stPoint'][_0x32ba2d]['x'],_0xe847d6[_0xc54fbd]['pstPoints'][_0x32ba2d]['fY']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['stPoint'][_0x32ba2d]['y'];_0xe847d6[_0xc54fbd]['dwFillPicID']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwFillPicID'],_0xe847d6[_0xc54fbd]['eventid']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['eventid'],_0xe847d6[_0xc54fbd]['dwMosaictype']=this['curExactLinesInfo']['stDrawLinesArray'][_0x55962b]['dwMosaictype'],_0xe847d6[_0xc54fbd]['dwMosaictype']?this['DrawMosaiclinesParamArray']['push'](_0xe847d6[_0xc54fbd]):this['DrawTargetlinesParamArray']['push'](_0xe847d6[_0xc54fbd]),++_0xc54fbd;}}if(null!=this['curExactRuleLinesInfo']){for(var _0x54cfdd=[],_0x392aa0=0x0,_0x1e641e=0x0;_0x1e641e<this['curExactRuleLinesInfo']['linesNum'];_0x1e641e++)if(0x1==this['m_bEnableIVSEx']){_0x54cfdd[_0x392aa0]={},_0x54cfdd[_0x392aa0]['nPointNum']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['vertex_num'],_0x54cfdd[_0x392aa0]['nLineWidth']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['lineWidth'],this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['bFill'],_0x54cfdd[_0x392aa0]['bLoop']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['bLoop'],_0x54cfdd[_0x392aa0]['pstColor']={},_0x54cfdd[_0x392aa0]['pstColor']['fR']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['color']['R'],_0x54cfdd[_0x392aa0]['pstColor']['fG']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['color']['G'],_0x54cfdd[_0x392aa0]['pstColor']['fB']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['color']['B'],_0x54cfdd[_0x392aa0]['pstColor']['fA']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['color']['A'],_0x54cfdd[_0x392aa0]['pstPoints']=[];for(var _0x41f16c=0x0;_0x41f16c<_0x54cfdd[_0x392aa0]['nPointNum'];_0x41f16c++)_0x54cfdd[_0x392aa0]['pstPoints'][_0x41f16c]={},_0x54cfdd[_0x392aa0]['pstPoints'][_0x41f16c]['fX']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['stPoint'][_0x41f16c]['x'],_0x54cfdd[_0x392aa0]['pstPoints'][_0x41f16c]['fY']=this['curExactRuleLinesInfo']['stDrawLinesArray'][_0x1e641e]['stPoint'][_0x41f16c]['y'];this['DrawlinesParamArray']['push'](_0x54cfdd[_0x392aa0]),this['DrawlinesParamArrayAllPointNum']+=_0x54cfdd[_0x392aa0]['nPointNum'],_0x54cfdd[_0x392aa0]['nPointNum'],++_0x392aa0;}}}},{'key':'CheckFontsInfo','value':function(){if(this['DrawFontParamArray']['splice'](0x0,this['DrawFontParamArray']['length']),this['DrawPOSFontsParamArray']['splice'](0x0,this['DrawPOSFontsParamArray']['length']),null!=this['curNormalFontsInfo']){for(var _0x48d964=[],_0x1a42f3=0x0,_0x2f670d=0x0;_0x2f670d<this['curNormalFontsInfo']['nFontsNum'];_0x2f670d++)0x7==this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['dwIntelFlag']&&0x1==this['m_bEnableFIREEx']&&(0x1==this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['dwSubIntelFlag']&&0x1==this['m_bEnableFireDis']||0x8==this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['dwSubIntelFlag']&&0x1==this['m_bEnableFireDistance'])&&(_0x48d964[_0x1a42f3]={},_0x48d964[_0x1a42f3]['pString']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['fontString'],_0x48d964[_0x1a42f3]['nFontWidth']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['nFontSizeW'],_0x48d964[_0x1a42f3]['nFontHeight']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['nFontSizeH'],_0x48d964[_0x1a42f3]['pstStartPos']={},_0x48d964[_0x1a42f3]['pstStartPos']['fX']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['stPoint']['x'],_0x48d964[_0x1a42f3]['pstStartPos']['fY']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['stPoint']['y'],_0x48d964[_0x1a42f3]['pstFontColor']={},_0x48d964[_0x1a42f3]['pstFontColor']['fR']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['color']['R'],_0x48d964[_0x1a42f3]['pstFontColor']['fG']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['color']['G'],_0x48d964[_0x1a42f3]['pstFontColor']['fB']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['color']['B'],_0x48d964[_0x1a42f3]['pstFontColor']['fA']=this['curNormalFontsInfo']['stDrawFontsArray'][_0x2f670d]['color']['A'],_0x48d964[_0x1a42f3]['bBackGround']=!0x1,_0x48d964[_0x1a42f3]['pstBGColor']=null,_0x48d964[_0x1a42f3]['fRotateAngle']=0x0,_0x48d964[_0x1a42f3]['pFontFamily']='sans-serif',this['DrawFontParamArray']['push'](_0x48d964[_0x1a42f3]),++_0x1a42f3);}if(null!=this['curNormalPOSFontsInfo']){for(var _0x392e45=[],_0x217591=0x0,_0x4c3438=0x0;_0x4c3438<this['curNormalPOSFontsInfo']['nFontsNum'];_0x4c3438++)0x1==this['m_bDisPos']&&(_0x392e45[_0x217591]={},_0x392e45[_0x217591]['pString']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['fontString'],_0x392e45[_0x217591]['nFontWidth']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['nFontSizeW'],_0x392e45[_0x217591]['nFontHeight']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['nFontSizeH'],_0x392e45[_0x217591]['pstStartPos']={},_0x392e45[_0x217591]['pstStartPos']['fX']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['stPoint']['x'],_0x392e45[_0x217591]['pstStartPos']['fY']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['stPoint']['y'],_0x392e45[_0x217591]['pstFontColor']={},_0x392e45[_0x217591]['pstFontColor']['fR']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['color']['R'],_0x392e45[_0x217591]['pstFontColor']['fG']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['color']['G'],_0x392e45[_0x217591]['pstFontColor']['fB']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['color']['B'],_0x392e45[_0x217591]['pstFontColor']['fA']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['color']['A'],_0x392e45[_0x217591]['bBackGround']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['bBackGround'],_0x392e45[_0x217591]['pstBGColor']={},_0x392e45[_0x217591]['pstBGColor']['fR']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['BGcolor']['R'],_0x392e45[_0x217591]['pstBGColor']['fG']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['BGcolor']['G'],_0x392e45[_0x217591]['pstBGColor']['fB']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['BGcolor']['B'],_0x392e45[_0x217591]['pstBGColor']['fA']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['BGcolor']['A'],_0x392e45[_0x217591]['fRotateAngle']=0x0,_0x392e45[_0x217591]['pFontFamily']='sans-serif',_0x392e45[_0x217591]['EventID']=this['curNormalPOSFontsInfo']['stDrawFontsArray'][_0x4c3438]['EventID'],this['DrawPOSFontsParamArray']['push'](_0x392e45[_0x217591]),++_0x217591);}if(null!=this['curTemFontsInfo']){for(var _0x7dbd15=[],_0x1939ea=0x0,_0x83ab5f=0x0;_0x83ab5f<this['curTemFontsInfo']['nFontsNum'];_0x83ab5f++)0x1==this['m_bEnableTEMEx']&&(0x1==this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMBox']||0x2==this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMLine']||0x4==this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['dwSubIntelFlag']&&0x1==this['m_bEnableTEMPoint'])&&(_0x7dbd15[_0x1939ea]={},_0x7dbd15[_0x1939ea]['pString']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['fontString'],_0x7dbd15[_0x1939ea]['nFontWidth']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['nFontSizeW'],_0x7dbd15[_0x1939ea]['nFontHeight']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['nFontSizeH'],_0x7dbd15[_0x1939ea]['pstStartPos']={},_0x7dbd15[_0x1939ea]['pstStartPos']['fX']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['stPoint']['x'],_0x7dbd15[_0x1939ea]['pstStartPos']['fY']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['stPoint']['y'],_0x7dbd15[_0x1939ea]['pstFontColor']={},_0x7dbd15[_0x1939ea]['pstFontColor']['fR']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['color']['R'],_0x7dbd15[_0x1939ea]['pstFontColor']['fG']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['color']['G'],_0x7dbd15[_0x1939ea]['pstFontColor']['fB']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['color']['B'],_0x7dbd15[_0x1939ea]['pstFontColor']['fA']=this['curTemFontsInfo']['stDrawFontsArray'][_0x83ab5f]['color']['A'],_0x7dbd15[_0x1939ea]['bBackGround']=!0x1,_0x7dbd15[_0x1939ea]['pstBGColor']=null,_0x7dbd15[_0x1939ea]['fRotateAngle']=0x0,_0x7dbd15[_0x1939ea]['pFontFamily']='sans-serif',this['DrawFontParamArray']['push'](_0x7dbd15[_0x1939ea]),++_0x1939ea);}if(null!=this['curTargetFontsInfo']){for(var _0x45c688=[],_0x4e4891=0x0,_0x4cf1ba=0x0;_0x4cf1ba<this['curTargetFontsInfo']['nFontsNum'];_0x4cf1ba++)0x1==this['m_bEnableIVSEx']&&(_0x45c688[_0x4e4891]={},_0x45c688[_0x4e4891]['pString']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['fontString'],_0x45c688[_0x4e4891]['nFontWidth']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['nFontSizeW'],_0x45c688[_0x4e4891]['nFontHeight']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['nFontSizeH'],_0x45c688[_0x4e4891]['pstStartPos']={},_0x45c688[_0x4e4891]['pstStartPos']['fX']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['stPoint']['x'],_0x45c688[_0x4e4891]['pstStartPos']['fY']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['stPoint']['y'],_0x45c688[_0x4e4891]['pstFontColor']={},_0x45c688[_0x4e4891]['pstFontColor']['fR']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['color']['R'],_0x45c688[_0x4e4891]['pstFontColor']['fG']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['color']['G'],_0x45c688[_0x4e4891]['pstFontColor']['fB']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['color']['B'],_0x45c688[_0x4e4891]['pstFontColor']['fA']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['color']['A'],_0x45c688[_0x4e4891]['bBackGround']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['bBackGround'],_0x45c688[_0x4e4891]['pstBGColor']={},_0x45c688[_0x4e4891]['pstBGColor']['fR']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['BGcolor']['R'],_0x45c688[_0x4e4891]['pstBGColor']['fG']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['BGcolor']['G'],_0x45c688[_0x4e4891]['pstBGColor']['fB']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['BGcolor']['B'],_0x45c688[_0x4e4891]['pstBGColor']['fA']=this['curTargetFontsInfo']['stDrawFontsArray'][_0x4cf1ba]['BGcolor']['A'],_0x45c688[_0x4e4891]['fRotateAngle']=0x0,_0x45c688[_0x4e4891]['pFontFamily']='sans-serif',this['DrawFontParamArray']['push'](_0x45c688[_0x4e4891]),++_0x4e4891);}if(null!=this['curExactFontsInfo']){for(var _0x29b1af=[],_0xfe4759=0x0,_0x3892dd=0x0;_0x3892dd<this['curExactFontsInfo']['nFontsNum'];_0x3892dd++)0x1==this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['dwIntelFlag']&&0x1==this['m_bEnableIVSEx']&&(_0x29b1af[_0xfe4759]={},_0x29b1af[_0xfe4759]['pString']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['fontString'],_0x29b1af[_0xfe4759]['nFontWidth']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['nFontSizeW'],_0x29b1af[_0xfe4759]['nFontHeight']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['nFontSizeH'],_0x29b1af[_0xfe4759]['pstStartPos']={},_0x29b1af[_0xfe4759]['pstStartPos']['fX']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['stPoint']['x'],_0x29b1af[_0xfe4759]['pstStartPos']['fY']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['stPoint']['y'],_0x29b1af[_0xfe4759]['pstFontColor']={},_0x29b1af[_0xfe4759]['pstFontColor']['fR']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['color']['R'],_0x29b1af[_0xfe4759]['pstFontColor']['fG']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['color']['G'],_0x29b1af[_0xfe4759]['pstFontColor']['fB']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['color']['B'],_0x29b1af[_0xfe4759]['pstFontColor']['fA']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['color']['A'],_0x29b1af[_0xfe4759]['bBackGround']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['bBackGround'],_0x29b1af[_0xfe4759]['pstBGColor']={},_0x29b1af[_0xfe4759]['pstBGColor']['fR']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['BGcolor']['R'],_0x29b1af[_0xfe4759]['pstBGColor']['fG']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['BGcolor']['G'],_0x29b1af[_0xfe4759]['pstBGColor']['fB']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['BGcolor']['B'],_0x29b1af[_0xfe4759]['pstBGColor']['fA']=this['curExactFontsInfo']['stDrawFontsArray'][_0x3892dd]['BGcolor']['A'],_0x29b1af[_0xfe4759]['fRotateAngle']=0x0,_0x29b1af[_0xfe4759]['pFontFamily']='sans-serif',this['DrawFontParamArray']['push'](_0x29b1af[_0xfe4759]),++_0xfe4759);}if(null!=this['curExactPOSFontsInfo']){for(var _0x1d7be6=[],_0x2c5247=0x0,_0xd8656e=0x0;_0xd8656e<this['curExactPOSFontsInfo']['nFontsNum'];_0xd8656e++)0x3==this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['dwIntelFlag']&&0x1==this['m_bDisPos']&&(_0x1d7be6[_0x2c5247]={},_0x1d7be6[_0x2c5247]['pString']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['fontString'],_0x1d7be6[_0x2c5247]['nFontWidth']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['nFontSizeW'],_0x1d7be6[_0x2c5247]['nFontHeight']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['nFontSizeH'],_0x1d7be6[_0x2c5247]['pstStartPos']={},_0x1d7be6[_0x2c5247]['pstStartPos']['fX']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['stPoint']['x'],_0x1d7be6[_0x2c5247]['pstStartPos']['fY']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['stPoint']['y'],_0x1d7be6[_0x2c5247]['pstFontColor']={},_0x1d7be6[_0x2c5247]['pstFontColor']['fR']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['color']['R'],_0x1d7be6[_0x2c5247]['pstFontColor']['fG']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['color']['G'],_0x1d7be6[_0x2c5247]['pstFontColor']['fB']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['color']['B'],_0x1d7be6[_0x2c5247]['pstFontColor']['fA']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['color']['A'],_0x1d7be6[_0x2c5247]['bBackGround']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['bBackGround'],_0x1d7be6[_0x2c5247]['pstBGColor']={},_0x1d7be6[_0x2c5247]['pstBGColor']['fR']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['BGcolor']['R'],_0x1d7be6[_0x2c5247]['pstBGColor']['fG']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['BGcolor']['G'],_0x1d7be6[_0x2c5247]['pstBGColor']['fB']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['BGcolor']['B'],_0x1d7be6[_0x2c5247]['pstBGColor']['fA']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['BGcolor']['A'],_0x1d7be6[_0x2c5247]['fRotateAngle']=0x0,_0x1d7be6[_0x2c5247]['pFontFamily']='sans-serif',_0x1d7be6[_0x2c5247]['EventID']=this['curExactPOSFontsInfo']['stDrawFontsArray'][_0xd8656e]['EventID'],this['DrawPOSFontsParamArray']['push'](_0x1d7be6[_0x2c5247]),++_0x2c5247);}}},{'key':'WebGLDisplaySubCallBack','value':function(_0x223002){null!=_0x223002['handle']&&0x0!=_0x223002['nUser']['pstWaterFontParamArray'][_0x223002['nSubPort']]&&null!=_0x223002['nUser']['pstWaterFontParam']&&_0x223002['handle']['SR_DrawFontEx'](_0x223002['nUser']['pstWaterFontParamArray'][_0x223002['nSubPort']],_0x223002['nUser']['pstWaterFontParamArray'][_0x223002['nSubPort']]['length'],0x1,_0x223002['nUser']['textCanvas']);}},{'key':'WebGLDisplayCallBack','value':function(_0x1189af){0x0!=_0x1189af['DrawlinesParamArray']['length']&&_0x1189af['oVideoHandle']['SR_DrawLinesEx'](_0x1189af['DrawlinesParamArray'],_0x1189af['DrawlinesParamArray']['length'],_0x1189af['DrawlinesParamArrayAllPointNum'],_0x1189af['bDrawlinesParamArrayFill']);for(var _0x357e9e=0x0;_0x357e9e<_0x1189af['DrawMosaiclinesParamArray']['length'];_0x357e9e++){var _0x533549=_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['dwMosaictype'],_0x387117=0x0,_0x9bc2f9={};_0x9bc2f9['fR']=_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstColor']['fR'],_0x9bc2f9['fG']=_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstColor']['fG'],_0x9bc2f9['fB']=_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstColor']['fB'],_0x9bc2f9['fA']=_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstColor']['fA'],0x0!=_0x1189af['MosaicType']&&(_0x533549=_0x1189af['MosaicType'],_0x387117=_0x1189af['MosaicSize'],_0x9bc2f9['fR']=_0x1189af['MosaicColorR'],_0x9bc2f9['fG']=_0x1189af['MosaicColorG'],_0x9bc2f9['fB']=_0x1189af['MosaicColorB'],_0x9bc2f9['fA']=_0x1189af['MosaicColorA']),_0x387117=0x0==_0x387117?0x32:_0x387117,0x5==(_0x533549=0x0==_0x533549?0x1:_0x533549)?_0x1189af['oVideoHandle']['SR_DrawLines'](_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['nPointNum'],0x1,_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstColor'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['nLineWidth'],0x0):0x3==_0x533549?_0x1189af['oVideoHandle']['SR_DrawLines'](_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['nPointNum'],0x1,_0x9bc2f9,_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['nLineWidth'],0x1):_0x1189af['oVideoHandle']['SR_DrawMosaic'](_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'][0x0]['fX'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'][0x2]['fX'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'][0x0]['fY'],_0x1189af['DrawMosaiclinesParamArray'][_0x357e9e]['pstPoints'][0x2]['fY'],_0x387117);}for(var _0x2a4bc2=0x0;_0x2a4bc2<_0x1189af['DrawTargetlinesParamArray']['length'];_0x2a4bc2++)if(_0x1189af['privatePNGImageInfo']['length']>0x0&&-0x1!=_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['dwFillPicID']){for(var _0x1cce09=-0x1,_0x24ebcc=0x0,_0x50c06b=0x0;_0x50c06b<_0x1189af['privatePNGImageInfo']['length'];_0x50c06b++)if(_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['dwFillPicID']==_0x1189af['privatePNGImageInfo'][_0x50c06b]['PicID']){if(_0x1cce09=_0x50c06b,_0x1189af['DrawTargetEventIDList']['length']>0x0){for(var _0x14f80d=0x0;_0x14f80d<_0x1189af['DrawTargetEventIDList']['length'];_0x14f80d++)if(_0x1189af['DrawTargetEventIDList'][_0x14f80d]['nID']==_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['eventid']){_0x24ebcc=0x1;break;}}else _0x24ebcc=0x1;break;}-0x1!=_0x1cce09&&0x1==_0x24ebcc&&(_0x1189af['privatePNGImageInfo'][_0x1cce09]['pstRectPos']['fTop']=_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstPoints'][0x0]['fY'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['pstRectPos']['fBottom']=_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstPoints'][0x2]['fY'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['pstRectPos']['fLeft']=_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstPoints'][0x0]['fX'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['pstRectPos']['fRight']=_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstPoints'][0x2]['fX'],_0x1189af['oVideoHandle']['SR_DrawImage'](_0x1189af['privatePNGImageInfo'][_0x1cce09]['videoStream'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['nImageWidth'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['nImageHeight'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['pstRectPos'],_0x137b8e['SRPIXELFORMAT']['SR_PF_SURFACE'],_0x1189af['privatePNGImageInfo'][_0x1cce09]['fAlpha']));}else _0x1189af['oVideoHandle']['SR_DrawLines'](_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstPoints'],_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['nPointNum'],_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['bLoop'],_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['pstColor'],_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['nLineWidth'],_0x1189af['DrawTargetlinesParamArray'][_0x2a4bc2]['bFill']);0x0!=_0x1189af['DrawFontParamArray']['length']&&_0x1189af['oVideoHandle']['SR_DrawFontEx'](_0x1189af['DrawFontParamArray'],_0x1189af['DrawFontParamArray']['length'],0x0,_0x1189af['textCanvas']);for(var _0x216436=_0x1189af['DrawPOSFontsParamArray']['length']-0x1;_0x216436>=0x0;_0x216436--){var _0x405bee=0x0;if(-0x1!=_0x1189af['DrawPOSFontsParamArray'][_0x216436]['EventID']&&_0x1189af['DrawTargetEventIDList']['length']>0x0){for(var _0x150590=0x0;_0x150590<_0x1189af['DrawTargetEventIDList']['length'];_0x150590++)if(_0x1189af['DrawTargetEventIDList'][_0x150590]['nID']==_0x1189af['DrawPOSFontsParamArray'][_0x216436]['EventID']){_0x405bee=0x1;break;}}else _0x405bee=0x1;0x1!=_0x405bee&&_0x1189af['DrawPOSFontsParamArray']['splice'](_0x216436,0x1);}if(0x0!=_0x1189af['DrawPOSFontsParamArray']['length']&&_0x1189af['oVideoHandle']['SR_DrawFontEx'](_0x1189af['DrawPOSFontsParamArray'],_0x1189af['DrawPOSFontsParamArray']['length'],0x0,_0x1189af['textCanvas']),null!=_0x1189af['curImagesInfo']&&0x0!=_0x1189af['curImagesInfo']['nWidth']&&0x0!=_0x1189af['curImagesInfo']['nHeight']&&0x1==_0x1189af['m_bEnablePICEx']){var _0x58a660=null;null!=_0x1189af['curImagesInfo']&&null!=_0x1189af['curImagesInfo']&&null!=_0x1189af['curImagesInfo']['picImageData']&&null!=_0x1189af['curImagesInfo']['picImageData']&&(_0x58a660=new Uint16Array(_0x1189af['curImagesInfo']['picImageData']['buffer'])),null!=_0x1189af['curImagesInfo']&&_0x1189af['curImagesInfo']['nPixelFormat']>0x0&&_0x1189af['oVideoHandle']['SR_DrawImage'](_0x58a660,_0x1189af['curImagesInfo']['nWidth'],_0x1189af['curImagesInfo']['nHeight'],_0x1189af['curImagesInfo']['pstRect'],_0x1189af['curImagesInfo']['nPixelFormat'],_0x1189af['curImagesInfo']['fAlpha']);}if(0x0!==_0x1189af['pstWaterFontParamArray'][0x0]['length']&&null!=_0x1189af['pstWaterFontParam']&&_0x1189af['oVideoHandle']['SR_DrawFontEx'](_0x1189af['pstWaterFontParamArray'][0x0],_0x1189af['pstWaterFontParamArray'][0x0]['length'],0x1,_0x1189af['textCanvas']),0x0!==_0x1189af['pWaterImageParam']['length']&&_0x1189af['finishDecodeImage']){_0x1189af['baseWaterMarkImageTime']<=0x0&&(_0x1189af['baseWaterMarkImageTime']=_0x1189af['curTimestamp']);var _0x9080f0=_0x1189af['curTimestamp']-_0x1189af['baseWaterMarkImageTime'];_0x9080f0<0x0&&(_0x1189af['baseWaterMarkImageTime']=_0x1189af['curTimestamp'],_0x9080f0=0x0,_0x1189af['waterMarkImageIndex']=0x0),_0x9080f0>=_0x1189af['pWaterImageParam'][_0x1189af['waterMarkImageIndex']]['timeStamp']-_0x1189af['pWaterImageParam'][0x0]['timeStamp']&&_0x1189af['waterMarkImageIndex']++,_0x1189af['waterMarkImageIndex']>=_0x1189af['waterMarkImageMax']&&(_0x1189af['waterMarkImageIndex']=0x0,_0x1189af['baseWaterMarkImageTime']=_0x1189af['curTimestamp']);var _0xb23a29=_0x1189af['waterMarkImageIndex'];_0x1189af['oVideoHandle']['SR_DrawImage'](_0x1189af['pWaterImageParam'][_0xb23a29]['videoStream'],_0x1189af['pWaterImageParam'][_0xb23a29]['nImageWidth'],_0x1189af['pWaterImageParam'][_0xb23a29]['nImageHeight'],_0x1189af['pWaterImageParam'][_0xb23a29]['pstRectPos'],_0x137b8e['SRPIXELFORMAT']['SR_PF_SURFACE'],_0x1189af['pWaterImageParam'][_0xb23a29]['fAlpha']);}}},{'key':'SetPanoramaDisplayEffect','value':function(_0x152dc8){if('2d'===this['renderEngine']||'2D'===this['renderEngine'])return 0x0;if(null!=this['oVideoHandle']){if(_0x152dc8!=this['panoramaDisplayEffect']){this['panoramaDisplayEffect']=_0x152dc8,this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),0x0==this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x1655ca()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0);var _0x29e4e5=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'];if((_0x29e4e5=0x1==this['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']:0x3==this['panoramaDisplayEffect']?_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']:_0x137b8e['SRDISPLAYEFFECT']['SR_DE_NULL'])!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_SPHERE']&&_0x29e4e5!=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_PANORAMA_PLANET']||0x0!=this['VRViewLimitRate']&&(_0x29e4e5=_0x137b8e['SRDISPLAYEFFECT']['SR_DE_ELLIPSOID_VIEWLIMITED'],this['oVideoHandle']['SR_SetViewLimitateRate'](_0x137b8e['SRVIEWLIMITATERATE']['SR_VLR_BLACK_1216_2832'])),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](_0x29e4e5),-0x1==this['mainVaildSubPort'])return console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0;}}else this['panoramaDisplayEffect']=_0x152dc8;return 0x1;}},{'key':'SetPanoramaSphereViewParam','value':function(_0x547a2c,_0x2d2713){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==_0x2d2713||null==_0x2d2713||_0x547a2c<0x1||_0x547a2c>0x3?0x0:(this['viewParamType']=_0x547a2c,this['viewParamValue']=_0x2d2713,null!=this['oVideoHandle']?(0x1!=this['panoramaDisplayEffect']&&this['panoramaDisplayEffect'],this['oVideoHandle']['SR_SetViewParam'](_0x547a2c,_0x2d2713)!=_0x137b8e['ERRCODE']['SR_OK']?0x0:0x1):0x0);}},{'key':'GetPanoramaSphereViewParam','value':function(_0x4e1557,_0x3087de){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==_0x3087de||null==_0x3087de||_0x4e1557<0x1||_0x4e1557>0x3?0x0:null!=this['oVideoHandle']?(0x1!=this['panoramaDisplayEffect']&&this['panoramaDisplayEffect'],_0x3087de['fValue']=-0x1,this['oVideoHandle']['SR_GetViewParam'](_0x4e1557,_0x3087de)!=_0x137b8e['ERRCODE']['SR_OK']?0x0:0x1):0x0;}}]),_0x2cf248;}()),_0x13d7d5=(function(){function _0x83b53(_0x3ad26a,_0x5c53b5){_0x311c09(this,_0x83b53),this['EncoderObj']=null,this['FirstFrame']=!0x0,this['frameRate']=0x19,this['EncoderCurStatus']=0x2,this['frameCounter']=0x0,this['frameNum']=0x0,this['stopEncodflag']=!0x1,this['encodeFrameGlobalTime']=[],this['oPlayCtrlHandle']=null,null!=_0x3ad26a&&(this['oPlayCtrlHandle']=_0x3ad26a),this['player']=null,null!=_0x5c53b5&&(this['player']=_0x5c53b5),this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['userAgent']=0x0,this['bWriteData']=!0x1,this['aTotalBuffer']=[],this['iFrameNum']=0x0;}return _0x50c85d(_0x83b53,[{'key':'initEncoder','value':function(_0x112f0b,_0x56b592,_0x531013){if(this['codecString']=_0x112f0b,this['encodeWidth']=_0x56b592['encodeWidth'],this['encodeHeight']=_0x56b592['encodeHeight'],this['bitrate']=_0x56b592['bitrate'],this['frameRate']=_0x56b592['frameRate'],0x0==_0x56b592['bitrateMode']?this['bitrateMode']='variable':this['bitrateMode']='constant',0x0==_0x56b592['latencyMode']?this['latencyMode']='realtime':this['latencyMode']='quality',this['rawDataCB']=_0x531013,this['FirstFrame']=!0x0,this['EncoderCurStatus']=0x2,this['frameCounter']=0x0,this['frameNum']=0x0,this['stopEncodflag']=!0x1,null==this['EncoderObj']){var _0xc8ecc5={'output':this['output'],'error':this['reportError']};this['EncoderObj']=new VideoEncoder(_0xc8ecc5);}this['format']='annexb';var _0x216f36=navigator['userAgent']||navigator['vendor']||window['opera'];_0x216f36['indexOf']('Windows\\x20NT')>-0x1?this['userAgent']=0x0:_0x216f36['indexOf']('Linux')>-0x1?this['userAgent']=0x1:_0x216f36['indexOf']('Mac\\x20OS\\x20X')>-0x1?(this['userAgent']=0x2,this['format']='avc'):/Android/['test'](_0x216f36)?this['userAgent']=0x3:/like Mac OS X/['test'](_0x216f36)?this['userAgent']=0x4:this['userAgent']=0x0;var _0x45172a={'codec':_0x112f0b,'width':this['encodeWidth'],'height':this['encodeHeight'],'displayWidth':this['encodeWidth'],'displayHeight':this['encodeHeight'],'bitrate':this['bitrate'],'framerate':this['frameRate'],'bitrateMode':this['bitrateMode'],'latencyMode':this['latencyMode'],'avc':{'format':this['format']}};console['log']('1videoEncode\\x20config\\x20width:'+this['encodeWidth']+',height:'+this['encodeHeight']+',bitrate:'+this['bitrate']+',framerate:'+this['frameRate']+',bitrateMode:'+this['bitrateMode']+',latencMode:'+this['latencyMode']),this['EncoderObj']['configure'](_0x45172a);}},{'key':'inputData','value':function(_0x2819be,_0x78214f){null==this['EncoderObj']||this['stopEncodflag']||('configured'==this['EncoderObj']['state']||this['FirstFrame'])&&this['EncodeProcess'](_0x2819be,_0x78214f);}},{'key':'EncodeProcess','value':function(_0x236c45,_0x4fd25c){if(0x4!=this['EncoderCurStatus']&&null!=this['EncoderObj']&&'configured'==this['EncoderObj']['state']&&this['EncoderObj']['encodeQueueSize']<0xa){var _0x3b6e10=this['frameCounter']%0x32==0x0;0x1==_0x3b6e10&&this['encodeFrameGlobalTime']['push'](_0x4fd25c),this['EncoderObj']['encode'](_0x236c45,{'keyFrame':_0x3b6e10}),this['frameCounter']++;}}},{'key':'output','value':function(_0x15520d,_0x591482){if('configured'==this['EncoderObj']['state']){_0x591482['decoderConfig'],_0x591482['svc'],_0x591482['alphaSideData'],_0x15520d['type'];var _0x36d014=_0x15520d['timestamp'];_0x15520d['byteLength'];if(!this['stopEncodflag']){var _0x318a60=new Uint8Array(_0x15520d['byteLength']);_0x15520d['copyTo'](_0x318a60);var _0x585c9c={'dataType':0x1};if(_0x585c9c['width']=this['encodeWidth'],_0x585c9c['height']=this['encodeHeight'],_0x585c9c['frameRate']=this['frameRate'],_0x585c9c['timeStamp']=_0x36d014/0x3e8,_0x585c9c['frameNum']=this['frameNum'],_0x585c9c['bitrate']=0x0,_0x585c9c['globalTime']={},'key'==_0x15520d['type']){var _0x258b2e=this['encodeFrameGlobalTime']['shift']();'year'in _0x258b2e?(_0x585c9c['globalTime']['year']=_0x258b2e['year'],_0x585c9c['globalTime']['month']=_0x258b2e['month'],_0x585c9c['globalTime']['day']=_0x258b2e['day'],_0x585c9c['globalTime']['hour']=_0x258b2e['hour'],_0x585c9c['globalTime']['minute']=_0x258b2e['minute'],_0x585c9c['globalTime']['second']=_0x258b2e['second'],_0x585c9c['globalTime']['milliseconds']=_0x258b2e['milliseconds']):(_0x585c9c['globalTime']['year']=0x7e8,_0x585c9c['globalTime']['month']=0x0,_0x585c9c['globalTime']['day']=0x0,_0x585c9c['globalTime']['hour']=0x0,_0x585c9c['globalTime']['minute']=0x0,_0x585c9c['globalTime']['second']=0x0,_0x585c9c['globalTime']['milliseconds']=0x0);}var _0x413516=null,_0x3ddd10=new Uint8Array(0x4);_0x3ddd10[0x0]=0x0,_0x3ddd10[0x1]=0x0,_0x3ddd10[0x2]=0x0,_0x3ddd10[0x3]=0x1;var _0x4dc226=null,_0x4f9f4d=0x0,_0x6f4c8b=null,_0x432e93=0x0,_0x2175ec=null,_0x4a6096=null,_0x4e2548=0x0,_0x195983=0x0,_0x132448=0x0;if('key'==_0x15520d['type']){if('decoderConfig'in _0x591482&&'description'in _0x591482['decoderConfig']&&(_0x4a6096=new Uint8Array(_0x591482['decoderConfig']['description'])),0x2==this['userAgent']){for(null!=_0x4a6096&&(_0x4f9f4d=0x100*(_0x4dc226=_0x4a6096['slice'](0x6,_0x4a6096['length']))[0x0]+_0x4dc226[0x1],_0x6f4c8b=_0x4dc226['slice'](0x2,0x2+_0x4f9f4d),_0x432e93=0x100*_0x4dc226[0x3+_0x4f9f4d]+_0x4dc226[0x4+_0x4f9f4d],_0x2175ec=_0x4dc226['slice'](0x5+_0x4f9f4d,0x5+_0x4f9f4d+_0x432e93),_0x4f9f4d+=0x4,_0x432e93+=0x4);_0x195983<_0x318a60['length'];)_0x132448=0x100*_0x318a60[_0x195983]*0x100*0x100+0x100*_0x318a60[_0x195983+0x1]*0x100+0x100*_0x318a60[_0x195983+0x2]+_0x318a60[_0x195983+0x3],_0x318a60[_0x195983]=0x0,_0x318a60[_0x195983+0x1]=0x0,_0x318a60[_0x195983+0x2]=0x0,_0x318a60[_0x195983+0x3]=0x1,_0x195983=_0x195983+0x4+_0x132448;_0x4e2548=_0x4f9f4d+_0x432e93+_0x318a60['length'],_0x413516=new Uint8Array(_0x4e2548);var _0xf1e90d=0x0;null!=_0x6f4c8b&&(_0x413516['set'](_0x3ddd10,0x0),_0x413516['set'](_0x6f4c8b,_0x3ddd10['length']),_0xf1e90d=_0x3ddd10['length']+_0x6f4c8b['length']),null!=_0x2175ec&&(_0x413516['set'](_0x3ddd10,_0xf1e90d),_0x413516['set'](_0x2175ec,_0xf1e90d+_0x3ddd10['length']),_0xf1e90d=_0x3ddd10['length']+_0x6f4c8b['length']+_0x3ddd10['length']+_0x2175ec['length']),_0x413516['set'](_0x318a60,_0xf1e90d),_0x585c9c['rawData']=_0x413516;}else{for(var _0x1f4232=_0x318a60['slice'](0x6,_0x318a60['length']),_0x505b21=0x0;_0x505b21<_0x1f4232['length']&&(0x0!=_0x1f4232[_0x505b21]||0x0!=_0x1f4232[_0x505b21+0x1]||0x1!=_0x1f4232[_0x505b21+0x2]||0x6e!=_0x1f4232[_0x505b21+0x3]);_0x505b21++);_0x4dc226=_0x1f4232['slice'](0x0,_0x505b21);for(var _0x5447f7=_0x1f4232['slice'](_0x505b21,_0x1f4232['length']),_0x5d5ec7=0x0;_0x5d5ec7<_0x5447f7['length']&&(0x0!=_0x5447f7[_0x5d5ec7]||0x0!=_0x5447f7[_0x5d5ec7+0x1]||0x1!=_0x5447f7[_0x5d5ec7+0x2]||0x65!=_0x5447f7[_0x5d5ec7+0x3]);_0x5d5ec7++);var _0x13a7a7=_0x5447f7['slice'](_0x5d5ec7-0x1,_0x5447f7['length']);_0x13a7a7[0x0]=0x0,_0x4e2548=_0x4dc226['length']+_0x13a7a7['length'],(_0x413516=new Uint8Array(_0x4e2548))['set'](_0x4dc226,0x0),_0x413516['set'](_0x13a7a7,_0x4dc226['length']),_0x1f4232=null,_0x5447f7=null,_0x13a7a7=null;}_0x585c9c['rawData']=_0x413516,this['player']?this['rawDataCB']&&this['rawDataCB'](_0x585c9c):postMessage({'function':'VideoRecoderInfo','videoInfo':_0x585c9c},[_0x585c9c['rawData']['buffer']]);}else{if(0x2==this['userAgent']){for(;_0x195983<_0x318a60['length'];)_0x132448=0x100*_0x318a60[_0x195983]*0x100*0x100+0x100*_0x318a60[_0x195983+0x1]*0x100+0x100*_0x318a60[_0x195983+0x2]+_0x318a60[_0x195983+0x3],_0x318a60[_0x195983]=0x0,_0x318a60[_0x195983+0x1]=0x0,_0x318a60[_0x195983+0x2]=0x0,_0x318a60[_0x195983+0x3]=0x1,_0x195983=_0x195983+0x4+_0x132448;_0x585c9c['rawData']=_0x318a60;}else _0x585c9c['rawData']=_0x318a60;this['player']?this['rawDataCB']&&this['rawDataCB'](_0x585c9c):postMessage({'function':'VideoRecoderInfo','videoInfo':_0x585c9c},[_0x585c9c['rawData']['buffer']]);}_0x318a60=null,_0x413516=null,_0x3ddd10=null,_0x4dc226=null,_0x6f4c8b=null,_0x2175ec=null,_0x4a6096=null,this['frameNum']++;}}}},{'key':'_downloadFile','value':function(_0x4d05dd,_0x33552f){var _0x1e6411=_0x4d05dd;_0x4d05dd instanceof Blob||_0x4d05dd instanceof File||(_0x1e6411=new Blob([_0x4d05dd]));var _0x57505c=window['URL']['createObjectURL'](_0x1e6411),_0x560f92=window['document']['createElement']('a');_0x560f92['href']=_0x57505c,_0x560f92['download']=_0x33552f;var _0x175456=document['createEvent']('MouseEvents');_0x175456['initEvent']('click',!0x0,!0x0),_0x560f92['dispatchEvent'](_0x175456);}},{'key':'downloadData','value':function(_0x38f90a){if(this['bWriteData']){for(var _0x53ff90=_0x38f90a,_0x50785d=this['aTotalBuffer']['length'],_0xc8cc08=0x0,_0x4d1f51=_0x53ff90['length'];_0xc8cc08<_0x4d1f51;_0xc8cc08++)this['aTotalBuffer'][_0x50785d+_0xc8cc08]=_0x53ff90[_0xc8cc08];this['iFrameNum']++,_0x53ff90=null,console['log']('downloadEncodedata\\x20iFrameNum:'+this['iFrameNum']);}if(this['bWriteData']&&(this['iFrameNum']>=0x258||this['stopEncodflag'])){console['log']('download600encodeData');var _0x26e234=new Uint8Array(this['aTotalBuffer']);this['_downloadFile'](_0x26e234,'Encode600.data'),this['aTotalBuffer']['splice'](0x0,this['aTotalBuffer']['length']),this['bWriteData']=!0x1,this['iFrameNum']=0x0,_0x26e234=null;}}},{'key':'stopEncode','value':function(){if(this['EncoderCurStatus']=0x4,this['frameCounter']=0x0,this['frameNum']=0x0,this['stopEncodflag']=!0x0,this['destroyEncoder'](),this['bWriteData']&&this['stopEncodflag']){console['log']('download600encodeData');var _0x44069d=new Uint8Array(this['aTotalBuffer']);this['_downloadFile'](_0x44069d,'Encode600.data'),this['aTotalBuffer']['splice'](0x0,this['aTotalBuffer']['length']),this['bWriteData']=!0x1,this['iFrameNum']=0x0,_0x44069d=null;}}},{'key':'reportError','value':function(_0x39d2de){console['log']('hardEncode\\x20reportError:'+_0x39d2de['message']+',state:'+this['EncoderObj']['state']+',frameRate:'+this['frameRate']);}},{'key':'destroyEncoder','value':function(){var _0x317f01=this;return new Promise(function(_0x866749,_0x4edb58){_0x317f01['clearEncoderObjBuffer']()['then'](function(){null!=_0x317f01['EncoderObj']&&('closed'!=_0x317f01['EncoderObj']['state']&&_0x317f01['EncoderObj']['close'](),console['log']('>>>JS\\x2011\\x20destroy\\x20VideoEncoderObj'),_0x317f01['EncoderObj']=null),_0x317f01['EncoderCurStatus']=0x4,_0x317f01['FirstFrame']=!0x0,_0x866749();},function(){_0x4edb58();});});}},{'key':'resetEncoder','value':function(){var _0xcabbe=this;return new Promise(function(_0x1a84db,_0x4caf9e){_0xcabbe['destroyEncoder']()['then'](function(){var _0xd9daaf={'encodeWidth':_0xcabbe['encodeWidth'],'encodeHeight':_0xcabbe['encodeHeight'],'bitrate':_0xcabbe['bitrate'],'frameRate':_0xcabbe['frameRate'],'bitrateMode':_0xcabbe['bitrateMode'],'latencyMode':_0xcabbe['latencyMode']};_0xcabbe['initEncoder'](_0xcabbe['codecString'],_0xd9daaf,_0xcabbe['rawDataCB']),console['log']('%c\\x20reset\\x20hard\\x20Encoder','color:red'),_0x1a84db();},function(){_0x4caf9e();});});}},{'key':'clearEncoderObjBuffer','value':function(){var _0x30ae70=this;return new Promise(function(_0xc6978c,_0x203880){null!=_0x30ae70['EncoderObj']&&'configured'==_0x30ae70['EncoderObj']['state']&&_0x30ae70['EncoderObj']['reset'](),_0xc6978c();});}}]),_0x83b53;}()),_0x22d8e6=(function(){function _0x4322f0(_0x40833e,_0x5746cc){_0x311c09(this,_0x4322f0),this['AudioEncoderObj']=null,this['FirstFrame']=!0x0,this['EncoderCurStatus']=0x2,this['stopEncodflag']=!0x1,this['aTimeStamp']=0x0,this['oPlayCtrlHandle']=null,null!=_0x40833e&&(this['oPlayCtrlHandle']=_0x40833e),this['player']=null,null!=_0x5746cc&&(this['player']=_0x5746cc),this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this);}var _0x3c5520;return _0x50c85d(_0x4322f0,[{'key':'initEncoder','value':(_0x3c5520=_0x43597e(_0x33ed9d()['mark'](function _0x5c030f(_0x2d19a7,_0x1753af,_0x1f0fc9){var _0x4c3403,_0x2e111f;return _0x33ed9d()['wrap'](function(_0x232b53){for(;;)switch(_0x232b53['prev']=_0x232b53['next']){case 0x0:this['codecString']=_0x2d19a7,this['sampleRate']=_0x1753af['sampleRate'],this['numberOfChannels']=_0x1753af['numberOfChannels'],this['bitrate']=_0x1753af['bitrate'],this['AudioDataCB']=_0x1f0fc9,this['FirstFrame']=!0x0,this['EncoderCurStatus']=0x2,this['stopEncodflag']=!0x1,this['aTimeStamp']=0x0,null==this['AudioEncoderObj']&&(_0x4c3403={'output':this['output'],'error':this['reportError']},this['AudioEncoderObj']=new AudioEncoder(_0x4c3403)),this['format']='adts',_0x2e111f={'codec':_0x2d19a7,'sampleRate':this['sampleRate'],'numberOfChannels':this['numberOfChannels'],'bitrate':this['bitrate'],'aac':{'format':this['format']}},console['log']('2audioEncode\\x20config\\x20sampleRate:'+this['sampleRate']+',numberOfChannels:'+this['numberOfChannels']+',bitrate:'+this['bitrate']),this['AudioEncoderObj']['configure'](_0x2e111f);case 0xe:case'end':return _0x232b53['stop']();}},_0x5c030f,this);})),function(_0x4bc5a8,_0x3df8c5,_0xa6d987){return _0x3c5520['apply'](this,arguments);})},{'key':'inputData','value':function(_0xee96ef){null!=this['AudioEncoderObj']&&('configured'==this['AudioEncoderObj']['state']||this['FirstFrame'])&&this['EncodeProcess'](_0xee96ef),this['FirstFrame']&&(0x1==this['oPlayCtrlHandle']['recoderBaseTimestampMode']?this['audioBaseTimeStamp']=_0xee96ef['timestamp']:0x0==this['oPlayCtrlHandle']['recoderBaseTimestampMode']&&(this['audioBaseTimeStamp']=0x0),this['FirstFrame']=!0x1);}},{'key':'EncodeProcess','value':function(_0x4379c2){0x4!=this['EncoderCurStatus']&&null!=this['AudioEncoderObj']&&'configured'==this['AudioEncoderObj']['state']&&this['AudioEncoderObj']['encode'](_0x4379c2);}},{'key':'output','value':function(_0x3b76b1,_0x352aca){if('configured'==this['AudioEncoderObj']['state']){_0x3b76b1['type'],_0x3b76b1['timestamp'],_0x3b76b1['byteLength'];if(!this['stopEncodflag']){this['aTimeStamp']+=_0x3b76b1['duration']/0x3e8;var _0x22d0d0={'dataType':0x2,'width':0x1,'height':0x10,'frameRate':0xbb80};_0x22d0d0['timeStamp']=this['aTimeStamp']+this['audioBaseTimeStamp'],_0x22d0d0['frameNum']=0x0,_0x22d0d0['bitrate']=0x1f400,_0x22d0d0['globalTime']={};var _0x274edd=new Uint8Array(_0x3b76b1['byteLength']);_0x3b76b1['copyTo'](_0x274edd),_0x22d0d0['rawData']=_0x274edd,this['player']?null!=this['AudioDataCB']&&this['AudioDataCB'](_0x22d0d0):postMessage({'function':'AudioRecoderInfo','audioInfo':_0x22d0d0},[_0x22d0d0['rawData']['buffer']]),_0x274edd=null;}}}},{'key':'stopEncode','value':function(){this['stopEncodflag']=!0x0,this['destroyEncoder']();}},{'key':'reportError','value':function(_0x19d532){console['log']('hardEncode\\x20reportError:'+_0x19d532['message']+',state:'+this['AudioEncoderObj']['state']);}},{'key':'destroyEncoder','value':function(){var _0x529e83=this;return new Promise(function(_0x9584de,_0xceb630){_0x529e83['clearEncoderObjBuffer']()['then'](function(){null!=_0x529e83['AudioEncoderObj']&&('closed'!=_0x529e83['AudioEncoderObj']['state']&&_0x529e83['AudioEncoderObj']['close'](),console['log']('>>>JS\\x2012\\x20destroy\\x20AudioEncoderObj'),_0x529e83['AudioEncoderObj']=null),_0x529e83['EncoderCurStatus']=0x4,_0x529e83['FirstFrame']=!0x0,_0x9584de();},function(){_0xceb630();});});}},{'key':'resetEncoder','value':function(){var _0x1c0f19=this;return new Promise(function(_0x1fedb8,_0x14d713){_0x1c0f19['destroyEncoder']()['then'](function(){var _0xeeae14={'sampleRate':_0x1c0f19['sampleRate'],'numberOfChannels':_0x1c0f19['numberOfChannels'],'bitrate':_0x1c0f19['bitrate']};_0x1c0f19['initEncoder'](_0x1c0f19['codecString'],_0xeeae14,_0x1c0f19['AudioDataCB']),console['log']('%c\\x20reset\\x20hard\\x20Encoder','color:red'),_0x1fedb8();},function(){_0x14d713();});});}},{'key':'clearEncoderObjBuffer','value':function(){var _0x305075=this;return new Promise(function(_0x1c948b,_0x24ad25){null!=_0x305075['AudioEncoderObj']&&'configured'==_0x305075['AudioEncoderObj']['state']&&_0x305075['AudioEncoderObj']['reset'](),_0x1c948b();});}}]),_0x4322f0;}());function _0x3c6be4(_0x4805ea,_0xf5ff01){var _0x6b5f62='undefined'!=typeof Symbol&&_0x4805ea[Symbol['iterator']]||_0x4805ea['@@iterator'];if(!_0x6b5f62){if(Array['isArray'](_0x4805ea)||(_0x6b5f62=function(_0x172bc8,_0x5d624f){if(!_0x172bc8)return;if('string'==typeof _0x172bc8)return _0x5bef98(_0x172bc8,_0x5d624f);var _0x6e50b0=Object['prototype']['toString']['call'](_0x172bc8)['slice'](0x8,-0x1);'Object'===_0x6e50b0&&_0x172bc8['constructor']&&(_0x6e50b0=_0x172bc8['constructor']['name']);if('Map'===_0x6e50b0||'Set'===_0x6e50b0)return Array['from'](_0x172bc8);if('Arguments'===_0x6e50b0||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/['test'](_0x6e50b0))return _0x5bef98(_0x172bc8,_0x5d624f);}(_0x4805ea))||_0xf5ff01&&_0x4805ea&&'number'==typeof _0x4805ea['length']){_0x6b5f62&&(_0x4805ea=_0x6b5f62);var _0x43b6d3=0x0,_0x45e116=function(){};return{'s':_0x45e116,'n':function(){return _0x43b6d3>=_0x4805ea['length']?{'done':!0x0}:{'done':!0x1,'value':_0x4805ea[_0x43b6d3++]};},'e':function(_0x599079){throw _0x599079;},'f':_0x45e116};}throw new TypeError('Invalid\\x20attempt\\x20to\\x20iterate\\x20non-iterable\\x20instance.\\x0aIn\\x20order\\x20to\\x20be\\x20iterable,\\x20non-array\\x20objects\\x20must\\x20have\\x20a\\x20[Symbol.iterator]()\\x20method.');}var _0x307e67,_0x19f787=!0x0,_0x429ca7=!0x1;return{'s':function(){_0x6b5f62=_0x6b5f62['call'](_0x4805ea);},'n':function(){var _0x13ecf6=_0x6b5f62['next']();return _0x19f787=_0x13ecf6['done'],_0x13ecf6;},'e':function(_0x406404){_0x429ca7=!0x0,_0x307e67=_0x406404;},'f':function(){try{_0x19f787||null==_0x6b5f62['return']||_0x6b5f62['return']();}finally{if(_0x429ca7)throw _0x307e67;}}};}function _0x5bef98(_0x85674f,_0x5f3fc6){(null==_0x5f3fc6||_0x5f3fc6>_0x85674f['length'])&&(_0x5f3fc6=_0x85674f['length']);for(var _0x4e6791=0x0,_0x1a0e04=new Array(_0x5f3fc6);_0x4e6791<_0x5f3fc6;_0x4e6791++)_0x1a0e04[_0x4e6791]=_0x85674f[_0x4e6791];return _0x1a0e04;}var _0x1fdedf=(function(){function _0x2a73c9(){var _0x242608=arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x311c09(this,_0x2a73c9),this['canvas']=null,this['streamOpenMode']=0x0,this['context']=null,this['oVideoDecoder']=null,this['frameBuffers']=[],this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['renderLastStatus']=0x2,this['playSpeed']=0x1,this['nplaySpeed']=0x1,this['displayBuf']=0xe,this['needForward']=!0x1,this['firstFrame']=!0x0,this['LatcyTime']=0x32,this['nFrameRate']=0x0,this['needSaveFrameInfo']=!0x1,this['displayFrameInfoCB']=null,this['displayFrameInfo']=[],this['curFrameInfo']={},this['curFrameInfo']['timeStamp']=0x0,this['bResetdisplayFrameInfoCB']=!0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this['displayRunning']=!0x1,this['oRenderTimer']=null,this['waitIFrameTimestamp']=0x0,this['curFrame']=null,this['player']=null,null!=_0x242608&&(this['player']=_0x242608),this['renderEngine']='webgl',this['oVideoRender']=null,this['FECCanvasID']='',this['oVideoRender']=new _0x5ab295(this),this['bSetStreamEnd']=!0x1,this['printfFlag']=0x0,this['oVideoEncoder']=null,this['oAudioEncoder']=null,this['startRecoderFlag']=!0x1,this['stopRecoderFlag']=!0x1,this['recoderFrameNum']=0x0,this['vBaseTimeStamp']=0x0,this['encodeVideoInfo']={'encodeVideoType':'avc','encodeWidth':0x500,'encodeHeight':0x2d0,'bitrate':0xf4240,'frameRate':0x19,'bitrateMode':0x0,'latencyMode':0x0},this['encodeAudioInfo']={'encodeAudioType':'aac','sampleRate':0xbb80,'numberOfChannels':0x1,'bitrate':0x1f400},this['recoderBaseTimestampMode']=0x0,this['recoderGetOriginData']=0x0,this['nstreamEndloopNum']=0x0,this['runtimeCBFun']=null,this['nTargetRelativePos']=0x0,this['ProcessPositionflag']=!0x1,this['nMPPlayMode']=0x0,this['nMPPosType']=0x0,this['VideoPrivateInfoMap']=new Map(),this['curPrivateInfo']={},this['curPrivateInfo']['linesInfo']=[],this['curPrivateInfo']['fontInfo']=[],this['curPrivateInfo']['imageInfo']=[],this['StretchPlayTime']=0x0,this['StretchPlayedTime']=0x0,this['StretchPlaySpeed']=0x1,this['StretchPlayFlag']=!0x1,this['Prevideowidth']=0x0,this['Prevideoheight']=0x0,this['PrecodecType']=0x0,this['PlayOrBackMode']=0x1,this['pstRuntimeInfo']={'nRunTimeModule':0x0,'nStrVersion':0x0,'nFrameTimeStamp':0x0,'nFrameNum':0x0,'nErrorCode':0x0,'nInputDataInterval':0x0,'nFrameNumInterval':0x0,'nAverageDecodeTime':0x0,'nSystemFormat':0x0,'nDetectRes':0x0,'nMp4FileTime':0x0,'nMp4TotalFrameNum':0x0,'AbsTimeYear':0x0,'AbsTimeMonth':0x0,'AbsTimeDay':0x0,'AbsTimeHour':0x0,'AbsTimeMinute':0x0,'AbsTimeSecond':0x0,'AbsTimeMilliseconds':0x0},this['firstRenderBegin']=!0x0,this['DecodeTypeFlagMap']=new Map(),this['RenderTypeFlagMap']=new Map(),this['VRViewLimitRate']=0x0;}var _0x4099ed,_0x1246c1;return _0x50c85d(_0x2a73c9,[{'key':'init','value':function(_0x387ae3,_0x49df4a,_0x12b636,_0x4cc632,_0x5043f7){if(this['canvas']=_0x387ae3,this['streamOpenMode']=_0x49df4a,this['renderEngine']=_0x4cc632,this['printfFlag']=_0x5043f7,this['SetCurStatus'](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0xcec02a(_0x12b636,this,this['player'],this['canvas']),null!==this['oVideoDecoder']&&this['oVideoDecoder']['initDecoder'](),null!=this['runtimeCBFun']&&this['oVideoDecoder']['SetRunTimeInfoCallBackFun'](0x2,this['runtimeCBFun']),this['DecodeTypeFlagMap']['size']>0x0)){var _0x244305,_0x5d87a9=_0x3c6be4(this['DecodeTypeFlagMap']['keys']());try{for(_0x5d87a9['s']();!(_0x244305=_0x5d87a9['n']())['done'];){var _0x12fac0=_0x244305['value'],_0x5642d5=this['DecodeTypeFlagMap']['get'](_0x12fac0);0x1==_0x5642d5&&this['oVideoDecoder']['SetRunTimeInfoCallbackType'](0x2,_0x12fac0,_0x5642d5);}}catch(_0x177a4a){_0x5d87a9['e'](_0x177a4a);}finally{_0x5d87a9['f']();}}''!=this['canvas']&&null!=this['canvas']&&(this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!=this['oVideoRender']&&this['oVideoRender']['InitDisplay'](this['canvas'],this['renderEngine'],0x100),null==this['oRenderTimer']&&(this['oRenderTimer']=new _0x2c1c22()));}},{'key':'HardDecodeError','value':function(){return this['player']['_switchHardToSoft'](),0x1;}},{'key':'inputData','value':function(_0x1b5816,_0x145f24){if(this['curPrivateInfo']['linesInfo']['length']>0x0||this['curPrivateInfo']['fontInfo']['length']>0x0||this['curPrivateInfo']['imageInfo']['length']>0x0){var _0x142ea1=this['deepClone'](this['curPrivateInfo']);this['VideoPrivateInfoMap']['set'](_0x145f24['timeStamp'],_0x142ea1),this['curPrivateInfo']['linesInfo']['splice'](0x0,this['curPrivateInfo']['linesInfo']['length']),this['curPrivateInfo']['fontInfo']['splice'](0x0,this['curPrivateInfo']['fontInfo']['length']),this['curPrivateInfo']['imageInfo']['splice'](0x0,this['curPrivateInfo']['imageInfo']['length']);}if(0x0!=this['PrecodecType']&&this['PrecodecType']!=_0x145f24['codecType']&&(this['firstFrame']=!0x0,this['oVideoDecoder']['resetDecoderObj']()),this['needSaveFrameInfo']){var _0x19c275=new Object();_0x19c275['port']=_0x145f24['port'],_0x19c275['codecType']=_0x145f24['codecType'],_0x19c275['frameType']=_0x145f24['frameType'],_0x19c275['frameSize']=_0x145f24['frameSize'],_0x19c275['width']=_0x145f24['width'],_0x19c275['height']=_0x145f24['height'],_0x19c275['timeStamp']=_0x145f24['timeStamp'],_0x19c275['frameRate']=_0x145f24['frameRate'],_0x19c275['frameNum']=_0x145f24['frameNum'],_0x19c275['interlace']=_0x145f24['interlace'],_0x19c275['streamEnd']=_0x145f24['streamEnd'],_0x19c275['cropLeft']=_0x145f24['cropLeft'],_0x19c275['cropRight']=_0x145f24['cropRight'],_0x19c275['cropTop']=_0x145f24['cropTop'],_0x19c275['cropBottom']=_0x145f24['cropBottom'],_0x19c275['year']=_0x145f24['year'],_0x19c275['month']=_0x145f24['month'],_0x19c275['week']=_0x145f24['week'],_0x19c275['day']=_0x145f24['day'],_0x19c275['hour']=_0x145f24['hour'],_0x19c275['minute']=_0x145f24['minute'],_0x19c275['second']=_0x145f24['second'],_0x19c275['milliseconds']=_0x145f24['milliseconds'],_0x19c275['isKeyFrame']=_0x145f24['isKeyFrame'],this['nFrameRate']=_0x19c275['frameRate'],this['Prevideowidth']=_0x145f24['width'],this['Prevideoheight']=_0x145f24['height'],this['PrecodecType']=_0x145f24['codecType'],this['VRViewLimitRate']=_0x145f24['VRViewLimitRate'],this['displayFrameInfo']['push'](_0x19c275),_0x19c275=null;}else this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']);null!=this['oVideoDecoder']&&this['oVideoDecoder']['inputData'](_0x1b5816,_0x145f24);}},{'key':'_resetDecoder','value':function(){var _0x283a79=this;return new Promise(function(_0x3523e2,_0x55d2a0){_0x283a79['oVideoDecoder']['resetDecoder']()['then'](function(){_0x283a79['displayFrameInfo']['splice'](0x0,_0x283a79['displayFrameInfo']['length']),_0x283a79['curFrameInfo']={},_0x283a79['oVideoRender']['DeInitPrivateParam'](),_0x283a79['VideoPrivateInfoMap']['clear'](),_0x283a79['curPrivateInfo']['linesInfo']['splice'](0x0,_0x283a79['curPrivateInfo']['linesInfo']['length']),_0x283a79['curPrivateInfo']['fontInfo']['splice'](0x0,_0x283a79['curPrivateInfo']['fontInfo']['length']),_0x283a79['curPrivateInfo']['imageInfo']['splice'](0x0,_0x283a79['curPrivateInfo']['imageInfo']['length']),_0x283a79['renderCurStatus']=0x2,_0x283a79['renderLastStatus']=0x2,_0x283a79['player']?_0x283a79['player']['JSPlayM4_ResetEnd']():postMessage({'function':'resetEnd'}),_0x3523e2();},function(){_0x55d2a0();});});}},{'key':'_resetRenderTimer','value':function(){this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,null!=this['oRenderTimer']&&this['oRenderTimer']['timerReset'](),this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['renderLastStatus']=0x2,this['curTimeStamp']=0x0,this['getImageJPEG']=!0x1,this['getImageBMP']=!0x1,this['getCropImageJPEG']=!0x1,this['getCropImageBMP']=!0x1,0x1==this['bResetdisplayFrameInfoCB']&&(this['displayFrameInfoCB']=null),this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']),this['VideoPrivateInfoMap']['clear'](),this['curPrivateInfo']['linesInfo']['splice'](0x0,this['curPrivateInfo']['linesInfo']['length']),this['curPrivateInfo']['fontInfo']['splice'](0x0,this['curPrivateInfo']['fontInfo']['length']),this['curPrivateInfo']['imageInfo']['splice'](0x0,this['curPrivateInfo']['imageInfo']['length']),this['curFrameInfo']={},this['DecodeTypeFlagMap']['clear'](),this['RenderTypeFlagMap']['clear']();}},{'key':'_destroyPlayCtrl','value':function(){var _0xbbac00=this;this['oVideoDecoder']['destroyDecoder']()['then'](function(){_0xbbac00['oVideoDecoder']=null,null!=_0xbbac00['oVideoRender']&&(_0xbbac00['oVideoRender']['ReleaseDisplay'](),_0xbbac00['oVideoRender']=null),_0xbbac00['_resetRenderTimer'](),_0xbbac00['oRenderTimer']=null,_0xbbac00['displayRunning']=!0x1,_0xbbac00['runtimeCBFun']=null,_0xbbac00['printfFlag']>=0x0&&console['log']('>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender'),null!=_0xbbac00['oVideoEncoder']&&(_0xbbac00['oVideoEncoder']['destroyEncoder'](),_0xbbac00['oVideoEncoder']=null),null!=_0xbbac00['oAudioEncoder']&&(_0xbbac00['oAudioEncoder']['destroyEncoder'](),_0xbbac00['oAudioEncoder']=null);},function(){_0xbbac00['printfFlag']>=0x0&&console['log']('stop\\x20failed\\x20');});}},{'key':'Sleep','value':(_0x1246c1=_0x43597e(_0x33ed9d()['mark'](function _0x37a06d(_0x4b1282){var _0x448a25;return _0x33ed9d()['wrap'](function(_0x167ae0){for(;;)switch(_0x167ae0['prev']=_0x167ae0['next']){case 0x0:return _0x448a25=(_0x448a25=_0x4b1282>0xea60?0xea60:_0x4b1282)<0x0?0x0:_0x448a25,_0x167ae0['abrupt']('return',new Promise(function(_0x328552){setTimeout(_0x328552,_0x448a25);}));case 0x3:case'end':return _0x167ae0['stop']();}},_0x37a06d);})),function(_0x310f01){return _0x1246c1['apply'](this,arguments);})},{'key':'RenderFrame','value':(_0x4099ed=_0x43597e(_0x33ed9d()['mark'](function _0x5eb0fe(){var _0x48afe5,_0xf17499=this;return _0x33ed9d()['wrap'](function(_0x1dd9ee){for(;;)switch(_0x1dd9ee['prev']=_0x1dd9ee['next']){case 0x0:_0x48afe5=this['renderCurStatus'],null!=this['oVideoDecoder']&&null!=this['oVideoDecoder']['decoderObj']&&(this['player']?this['player']['JSPlayM4_GetDecodeBufferSize'](this['oVideoDecoder']['decoderObj']['decodeQueueSize'],this['oVideoDecoder']['ready_frames']['length']):postMessage({'function':'GetDecodeBufferSize','rawSize':this['oVideoDecoder']['decoderObj']['decodeQueueSize'],'frameSize':this['oVideoDecoder']['ready_frames']['length']}),this['oVideoDecoder']['decoderObj']['decodeQueueSize']<=0x3&&this['oVideoDecoder']['ready_frames']['length']<=0x3&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})),this['printfFlag']>0x0&&console['log']('VideoPlayCtrl.js\\x20output1\\x20cb\\x20decodeQueueSize:'+this['oVideoDecoder']['decoderObj']['decodeQueueSize']+',length:'+this['oVideoDecoder']['ready_frames']['length'])),_0x1dd9ee['t0']=_0x48afe5,_0x1dd9ee['next']=0x0===_0x1dd9ee['t0']?0x5:0x2===_0x1dd9ee['t0']||0x6===_0x1dd9ee['t0']?0x8:0x3===_0x1dd9ee['t0']?0xa:0x5===_0x1dd9ee['t0']?0xd:0x4===_0x1dd9ee['t0']?0xf:0x11;break;case 0x5:return this['_resetRenderTimer'](),this['_resetDecoder']()['then'](function(){requestAnimationFrame(_0xf17499['RenderFrame']);},function(){}),_0x1dd9ee['abrupt']('break',0x12);case 0x8:return this['displayRunning']?(this['printfFlag']>0x0&&console['log']('displayBuf:'+this['displayBuf']+',this.streamOpenMode:'+this['streamOpenMode']+',LatcyTime:'+this['LatcyTime']),this['chooseFrame']()['then'](function(_0xf11269){if(_0xf17499['curFrame']=_0xf11269,0x1==_0xf17499['ProcessPositionflag']){if(null!=_0xf17499['curFrame']){new Object();var _0x24330d=0x0;if(0x1==_0xf17499['nMPPosType']&&(_0x24330d=_0xf17499['findFramebyTime'](_0xf17499['curFrame']['timestamp'],0x0)['frameNum']),0x0==_0xf17499['nMPPosType']&&_0xf17499['curFrame']['timestamp']<_0xf17499['nTargetRelativePos']||0x1==_0xf17499['nMPPosType']&&_0x24330d<_0xf17499['nTargetRelativePos'])requestAnimationFrame(_0xf17499['RenderFrame']);else{if(_0xf17499['ProcessPositionflag']=!0x1,_0xf17499['player']['needPlaySound']&&_0xf17499['player']['JSPlayM4_PlaySound'](),_0xf17499['paint'](_0xf17499['curFrame']),_0xf17499['curTimeStamp']=_0xf17499['curFrame']['timestamp'],null!=_0xf17499['player']){var _0x311b8e={'nRes':0x1};_0x311b8e['nRelativePos']=_0xf17499['nTargetRelativePos'],null!=_0xf17499['player']['SetPlayPosCBFun']?_0xf17499['player']['SetPlayPosCBFun'](_0x311b8e):postMessage({'function':'SetPlayPosCB','value':_0xf17499['nTargetRelativePos']});}0x1==_0xf17499['nMPPlayMode']&&_0xf17499['SetCurStatus'](0x3),_0xf17499['RenderFrame']();}}else requestAnimationFrame(_0xf17499['RenderFrame']);}else{if(-0x1==_0xf17499['displayBuf']||0x0==_0xf17499['streamOpenMode']&&0x0==_0xf17499['LatcyTime'])null!=_0xf17499['curFrame']&&(_0xf17499['curTimeStamp']=_0xf17499['curFrame']['timestamp'],_0xf17499['paint'](_0xf17499['curFrame'])),requestAnimationFrame(_0xf17499['RenderFrame']);else{if(null!=_0xf17499['curFrame']){_0xf17499['initTimer']&&!_0xf17499['resetTimer']||(_0xf17499['oRenderTimer']['Init'](),_0xf17499['initTimer']=!0x0,_0xf17499['resetTimer']=!0x1,_0xf17499['preTimeStamp']=_0xf17499['curFrame']['timestamp'],_0xf17499['baseTimeStamp']=_0xf17499['curFrame']['timestamp'],0x1==_0xf17499['streamOpenMode']&&(_0xf17499['LatcyTime']=0x0)),_0xf17499['curTimeStamp']=_0xf17499['curFrame']['timestamp'];var _0x27269a=0x0,_0x3fad1e=0x0;0x6==_0x48afe5?(_0x27269a=_0xf17499['preTimeStamp']-_0xf17499['curTimeStamp'],_0x3fad1e=_0xf17499['baseTimeStamp']-_0xf17499['curTimeStamp']):(_0x27269a=_0xf17499['curTimeStamp']-_0xf17499['preTimeStamp'],_0x3fad1e=_0xf17499['curTimeStamp']-_0xf17499['baseTimeStamp']);var _0x17748d=_0xf17499['oRenderTimer']['GetTimerWalk']();(_0x27269a>0x1388||_0x27269a<0x0||_0x3fad1e<0x0||_0x17748d<=0x0)&&(_0xf17499['oRenderTimer']['Init'](),_0xf17499['preTimeStamp']=_0xf17499['curFrame']['timestamp'],_0xf17499['baseTimeStamp']=_0xf17499['curTimeStamp'],_0x3fad1e=0x6==_0x48afe5?_0xf17499['baseTimeStamp']-_0xf17499['curTimeStamp']:_0xf17499['curTimeStamp']-_0xf17499['baseTimeStamp'],_0x17748d=_0xf17499['oRenderTimer']['GetTimerWalk']());var _0x4197f7=0x0;_0x4197f7=_0xf17499['StretchPlayFlag']?_0xf17499['StretchPlaySpeed']:_0xf17499['playSpeed'];var _0xd71257=(_0x3fad1e+_0xf17499['LatcyTime'])/_0x4197f7-_0x17748d;_0xf17499['printfFlag']>0x0&&console['log']('baseTimerWalk:'+_0x17748d+',lDeta:'+_0xd71257+',Date\\x20:'+new Date()['getFullYear']()+'/'+(new Date()['getMonth']()+0x1)+'/'+new Date()['getDate']()+'\\x20'+new Date()['getHours']()+'-'+new Date()['getMinutes']()+'-'+new Date()['getSeconds']()+'-'+new Date()['getMilliseconds']()),_0xd71257<0xf&&_0xd71257>-0xf||_0xd71257<0x0?(_0xf17499['StretchPlayFlag']&&_0xf17499['VideoStretchProcess'](_0xf17499['curTimeStamp']),_0xf17499['paint'](_0xf17499['curFrame']),_0xf17499['preTimeStamp']=_0xf17499['curTimeStamp'],_0xf17499['RenderFrame']()):_0xf17499['Sleep'](_0xd71257-0x5)['then'](function(){0x2!=_0xf17499['renderCurStatus']&&0x6!=_0xf17499['renderCurStatus']||(_0xf17499['StretchPlayFlag']&&_0xf17499['VideoStretchProcess'](_0xf17499['curTimeStamp']),_0xf17499['paint'](_0xf17499['curFrame']),_0xf17499['preTimeStamp']=_0xf17499['curTimeStamp']),_0xf17499['RenderFrame']();});}else requestAnimationFrame(_0xf17499['RenderFrame']);}}})):requestAnimationFrame(this['RenderFrame']),_0x1dd9ee['abrupt']('break',0x12);case 0xa:return this['_refresh'](),requestAnimationFrame(this['RenderFrame']),_0x1dd9ee['abrupt']('break',0x12);case 0xd:return this['needForward']?this['chooseFrame']()['then'](function(_0x46f4d6){_0xf17499['curFrame']=_0x46f4d6,null!=_0xf17499['curFrame']&&(_0xf17499['curTimeStamp']=_0xf17499['curFrame']['timestamp'],_0xf17499['paint'](_0xf17499['curFrame']),_0xf17499['needForward']=!0x1),requestAnimationFrame(_0xf17499['RenderFrame']);}):(this['_refresh'](),requestAnimationFrame(this['RenderFrame'])),_0x1dd9ee['abrupt']('break',0x12);case 0xf:return this['_destroyPlayCtrl'](),_0x1dd9ee['abrupt']('return');case 0x11:return _0x1dd9ee['abrupt']('return');case 0x12:case'end':return _0x1dd9ee['stop']();}},_0x5eb0fe,this);})),function(){return _0x4099ed['apply'](this,arguments);})},{'key':'paint','value':function(_0x46148e){var _0x1b4e8c=this,_0x573d35=arguments['length']>0x1&&void 0x0!==arguments[0x1]&&arguments[0x1];return new Promise(function(_0x340b50,_0x54568a){if(0x4==_0x1b4e8c['renderCurStatus']||null==_0x46148e||null==_0x1b4e8c['oVideoRender']||0x1==_0x1b4e8c['ProcessPositionflag']||null==_0x46148e['timestamp'])_0x340b50();else{_0x1b4e8c['waitIFrameTimestamp']===_0x46148e['timestamp']&&(_0x1b4e8c['resetTimer']=!0x0);var _0x234f73={},_0xe2a12c=null;_0xe2a12c=null!=_0x46148e['image']&&null!=_0x46148e['image']?_0x46148e['image']:_0x46148e,_0x234f73['nCropLeft']=0x0,_0x234f73['nCropRight']=0x0,_0x234f73['nCropTop']=0x0,_0x234f73['nCropBottom']=0x0,_0x234f73['nCodeWidth']=_0x46148e['displayWidth'],_0x234f73['nCodeHeight']=_0x46148e['displayHeight'];var _0x57c040={'x':0x0,'y':0x0};if(_0x57c040['width']=_0x46148e['displayWidth'],_0x57c040['height']=_0x46148e['displayHeight'],_0x1b4e8c['RenderTypeFlagMap']['size']>0x0){var _0xf47e,_0x46bdd8=_0x3c6be4(_0x1b4e8c['RenderTypeFlagMap']['keys']());try{for(_0x46bdd8['s']();!(_0xf47e=_0x46bdd8['n']())['done'];){var _0x31543e=_0xf47e['value'];if(_0x31543e==_0x3877da){if(0x1==_0x1b4e8c['RenderTypeFlagMap']['get'](_0x31543e)&&null!=_0x1b4e8c['runtimeCBFun']&&0x1==_0x1b4e8c['firstRenderBegin']){if(_0x1b4e8c['pstRuntimeInfo']['nRunTimeModule']=0x3,_0x1b4e8c['pstRuntimeInfo']['nStrVersion']=0x1,_0x1b4e8c['pstRuntimeInfo']['nFrameTimeStamp']=_0x46148e['timestamp'],_0x1b4e8c['pstRuntimeInfo']['nFrameNum']=0x0,_0x1b4e8c['pstRuntimeInfo']['nErrorCode']=_0x3877da,_0x1b4e8c['pstRuntimeInfo']['nInputDataInterval']=0x0,_0x1b4e8c['pstRuntimeInfo']['nFrameNumInterval']=0x0,_0x1b4e8c['pstRuntimeInfo']['nAverageDecodeTime']=0x0,0x1==_0x573d35)_0x1b4e8c['pstRuntimeInfo']['AbsTimeYear']=_0x1b4e8c['curFrameInfo']['year'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMonth']=_0x1b4e8c['curFrameInfo']['month'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeDay']=_0x1b4e8c['curFrameInfo']['day'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeHour']=_0x1b4e8c['curFrameInfo']['hour'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMinute']=_0x1b4e8c['curFrameInfo']['minute'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeSecond']=_0x1b4e8c['curFrameInfo']['second'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMilliseconds']=_0x1b4e8c['curFrameInfo']['milliseconds'];else{var _0x1fd8fa=new Object();_0x1fd8fa=_0x1b4e8c['findFramebyTime'](_0x46148e['timestamp'],0x0),_0x1b4e8c['pstRuntimeInfo']['AbsTimeYear']=_0x1fd8fa['year'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMonth']=_0x1fd8fa['month'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeDay']=_0x1fd8fa['day'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeHour']=_0x1fd8fa['hour'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMinute']=_0x1fd8fa['minute'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeSecond']=_0x1fd8fa['second'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMilliseconds']=_0x1fd8fa['milliseconds'];}_0x1b4e8c['runtimeCBFun'](_0x1b4e8c['pstRuntimeInfo']),_0x1b4e8c['firstRenderBegin']=!0x1;}}}}catch(_0x5b2caa){_0x46bdd8['e'](_0x5b2caa);}finally{_0x46bdd8['f']();}}_0x1b4e8c['oVideoRender']['DisplayFrame'](_0xe2a12c,_0x46148e['displayWidth'],_0x46148e['displayHeight'],_0x46148e['timestamp'],_0x234f73,null,_0x1b4e8c['nFrameRate'],_0x573d35,_0x1b4e8c['VRViewLimitRate'])['then'](function(_0x547d6f){var _0x5a5a23=_0x547d6f['timestamp'],_0x12c41f=_0x547d6f['DrawRet'];if(_0x1b4e8c['RenderTypeFlagMap']['size']>0x0&&0x1!=_0x12c41f){var _0x50c333,_0x2a61b5=_0x3c6be4(_0x1b4e8c['RenderTypeFlagMap']['keys']());try{for(_0x2a61b5['s']();!(_0x50c333=_0x2a61b5['n']())['done'];){var _0x524c82=_0x50c333['value'];if(0x10==_0x524c82)0x1==_0x1b4e8c['RenderTypeFlagMap']['get'](_0x524c82)&&null!=_0x1b4e8c['runtimeCBFun']&&(_0x1b4e8c['pstRuntimeInfo']['nRunTimeModule']=0x3,_0x1b4e8c['pstRuntimeInfo']['nStrVersion']=0x1,_0x1b4e8c['pstRuntimeInfo']['nFrameTimeStamp']=_0x5a5a23,_0x1b4e8c['pstRuntimeInfo']['nFrameNum']=0x0,_0x1b4e8c['pstRuntimeInfo']['nErrorCode']=0x10,_0x1b4e8c['runtimeCBFun'](_0x1b4e8c['pstRuntimeInfo']));}}catch(_0x5a6bc1){_0x2a61b5['e'](_0x5a6bc1);}finally{_0x2a61b5['f']();}}if(null!==_0x1b4e8c['displayFrameInfoCB']&&_0x1b4e8c['respondFrameInfoCB'](_0x5a5a23),_0x1b4e8c['RenderTypeFlagMap']['size']>0x0){var _0x545f6e,_0xb93287=_0x3c6be4(_0x1b4e8c['RenderTypeFlagMap']['keys']());try{for(_0xb93287['s']();!(_0x545f6e=_0xb93287['n']())['done'];){var _0x17c0bb=_0x545f6e['value'];if(_0x17c0bb==_0x1d0760)0x1==_0x1b4e8c['RenderTypeFlagMap']['get'](_0x17c0bb)&&null!=_0x1b4e8c['runtimeCBFun']&&(_0x1b4e8c['pstRuntimeInfo']['nRunTimeModule']=0x3,_0x1b4e8c['pstRuntimeInfo']['nStrVersion']=0x1,_0x1b4e8c['pstRuntimeInfo']['nFrameTimeStamp']=_0x5a5a23,_0x1b4e8c['pstRuntimeInfo']['nFrameNum']=0x0,_0x1b4e8c['pstRuntimeInfo']['nErrorCode']=_0x1d0760,_0x1b4e8c['pstRuntimeInfo']['nInputDataInterval']=0x0,_0x1b4e8c['pstRuntimeInfo']['nFrameNumInterval']=0x0,_0x1b4e8c['pstRuntimeInfo']['nAverageDecodeTime']=0x0,_0x1b4e8c['pstRuntimeInfo']['AbsTimeYear']=_0x1b4e8c['curFrameInfo']['year'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMonth']=_0x1b4e8c['curFrameInfo']['month'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeDay']=_0x1b4e8c['curFrameInfo']['day'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeHour']=_0x1b4e8c['curFrameInfo']['hour'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMinute']=_0x1b4e8c['curFrameInfo']['minute'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeSecond']=_0x1b4e8c['curFrameInfo']['second'],_0x1b4e8c['pstRuntimeInfo']['AbsTimeMilliseconds']=_0x1b4e8c['curFrameInfo']['milliseconds'],_0x1b4e8c['runtimeCBFun'](_0x1b4e8c['pstRuntimeInfo']));}}catch(_0x5e9c44){_0xb93287['e'](_0x5e9c44);}finally{_0xb93287['f']();}}if(_0x1b4e8c['firstFrame']){_0x1b4e8c['firstFrame']=!0x1;var _0x4f5fe6=_0x1b4e8c;_0x1b4e8c['oVideoRender']['GetCanvasData'](function(_0x5af77a,_0x37f7d9,_0x358524){if(null!=_0x5af77a){var _0xb0a3c8=_0x4f5fe6['checkColorAnomaly'](_0x5af77a,_0x37f7d9,_0x358524);console['log']('checkColorAnomaly\\x20resC:'+_0xb0a3c8),_0xb0a3c8&&_0x4f5fe6['HardDecodeError']();}}),null!=_0x1b4e8c['player']?null!=_0x1b4e8c['player']['FFCallBackFun']&&_0x1b4e8c['player']['FFCallBackFun']({'decodeEngine':0x1}):postMessage({'function':'firstFrameCB','value':!0x0});}_0x1b4e8c['startRecoderFlag']&&0x0==_0x1b4e8c['stopRecoderFlag']&&_0x1b4e8c['oVideoRender']['GetCanvasData'](function(_0x32a363,_0x4579b9,_0x573064){if(null!=_0x32a363){if(0x0==_0x1b4e8c['recoderBaseTimestampMode']){0x0==_0x1b4e8c['vBaseTimeStamp']&&(_0x1b4e8c['vBaseTimeStamp']=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds']());var _0x2a8894=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds']();_0x1b4e8c['recoderFrameTimeStamp']=_0x2a8894-_0x1b4e8c['vBaseTimeStamp'];}else 0x1==_0x1b4e8c['recoderBaseTimestampMode']||(_0x1b4e8c['recoderBaseTimestampMode']=0x1),_0x1b4e8c['recoderFrameTimeStamp']=_0x5a5a23;var _0x50d75d={'timestamp':0x3e8*_0x1b4e8c['recoderFrameTimeStamp'],'codedWidth':_0x1b4e8c['encodeVideoInfo']['encodeWidth'],'codedHeight':_0x1b4e8c['encodeVideoInfo']['encodeHeight'],'format':'RGBA'},_0x166583=new VideoFrame(_0x32a363,_0x50d75d),_0x5b9e2d={};_0x5b9e2d['year']=_0x1b4e8c['curFrameInfo']['year'],_0x5b9e2d['month']=_0x1b4e8c['curFrameInfo']['month'],_0x5b9e2d['day']=_0x1b4e8c['curFrameInfo']['day'],_0x5b9e2d['hour']=_0x1b4e8c['curFrameInfo']['hour'],_0x5b9e2d['minute']=_0x1b4e8c['curFrameInfo']['minute'],_0x5b9e2d['second']=_0x1b4e8c['curFrameInfo']['second'],_0x5b9e2d['milliseconds']=_0x1b4e8c['curFrameInfo']['milliseconds'],_0x1b4e8c['oVideoEncoder']['inputData'](_0x166583,_0x5b9e2d),_0x166583['close'](),_0x32a363=null,_0x1b4e8c['recoderFrameNum']++;}_0x340b50();},_0x1b4e8c['encodeVideoInfo']['encodeWidth'],_0x1b4e8c['encodeVideoInfo']['encodeHeight'],_0x1b4e8c['recoderGetOriginData']);});}});}},{'key':'checkColorAnomaly','value':function(_0x49f6b1,_0x1db061,_0xc2912a){for(var _0x239bd0=0x0,_0x1db1e6=_0x1db061*_0xc2912a,_0x49d27e=0x0;_0x49d27e<_0x49f6b1['length'];_0x49d27e+=0x4){var _0x3813a2=_0x49f6b1[_0x49d27e],_0x104733=_0x49f6b1[_0x49d27e+0x1],_0x38d46d=_0x49f6b1[_0x49d27e+0x2];_0x104733>1.5*_0x3813a2&&_0x104733>1.5*_0x38d46d&&_0x239bd0++;}return _0x239bd0/_0x1db1e6>0.05;}},{'key':'respondFrameInfoCB','value':function(_0x4b36e9){if(0x0!=this['displayFrameInfo']['length']&&(this['curFrameInfo']['timeStamp']!==_0x4b36e9||0x0==_0x4b36e9&&0x0==this['curFrameInfo']['timeStamp'])){var _0x416a52=this['findFramebyTime'](_0x4b36e9,0x1);this['curFrameInfo']['port']=_0x416a52['port'],this['curFrameInfo']['codecType']=_0x416a52['codecType'],this['curFrameInfo']['frameType']=_0x416a52['frameType'],this['curFrameInfo']['frameSize']=_0x416a52['frameSize'],this['curFrameInfo']['width']=_0x416a52['width']-(_0x416a52['cropLeft']+_0x416a52['cropRight']),this['curFrameInfo']['height']=_0x416a52['height']-(_0x416a52['cropTop']+_0x416a52['cropBottom']),this['curFrameInfo']['timeStamp']=_0x416a52['timeStamp'],this['curFrameInfo']['frameRate']=_0x416a52['frameRate'],this['curFrameInfo']['frameNum']=_0x416a52['frameNum'],this['curFrameInfo']['interlace']=_0x416a52['interlace'],this['curFrameInfo']['streamEnd']=_0x416a52['streamEnd'],this['curFrameInfo']['cropLeft']=_0x416a52['cropLeft'],this['curFrameInfo']['cropRight']=_0x416a52['cropRight'],this['curFrameInfo']['cropTop']=_0x416a52['cropTop'],this['curFrameInfo']['cropBottom']=_0x416a52['cropBottom'],this['curFrameInfo']['year']=_0x416a52['year'],this['curFrameInfo']['month']=_0x416a52['month'],this['curFrameInfo']['week']=_0x416a52['week'],this['curFrameInfo']['day']=_0x416a52['day'],this['curFrameInfo']['hour']=_0x416a52['hour'],this['curFrameInfo']['minute']=_0x416a52['minute'],this['curFrameInfo']['second']=_0x416a52['second'],this['curFrameInfo']['milliseconds']=_0x416a52['milliseconds'],_0x416a52=null,null!=this['displayFrameInfoCB']&&this['displayFrameInfoCB'](this['curFrameInfo']);}}},{'key':'findFramebyTime','value':function(_0x480f69,_0x411fcc){var _0xc1b7fa=new Object();if(_0xc1b7fa=this['displayFrameInfo']['find'](function(_0x20c692){return _0x20c692['timeStamp']==_0x480f69;}),0x1==_0x411fcc){var _0x2eef0e=this['displayFrameInfo']['findIndex'](function(_0x2678e6){return _0x2678e6['timeStamp']==_0x480f69;});this['displayFrameInfo']['splice'](_0x2eef0e,0x1);}return _0xc1b7fa;}},{'key':'chooseFrame','value':function(){var _0x141937=this;return new Promise(function(_0x3b3d55,_0x40c8a1){if(null==_0x141937['oVideoRender']||null==_0x141937['oVideoDecoder'])_0x3b3d55(null);else{if(_0x141937['oVideoDecoder']['decoderObjNeedReset'])_0x141937['oVideoDecoder']['resetDecoder']()['then'](function(){_0x141937['oVideoDecoder']['decoderObjNeedReset']=!0x1,_0x3b3d55(null);},function(){_0x40c8a1();});else{var _0x4543b4=_0x141937['oVideoDecoder']['GetFrameBufferLength']();if(-0x1!=_0x141937['displayBuf']){if(_0x4543b4<0x3){if(0x1==_0x141937['bSetStreamEnd']&&(_0x141937['nstreamEndloopNum']++,_0x141937['nstreamEndloopNum']>=0x32&&null!=_0x141937['player']&&null!=_0x141937['player']['runtimeCBFun'])){var _0x27fa2e={'nRunTimeModule':0x0,'nStrVersion':0x0,'nFrameTimeStamp':0x0,'nFrameNum':0x0,'nErrorCode':0x9};_0x141937['player']['runtimeCBFun'](_0x27fa2e),_0x141937['bSetStreamEnd']=!0x1,_0x141937['nstreamEndloopNum']=0x0;}_0x3b3d55(null);}else 0x1==_0x141937['bSetStreamEnd']&&(_0x141937['nstreamEndloopNum']=0x0),_0x141937['oVideoDecoder']['GetFrame']()['then'](function(_0x13b986){_0x3b3d55(_0x13b986);},function(){});}else{if(0x0==_0x4543b4){if(0x1==_0x141937['bSetStreamEnd']&&(_0x141937['nstreamEndloopNum']++,_0x141937['nstreamEndloopNum']>=0x32&&null!=_0x141937['player']&&null!=_0x141937['player']['runtimeCBFun'])){var _0x2026a3={'nRunTimeModule':0x0,'nStrVersion':0x0,'nFrameTimeStamp':0x0,'nFrameNum':0x0,'nErrorCode':0x9};_0x141937['player']['runtimeCBFun'](_0x2026a3),_0x141937['bSetStreamEnd']=!0x1,_0x141937['nstreamEndloopNum']=0x0;}_0x3b3d55(null);}else 0x1==_0x141937['bSetStreamEnd']&&(_0x141937['nstreamEndloopNum']=0x0),_0x141937['oVideoDecoder']['GetFrame']()['then'](function(_0x10cfa8){_0x3b3d55(_0x10cfa8);},function(){});}}}});}},{'key':'SetDisplayRegion','value':function(_0x1575b3,_0x2e83e2,_0x1f71c1,_0x4de5f1){return null==this['oVideoRender']?0x0:(this['sx']=_0x1575b3,this['sy']=_0x2e83e2,this['sw']=_0x1f71c1,this['sh']=_0x4de5f1,this['oVideoRender']['SetDisplayRect'](_0x1575b3,_0x2e83e2,_0x1f71c1,_0x4de5f1));}},{'key':'SetCurStatus','value':function(_0x5d9d1c){var _0x396be1=!(arguments['length']>0x1&&void 0x0!==arguments[0x1])||arguments[0x1];return this['bResetdisplayFrameInfoCB']=_0x396be1,this['renderCurStatus']=_0x5d9d1c,0x1;}},{'key':'fast','value':function(){var _0x53b256=this['_GetFastSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x53b256);}},{'key':'slow','value':function(){var _0x47caaa=this['_GetSlowSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x47caaa);}},{'key':'Pause','value':function(_0x4917e1){if(_0x4917e1)0x2!=this['renderCurStatus']&&0x6!=this['renderCurStatus']||(this['renderLastStatus']=this['renderCurStatus']),this['SetCurStatus'](0x3);else{if(0x3!==this['renderCurStatus'])return 0x0;0x2===this['renderLastStatus']?this['SetCurStatus'](0x2):0x6===this['renderLastStatus']&&this['SetCurStatus'](0x6),this['resetTimer']=!0x0;}return 0x1;}},{'key':'NotifyBackPlay','value':function(_0x1c0449){if(_0x1c0449?this['SetCurStatus'](0x6):this['SetCurStatus'](0x2),null!=this['oVideoDecoder']){if(0x2==this['PlayOrBackMode'])this['oVideoDecoder']['NotifyBackPlay'](_0x1c0449,this['preTimeStamp'],0x0);else{var _0x13aa70=0x1==_0x1c0449?0x2:0x1;this['oVideoDecoder']['NotifyBackPlay'](_0x1c0449,this['preTimeStamp'],_0x13aa70);}}return this['resetTimer']=!0x0,0x1;}},{'key':'SetPlayOrBackSwitchMode','value':function(_0x4b8570){return this['PlayOrBackMode']=_0x4b8570,0x1;}},{'key':'SetStretchPlay','value':function(_0x12b5aa,_0x2cb055){return 0x2!=this['renderCurStatus']||this['playSpeed']>1.1||this['playSpeed']<0.9?0x0:(this['StretchPlayTime']=_0x12b5aa,this['StretchPlayedTime']=0x0,this['StretchPlaySpeed']=_0x2cb055,this['StretchPlayFlag']=!0x0,this['resetTimer']=!0x0,0x1);}},{'key':'VideoStretchProcess','value':function(_0x57f23b){return this['StretchPlayFlag']&&(this['printfFlag']>0x0&&console['log']('StretchPlayedTime:'+this['StretchPlayedTime']+',StretchPlayTime:'+this['StretchPlayTime']),this['StretchPlayedTime']<this['StretchPlayTime']?this['StretchPlayedTime']+=_0x57f23b-this['preTimeStamp']:(this['StretchPlayedTime']=0x0,this['StretchPlayFlag']=!0x1,this['resetTimer']=!0x0)),0x1;}},{'key':'_refresh','value':function(){0x0!=this['frameBuffers']['length']&&this['paint'](this['frameBuffers'][0x0],!0x0);}},{'key':'OneByOne','value':function(_0x5b94ad){if(_0x5b94ad)0x2!=this['renderCurStatus']&&0x6!=this['renderCurStatus']||(this['renderLastStatus']=this['renderCurStatus']),this['SetCurStatus'](0x5),this['needForward']=!0x0;else{if(0x5!==this['renderCurStatus'])return-0x1;0x2===this['renderLastStatus']?this['SetCurStatus'](0x2):0x6===this['renderLastStatus']&&this['SetCurStatus'](0x6),this['resetTimer']=!0x0,this['needForward']=!0x1,this['_SetPlaySpeed'](0x1);}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x20df3a,_0x5d7eaa,_0x400410){return null!=this['oVideoRender']?this['oVideoRender']['SetCanvasSize'](_0x20df3a,_0x5d7eaa,_0x400410):0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoRender']?this['oVideoRender']['GetCanvasSize']():0x0;}},{'key':'GetPlayedTime','value':function(){return this['curTimeStamp'];}},{'key':'SetTargetRelativePos','value':function(_0x2543d9,_0x55435b,_0xba3b54){this['nTargetRelativePos']=_0x2543d9,this['nMPPlayMode']=_0xba3b54,this['nMPPosType']=_0x55435b,this['ProcessPositionflag']=!0x0;}},{'key':'_SetPlaySpeed','value':function(_0x3c6c9a){switch(_0x3c6c9a){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x3c6c9a===this['nplaySpeed']||(this['nplaySpeed']=_0x3c6c9a,this['playSpeed']=_0x3c6c9a>0x0?_0x3c6c9a:-0x1/_0x3c6c9a,console['log']('playSpeed:'+this['playSpeed']),this['resetTimer']=!0x0,this['needForward']=!0x1,0x2!=this['renderCurStatus']&&0x6!=this['renderCurStatus']&&(0x2===this['renderLastStatus']?this['SetCurStatus'](0x2):0x6===this['renderLastStatus']&&this['SetCurStatus'](0x6))),0x1;}},{'key':'_GetFastSpeed','value':function(_0x4045f5){var _0x627b05=0x0;switch(_0x4045f5){case-0x10:_0x627b05=-0x8;break;case-0x8:_0x627b05=-0x4;break;case-0x4:_0x627b05=-0x2;break;case-0x2:_0x627b05=0x1;break;case 0x1:_0x627b05=0x2;break;case 0x2:_0x627b05=0x4;break;case 0x4:_0x627b05=0x8;break;case 0x8:_0x627b05=0x10;break;case 0x10:_0x627b05=0x20;break;case 0x20:_0x627b05=0x40;break;default:_0x627b05=0x0;}return _0x627b05;}},{'key':'_GetSlowSpeed','value':function(_0x6b47d6){var _0x39c989=0x0;switch(_0x6b47d6){case-0x8:_0x39c989=-0x10;break;case-0x4:_0x39c989=-0x8;break;case-0x2:_0x39c989=-0x4;break;case 0x1:_0x39c989=-0x2;break;case 0x2:_0x39c989=0x1;break;case 0x4:_0x39c989=0x2;break;case 0x8:_0x39c989=0x4;break;case 0x10:_0x39c989=0x8;break;case 0x20:_0x39c989=0x10;break;case 0x40:_0x39c989=0x20;break;default:_0x39c989=0x0;}return _0x39c989;}},{'key':'SetDisplayBuf','value':function(_0x1390c8){return this['displayBuf']=_0x1390c8,this['LatcyTime']=0x1==_0x1390c8?0x0:0xf==_0x1390c8?0x2bc:0x2d==_0x1390c8?0x76c:_0x1390c8>0x6&&_0x1390c8<0x2d?0x28*_0x1390c8+0x64:-0x1==_0x1390c8?0x0:0x32,0x1;}},{'key':'GetJPEG','value':function(){var _0x258afb=this;null!=this['oVideoDecoder']&&this['oVideoDecoder']['GetImageYUV']('jpeg',0x0,0x0,0x0,0x0)['then'](function(_0x576c5b){var _0x31c4d2=_0x576c5b['yuvFrameBuffer'],_0x3c100c=_0x576c5b['yuvLength'],_0x2e0422=_0x576c5b['displayWidth'],_0x281dc0=_0x576c5b['displayHeight'],_0x5e9387=_0x576c5b['yuvType'];-0x1!=_0x31c4d2&&(_0x258afb['player']?_0x258afb['player']['_GetImage2'](_0x31c4d2,_0x3c100c,_0x2e0422,_0x281dc0,'jpeg',_0x5e9387,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x31c4d2['buffer'],'size':_0x3c100c,'width':_0x2e0422,'height':_0x281dc0,'type':'jpeg','yuvType':_0x5e9387,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x31c4d2['buffer']]));},function(){});}},{'key':'GetBMP','value':function(){var _0x3277cb=this;null!=this['oVideoDecoder']&&this['oVideoDecoder']['GetImageYUV']('bmp',0x0,0x0,0x0,0x0)['then'](function(_0x1e88b5){var _0x5ab872=_0x1e88b5['yuvFrameBuffer'],_0x37179b=_0x1e88b5['yuvLength'],_0x38d05e=_0x1e88b5['displayWidth'],_0x392785=_0x1e88b5['displayHeight'],_0x2a16d0=_0x1e88b5['yuvType'];-0x1!=_0x5ab872&&(_0x3277cb['player']?_0x3277cb['player']['_GetImage2'](_0x5ab872,_0x37179b,_0x38d05e,_0x392785,'bmp',_0x2a16d0,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x5ab872['buffer'],'size':_0x37179b,'width':_0x38d05e,'height':_0x392785,'type':'bmp','yuvType':_0x2a16d0,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x5ab872['buffer']]));},function(){});}},{'key':'GetCropJPEG','value':function(){var _0x2f32da=this;null!=this['oVideoDecoder']&&this['oVideoDecoder']['GetImageYUV']('jpeg',this['sx'],this['sy'],this['sw'],this['sh'])['then'](function(_0x3ca71e){var _0x474043=_0x3ca71e['yuvFrameBuffer'],_0x124c3f=_0x3ca71e['yuvLength'],_0x1430ba=_0x3ca71e['displayWidth'],_0x2a9403=_0x3ca71e['displayHeight'],_0x8c6d71=_0x3ca71e['yuvType'];-0x1!=_0x474043&&(_0x2f32da['player']?_0x2f32da['player']['_GetImage2'](_0x474043,_0x124c3f,_0x1430ba,_0x2a9403,'jpeg',_0x8c6d71,_0x2f32da['sx'],_0x2f32da['sy'],_0x2f32da['sw'],_0x2f32da['sh']):postMessage({'function':'imageYUV','value':_0x474043['buffer'],'size':_0x124c3f,'width':_0x1430ba,'height':_0x2a9403,'type':'jpeg','yuvType':_0x8c6d71,'sx':_0x2f32da['sx'],'sy':_0x2f32da['sy'],'sw':_0x2f32da['sw'],'sh':_0x2f32da['sh']},[_0x474043['buffer']]));},function(){});}},{'key':'GetCropBMP','value':function(){var _0x544bc0=this;null!=this['oVideoDecoder']&&this['oVideoDecoder']['GetImageYUV']('bmp',this['sx'],this['sy'],this['sw'],this['sh'])['then'](function(_0x43b878){var _0x217223=_0x43b878['yuvFrameBuffer'],_0x30d4e5=_0x43b878['yuvLength'],_0x1af742=_0x43b878['displayWidth'],_0x26e1a2=_0x43b878['displayHeight'],_0x281a88=_0x43b878['yuvType'];-0x1!=_0x217223&&(_0x544bc0['player']?_0x544bc0['player']['_GetImage2'](_0x217223,_0x30d4e5,_0x1af742,_0x26e1a2,'bmp',_0x281a88,_0x544bc0['sx'],_0x544bc0['sy'],_0x544bc0['sw'],_0x544bc0['sh']):postMessage({'function':'imageYUV','value':_0x217223['buffer'],'size':_0x30d4e5,'width':_0x1af742,'height':_0x26e1a2,'type':'bmp','yuvType':_0x281a88,'sx':_0x544bc0['sx'],'sy':_0x544bc0['sy'],'sw':_0x544bc0['sw'],'sh':_0x544bc0['sh']},[_0x217223['buffer']]));},function(){});}},{'key':'GetCanvasCapture','value':function(_0xbca8f,_0x37a6a5,_0x2b2511){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetCanvasCapture','color:red'),0x0):(this['oVideoRender']['GetCanvasData'](_0xbca8f,_0x37a6a5,_0x2b2511),0x1);}},{'key':'SetDecodeFrameType','value':function(_0x44932e){return this['waitIFrameTimestamp']=_0x44932e,0x1;}},{'key':'SetStreamEnd','value':function(_0x4cb5f3){return this['bSetStreamEnd']=_0x4cb5f3,this['oVideoDecoder']['SetStreamEnd'](),0x1;}},{'key':'SetAntialias','value':function(_0x562512){return null!=this['oVideoRender']?this['oVideoRender']['SetAntialias'](_0x562512):0x0;}},{'key':'SetFrameInfoCallBack','value':function(_0x234459,_0x1f9e4a){return _0x1f9e4a?(this['needSaveFrameInfo']=!0x0,this['displayFrameInfoCB']=_0x234459):(this['needSaveFrameInfo']=!0x1,this['displayFrameInfoCB']=null),0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x14ec36){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetCanvasID'](_0x14ec36):(this['FECCanvasID']=_0x14ec36,0x0);}},{'key':'FEC_ResetCorrectType','value':function(_0x5a0bc1,_0x5437b2,_0x15a637){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_ResetCorrectType'](_0x5a0bc1,_0x5437b2,_0x15a637):0x0;}},{'key':'FEC_GetPort','value':function(_0x447023,_0x14abfb){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPort'](_0x447023,_0x14abfb):-0x1;}},{'key':'FEC_Enable','value':function(_0xcdf007){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Enable'](_0xcdf007):0x0;}},{'key':'FEC_SetParam','value':function(_0x6903f1,_0x26918e){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetParam'](_0x6903f1,_0x26918e):0x0;}},{'key':'FEC_GetParam','value':function(_0x508ec4,_0x4dd29d){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetParam'](_0x508ec4,_0x4dd29d):0x0;}},{'key':'FEC_SetViewParam','value':function(_0x3f1daa,_0xfa8069,_0x13f958){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetViewParam'](_0x3f1daa,_0xfa8069,_0x13f958):0x0;}},{'key':'FEC_GetViewParam','value':function(_0xe3423b,_0x572979,_0x212195){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetViewParam'](_0xe3423b,_0x572979,_0x212195):0x0;}},{'key':'FEC_SetWnd','value':function(_0x411fee,_0x249b97){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetWnd'](_0x411fee,_0x249b97):0x0;}},{'key':'FEC_Disable','value':function(_0x234da0,_0x12ac95,_0x5e1845){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Disable'](_0x234da0,_0x12ac95,_0x5e1845):0x0;}},{'key':'FEC_DelPort','value':function(_0x2ec11b){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_DelPort'](_0x2ec11b):0x0;}},{'key':'FEC_SetDisplayRegion','value':function(_0x4bf0e9,_0x578a26,_0x1bc64d,_0x1edb10,_0x22e12a,_0x36215f,_0x466948){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetDisplayRegion'](_0x4bf0e9,_0x578a26,_0x1bc64d,_0x1edb10,_0x22e12a,_0x36215f,_0x466948):0x0;}},{'key':'FEC_SetBackCilling','value':function(_0x8e5f65,_0x15a3fe){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetBackCilling'](_0x8e5f65,_0x15a3fe):0x0;}},{'key':'FEC_GetPTZPort','value':function(_0x52a197,_0x34bece,_0x4307c1){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPTZPort'](_0x52a197,_0x34bece,_0x4307c1):-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x5d051f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetPTZDisplayMode'](_0x5d051f):0x0;}},{'key':'FEC_Capture','value':function(_0x4da9da,_0x57bb8f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC_Capture','color:red'),0x0):this['oVideoRender']['FEC_Capture'](_0x4da9da,_0x57bb8f);}},{'key':'InputPrivateInfo','value':function(_0x2338ae,_0x2f971c,_0x4d5280){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):((null!=_0x2338ae&&_0x2338ae['linesNum']>0x0||null!=_0x2f971c&&_0x2f971c['nFontsNum']>0x0)&&0x0==this['firstFrame']&&(this['LatcyTime']=0x64),this['curPrivateInfo']['linesInfo']['push'](_0x2338ae),this['curPrivateInfo']['fontInfo']['push'](_0x2f971c),this['curPrivateInfo']['imageInfo']['push'](_0x4d5280),0x1);}},{'key':'deepClone','value':function(_0xe4f009){if(null===_0xe4f009||'object'!==_0x18a458(_0xe4f009))return _0xe4f009;if(Array['isArray'](_0xe4f009)){for(var _0x314ca0=[],_0x13d237=0x0;_0x13d237<_0xe4f009['length'];_0x13d237++)_0x314ca0[_0x13d237]=this['deepClone'](_0xe4f009[_0x13d237]);return _0x314ca0;}if(ArrayBuffer['isView'](_0xe4f009)){var _0x44e73f=new Uint8Array(_0xe4f009['length']);return _0x44e73f['set'](_0xe4f009),_0x44e73f;}var _0x1a9ad1={};for(var _0x4990b7 in _0xe4f009)_0xe4f009['hasOwnProperty'](_0x4990b7)&&(_0x1a9ad1[_0x4990b7]=this['deepClone'](_0xe4f009[_0x4990b7]));return _0x1a9ad1;}},{'key':'RenderPrivateData','value':function(_0x288d56,_0x43721b){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateData'](_0x288d56,_0x43721b):0x0;}},{'key':'RenderPrivateDataEx','value':function(_0x33d912,_0x1d4b0f,_0x37ba66){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateDataEx'](_0x33d912,_0x1d4b0f,_0x37ba66):0x0;}},{'key':'SetWaterMarkFont','value':function(_0x22d1c2){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x20param\\x20error\\x20this.renderEngine:%d,this.oVideoRender:%d','color:red',this['renderEngine'],this['oVideoRender']),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkFont'](_0x22d1c2):0x0;}},{'key':'SetWaterMarkImage','value':function(_0x2464fa){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetWaterMarkImage','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkImage'](_0x2464fa):0x0;}},{'key':'SetMosaicType','value':function(_0x5dcd74){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetMosaicType','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetMosaicType'](_0x5dcd74):0x0;}},{'key':'SelectIntelInfoFeatureToDraw','value':function(_0x1e879a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SelectIntelInfoFeatureToDraw','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SelectIntelInfoFeatureToDraw'](_0x1e879a):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x6fcddb,_0x2ee0b2){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetD3DPostProcess'](_0x6fcddb,_0x2ee0b2):0x0;}},{'key':'SetTextCanvas','value':function(_0x32bc31){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetTextCanvas'](_0x32bc31):0x0;}},{'key':'SetPrintLogFlag','value':function(_0x6b8cee){return this['printfFlag']=_0x6b8cee,null!=this['oVideoDecoder']&&this['oVideoDecoder']['SetPrintLogFlag'](_0x6b8cee),null!=this['oVideoRender']&&this['oVideoRender']['SetPrintLogFlag'](_0x6b8cee),0x1;}},{'key':'SetRotateAngle','value':function(_0x4bde2f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetRotateAngle','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetRotateAngle'](_0x4bde2f):0x0;}},{'key':'InitEncoder','value':function(_0x3f74d5,_0x188b7d){return _0x3f74d5['encodeWidth']>0x0||_0x3f74d5['encodeHeight']>0x0?(this['encodeVideoInfo']['encodeWidth']=_0x3f74d5['encodeWidth'],this['encodeVideoInfo']['encodeHeight']=_0x3f74d5['encodeHeight']):null!=this['curFrameInfo']['width']&&this['curFrameInfo']['width']>0x0&&this['curFrameInfo']['width']<=0x578&&null!=this['curFrameInfo']['height']&&this['curFrameInfo']['height']>0x0&&this['curFrameInfo']['height']<=0x320?(this['encodeVideoInfo']['encodeWidth']=this['curFrameInfo']['width'],this['encodeVideoInfo']['encodeHeight']=this['curFrameInfo']['height']):(this['encodeVideoInfo']['encodeWidth']=0x500,this['encodeVideoInfo']['encodeHeight']=0x2d0),_0x3f74d5['bitrate']>0x0?this['encodeVideoInfo']['bitrate']=_0x3f74d5['bitrate']:this['encodeVideoInfo']['encodeWidth']>0x62c?this['encodeVideoInfo']['bitrate']=0x3d0900:this['encodeVideoInfo']['encodeWidth']>0x320?this['encodeVideoInfo']['bitrate']=0x1e8480:this['encodeVideoInfo']['bitrate']=0xf4240,_0x3f74d5['frameRate']>0x0?this['encodeVideoInfo']['frameRate']=_0x3f74d5['frameRate']:'frameRate'in this['curFrameInfo']&&(this['encodeVideoInfo']['frameRate']=this['curFrameInfo']['frameRate']),_0x3f74d5['bitrateMode']>0x0?this['encodeVideoInfo']['bitrateMode']=_0x3f74d5['bitrateMode']:this['encodeVideoInfo']['bitrateMode']=0x0,_0x3f74d5['latencyMode']>0x0?this['encodeVideoInfo']['latencyMode']=_0x3f74d5['latencyMode']:this['encodeVideoInfo']['latencyMode']=0x0,0x0==_0x3f74d5['encodeType']&&(this['encodeVideoInfo']['encodeVideoType']='avc'),this['recoderBaseTimestampMode']=_0x3f74d5['baseTimeStampMode'],this['recoderGetOriginData']=_0x3f74d5['getOriginData'],null==this['oVideoEncoder']&&(this['oVideoEncoder']=new _0x13d7d5(this,this['player'])),_0x188b7d['sampleRate']>0x0?this['encodeAudioInfo']['sampleRate']=_0x188b7d['sampleRate']:this['encodeAudioInfo']['sampleRate']=0xbb80,_0x188b7d['numberOfChannels']>0x0?this['encodeAudioInfo']['numberOfChannels']=_0x188b7d['numberOfChannels']:this['encodeAudioInfo']['numberOfChannels']=0x1,_0x188b7d['bitrate']>0x0?this['encodeAudioInfo']['bitrate']=_0x188b7d['bitrate']:this['encodeAudioInfo']['bitrate']=0x1f400,0x0==_0x188b7d['encodeType']&&(this['encodeAudioInfo']['encodeAudioType']='aac'),null==this['oAudioEncoder']&&(this['oAudioEncoder']=new _0x22d8e6(this,this['player'])),0x1;}},{'key':'StartVideoEncode','value':function(_0x5391da){return null!=this['oVideoEncoder']&&(this['oVideoEncoder']['initEncoder']('avc1.4d4032',this['encodeVideoInfo'],_0x5391da),this['startRecoderFlag']=!0x0,this['stopRecoderFlag']=!0x1),0x1;}},{'key':'StartAudioEncode','value':function(_0xf8a111){return null!=this['oAudioEncoder']&&this['oAudioEncoder']['initEncoder']('mp4a.40.2',this['encodeAudioInfo'],_0xf8a111),0x1;}},{'key':'InputPCMToEncode','value':function(_0x2b2837,_0x5277cf){if(null!=this['oAudioEncoder']&&0x0==this['stopRecoderFlag']){var _0xcc904b={'format':'s16','sampleRate':this['encodeAudioInfo']['sampleRate'],'numberOfFrames':_0x2b2837['length']/0x2,'numberOfChannels':0x1,'timestamp':_0x5277cf,'data':_0x2b2837},_0x1a7890=new AudioData(_0xcc904b);this['oAudioEncoder']['inputData'](_0x1a7890),_0x1a7890['close']();}return 0x1;}},{'key':'StopEncode','value':function(){return this['startRecoderFlag']=!0x1,this['stopRecoderFlag']=!0x0,this['recoderFrameNum']=0x0,null!=this['oAudioEncoder']&&(this['oAudioEncoder']['stopEncode'](),this['oAudioEncoder']=null),null!=this['oVideoEncoder']&&(this['oVideoEncoder']['stopEncode'](),this['oVideoEncoder']=null),this['recoderBaseTimestampMode']=0x0,this['recoderGetOriginData']=0x0,0x1;}},{'key':'SetRunTimeInfoCallBack','value':function(_0x1dc034,_0x25abc4){return this['runtimeCBFun']=_0x25abc4,null!=this['oVideoDecoder']&&this['oVideoDecoder']['SetRunTimeInfoCallBackFun'](_0x1dc034,_0x25abc4),0x1;}},{'key':'SetRunTimeInfoCallbackType','value':function(_0x1ec055,_0xaf45a7,_0x53e4ab){return 0x2==_0x1ec055?_0x53e4ab?this['DecodeTypeFlagMap']['set'](_0xaf45a7,0x1):this['DecodeTypeFlagMap']['delete'](_0xaf45a7):0x3==_0x1ec055&&(_0x53e4ab?this['RenderTypeFlagMap']['set'](_0xaf45a7,0x1):this['RenderTypeFlagMap']['delete'](_0xaf45a7)),null!=this['oVideoDecoder']&&0x2==_0x1ec055&&this['oVideoDecoder']['SetRunTimeInfoCallbackType'](_0x1ec055,_0xaf45a7,_0x53e4ab),0x1;}},{'key':'IsVisible','value':function(_0x2a0e8d){return null!=this['oVideoDecoder']&&this['oVideoDecoder']['IsVisible'](_0x2a0e8d),0x1;}},{'key':'SetPanoramaDisplayEffect','value':function(_0x557210){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetPanoramaDisplayEffect','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetPanoramaDisplayEffect'](_0x557210):0x0;}},{'key':'SetPanoramaSphereViewParam','value':function(_0x1f16d7,_0x1f06e8){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetPanoramaSphereViewParam','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetPanoramaSphereViewParam'](_0x1f16d7,_0x1f06e8):0x0;}},{'key':'GetPanoramaSphereViewParam','value':function(_0x35f43d,_0x285835){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetPanoramaSphereViewParam','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['GetPanoramaSphereViewParam'](_0x35f43d,_0x285835):0x0;}},{'key':'ResetBuffer','value':function(){return this['resetTimer']=!0x0,this['oVideoDecoder']['clearDecoderObjBuffer'](),0x1;}}]),_0x2a73c9;}());!function(_0x57bf0b){let _0x8429f4=new _0x1fdedf(),_0xa740c2=0x0;self['onmessage']=function(_0x482b1c){let _0x55f6b1=_0x482b1c['data'];switch(_0x55f6b1['command']){case'init':_0xa740c2=_0x55f6b1['printfLog'],_0x8429f4['init'](_0x55f6b1['canvas'],_0x55f6b1['streamOpenMode'],_0x55f6b1['sab'],_0x55f6b1['renderEngine'],_0x55f6b1['printfLog']);break;case'inputData':let _0x2df8d3=new Uint8Array(_0x55f6b1['rawData']),_0x1fef7f=_0x55f6b1['rawDataFrameInfo'];_0x8429f4['inputData'](_0x2df8d3,_0x1fef7f),_0x2df8d3=null;break;case'SetDisplayRegion':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),_0x8429f4['SetDisplayRegion'](_0x55f6b1['sx'],_0x55f6b1['sy'],_0x55f6b1['sw'],_0x55f6b1['sh']);break;case'stop':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),_0x8429f4['SetCurStatus'](0x4);let _0x361833=setInterval(()=>{_0x8429f4['displayRunning']||(_0x8429f4=null,self['postMessage']({'function':'stop'}),clearInterval(_0x361833),_0x361833=null,self['close'](),_0xa740c2>=0x0&&console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['fast']()&&self['postMessage']({'function':'paraError'});break;case'slow':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['slow']()&&self['postMessage']({'function':'paraError'});break;case'SetDisplayBuf':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['SetDisplayBuf'](_0x55f6b1['value'])&&self['postMessage']({'function':'paraError'});break;case'Pause':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['Pause'](_0x55f6b1['value'])&&self['postMessage']({'function':'paraError'});break;case'OneByOne':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['OneByOne'](_0x55f6b1['value'])&&self['postMessage']({'function':'paraError'});break;case'NotifyBackPlay':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['NotifyBackPlay'](_0x55f6b1['flag'])&&self['postMessage']({'function':'paraError'});break;case'SetPlayOrBackSwitchMode':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['SetPlayOrBackSwitchMode'](_0x55f6b1['PlayOrBackMode'])&&self['postMessage']({'function':'paraError'});break;case'SetStretchPlay':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['SetStretchPlay'](_0x55f6b1['Stretchtime'],_0x55f6b1['Stretchspeed'])&&self['postMessage']({'function':'paraError'});break;case'SetCanvasSize':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['SetCanvasSize'](_0x55f6b1['width'],_0x55f6b1['height'],_0x55f6b1['FECSubPort'])&&self['postMessage']({'function':'paraError'});break;case'GetCanvasSize':null===_0x8429f4&&self['postMessage']({'function':'OrderError'}),0x1!==_0x8429f4['GetCanvasSize']()&&self['postMessage']({'function':'paraError'});break;case'GetPlayedTime':null===_0x8429f4&&self['postMessage']({'function':'OrderError'});let _0xc969a1=_0x8429f4['GetPlayedTime']();0x0!==_0xc969a1&&self['postMessage']({'function':'GetPlayedTime','value':_0xc969a1});break;case'needReset':_0x8429f4['SetCurStatus'](0x0,_0x55f6b1['bTrue']);break;case'GetJPEG':_0x8429f4['GetJPEG']();break;case'GetBMP':_0x8429f4['GetBMP']();break;case'GetCropJPEG':_0x8429f4['GetCropJPEG']();break;case'GetCropBMP':_0x8429f4['GetCropBMP']();break;case'SetDecodeFrameType':_0x8429f4['SetDecodeFrameType'](_0x55f6b1['timestamp']);break;case'SetStreamEnd':_0x8429f4['SetStreamEnd'](_0x55f6b1['bTrue']);break;case'SetAntialias':_0x8429f4['SetAntialias'](_0x55f6b1['value']);break;case'SetFrameInfoCallBack':_0x8429f4['SetFrameInfoCallBack'](_0x23c4f0=>{self['postMessage']({'function':'SetFrameInfoCallBack','curFrameInfo':_0x23c4f0});},_0x55f6b1['value']);break;case'SetTargetRelativePos':_0x8429f4['SetTargetRelativePos'](_0x55f6b1['nRelativePos'],_0x55f6b1['nPosType'],_0x55f6b1['nPlayMode']);break;case'ResetBuffer':_0x8429f4['ResetBuffer']();break;case'FEC_SetCanvasID':_0x8429f4['FEC_SetCanvasID'](_0x55f6b1['canvasID']);break;case'FECResetCorrectType':_0x8429f4['FEC_ResetCorrectType'](_0x55f6b1['fishSubPort'],_0x55f6b1['placeType'],_0x55f6b1['correctType']);break;case'FECGetPort':let _0x94adbc=_0x8429f4['FEC_GetPort'](_0x55f6b1['placeType'],_0x55f6b1['correctType']);(_0x94adbc<0x1||_0x94adbc>0x1f||null==_0x94adbc)&&(_0x94adbc=-0x1),self['postMessage']({'function':'FECGetPort','fishSubPort':_0x94adbc});break;case'FECEnable':_0x8429f4['FEC_Enable'](_0x55f6b1['fishSubPort']);break;case'FECSetParam':_0x8429f4['FEC_SetParam'](_0x55f6b1['fishSubPort'],_0x55f6b1['param2d']);break;case'FECGetParam':let _0x5e745e={};_0x8429f4['FEC_GetParam'](_0x55f6b1['fishSubPort'],_0x5e745e),self['postMessage']({'function':'FECGetParam','param2d':_0x5e745e});break;case'FECSetViewParam':_0x8429f4['FEC_SetViewParam'](_0x55f6b1['fishSubPort'],_0x55f6b1['upDateType'],_0x55f6b1['fValue']);break;case'FECGetViewParam':let _0x3be786={};_0x8429f4['FEC_GetViewParam'](_0x55f6b1['fishSubPort'],_0x55f6b1['upDateType'],_0x3be786),self['postMessage']({'function':'FECGetViewParam','Param3D':_0x3be786});break;case'FECSetWnd':_0x8429f4['FEC_SetWnd'](_0x55f6b1['fishSubPort'],_0x55f6b1['offscrrenCnv']);break;case'FECDisable':_0x8429f4['FEC_Disable'](_0x55f6b1['fishSubPort'],_0x55f6b1['clearFECCanvas'],_0x55f6b1['clearContext']);break;case'FECDelPort':_0x8429f4['FEC_DelPort'](_0x55f6b1['fishSubPort']);break;case'FECSetDisplayRegion':_0x8429f4['FEC_SetDisplayRegion'](_0x55f6b1['fishSubPort'],_0x55f6b1['type'],_0x55f6b1['regionNum'],_0x55f6b1['sx'],_0x55f6b1['sy'],_0x55f6b1['sw'],_0x55f6b1['sh']);break;case'FECSetBackCilling':_0x8429f4['FEC_SetBackCilling'](_0x55f6b1['fishSubPort'],_0x55f6b1['bValue']);break;case'FECGetPTZPort':let _0x418f14=_0x8429f4['FEC_GetPTZPort'](_0x55f6b1['subport'],_0x55f6b1['fPositionX'],_0x55f6b1['fPositionY']);(_0x418f14<0x1||_0x418f14>0x1f||null==_0x418f14)&&(_0x418f14=-0x1,console['info']('%c\\x20hardDecoderWorker\\x20FECGetPTZPort\\x20error\\x20','color:\\x20red')),self['postMessage']({'function':'FECGetPTZPort','fishSubPort':_0x418f14});break;case'FECCapture':_0x8429f4['FEC_Capture'](_0x55f6b1['subport'],(_0x14482e,_0x3c05c3,_0x321b64,_0x3cd774)=>{self['postMessage']({'function':'FECCapture','frameData':_0x14482e['buffer'],'width':_0x3c05c3,'height':_0x321b64,'fishSubPort':_0x3cd774},[_0x14482e['buffer']]);});break;case'FECSetPTZDisplayMode':_0x8429f4['FEC_SetPTZDisplayMode'](_0x55f6b1['ptzMode']);break;case'RenderPrivateData':_0x8429f4['RenderPrivateData'](_0x55f6b1['intelType'],_0x55f6b1['bTrue']);break;case'RenderPrivateDataEx':_0x8429f4['RenderPrivateDataEx'](_0x55f6b1['intelType'],_0x55f6b1['subType'],_0x55f6b1['bTrue']);break;case'InputPrivateInfo':_0x8429f4['InputPrivateInfo'](_0x55f6b1['linesInfo'],_0x55f6b1['fontInfo'],_0x55f6b1['ImageInfo']);break;case'GetCanvasCapture':_0x8429f4['GetCanvasCapture']((_0xb6d140,_0x341e97,_0x29de36)=>{self['postMessage']({'function':'GetCanvasCapture','frameData':_0xb6d140['buffer'],'width':_0x341e97,'height':_0x29de36},[_0xb6d140['buffer']]);},_0x55f6b1['capWidth'],_0x55f6b1['capHeight']);break;case'SetWaterMarkFont':_0x8429f4['SetWaterMarkFont'](_0x55f6b1['fontParam']);break;case'SetMosaicType':_0x8429f4['SetWaterMarkFont'](_0x55f6b1['MosaicParam']);break;case'SetWaterMarkImage':let _0x5e591d=new Uint8Array(_0x55f6b1['pImageData']),_0x281b1c={};_0x281b1c['pImageData']=_0x5e591d,_0x281b1c['pImageType']=_0x55f6b1['pImageType'],_0x281b1c['pstRectPos']=_0x55f6b1['pstRectPos'],_0x281b1c['fAlpha']=_0x55f6b1['fAlpha'],_0x8429f4['SetWaterMarkImage'](_0x281b1c),_0x5e591d=null;break;case'SelectIntelInfoFeatureToDraw':_0x8429f4['SelectIntelInfoFeatureToDraw'](_0x55f6b1['IntelInfoParam']);break;case'SetD3DPostProcess':_0x8429f4['SetD3DPostProcess'](_0x55f6b1['ProcessType'],_0x55f6b1['ProcessValue']);break;case'SetTextCanvas':_0x8429f4['SetTextCanvas'](_0x55f6b1['textoffscreenCanvas']);break;case'SetPrintLogFlag':_0x8429f4['SetPrintLogFlag'](_0x55f6b1['printfFlag']);break;case'SetPanoramaDisplayEffect':_0x8429f4['SetPanoramaDisplayEffect'](_0x55f6b1['DisplayEffect']);break;case'SetPanoramaSphereViewParam':_0x8429f4['SetPanoramaSphereViewParam'](_0x55f6b1['ViewParamType'],_0x55f6b1['fValue']);break;case'GetPanoramaSphereViewParam':let _0x116f17={};_0x8429f4['GetPanoramaSphereViewParam'](_0x55f6b1['ViewParamType'],_0x116f17),self['postMessage']({'function':'GetPanoramaSphereViewParam','ParamVR':_0x116f17});break;case'SetRotateAngle':_0x8429f4['SetRotateAngle'](_0x55f6b1['rotateValue']);break;case'InitEncoder':_0x8429f4['InitEncoder'](_0x55f6b1['videoInfo'],_0x55f6b1['audioInfo']);break;case'StartVideoEncode':_0x8429f4['StartVideoEncode'](null);break;case'StartAudioEncode':_0x8429f4['StartAudioEncode'](null);break;case'InputPCMToEncode':let _0x4d8ee6=new Uint8Array(_0x55f6b1['PCMData']);_0x8429f4['InputPCMToEncode'](_0x4d8ee6,_0x55f6b1['timeStamp']);break;case'StopEncode':_0x8429f4['StopEncode']();break;case'SetRunTimeInfoCallBack':_0x8429f4['SetRunTimeInfoCallBack'](_0x55f6b1['module'],_0x121f5b=>{self['postMessage']({'function':'runtimeInfo','pstRuntimeInfo':_0x121f5b});});break;case'SetRunTimeInfoCallbackType':_0x8429f4['SetRunTimeInfoCallbackType'](_0x55f6b1['module'],_0x55f6b1['type'],_0x55f6b1['flag']);break;case'IsVisible':_0x8429f4['IsVisible'](_0x55f6b1['visibility']);}};}();})());})());","Worker",void 0,void 0)},h=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r},f=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}(e))||t){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,x=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){x=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(x)throw n}}}},c=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r},u=function(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")},d=function(e,t,a){return t&&function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=void 0,i=function(e){if("object"!=ue(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,"string");if("object"!=ue(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"==ue(i)?i:i+""),r)}var i}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e},p=function(){var e=new Ge(16);return Ge!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},m=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},S=function(e,t,a){var r=t[0],i=t[1],n=t[2],s=t[3],x=t[4],o=t[5],l=t[6],_=t[7],h=t[8],f=t[9],c=t[10],u=t[11],d=t[12],p=t[13],m=t[14],S=t[15],R=a[0],P=a[1],b=a[2],y=a[3];return e[0]=R*r+P*x+b*h+y*d,e[1]=R*i+P*o+b*f+y*p,e[2]=R*n+P*l+b*c+y*m,e[3]=R*s+P*_+b*u+y*S,R=a[4],P=a[5],b=a[6],y=a[7],e[4]=R*r+P*x+b*h+y*d,e[5]=R*i+P*o+b*f+y*p,e[6]=R*n+P*l+b*c+y*m,e[7]=R*s+P*_+b*u+y*S,R=a[8],P=a[9],b=a[10],y=a[11],e[8]=R*r+P*x+b*h+y*d,e[9]=R*i+P*o+b*f+y*p,e[10]=R*n+P*l+b*c+y*m,e[11]=R*s+P*_+b*u+y*S,R=a[12],P=a[13],b=a[14],y=a[15],e[12]=R*r+P*x+b*h+y*d,e[13]=R*i+P*o+b*f+y*p,e[14]=R*n+P*l+b*c+y*m,e[15]=R*s+P*_+b*u+y*S,e},R=function(e,t,a,r){var i,n,s,x,o,l,_,h,f,c,u,d,p,m,S,R,P,b,y,E,g,F,v,C,T=r[0],D=r[1],A=r[2],I=Math.hypot(T,D,A);return I<Ye?null:(T*=I=1/I,D*=I,A*=I,i=Math.sin(a),s=1-(n=Math.cos(a)),x=t[0],o=t[1],l=t[2],_=t[3],h=t[4],f=t[5],c=t[6],u=t[7],d=t[8],p=t[9],m=t[10],S=t[11],R=T*T*s+n,P=D*T*s+A*i,b=A*T*s-D*i,y=T*D*s-A*i,E=D*D*s+n,g=A*D*s+T*i,F=T*A*s+D*i,v=D*A*s-T*i,C=A*A*s+n,e[0]=x*R+h*P+d*b,e[1]=o*R+f*P+p*b,e[2]=l*R+c*P+m*b,e[3]=_*R+u*P+S*b,e[4]=x*y+h*E+d*g,e[5]=o*y+f*E+p*g,e[6]=l*y+c*E+m*g,e[7]=_*y+u*E+S*g,e[8]=x*F+h*v+d*C,e[9]=o*F+f*v+p*C,e[10]=l*F+c*v+m*C,e[11]=_*F+u*v+S*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},P=function(e,t,a,r){var i,n,s,x,o,l,_,h,f,c,u=t[0],d=t[1],p=t[2],S=r[0],R=r[1],P=r[2],b=a[0],y=a[1],E=a[2];return Math.abs(u-b)<Ye&&Math.abs(d-y)<Ye&&Math.abs(p-E)<Ye?m(e):(_=u-b,h=d-y,f=p-E,i=R*(f*=c=1/Math.hypot(_,h,f))-P*(h*=c),n=P*(_*=c)-S*f,s=S*h-R*_,(c=Math.hypot(i,n,s))?(i*=c=1/c,n*=c,s*=c):(i=0,n=0,s=0),x=h*s-f*n,o=f*i-_*s,l=_*n-h*i,(c=Math.hypot(x,o,l))?(x*=c=1/c,o*=c,l*=c):(x=0,o=0,l=0),e[0]=i,e[1]=x,e[2]=_,e[3]=0,e[4]=n,e[5]=o,e[6]=h,e[7]=0,e[8]=s,e[9]=l,e[10]=f,e[11]=0,e[12]=-(i*u+n*d+s*p),e[13]=-(x*u+o*d+l*p),e[14]=-(_*u+h*d+f*p),e[15]=1,e)},b=function(){var e=new Ge(3);return Ge!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e},y=function(e,t,a){var r=new Ge(3);return r[0]=e,r[1]=t,r[2]=a,r},E=function(){var e=new Ge(4);return Ge!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e},g=function(e){return t=e,Math.min(Math.max(t,0),1);var t},F=function(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a},v=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?F(Object(a),!0).forEach((function(t){var r,i,n;r=e,i=t,n=a[t],i in r?Object.defineProperty(r,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[i]=n})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):F(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e},C=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return T(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?T(e,t):void 0}}(e))||t){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,x=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){x=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(x)throw n}}}},T=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r},D=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return A(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?A(e,t):void 0}}(e))||t){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,x=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){x=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(x)throw n}}}},A=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r},I=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}(e))||t){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,x=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){x=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(x)throw n}}}},M=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r},L=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}(e))||t){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,x=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){x=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(x)throw n}}}},w=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r};a.r(x),a.d(x,{JSPlayCtrl:function(){return Nt}});var O=16,B=1281,k=1282,N=1285,V=1287,U=1288,H=1289,W=1298,Y=1302,G=256,X=512,J=768,Z=1024,j=1280,z=1536,K=1792,q=2048,$=2304,Q=2560,ee=262144,te=352321537,ae=520093697,re=528482304,ie=16,ne=a(687),se=a.n(ne),xe=a(477),oe=a.n(xe);function le(e){return(le="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)})(e)}var _e=function(){function a(){e(this,a),this.startTime=0,this.curTime=0,this.timeWalk=0,this.preTimerStamp=0}return t(a,[{key:"Init",value:function(){this.startTime=this.GetCurTime()}},{key:"GetCurTime",value:function(){return this.curTime=24*(new Date).getDate()*60*60*1e3+60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds(),this.curTime}},{key:"GetTimerWalk",value:function(){return this.timeWalk=this.GetCurTime()-this.startTime,this.timeWalk<0&&(this.timeWalk=0),this.timeWalk}},{key:"timerReset",value:function(){this.startTime=0,this.curTime=0,this.timeWalk=0,this.preTimerStamp=0}}]),a}(),he=function(){function a(t,r,i,n){e(this,a),this.width=0,this.height=0,this.decoderObj=null,this.FirstFrame=!0,this.ready_frames=[],this.underflow=!0,this.sab=t,this.frameRate=30,this.needSetPreSoft=!1,this.decoderCurStatus=2,this.decoderOutSuccess=!1,this.decoderObjNeedReset=!1,this.oVideoRenderHandle=r,this.output=this.output.bind(this),this.reportError=this.reportError.bind(this),this.player=null,null!=i&&(this.player=i),this.curFrame=null,this.printfFlag=this.oVideoRenderHandle.printfFlag,this.nGetTotalFrameNum=0,this.nAverageDecodeTime=0,this.oDecodeTimer=null,this.runtimeInfoCBFun=null,this.pstRuntimeInfo={nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:0,nInputDataInterval:0,nFrameNumInterval:0,nAverageDecodeTime:0,nSystemFormat:0,nDetectRes:0,nMp4FileTime:0,nMp4TotalFrameNum:0,AbsTimeYear:0,AbsTimeMonth:0,AbsTimeDay:0,AbsTimeHour:0,AbsTimeMinute:0,AbsTimeSecond:0,AbsTimeMilliseconds:0},this.HardDecFrameCount=0,this.canvas=n,this.bSetStreamEnd=!1,this.bVisibility=!0,this.back_ready_frames=[],this.StartFrameTime=0,this.WaitForFrameFlag=0}return t(a,[{key:"initDecoder",value:function(){if(null==this.decoderObj)try{var e={output:this.output,error:this.reportError};this.decoderObj=new VideoDecoder(e)}catch(e){0==this.oVideoRenderHandle.firstFrame?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}""!=this.canvas&&null!=this.canvas&&(this.underflow&&(this.underflow=!1,this.oVideoRenderHandle.RenderFrame().then((function(){}))),this.oVideoRenderHandle.displayRunning=!0),this.decoderCurStatus=2,this.FirstFrame=!0}},{key:"inputData",value:function(e,t){null!=this.decoderObj&&(this.printfFlag>0&&console.log("VideoDecoder.js inputData videoInfo.timeStamp:"+t.timeStamp+",decodeQueueSize:"+this.decoderObj.decodeQueueSize+",frameLength:"+this.ready_frames.length),("configured"==this.decoderObj.state||this.FirstFrame)&&this.decodeProcess(e,t),(this.ready_frames.length>100||this.decoderObj.decodeQueueSize>100)&&(this.player?this.player.JSPlayM4_GetDecodeBufferSize(this.decoderObj.decodeQueueSize,this.ready_frames.length):postMessage({function:"GetDecodeBufferSize",rawSize:this.decoderObj.decodeQueueSize,frameSize:this.ready_frames.length})),t.nStreamEnd&&this.SetStreamEnd())}},{key:"concatenate",value:function(e){for(var t=0,a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];for(var n=0,s=r;n<s.length;n++){t+=s[n].length}for(var x=new e(t),o=0,l=0,_=r;l<_.length;l++){var h=_[l];x.set(h,o),o+=h.length}return x}},{key:"processData",value:function(e){for(var t=null,a=null,r=null,i=!1,n=!1,s=0,x=0;x<e.length-4;x++){if(0!=e[x]||0!=e[x+1]||0!=e[x+2]||1!=e[x+3]||103!=e[x+4]&&39!=e[x+4]||(0!=x?(n=!0,t=e.slice(x),s=x):t=e),0==e[x]&&0==e[x+1]&&0==e[x+2]&&1==e[x+3]&&(9==e[x+4]||6==e[x+4])){if(null==t)continue;null==a&&(a=e.slice(s,x),i=!0)}if(0==e[x]&&0==e[x+1]&&0==e[x+2]&&1==e[x+3]&&(101==e[x+4]||37==e[x+4])){i&&(r=e.slice(x));break}}return i?this.concatenate(Uint8Array,a,r):n?t:e}},{key:"processData1",value:function(e){return 0!=e[0]||0!=e[1]||0!=e[2]||1!=e[3]||9!=e[4]&&6!=e[4]?e:e.slice(5)}},{key:"formatVideoDecoderConfigure",value:function(e,t,a,r){var i="";5==t?(i="hvc1.1.6.L123.00",this.printfFlag>=0&&console.log("265 hard decoder")):256==t?(i="avc1.42001f",this.printfFlag>=0&&console.log("264 hard decoder")):console.log("Support Error: hard decoder only support 264 and 265 !!!");var n={codec:i,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=t&&this.needSetPreSoft&&(n.hardwareAcceleration="prefer-software"),n}},{key:"decodeProcess",value:function(e,t){this.frameRate!=t.frameRate&&(this.frameRate=t.frameRate),this.width!=t.width&&(this.width=t.width),this.height!=t.height&&(this.height=t.height),t.needSetPreSoft&&(this.needSetPreSoft=t.needSetPreSoft);var a=e;if(4!=this.decoderCurStatus&&null!=this.decoderObj)if(this.printfFlag>0&&console.log("VideoDecoder.js Decoder this.decoderObj.state:"+this.decoderObj.state),"configured"==this.decoderObj.state){var r=new EncodedVideoChunk({data:a,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});try{this.decoderObj.decode(r)}catch(e){0==this.oVideoRenderHandle.firstFrame?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}a=null,e=null,r=null,t.frameType}else if(t.isKeyFrame&&"unconfigured"==this.decoderObj.state){var i=this.formatVideoDecoderConfigure(e,t.codecType,t.width,t.height);if(""==i.codec)return-1;if(null!==this.decoderObj){try{this.decoderObj.configure(i)}catch(e){0==this.oVideoRenderHandle.firstFrame?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}a=this.processData(e),this.FirstFrame=!1;var n=new EncodedVideoChunk({data:a,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});try{this.decoderObj.decode(n)}catch(e){0==this.oVideoRenderHandle.firstFrame?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}i=null,a=null,e=null}}}},{key:"checkY",value:function(e,t,a){Uint8Array.prototype.compare=function(e,t,a){for(var r=0;r<a;r++)if(this[e+r]!==this[t+r])return-1;return 0};for(var r=0,i=new Uint8Array(e),n=(a-8)*t,s=0;s<8;s++)for(var x=n+s*t,o=0;o<t-16;o+=24){var l=i.compare(x+o,x+o+8,8),_=i.compare(x+o+8,x+o+16,8);0===l&&0===_&&(i[x+o]>122&&i[x+o]<=128||0===i[x+o])&&r++}return!(r>100)}},{key:"output",value:function(e){var t,a=this;if(this.printfFlag>0&&console.log("VideoDecoder.js output timestamp:"+e.timestamp+",decodeQueueSize:"+this.decoderObj.decodeQueueSize+",length:"+this.ready_frames.length),null!==this.decoderObj)if("configured"==this.decoderObj.state&&this.bVisibility){var r=e.timestamp;if(this.oVideoRenderHandle.VideoPrivateInfoMap.size>0){var i=this.oVideoRenderHandle.VideoPrivateInfoMap.get(r);if(null!=i){for(;i.linesInfo.length>0||i.fontInfo.length>0||i.imageInfo.length>0;)this.oVideoRenderHandle.oVideoRender.InputPrivateInfo(i.linesInfo.shift(),i.fontInfo.shift(),i.imageInfo.shift());this.oVideoRenderHandle.VideoPrivateInfoMap.delete(r)}}if(this.printfFlag>0&&console.log("output1 cb decodeQueueSize:"+this.decoderObj.decodeQueueSize+",length:"+this.ready_frames.length+",timestamp:"+r+",systime:"+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),this.oVideoRenderHandle.DecodeTypeFlagMap.size>0){var n,s=f(this.oVideoRenderHandle.DecodeTypeFlagMap.keys());try{for(s.s();!(n=s.n()).done;){var x=n.value;if(x==te&&1==this.oVideoRenderHandle.DecodeTypeFlagMap.get(x)&&null!=this.runtimeInfoCBFun&&null!=this.oDecodeTimer){var o=this.oDecodeTimer.GetTimerWalk();o<=0||o>1e7||this.nGetTotalFrameNum>1e5?(this.nGetTotalFrameNum=0,this.oDecodeTimer.Init()):(this.nGetTotalFrameNum++,this.nAverageDecodeTime=o/this.nGetTotalFrameNum,null!=this.runtimeInfoCBFun&&(this.pstRuntimeInfo.nRunTimeModule=2,this.pstRuntimeInfo.nStrVersion=1,this.pstRuntimeInfo.nFrameTimeStamp=r,this.pstRuntimeInfo.nFrameNum=0,this.pstRuntimeInfo.nErrorCode=te,this.pstRuntimeInfo.nInputDataInterval=0,this.pstRuntimeInfo.nFrameNumInterval=0,this.pstRuntimeInfo.nAverageDecodeTime=this.nAverageDecodeTime,this.runtimeInfoCBFun(this.pstRuntimeInfo)))}}}catch(e){s.e(e)}finally{s.f()}}if(null!=this.player&&null!=this.player.HardDecToJpegCBFun){++this.HardDecFrameCount;var l=e.displayWidth,_=e.displayHeight;(this.HardDecFrameCount-1)%this.player.HardDecToJpegInterval==0&&createImageBitmap(e).then((function(t){a.player?a.player._GetImage(t,"jpeg",0,0,l,_,a.HardDecFrameCount):postMessage({function:"bitmap",value:t,type:"jpeg",sx:0,sy:0,sw:e.displayWidth,sh:e.displayHeight,framenum:a.HardDecFrameCount})}))}if(""!=this.canvas&&null!=this.canvas){if(this.printfFlag>0&&console.log("VideoDecoder.js WaitForFrameFlag:"+this.WaitForFrameFlag+",frame.timestamp:"+e.timestamp+",StartFrameTime:"+this.StartFrameTime),2==this.WaitForFrameFlag&&e.timestamp>this.StartFrameTime&&0!=this.StartFrameTime)return e.close(),1;if(1==this.WaitForFrameFlag&&e.timestamp<this.StartFrameTime&&0!=this.StartFrameTime)return e.close(),1;var c;if(6==this.decoderCurStatus)if(this.back_ready_frames.length>200)e.close();else this.oVideoRenderHandle.findFramebyTime(e.timestamp,0).isKeyFrame?(this.back_ready_frames.reverse(),(c=this.ready_frames).push.apply(c,function(e){if(Array.isArray(e))return h(e)}(t=this.back_ready_frames)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),this.back_ready_frames.splice(0,this.back_ready_frames.length),createImageBitmap(e).then((function(t){a.back_ready_frames.push({image:t,timestamp:e.timestamp,displayWidth:e.displayWidth,displayHeight:e.displayHeight}),e.close()}))):(createImageBitmap(e).then((function(t){a.back_ready_frames.push({image:t,timestamp:e.timestamp,displayWidth:e.displayWidth,displayHeight:e.displayHeight}),e.close()})),this.decoderOutSuccess||(this.decoderOutSuccess=!0),this.decoderObj.decodeQueueSize<=1&&this.back_ready_frames.length<=1&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"})));else this.ready_frames.length>100?e.close():(this.ready_frames.push(e),this.decoderOutSuccess||(this.decoderOutSuccess=!0),this.decoderObj.decodeQueueSize<=1&&this.ready_frames.length<=1&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"})))}else if(e.close(),null!=this.player&&null!=this.player.runtimeCBFun&&1==this.GetStreamEnd()&&1==this.bSetStreamEnd){this.player.runtimeCBFun({nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:9}),this.bSetStreamEnd=!1}}else e.close()}},{key:"output2",value:function(e){var t=this;e.timestamp,createImageBitmap(e).then((function(a){e.close(),t.ready_frames.push(a)}))}},{key:"reportError",value:function(e){if(this.oVideoRenderHandle.DecodeTypeFlagMap.size>0){var t,a=f(this.oVideoRenderHandle.DecodeTypeFlagMap.keys());try{for(a.s();!(t=a.n()).done;){var r=t.value;128==r&&1==this.oVideoRenderHandle.DecodeTypeFlagMap.get(r)&&null!=this.runtimeInfoCBFun&&(this.pstRuntimeInfo.nRunTimeModule=2,this.pstRuntimeInfo.nStrVersion=1,this.pstRuntimeInfo.nFrameTimeStamp=timestamp,this.pstRuntimeInfo.nFrameNum=0,this.pstRuntimeInfo.nErrorCode=128,this.runtimeInfoCBFun(this.pstRuntimeInfo))}}catch(e){a.e(e)}finally{a.f()}}console.log("hardDecode reportError:"+e.message+",state:"+this.decoderObj.state+",frameRate:"+this.frameRate+"this.ready_frames.length:"+this.ready_frames.length),0==this.oVideoRenderHandle.firstFrame?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}},{key:"destroyDecoder",value:function(){var e=this;return new Promise((function(t,a){e.clearDecoderObjBuffer(),null!=e.decoderObj&&("closed"!=e.decoderObj.state&&e.decoderObj.close(),e.printfFlag>=0&&console.log(">>>JS 01 destroy decoderObj"),e.decoderObj=null),e.decoderCurStatus=4,e.decoderOutSuccess=!1,e.FirstFrame=!0,e.needSetPreSoft=!1,e.decoderObjNeedReset=!1,e.curFrame=null,null!==e.oDecodeTimer&&(e.oDecodeTimer.timerReset(),e.oDecodeTimer=null),t()}))}},{key:"resetDecoder",value:function(){var e=this;return new Promise((function(t,a){e.destroyDecoder().then((function(){e.initDecoder(),console.log("%c reset hard decoder","color:red"),t()}),(function(){a()}))}))}},{key:"clearDecoderObjBuffer",value:function(){if(6==this.decoderCurStatus){for(var e=this.ready_frames.length,t=0;t<e;t++){var a=this.ready_frames.shift();null!=a.image&&null!=a.image&&a.image.close()}this.ready_frames.splice(0,this.ready_frames.length);for(var r=this.back_ready_frames.length,i=0;i<r;i++){var n=this.back_ready_frames.shift();null!=n.image&&null!=n.image&&n.image.close()}this.back_ready_frames.splice(0,this.back_ready_frames.length)}else{for(var s=this.ready_frames.length,x=0;x<s;x++)this.ready_frames.shift().close();this.ready_frames.splice(0,this.ready_frames.length)}this.resetDecoderObj()}},{key:"resetDecoderObj",value:function(){null!=this.decoderObj&&"configured"==this.decoderObj.state&&(this.decoderObj.reset(),this.FirstFrame=!0)}},{key:"SetStreamEnd",value:function(){return null!=this.decoderObj&&0==this.decoderObj.decodeQueueSize&&0==this.ready_frames.length&&(this.decoderObj.flush(),console.log("flush")),this.bSetStreamEnd=!0,1}},{key:"GetStreamEnd",value:function(){return null!=this.decoderObj&&(0==this.decoderObj.decodeQueueSize&&0==this.ready_frames.length||void 0)}},{key:"NotifyBackPlay",value:function(e,t,a){var r=this;return 0!=t?this.resetDecoder().then((function(){r.decoderCurStatus=e?6:2,r.StartFrameTime=t,r.WaitForFrameFlag=a})):(this.decoderCurStatus=e?6:2,this.StartFrameTime=t,this.WaitForFrameFlag=a),1}},{key:"GetFrame",value:function(){var e=this;return new Promise((function(t,a){if(null!=e.curFrame){var r=e.ready_frames.shift();6==e.decoderCurStatus?null!=r.image&&null!=r.image&&r.image.close():r.close(),r=null,e.curFrame=null}0!=e.ready_frames.length?(e.curFrame=e.ready_frames[0],t(e.curFrame)):(e.curFrame=null,t(null))}))}},{key:"GetFrameBufferLength",value:function(){return this.ready_frames.length}},{key:"GetImageYUV",value:function(e,t,a,r,i){var n=this;return new Promise((function(s,x){var o=null;if(null!=n.curFrame?o=n.curFrame:0!=n.ready_frames.length&&(o=n.ready_frames[0]),null!=o){var l=o.displayWidth,_=o.displayHeight,h=o;6==n.decoderCurStatus&&(h=o.image),0==t&&0==a&&0==r&&0==i&&(r=l,i=_),createImageBitmap(h).then((function(s){n.player?n.player._GetImage(s,e,t,a,r,i,0):postMessage({function:"bitmap",value:s,type:e,sx:t,sy:a,sw:r,sh:i,framenum:0})})),x()}else s({yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1})}))}},{key:"SetPrintLogFlag",value:function(e){return this.printfFlag=e,1}},{key:"SetRunTimeInfoCallBackFun",value:function(e,t){return this.runtimeInfoCBFun=t,1}},{key:"SetRunTimeInfoCallbackType",value:function(e,t,a){return t==te&&(this.nGetTotalFrameNum=0,a?null==this.oDecodeTimer&&(this.oDecodeTimer=new _e,this.oDecodeTimer.Init()):null!==this.oDecodeTimer&&(this.oDecodeTimer.timerReset(),this.oDecodeTimer=null)),1}},{key:"IsVisible",value:function(e){return this.bVisibility=e,1}}]),a}(),fe={d:function(e,t){for(var a in t)fe.o(t,a)&&!fe.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},ce={};function ue(e){return(ue="function"==typeof Symbol&&"symbol"==le(Symbol.iterator)?function(e){return le(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":le(e)})(e)}fe.r(ce),fe.d(ce,{ERRCODE:function(){return Ie},SRCALLBACKTYPE:function(){return Ve},SRDISPLAYEFFECT:function(){return we},SRFISHPARAMTYPE:function(){return Be},SRIMAGEROTATEANGLE:function(){return We},SRPIXELFORMAT:function(){return Oe},SRPOSTPROCTYPE:function(){return He},SRPTZDISPLAYMODE:function(){return ke},SRRENDERSTATETYPE:function(){return Ue},SRSETRECTTYPE:function(){return Me},SRVIEWLIMITATERATE:function(){return Le},SRVIEWTYPE:function(){return Ne}});var de=32,pe=1024,me=.05,Se=1e-6,Re=3.1415926,Pe=1.57,be=.02,ye=1e3,Ee=.78539815,ge=50,Fe=50,ve=-1,Ce=Re/18,Te=Re/3,De=Re/6,Ae=Re/9,Ie={SR_OK:1,SR_ERR_NOT_SUPPORT:2147483649,SR_ERR_SUBPORT:2147483650,SR_ERR_ALLOC_MEMORY:2147483651,SR_ERR_CALL_ORDER:2147483652,SR_ERR_PARAM:2147483653,SR_ERR_CAPTURE:2147483654,SR_ERR_SUBPORT_FULL:2147483655,SR_ERR_SHADER:2147483656,SR_ERR_3D_MODEL:2147483657,SR_ERR_FONT:2147483658,SR_ERR_MEMORY_LIMIT:2147483659,SR_ERR_WEBGPU_RESOURCE:2147483660,SR_ERR_WEBGL_RESOURCE:2147483661,SR_ERR_CANVAS:2147483662},Me={SR_SRT_NULL:0,SR_SRT_SRC:1,SR_SRT_DST:2},Le={SR_VLR_BLACK_NULL:0,SR_VLR_BLACK_1216_2832:1},we={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23,SR_DE_ELLIPSOID_VIEWLIMITED:28},Oe={SR_PF_NULL:0,SR_PF_YV12:1,SR_PF_NV12:2,SR_PF_I420:3,SR_PF_RGB565:4,SR_PF_RGBA32:5,SR_PF_NV21:6,SR_PF_SURFACE:256},Be={SR_FPT_NULL:0,SR_FPT_CENTER:1,SR_FPT_ANGLE:2,SR_FPT_ZOOM:3,SR_FPT_PTZ:4},ke={SR_DM_NULL:0,SR_DM_RECT:1,SR_DM_RANGE:2},Ne={SR_VT_NULL:0,SR_VT_ROTATION_X:1,SR_VT_ROTATION_Y:2,SR_VT_SCALE:3},Ve={SR_CBT_NULL:0,SR_CBT_OUT:1},Ue={SR_RST_NULL:0,SR_RST_VERTICALFLIP:1,SR_RST_BACK_CULL:2,SR_RST_IMAGE_ROTATE:3},He={SR_PPT_NULL:0,SR_PPT_BRIGHTNESS:1,SR_PPT_HUE:2,SR_PPT_SATURATION:3,SR_PPT_CONTRAST:4,SR_PPT_SHARPNESS:5},We={SR_IRA_0:1,SR_IRA_90:2,SR_IRA_180:3,SR_IRA_270:4},Ye=1e-6,Ge="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Xe,Je,Ze,je=function(e,t,a,r,i){var n=1/Math.tan(t/2);if(e[0]=n/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0){var s=1/(r-i);e[10]=(i+r)*s,e[14]=2*i*r*s}else e[10]=-1,e[14]=-2*r;return e};b(),Xe=new Ge(4),Ge!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0,Xe[3]=0),b(),y(1,0,0),y(0,1,0),E(),E(),Je=new Ge(9),Ge!=Float32Array&&(Je[1]=0,Je[2]=0,Je[3]=0,Je[5]=0,Je[6]=0,Je[7]=0),Je[0]=1,Je[4]=1,Je[8]=1,Ze=new Ge(2),Ge!=Float32Array&&(Ze[0]=0,Ze[1]=0);var ze="\nattribute vec4 position; \nattribute vec4 texCoord; \nvarying vec4 pp; \nuniform int bCapture; \n\nvoid main(void) {\n  if(bCapture == 1)\n  {\n    gl_Position = position;\n    gl_Position.y = -position.y;\n  }\n  else\n  {\n    gl_Position = position;\n  }\n  pp = texCoord;\n}\n",Ke="\nprecision mediump float;\nvarying vec4 pp;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform int bDataFormat;\nuniform float fAlpha;\nuniform int bDrawImage;\n\nvoid main(void)\n{\n    float r,g,b,y,u,v;\n    if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, pp.st).r;\n        u = texture2D(Utexture, pp.st).r;\n        v = texture2D(Vtexture, pp.st).r;\n        \n        y=1.1643*(y-0.0625);\n        u=u-0.5; \n        v=v-0.5; \n\n        r=y+1.5958*v; \n        g=y-0.39173*u-0.81290*v; \n        b=y+2.017*u; \n\n        gl_FragColor=vec4(r, g, b, 1.0);\n    }\n    else if(bDataFormat == 1)\n    {\n        gl_FragColor = texture2D(Ytexture, pp.st);\n    }\n    \n    if(bDrawImage == 1)\n    {\n        gl_FragColor.a *= fAlpha; \n    }\n}\n",qe="\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n",$e="\n    attribute vec4 position; \n    attribute vec4 texCoord; \n    uniform   mat4   matRotate; \n    varying vec4 pp; \n    uniform int bCapture;\n\n    void main() \n    { \n        gl_Position = position * matRotate; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -gl_Position.y;\n        }\n        pp = texCoord; \n    } \n",Qe="\n    precision mediump float; \n    uniform sampler2D texture;\n    varying lowp vec4 pp; \n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n",et=d((function e(){u(this,e),this.fFov=1.57,this.fAspect=1,this.fNear=.1,this.fFar=1e3,this.fTheta=0,this.fAlpha=0,this.fBeta=0,this.fScale=1,this.bOrtho=!1,this.matView=p(),this.matProj=p(),this.vecEye=y(0,0,this.fScale),this.vecCenter=y(0,0,-100),this.vecUp=y(0,1,0)}),[{key:"SetYaw",value:function(e){this.fTheta=e}},{key:"GetYaw",value:function(){return this.fTheta}},{key:"SetPitch",value:function(e){this.fAlpha=e}},{key:"GetPitch",value:function(){return this.fAlpha}},{key:"SetRoll",value:function(e){this.fBeta=e}},{key:"GetRoll",value:function(){return this.fBeta}},{key:"SetScale",value:function(e){this.fScale=e,this.vecEye[2]=this.fScale}},{key:"GetScale",value:function(){return this.fScale}},{key:"SetEye",value:function(e,t,a){this.vecEye[0]=e,this.vecEye[1]=t,this.vecEye[2]=a}},{key:"SetCenter",value:function(e,t,a){this.vecCenter[0]=e,this.vecCenter[1]=t,this.vecCenter[2]=a}},{key:"SetFov",value:function(e){this.fFov=e}},{key:"SetAspect",value:function(e){this.fAspect=e}},{key:"SetNear",value:function(e){this.fNear=e}},{key:"SetFar",value:function(e){this.fFar=e}},{key:"SetOrtho",value:function(e){this.bOrtho=e}},{key:"UpdateCamera",value:function(e,t){if(!(e<=0||t<=0)){1==this.bOrtho?(_=this.matProj,h=(2-1.5*this.fAlpha)*(e/t),f=2-1.5*this.fAlpha,c=this.fNear,u=this.fFar,d=1/(0-h),m=1/(0-f),b=1/(c-u),_[0]=-2*d,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=-2*m,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=2*b,_[11]=0,_[12]=(0+h)*d,_[13]=(f+0)*m,_[14]=(u+c)*b,_[15]=1,this.matProj[12]=0,this.matProj[13]=0):je(this.matProj,this.fFov,e/t,this.fNear,this.fFar);var a=y(1,0,0),r=y(0,1,0),i=y(0,0,1),n=p();P(n,this.vecEye,this.vecCenter,this.vecUp);var s=p(),x=p(),o=p(),l=p();R(x,s,-this.fAlpha,a),R(o,x,-this.fTheta,r),R(l,o,-this.fBeta,i),S(this.matView,n,l)}var _,h,f,c,u,d,m,b}},{key:"GetView",value:function(){return this.matView}},{key:"GetProj",value:function(){return this.matProj}}]),tt=d((function e(){u(this,e),this.fFov=Pe,this.fAspect=1,this.fNear=.1,this.fFar=1e3,this.fAlpha=0,this.fTheta=0,this.fScale=1,this.bPano=!1,this.matView=p(),this.matProj=p(),this.vecEye=y(0,0,.99),this.vecCenter=y(0,0,-100),this.vecUp=y(0,1,0)}),[{key:"SetPitch",value:function(e){this.fAlpha=e}},{key:"GetPitch",value:function(){return this.fAlpha}},{key:"SetYaw",value:function(e){this.fTheta=e}},{key:"GetYaw",value:function(){return this.fTheta}},{key:"SetScale",value:function(e){this.fScale=e}},{key:"GetScale",value:function(){return this.fScale}},{key:"SetFov",value:function(e){this.fFov=e}},{key:"SetAspect",value:function(e){this.fAspect=e}},{key:"SetNear",value:function(e){this.fNear=e}},{key:"SetPano",value:function(e){this.bPano=e}},{key:"SetFar",value:function(e){this.fFar=e}},{key:"UpdateCamera",value:function(e,t){if(!(e<=0||t<=0)){var a=e/t;1==this.bPano?(je(this.matProj,this.fScale,a,this.fNear,this.fFar),this.matProj[0]*=-1,this.matProj[5]*=-1):(je(this.matProj,this.fFov+this.fScale-1,a,this.fNear,this.fFar),this.matProj[0]=this.matProj[0]*((this.fAlpha- -1.57)/Re*.5-1),this.matProj[5]=this.matProj[0]*a);var r=y(1,0,0),i=y(0,1,0),n=p();P(n,this.vecEye,this.vecCenter,this.vecUp);var s=p(),x=p(),o=p();R(x,s,-this.fAlpha,r),R(o,x,-this.fTheta,i),S(this.matView,n,o)}}},{key:"GetView",value:function(){return this.matView}},{key:"GetProj",value:function(){return this.matProj}}]),at=d((function e(){u(this,e),this.onlySupportedWebGL1=!1,this.videoShaderProgram=0,this.vertexPosBuffer=0,this.texturePosBuffer=0,this.indicesPosBuffer=0,this.ctx=null,this.enPixelFormat=Oe.SR_PF_NULL,this.nTextureNum=0,this.nSurfaceTexture=[],this.nSurfaceTexture[0]=0,this.nSurfaceTexture[1]=0,this.nSurfaceTexture[2]=0,this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.bSrcRect=!1,this.fSrcUseLeft=0,this.fSrcUseRight=1,this.fSrcUseTop=0,this.fSrcUseBottom=1,this.fDstUseLeft=0,this.fDstUseRight=1,this.fDstUseTop=0,this.fDstUseBottom=1,this.nPostProc=0,this.fBrightness=0,this.fHue=0,this.fSaturation=0,this.fContrast=0,this.fSharpness=0,this.nWndWidth=0,this.nWndHeight=0,this.bCullBack=!1,this.nImageRotateAngle=We.SR_IRA_0,this.matRotate=p(),this.bIsCapturing=!1,this.nCaptureWidth=0,this.nCaptureHeight=0,this.nCaptureRTTex=0,this.nCaptureFBO=0,this.nCaptureFBOWidth=0,this.nCaptureFBOHeight=0,this.nCaptureDepthbuffer=0,this.bCaptureResInit=!1,this.pFishParamManager=null,this.nFECPort=ve,this.pstFishParam=[],this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.fRotateLimitX=0,this.fRotateLimitY=0,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pSpherePos=null,this.pSphereTex=null,this.pSphereInd=null,this.nSpherePosNum=0,this.nSpherePosSize=0,this.nSphereTexSize=0,this.fBlackModeMinY=0,this.fBlackModeMaxY=0,this.enBlackSize=Le.SR_VLR_BLACK_NULL,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.fImageWidth=1,this.fImageHeight=1,this.fTexCenterX=.5,this.fTexCenterY=.5,this.fTexRadius=.5,this.pfuncCBIn=null,this.pUserIn=null,this.pfuncCBOut=null,this.pUserOut=null,this.nMosaicShaderProgram=0,this.nLineShaderProgram=0,this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,this.glLinePosBuffer=0,this.glLineClrBuffer=0,this.nLineTriangleNum=0,this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,this.glBlockPosBuffer=0,this.glBlockClrBuffer=0,this.nBlockShaderProgram=0,this.textCanvas=null,this.textCanvasCtx=null,this.nDrawFontWidth=0,this.nDrawFontHeight=0,this.nFontColorTexture=0,this.pFontColorBuffer=0,this.nFontShaderProgram=0,this.nFontBGNum=0,this.pstFontBGLines=[],this.pFontPosVertices=null,this.glFontVertexPosBuffer=0,this.glFontTexturePosBuffer=0,this.nImageShaderProgram=0,this.pImagePosVertices=null,this.pImageClrVertices=null,this.glImagePosBuffer=0,this.glImageClrBuffer=0,this.nImageColorTexture=null,this.nDrawImageWidth=0,this.nDrawImageHeight=0,this.nImageColorTextures=[],this.nImageColorTextures[0]=0,this.nImageColorTextures[1]=0,this.nImageColorTextures[2]=0,this.bFirstDrawImage=!0,this.bAntialias=!1,this.bRenderToTex=!1,this.msaaFrameBuffer=0,this.renderBuffer=0,this.stOriginalDisplayRect={},this.bCaptureOriginal=!1}),[{key:"SetCanvasSize",value:function(e,t){return e<=0||t<=0?Ie.SR_ERR_PARAM:(this.nWndWidth=e,this.nWndHeight=t,Ie.SR_OK)}},{key:"Init",value:function(e,t,a,r){if(null==e)return Ie.SR_ERR_PARAM;if(null==this.ctx&&(this.ctx=e),t==Oe.SR_PF_NULL)return Ie.SR_ERR_NOT_SUPPORT;var i=Ie.SR_OK;return a!=we.SR_DE_FISH_SEMISPHERE&&a!=we.SR_DE_PANORAMA_SPHERE&&a!=we.SR_DE_PANORAMA_PLANET&&a!=we.SR_DE_ELLIPSOID_VIEWLIMITED&&a!=we.SR_DE_FISH_CYLINDER_CEILING&&a!=we.SR_DE_FISH_CYLINDER_FLOOR&&a!=we.SR_DE_FISH_PLANET&&a!=we.SR_DE_FISH_CYLINDER_SPLIT_CEILING&&a!=we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR&&a!=we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&a!=we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL||(this.b3DPort=!0,this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0)),i=this._InitVideoVertex(t,a,r),Ie.SR_OK!=i?i:(i=this._InitVideoShader(t,a),Ie.SR_OK!=i?i:(i=this._InitCamera(a),Ie.SR_OK!=i?i:(this.enPixelFormat=t,this.enDisplayEffect=a,a!=we.SR_DE_FISH_SEMISPHERE&&a!=we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&a!=we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL||this.ctx.enable(this.ctx.CULL_FACE),Ie.SR_OK)))}},{key:"DeInit",value:function(){}},{key:"SetTextureNum",value:function(e){return this.nTextureNum=e,Ie.SR_OK}},{key:"SetTextures",value:function(e,t){return this.nSurfaceTexture[e]=t,Ie.SR_OK}},{key:"SetWndResolution",value:function(e,t){return e<=0||t<=0?Ie.SR_ERR_PARAM:(this.nWndWidth=e,this.nWndHeight=t,Ie.SR_OK)}},{key:"GetWndResolution",value:function(e){return e.nWndWidth=this.nWndWidth,e.nWndHeight=this.nWndHeight,Ie.SR_OK}},{key:"SetDisplayRect",value:function(e,t,a,r,i){if(null===this.ctx)return Ie.SR_ERR_CALL_ORDER;if(this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;var n=g(e),s=g(t),x=g(e+a),o=g(t+r);if(n>=x||s>=o)return Ie.SR_ERR_PARAM;var l=null,_=null;switch(i){case Me.SR_SRT_SRC:if(this.fSrcUseLeft=n,this.fSrcUseTop=s,this.fSrcUseRight=x,this.fSrcUseBottom=o,We.SR_IRA_0==this.nImageRotateAngle)l=new Float32Array([this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom]);else if(We.SR_IRA_90==this.nImageRotateAngle){var h=this.fSrcUseTop,f=this.fSrcUseBottom,c=1-this.fSrcUseRight,u=1-this.fSrcUseLeft;this.fSrcUseLeft=h,this.fSrcUseRight=f,this.fSrcUseTop=c,this.fSrcUseBottom=u,l=new Float32Array([this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop])}else if(We.SR_IRA_180==this.nImageRotateAngle){var d=1-this.fSrcUseRight,p=1-this.fSrcUseLeft,m=1-this.fSrcUseBottom,S=1-this.fSrcUseTop;this.fSrcUseLeft=d,this.fSrcUseRight=p,this.fSrcUseTop=m,this.fSrcUseBottom=S,l=new Float32Array([this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop])}else if(We.SR_IRA_270==this.nImageRotateAngle){var R=1-this.fSrcUseBottom,P=1-this.fSrcUseTop,b=this.fSrcUseLeft,y=this.fSrcUseRight;this.fSrcUseLeft=R,this.fSrcUseRight=P,this.fSrcUseTop=b,this.fSrcUseBottom=y,l=new Float32Array([this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom])}this.bSrcRect=!0,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,l),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),l=null;break;case Me.SR_SRT_DST:this.fDstUseLeft=n,this.fDstUseTop=s,this.fDstUseRight=x,this.fDstUseBottom=o,(_=new Float32Array(12))[0]=2*this.fDstUseLeft-1,_[1]=1-2*this.fDstUseTop,_[2]=2*this.fDstUseLeft-1,_[3]=1-2*this.fDstUseBottom,_[4]=2*this.fDstUseRight-1,_[5]=1-2*this.fDstUseTop,_[6]=2*this.fDstUseRight-1,_[7]=1-2*this.fDstUseTop,_[8]=2*this.fDstUseLeft-1,_[9]=1-2*this.fDstUseBottom,_[10]=2*this.fDstUseRight-1,_[11]=1-2*this.fDstUseBottom,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,_),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),_=null;break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"SetImagePostProcess",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(He.SR_PPT_SHARPNESS==e||He.SR_PPT_HUE==e){if(0-t>Se||t-1>Se)return Ie.SR_ERR_PARAM}else if((He.SR_PPT_BRIGHTNESS==e||He.SR_PPT_SATURATION==e||He.SR_PPT_CONTRAST==e)&&(-1-t>Se||t-1>Se))return Ie.SR_ERR_PARAM;switch(e){case He.SR_PPT_BRIGHTNESS:this.fBrightness=t;break;case He.SR_PPT_HUE:this.fHue=t;break;case He.SR_PPT_SATURATION:this.fSaturation=t;break;case He.SR_PPT_CONTRAST:this.fContrast=t;break;case He.SR_PPT_SHARPNESS:this.fSharpness=t;break;default:return Ie.SR_ERR_NOT_SUPPORT}return Math.abs(this.fBrightness-0)<Se&&Math.abs(this.fHue-0)<Se&&Math.abs(this.fSaturation-0)<Se&&Math.abs(this.fContrast-0)<Se&&Math.abs(this.fSharpness-0)<Se?this.nPostProc=0:this.nPostProc=1,Ie.SR_OK}},{key:"SetRenderState",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;switch(e){case Ue.SR_RST_VERTICALFLIP:if(this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;break;case Ue.SR_RST_BACK_CULL:if(!this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;Math.abs(t-0)<Se?this.bCullBack=!1:this.bCullBack=!0;break;case Ue.SR_RST_IMAGE_ROTATE:if(this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;var a=null,r=We.SR_IRA_0,i=y(0,0,1),n=p();if(Math.abs(t-0)<Se){if(this.nImageRotateAngle==r)break;a=this.bSrcRect?new Float32Array([this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom]):new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]),m(this.matRotate)}else if(Math.abs(t-90)<Se){if(r=We.SR_IRA_90,this.nImageRotateAngle==r)break;a=this.bSrcRect?new Float32Array([this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop]):new Float32Array([0,1,1,1,0,0,0,0,1,1,1,0]),R(this.matRotate,n,1.5707963,i)}else if(Math.abs(t-180)<Se){if(r=We.SR_IRA_180,this.nImageRotateAngle==r)break;a=this.bSrcRect?new Float32Array([this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop]):new Float32Array([1,1,1,0,0,1,0,1,1,0,0,0]),R(this.matRotate,n,Re,i)}else{if(!(Math.abs(t-270)<Se))return Ie.SR_ERR_PARAM;if(r=We.SR_IRA_270,this.nImageRotateAngle==r)break;a=this.bSrcRect?new Float32Array([this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseRight,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseLeft,this.fSrcUseBottom]):new Float32Array([1,0,0,0,1,1,1,1,0,0,0,1]),R(this.matRotate,n,3*Re/2,i)}if(null==a)return Ie.SR_ERR_NOT_SUPPORT;var s=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,s),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,a,this.ctx.STATIC_DRAW),this.texturePosBuffer=s,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.nImageRotateAngle=r;break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"SetVideoResolution",value:function(e,t){return null==this.ctx||e<=0||t<=0?Ie.SR_ERR_CALL_ORDER:(this.frameDisplayWidth=e,this.frameDisplayHeight=t,Ie.SR_OK)}},{key:"GetCaptureSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==e.nWidth||null==e.nWidth||null==e.nHeight||null==e.nHeight)return Ie.SR_ERR_PARAM;if(1==t&&this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;var a=0,r=0;if(0==e.nWidth&&0==e.nHeight)switch(this.enDisplayEffect){case we.SR_DE_FISH_PTZ_WALL:case we.SR_DE_FISH_PTZ_CEILING:case we.SR_DE_FISH_PTZ_FLOOR:a=Math.round(5*this.frameDisplayHeight/8),r=Math.round(3*a/4);break;case we.SR_DE_NULL:t?(a=Math.round(this.frameDisplayWidth),r=Math.round(this.frameDisplayHeight)):(a=Math.round((this.fSrcUseRight-this.fSrcUseLeft)*this.frameDisplayWidth),r=Math.round((this.fSrcUseBottom-this.fSrcUseTop)*this.frameDisplayHeight));break;case we.SR_DE_FISH_ORIGINAL:case we.SR_DE_FISH_SEMISPHERE:case we.SR_DE_PANORAMA_SPHERE:case we.SR_DE_PANORAMA_PLANET:case we.SR_DE_ELLIPSOID_VIEWLIMITED:case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_FLOOR:case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:case we.SR_DE_FISH_PLANET:case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:a=Math.round(this.frameDisplayWidth),r=Math.round(this.frameDisplayHeight);break;case we.SR_DE_FISH_PANORAMA_FLOOR_360:case we.SR_DE_FISH_PANORAMA_CEILING_360:this.frameDisplayHeight>=2048?(a=6144,r=864):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(a=4096,r=576):(a=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*this.frameDisplayWidth/16),a=Math.round(2*a),r=Math.round(r/2));break;case we.SR_DE_FISH_PANORAMA_FLOOR_180:case we.SR_DE_FISH_PANORAMA_CEILING_180:this.frameDisplayHeight>=3072?(a=4096,r=2304):this.frameDisplayHeight>=2048&&3072>this.frameDisplayHeight?(a=3072,r=1728):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(a=2048,r=1152):(a=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*a/16));break;case we.SR_DE_FISH_PANORAMA_WALL:a=Math.round(this.frameDisplayHeight),r=Math.round(9*a/16);break;default:return Ie.SR_ERR_PARAM}else a=Math.round(e.nWidth),r=Math.round(e.nHeight);return a<16||r<16?Ie.SR_ERR_PARAM:(this.nCaptureWidth=4*Math.round(a/4),this.nCaptureHeight=Math.round(r),e.nWidth=this.nCaptureWidth,e.nHeight=this.nCaptureHeight,e.nBufferLen=this.nCaptureWidth*this.nCaptureHeight*4,this.bCaptureOriginal=t,Ie.SR_OK)}},{key:"CaptureScreen",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;var a=Ie.SR_OK;if(a=this._BeginCapture(),Ie.SR_OK!=a)return this.bIsCapturing=!1,a;if(1==this.bCaptureOriginal&&(this.stOriginalDisplayRect.fLeft=this.fSrcUseLeft,this.stOriginalDisplayRect.fTop=this.fSrcUseTop,this.stOriginalDisplayRect.fWidth=this.fSrcUseRight-this.fSrcUseLeft,this.stOriginalDisplayRect.fHeight=this.fSrcUseBottom-this.fSrcUseTop,a=this.SetDisplayRect(0,0,1,1,Me.SR_SRT_SRC),Ie.SR_OK!=a))return this.bIsCapturing=!1,a;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var r=this.ctx.getAttribLocation(this.videoShaderProgram,"position");if(r<0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.b3DPort?this.ctx.vertexAttribPointer(r,3,this.ctx.FLOAT,!1,0,0):this.ctx.vertexAttribPointer(r,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(r),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var i=this.ctx.getAttribLocation(this.videoShaderProgram,"texCoord");if(i<0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.vertexAttribPointer(i,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(i),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var n=this.enDisplayEffect,s=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(s<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(s,1);var x=this.ctx.getUniformLocation(this.videoShaderProgram,"bDataFormat");if(x<=0)return Ie.SR_ERR_WEBGL_RESOURCE;switch(this.enPixelFormat){case Oe.SR_PF_YV12:case Oe.SR_PF_I420:this.ctx.uniform1i(x,0);break;case Oe.SR_PF_NV12:break;case Oe.SR_PF_RGBA32:case Oe.SR_PF_SURFACE:this.ctx.uniform1i(x,1);break;default:return Ie.SR_ERR_NOT_SUPPORT}var o=this.ctx.getUniformLocation(this.videoShaderProgram,"bDrawImage");this.ctx.uniform1i(o,0);var l=this.ctx.getUniformLocation(this.videoShaderProgram,"fAlpha");switch(this.ctx.uniform1f(l,0),n){case we.SR_DE_NULL:break;case we.SR_DE_FISH_ORIGINAL:case we.SR_DE_FISH_PTZ_CEILING:case we.SR_DE_FISH_PTZ_FLOOR:case we.SR_DE_FISH_PTZ_WALL:case we.SR_DE_FISH_PANORAMA_CEILING_360:case we.SR_DE_FISH_PANORAMA_CEILING_180:case we.SR_DE_FISH_PANORAMA_FLOOR_360:case we.SR_DE_FISH_PANORAMA_FLOOR_180:case we.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;var _={},h=Ie.SR_OK;if(h=this.pFishParamManager.GetRenderParam(this.nFECPort,_),Ie.SR_OK!=h)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),h;if(we.SR_DE_FISH_ORIGINAL==n){var f=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(f<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(f,_.bBlack);var c=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(c<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(c,_.bCut)}if(we.SR_DE_FISH_PTZ_CEILING==n||we.SR_DE_FISH_PTZ_FLOOR==n||we.SR_DE_FISH_PTZ_WALL==n){var u=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(u<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(u,_.fCosH);var d=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(d<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(d,_.fSinH);var p=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(p<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(p,_.fCosV);var m=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(m<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(m,_.fSinV);var S=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(S<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(S,_.fZoom)}if(we.SR_DE_FISH_PANORAMA_CEILING_360==n||we.SR_DE_FISH_PANORAMA_CEILING_180==n||we.SR_DE_FISH_PANORAMA_FLOOR_360==n||we.SR_DE_FISH_PANORAMA_FLOOR_180==n){var R=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(R<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(R,_.fAngle)}var P=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(P<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(P,_.fRXLeft);var b=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(b<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(b,_.fRXRight);var y=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(y<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(y,_.fRYTop);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(E<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(E,_.fRYBottom);break;case we.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var g=this.pCamera.GetView(),F=this.pCamera.GetProj(),v=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(v<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(v,!1,g);var C=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(C<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(C,!1,F);break;case we.SR_DE_PANORAMA_SPHERE:case we.SR_DE_ELLIPSOID_VIEWLIMITED:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var T=this.pCamera.GetView(),D=this.pCamera.GetProj(),A=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(A<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(A,!1,T);var I=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(I<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(I,!1,D);break;case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_FLOOR:case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var M=this.pCamera.GetView(),L=this.pCamera.GetProj(),w=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(w<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(w,!1,M);var O=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(O<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(O,!1,L);break;case we.SR_DE_FISH_PLANET:case we.SR_DE_PANORAMA_PLANET:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(this.fRotateX),this.pCamera.SetYaw(3.14+this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var B=this.pCamera.GetView(),k=this.pCamera.GetProj(),N=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(N<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(N,!1,B);var V=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(V<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(V,!1,k);break;case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(null==this.pFishParamManager)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;var U={},H=Ie.SR_OK;if(H=this.pFishParamManager.GetRenderParam(this.nFECPort,U),Ie.SR_OK!=H)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),H;this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var W=this.pCamera.GetView(),Y=this.pCamera.GetProj(),G=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(G<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(G,!1,W);var X,J=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(J<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(J,!1,Y),X=Math.abs(.785-this.fRotateX)<.0025?.785:this.fRotateX;var Z=new Float32Array([0,1,0,2*-X]),j=this.ctx.getUniformLocation(this.videoShaderProgram,"vecCylinderParam");if(j<=0)return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.uniform4f(j,Z[0],Z[1],Z[2],Z[3]),we.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.enDisplayEffect){var z=this.ctx.getUniformLocation(this.videoShaderProgram,"fTextureOffset");if(z<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(z,this.fRotateY)}else{var K=this.ctx.getUniformLocation(this.videoShaderProgram,"fTextureOffset");if(K<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(K,-this.fRotateY)}var q=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(q<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(q,U.fRXLeft);var $=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if($<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f($,U.fRXRight);var Q=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(Q<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(Q,U.fRYTop);var ee=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(ee<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(ee,U.fRYBottom);break;default:return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_NOT_SUPPORT}if(this.nCaptureWidth<=0||this.nCaptureHeight<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CANVAS;if(this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==Oe.SR_PF_RGBA32||this.enPixelFormat==Oe.SR_PF_SURFACE){this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var te=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(te,0)}else{if(this.enPixelFormat!=Oe.SR_PF_YV12&&this.enPixelFormat!=Oe.SR_PF_I420)return Ie.SR_ERR_NOT_SUPPORT;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var ae=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(ae,0),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var re=this.ctx.getUniformLocation(this.videoShaderProgram,"Utexture");this.ctx.uniform1i(re,1),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var ie=this.ctx.getUniformLocation(this.videoShaderProgram,"Vtexture");this.ctx.uniform1i(ie,2)}if(this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLES,0,6);else if(this.enDisplayEffect==we.SR_DE_FISH_SEMISPHERE||this.enDisplayEffect==we.SR_DE_FISH_PLANET){if(this.nSemiSpherePosNum<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==we.SR_DE_PANORAMA_SPHERE||this.enDisplayEffect==we.SR_DE_PANORAMA_PLANET||this.enDisplayEffect==we.SR_DE_ELLIPSOID_VIEWLIMITED){if(this.nSpherePosNum<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.indicesPosBuffer),this.ctx.drawElements(this.ctx.TRIANGLES,6*this.nSpherePosNum,this.ctx.UNSIGNED_SHORT,0),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,null)}else if(this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR){if(this.nCylinderPosNum<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}if(this.ctx.useProgram(null),t||this.DoCallBack(),1==this.bCaptureOriginal){var ne=this.nImageRotateAngle;if(this.bSrcRect=!1,a=this.SetRenderState(Ue.SR_RST_IMAGE_ROTATE,0),Ie.SR_OK!=a)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),a;if(a=this.SetDisplayRect(this.stOriginalDisplayRect.fLeft,this.stOriginalDisplayRect.fTop,this.stOriginalDisplayRect.fWidth,this.stOriginalDisplayRect.fHeight,Me.SR_SRT_SRC),Ie.SR_OK!=a)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),a;switch(this.bSrcRect=!0,ne){case We.SR_IRA_0:a=this.SetRenderState(Ue.SR_RST_IMAGE_ROTATE,0);break;case We.SR_IRA_90:a=this.SetRenderState(Ue.SR_RST_IMAGE_ROTATE,90);break;case We.SR_IRA_180:a=this.SetRenderState(Ue.SR_RST_IMAGE_ROTATE,180);break;case We.SR_IRA_270:a=this.SetRenderState(Ue.SR_RST_IMAGE_ROTATE,270);break;default:return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_NOT_SUPPORT}if(Ie.SR_OK!=a)return this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),a}return a=this._EndCapture(e),Ie.SR_OK!=a?a:Ie.SR_OK}},{key:"SetWebGL2Support",value:function(e){return this.onlySupportedWebGL1=e,Ie.SR_OK}},{key:"SetFishParamManager",value:function(e){return this.pFishParamManager=e,Ie.SR_OK}},{key:"SetFECPort",value:function(e){return this.nFECPort=e,Ie.SR_OK}},{key:"Render",value:function(e){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;switch(this.ctx.useProgram(this.videoShaderProgram),this.enPixelFormat){case Oe.SR_PF_YV12:case Oe.SR_PF_I420:this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var t=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(t,0),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var a=this.ctx.getUniformLocation(this.videoShaderProgram,"Utexture");this.ctx.uniform1i(a,1),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var r=this.ctx.getUniformLocation(this.videoShaderProgram,"Vtexture");this.ctx.uniform1i(r,2);break;case Oe.SR_PF_SURFACE:this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),!this.onlySupportedWebGL1&&this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);var i=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(i,0);break;default:return Ie.SR_ERR_NOT_SUPPORT}var n=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(n<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(n,0);var s=this.ctx.getUniformLocation(this.videoShaderProgram,"bDataFormat");if(s<=0)return Ie.SR_ERR_WEBGL_RESOURCE;switch(this.enPixelFormat){case Oe.SR_PF_YV12:case Oe.SR_PF_I420:this.ctx.uniform1i(s,0);break;case Oe.SR_PF_NV12:break;case Oe.SR_PF_RGBA32:case Oe.SR_PF_SURFACE:this.ctx.uniform1i(s,1)}switch(this.enDisplayEffect){case we.SR_DE_NULL:if(this.nPostProc){var x=this.ctx.getUniformLocation(this.videoShaderProgram,"fBrightness");if(x<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(x,this.fBrightness);var o=this.ctx.getUniformLocation(this.videoShaderProgram,"fHue");if(o<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(o,this.fHue);var l=this.ctx.getUniformLocation(this.videoShaderProgram,"fSaturation");if(l<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(l,this.fSaturation);var _=this.ctx.getUniformLocation(this.videoShaderProgram,"fContrast");if(_<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(_,this.fContrast);var h=this.ctx.getUniformLocation(this.videoShaderProgram,"fSharpness");if(h<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(h,this.fSharpness);var f=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndWidth");if(f<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(f,this.nWndWidth);var c=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndHeight");if(c<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(c,this.nWndHeight)}var u=this.ctx.getUniformLocation(this.videoShaderProgram,"nPostProc");this.ctx.uniform1i(u,this.nPostProc);break;case we.SR_DE_FISH_ORIGINAL:case we.SR_DE_FISH_PTZ_CEILING:case we.SR_DE_FISH_PTZ_FLOOR:case we.SR_DE_FISH_PTZ_WALL:case we.SR_DE_FISH_PANORAMA_CEILING_360:case we.SR_DE_FISH_PANORAMA_CEILING_180:case we.SR_DE_FISH_PANORAMA_FLOOR_360:case we.SR_DE_FISH_PANORAMA_FLOOR_180:case we.SR_DE_FISH_PANORAMA_WALL:if(we.SR_DE_FISH_ORIGINAL==this.enDisplayEffect){var d=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(d<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(d,this.pstFishParam.bBlack);var p=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(p<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(p,this.pstFishParam.bCut)}if(we.SR_DE_FISH_PTZ_CEILING==this.enDisplayEffect||we.SR_DE_FISH_PTZ_FLOOR==this.enDisplayEffect||we.SR_DE_FISH_PTZ_WALL==this.enDisplayEffect){var m=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(m<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(m,this.pstFishParam.fCosH);var S=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(S<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(S,this.pstFishParam.fSinH);var R=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(R<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(R,this.pstFishParam.fCosV);var P=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(P<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(P,this.pstFishParam.fSinV);var b=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(b<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(b,this.pstFishParam.fZoom)}if(we.SR_DE_FISH_PANORAMA_CEILING_360==this.enDisplayEffect||we.SR_DE_FISH_PANORAMA_CEILING_180==this.enDisplayEffect||we.SR_DE_FISH_PANORAMA_FLOOR_360==this.enDisplayEffect||we.SR_DE_FISH_PANORAMA_FLOOR_180==this.enDisplayEffect){var y=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(y<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(y,this.pstFishParam.fAngle)}var E=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(E<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(E,this.pstFishParam.fRXLeft);var g=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(g<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(g,this.pstFishParam.fRXRight);var F=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(F<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(F,this.pstFishParam.fRYTop);var v=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(v<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(v,this.pstFishParam.fRYBottom);break;case we.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var C=this.pCamera.GetView(),T=this.pCamera.GetProj(),D=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(D<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(D,!1,C);var A=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(A<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(A,!1,T);break;case we.SR_DE_PANORAMA_SPHERE:case we.SR_DE_ELLIPSOID_VIEWLIMITED:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var I=this.pCamera.GetView(),M=this.pCamera.GetProj(),L=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(L<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(L,!1,I);var w=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(w<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(w,!1,M);break;case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_FLOOR:case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var O=this.pCamera.GetView(),B=this.pCamera.GetProj(),k=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(k<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(k,!1,O);var N=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(N<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(N,!1,B);break;case we.SR_DE_FISH_PLANET:case we.SR_DE_PANORAMA_PLANET:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(this.fRotateX),this.pCamera.SetYaw(3.14+this.fRotateY),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var V=this.pCamera.GetView(),U=this.pCamera.GetProj(),H=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(H<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(H,!1,V);var W=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(W<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(W,!1,U);var Y=this.ctx.getUniformLocation(this.videoShaderProgram,"bDrawImage");if(Y<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(Y,0);var G=this.ctx.getUniformLocation(this.videoShaderProgram,"fAlpha");if(G<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(G,0);break;case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(null==this.pFishParamManager)return Ie.SR_ERR_CALL_ORDER;this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.UpdateCamera(this.nWndWidth,this.nWndHeight);var X=this.pCamera.GetView(),J=this.pCamera.GetProj(),Z=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(Z<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(Z,!1,X);var j,z=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(z<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(z,!1,J),j=Math.abs(.785-this.fRotateX)<.0025?.785:this.fRotateX;var K=new Float32Array([0,1,0,2*-j]),q=this.ctx.getUniformLocation(this.videoShaderProgram,"vecCylinderParam");if(q<=0)return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.uniform4f(q,K[0],K[1],K[2],K[3]),we.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.enDisplayEffect){var $=this.ctx.getUniformLocation(this.videoShaderProgram,"fTextureOffset");if($<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f($,this.fRotateY)}else{var Q=this.ctx.getUniformLocation(this.videoShaderProgram,"fTextureOffset");if(Q<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(Q,-this.fRotateY)}var ee={},te=Ie.SR_OK;if(te=this.pFishParamManager.GetRenderParam(this.nFECPort,ee),Ie.SR_OK!=te)return te;var ae=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(ae<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(ae,ee.fRXLeft);var re=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(re<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(re,ee.fRXRight);var ie=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(ie<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(ie,ee.fRYTop);var ne=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(ne<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(ne,ee.fRYBottom);var se=this.ctx.getUniformLocation(this.videoShaderProgram,"bDrawImage");if(se<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1i(se,0);var xe=this.ctx.getUniformLocation(this.videoShaderProgram,"fAlpha");if(xe<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(xe,0);break;default:return Ie.SR_ERR_NOT_SUPPORT}this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var oe=this.ctx.getAttribLocation(this.videoShaderProgram,"position");if(oe<0)return Ie.SR_ERR_WEBGL_RESOURCE;this.b3DPort?this.ctx.vertexAttribPointer(oe,3,this.ctx.FLOAT,!1,0,0):this.ctx.vertexAttribPointer(oe,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(oe),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var le=this.ctx.getAttribLocation(this.videoShaderProgram,"texCoord");if(le<0)return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.vertexAttribPointer(le,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(le),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.viewport(0,0,this.nWndWidth,this.nWndHeight),this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLES,0,6);else if(this.enDisplayEffect==we.SR_DE_FISH_SEMISPHERE||this.enDisplayEffect==we.SR_DE_FISH_PLANET){if(this.nSemiSpherePosNum<=0)return Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==we.SR_DE_PANORAMA_SPHERE||this.enDisplayEffect==we.SR_DE_PANORAMA_PLANET||this.enDisplayEffect==we.SR_DE_ELLIPSOID_VIEWLIMITED){if(this.nSpherePosNum<=0)return Ie.SR_ERR_CALL_ORDER;this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,this.indicesPosBuffer),this.ctx.drawElements(this.ctx.TRIANGLES,6*this.nSpherePosNum,this.ctx.UNSIGNED_SHORT,0),this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,null)}else if(this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR){if(this.nCylinderPosNum<=0)return Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return Ie.SR_ERR_CALL_ORDER;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}return this.ctx.useProgram(null),Ie.SR_OK}},{key:"SetAntialias",value:function(e){return null==this.ctx?Ie.SR_ERR_CALL_ORDER:(this.bAntialias=e,Ie.SR_OK)}},{key:"DelSubPort",value:function(){return null==this.ctx?Ie.SR_ERR_CALL_ORDER:(0!=this.videoShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.videoShaderProgram),this.videoShaderProgram=0),0!=this.vertexPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.vertexPosBuffer),this.vertexPosBuffer=0),0!=this.texturePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.texturePosBuffer),this.texturePosBuffer=0),0!=this.indicesPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.indicesPosBuffer),this.indicesPosBuffer=0),this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,0!=this.glLinePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLinePosBuffer),this.glLinePosBuffer=0),this.nLineTriangleNum=0,0!=this.nLineShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nLineShaderProgram),this.nLineShaderProgram=0),this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,0!=this.glBlockPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockPosBuffer),this.glBlockPosBuffer=0),0!=this.glBlockClrBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockClrBuffer),this.glBlockClrBuffer=0),0!=this.nBlockShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nBlockShaderProgram),this.nBlockShaderProgram=0),this.nDrawFontWidth=0,this.nDrawFontHeight=0,0!=this.nFontColorTexture&&null!=this.ctx&&(this.ctx.deleteTexture(this.nFontColorTexture),this.nFontColorTexture=0),this.pFontColorBuffer=0,0!=this.nFontShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nFontShaderProgram),this.nFontShaderProgram=0),this.pFontPosVertices=null,0!=this.glFontTexturePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glFontTexturePosBuffer),this.glFontTexturePosBuffer=0),0!=this.glFontVertexPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glFontVertexPosBuffer),this.glFontVertexPosBuffer=0),0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureFBO&&(this.ctx.deleteFramebuffer(this.nCaptureFBO),this.nCaptureFBO=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),this.bCaptureResInit=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pSpherePos=null,this.pSphereTex=null,this.pSphereInd=null,this.nSpherePosNum=0,this.nSpherePosSize=0,this.nSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.ctx.disable(this.ctx.CULL_FACE),this.ctx.disable(this.ctx.DEPTH_TEST),Ie.SR_OK)}},{key:"SetFishParam",value:function(e){return null==e?Ie.SR_ERR_PARAM:(this.pstFishParam=e,Ie.SR_OK)}},{key:"DrawLines",value:function(e,t,a,r,i,n){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;var s=[],x={};return x.pstPoints=e,x.nPointNum=t,x.bLoop=a,x.pstColor=r,x.nLineWidth=i,s.push(x),this.DrawLinesEx(s,1,t,n)}},{key:"DrawLinesEx",value:function(e,t,a,r){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==e||t<1||a<2)return Ie.SR_ERR_PARAM;if(0==this.nLineShaderProgram){var i=this.CompileProgram("\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n    uniform   mat4   matRotate;\n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0) * matRotate;\n            gl_Position.y = -gl_Position.y;\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0) * matRotate;\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",qe);if(i<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.nLineShaderProgram=i}if(1==r)return this.DrawFillBlock(e,t,a);for(var n=0,s=0;s<t;++s){if(null==e[s].pstPoints||e[s].nPointNum<=1||e[s].nPointNum>=1024||e[s].nLineWidth<=0||null==e[s].pstColor)return Ie.SR_ERR_PARAM;n+=e[s].nPointNum}if(n!=a)return Ie.SR_ERR_PARAM;if((n+=t)>this.nMaxPointNum&&(this.nMaxPointNum=n,this.pLinePosVertices=null,this.pLineClrVertices=null),null==this.pLinePosVertices&&(this.pLinePosVertices=new Float32Array(6*this.nMaxPointNum*3),null==this.pLinePosVertices))return Ie.SR_ERR_ALLOC_MEMORY;if(this.pLinePosVertices.fill(0),null==this.pLineClrVertices&&(this.pLineClrVertices=new Float32Array(6*this.nMaxPointNum*4),null==this.pLineClrVertices))return Ie.SR_ERR_ALLOC_MEMORY;if(this.pLineClrVertices.fill(0),0==this.glLinePosBuffer&&(this.glLinePosBuffer=this.ctx.createBuffer(),0==this.glLinePosBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;if(0==this.glLineClrBuffer&&(this.glLineClrBuffer=this.ctx.createBuffer(),0==this.glLineClrBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;var x=this.ComputeLinePoint(e,t);if(Ie.SR_OK!=x)return x;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFuncSeparate(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA,this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA);var o=this.nLineShaderProgram;this.ctx.useProgram(o);var l=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(l<=0)return Ie.SR_ERR_WEBGL_RESOURCE;1==this.bIsCapturing?this.ctx.uniform1i(l,1):this.ctx.uniform1i(l,0);var _=this.glLinePosBuffer,h=this.glLineClrBuffer,f=this.nLineTriangleNum,c=this.pLinePosVertices,u=this.pLineClrVertices;this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,_),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,c,this.ctx.STATIC_DRAW);var d=this.ctx.getAttribLocation(o,"position");this.ctx.enableVertexAttribArray(d),this.ctx.vertexAttribPointer(d,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,h),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,u,this.ctx.STATIC_DRAW);var p=this.ctx.getAttribLocation(o,"color");this.ctx.enableVertexAttribArray(p),this.ctx.vertexAttribPointer(p,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var m=this.ctx.getUniformLocation(o,"matRotate");return m<=0?Ie.SR_ERR_WEBGL_RESOURCE:(this.ctx.uniformMatrix4fv(m,!1,this.matRotate),1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.nWndWidth,this.nWndHeight),this.ctx.disable(this.ctx.DEPTH_TEST),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*f),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),Ie.SR_OK)}},{key:"DrawFillBlock",value:function(e,t,a){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==e||t<1||a<2)return Ie.SR_ERR_PARAM;for(var r=0,i=0;i<t;++i){if(null==e[i].pstPoints||e[i].nPointNum<3||1!=e[i].bLoop||null==e[i].pstColor)return Ie.SR_ERR_PARAM;r+=e[i].nPointNum}if(r!==a)return Ie.SR_ERR_PARAM;var n=a-2*t;if(n>this.nMaxFillBlockTriNum&&(this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=n),0==this.glBlockPosBuffer&&(this.glBlockPosBuffer=this.ctx.createBuffer(),0==this.glBlockPosBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;if(0==this.glBlockClrBuffer&&(this.glBlockClrBuffer=this.ctx.createBuffer(),0==this.glBlockClrBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;if(null==this.pFillBlockPosVertices){var s=this.nMaxFillBlockTriNum;if(this.pFillBlockPosVertices=new Float32Array(3*s*3),null==this.pFillBlockPosVertices)return Ie.SR_ERR_ALLOC_MEMORY}if(this.pFillBlockPosVertices.fill(0),null==this.pFillBlockClrVertices){var x=this.nMaxFillBlockTriNum;if(this.pFillBlockClrVertices=new Float32Array(4*x*3),null==this.pFillBlockClrVertices)return Ie.SR_ERR_ALLOC_MEMORY}this.pFillBlockClrVertices.fill(0);for(var o=0,l=0,_=0,h=null,f=null,c={},u={},d={},p=0;p<t;++p){_=e[p].nPointNum,h=e[p].pstPoints,f=e[p].pstColor,c.fX=(h[0].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),c.fX=this.fDstUseLeft+c.fX*(this.fDstUseRight-this.fDstUseLeft),c.fX=2*c.fX-1,c.fY=(h[0].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),c.fY=this.fDstUseTop+c.fY*(this.fDstUseBottom-this.fDstUseTop),c.fY=1-2*c.fY;for(var m=1;m<_-1;m++)u.fX=(h[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),u.fX=this.fDstUseLeft+u.fX*(this.fDstUseRight-this.fDstUseLeft),u.fX=2*u.fX-1,u.fY=(h[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),u.fY=this.fDstUseTop+u.fY*(this.fDstUseBottom-this.fDstUseTop),u.fY=1-2*u.fY,d.fX=(h[m+1].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),d.fX=this.fDstUseLeft+d.fX*(this.fDstUseRight-this.fDstUseLeft),d.fX=2*d.fX-1,d.fY=(h[m+1].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),d.fY=this.fDstUseTop+d.fY*(this.fDstUseBottom-this.fDstUseTop),d.fY=1-2*d.fY,this.pFillBlockPosVertices[o++]=c.fX,this.pFillBlockPosVertices[o++]=c.fY,this.pFillBlockPosVertices[o++]=0,this.pFillBlockClrVertices[l++]=f.fR,this.pFillBlockClrVertices[l++]=f.fG,this.pFillBlockClrVertices[l++]=f.fB,this.pFillBlockClrVertices[l++]=f.fA,this.pFillBlockPosVertices[o++]=u.fX,this.pFillBlockPosVertices[o++]=u.fY,this.pFillBlockPosVertices[o++]=0,this.pFillBlockClrVertices[l++]=f.fR,this.pFillBlockClrVertices[l++]=f.fG,this.pFillBlockClrVertices[l++]=f.fB,this.pFillBlockClrVertices[l++]=f.fA,this.pFillBlockPosVertices[o++]=d.fX,this.pFillBlockPosVertices[o++]=d.fY,this.pFillBlockPosVertices[o++]=0,this.pFillBlockClrVertices[l++]=f.fR,this.pFillBlockClrVertices[l++]=f.fG,this.pFillBlockClrVertices[l++]=f.fB,this.pFillBlockClrVertices[l++]=f.fA}if(0==this.nBlockShaderProgram&&(this.nBlockShaderProgram=this.CompileProgram("\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n            gl_Position.y = -gl_Position.y;\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",qe),this.nBlockShaderProgram<=0))return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFuncSeparate(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA,this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockPosVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockClrVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(this.nBlockShaderProgram);var S=this.ctx.getUniformLocation(this.nBlockShaderProgram,"bCapture");if(S<=0)return Ie.SR_ERR_WEBGL_RESOURCE;1==this.bIsCapturing?this.ctx.uniform1i(S,1):this.ctx.uniform1i(S,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer);var R=this.ctx.getAttribLocation(this.nBlockShaderProgram,"position");this.ctx.enableVertexAttribArray(R),this.ctx.vertexAttribPointer(R,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer);var P=this.ctx.getAttribLocation(this.nBlockShaderProgram,"color");return this.ctx.enableVertexAttribArray(P),this.ctx.vertexAttribPointer(P,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*n),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),Ie.SR_OK}},{key:"ComputeLinePoint",value:function(e,t){if(null==e||t<1)return Ie.SR_ERR_PARAM;if(null==this.pLinePosVertices||null==this.pLineClrVertices)return Ie.SR_ERR_CALL_ORDER;var a=0,r=0;1==this.bIsCapturing?(a=(this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth,r=(this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight):(a=(this.fDstUseRight-this.fDstUseLeft)*this.nWndWidth,r=(this.fDstUseBottom-this.fDstUseTop)*this.nWndHeight);for(var i=0,n=0,s=0,x=0,o=0,l=0,_=0,h=0,f=0,c=0,u=0,d=0;d<t;++d){var p=[];if(!((u=e[d].nPointNum)<=0)){for(var m=0;m<u;++m){var S={};S.fX=(e[d].pstPoints[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),S.fX=this.fDstUseLeft+S.fX*(this.fDstUseRight-this.fDstUseLeft),S.fX=2*S.fX-1,S.fY=(e[d].pstPoints[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),S.fY=this.fDstUseTop+S.fY*(this.fDstUseBottom-this.fDstUseTop),S.fY=1-2*S.fY,p.push(S)}if(this.nWndWidth<=0||this.nWndHeight<=0)return Ie.SR_ERR_CANVAS;if(l=3.5*e[d].nLineWidth/a,_=3.5*e[d].nLineWidth/r,l<=0||_<=0)return Ie.SR_ERR_PARAM;var R=e[d].pstColor;if(null==R||null==R)return Ie.SR_ERR_PARAM;for(var P=0;P<u-1;++P)n=p[P+1].fX-p[P].fX,s=p[P+1].fY-p[P].fY,i=Math.sqrt(n*n+s*s),Math.abs(i-0)<1e-6||(x=-l*s/i/2,o=_*n/i/2,this.pLinePosVertices[f++]=p[P].fX+x,this.pLinePosVertices[f++]=p[P].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[P+1].fX-x,this.pLinePosVertices[f++]=p[P+1].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[P].fX-x,this.pLinePosVertices[f++]=p[P].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[P].fX+x,this.pLinePosVertices[f++]=p[P].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[P+1].fX+x,this.pLinePosVertices[f++]=p[P+1].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[P+1].fX-x,this.pLinePosVertices[f++]=p[P+1].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,h+=2);1==e[d].bLoop&&2<u&&(n=p[u-1].fX-p[0].fX,s=p[u-1].fY-p[0].fY,i=Math.sqrt(n*n+s*s),Math.abs(i-0)>1e-6&&(x=-l*s/i/2,o=_*n/i/2,this.pLinePosVertices[f++]=p[0].fX+x,this.pLinePosVertices[f++]=p[0].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[u-1].fX-x,this.pLinePosVertices[f++]=p[u-1].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[0].fX-x,this.pLinePosVertices[f++]=p[0].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[0].fX+x,this.pLinePosVertices[f++]=p[0].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[u-1].fX+x,this.pLinePosVertices[f++]=p[u-1].fY+o,this.pLinePosVertices[f++]=-1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,this.pLinePosVertices[f++]=p[u-1].fX-x,this.pLinePosVertices[f++]=p[u-1].fY-o,this.pLinePosVertices[f++]=1,this.pLineClrVertices[c++]=R.fR,this.pLineClrVertices[c++]=R.fG,this.pLineClrVertices[c++]=R.fB,this.pLineClrVertices[c++]=R.fA,h+=2))}}return 0==h?Ie.SR_ERR_PARAM:(this.nLineTriangleNum=h,Ie.SR_OK)}},{key:"DrawFont",value:function(e,t,a,r,i,n,s,x,o,l,_){return Ie.SR_ERR_NOT_SUPPORT}},{key:"DrawFontEx",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(0>t||null==e)return Ie.SR_ERR_PARAM;var i,n,s=0,x=0;if(1==this.bIsCapturing){if(0==this.nCaptureWidth||0==this.nCaptureHeight)return Ie.SR_ERR_CALL_ORDER;s=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth),x=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight)}else s=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.nWndWidth),x=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.nWndHeight);if(this.nDrawFontWidth==s&&this.nDrawFontHeight==x||(this.pFontColorBuffer=null,this.nFontColorTexture=0,this.nDrawFontWidth=s,this.nDrawFontHeight=x),0==this.nFontColorTexture){if(this.nFontColorTexture=this.ctx.createTexture(),0==this.nFontColorTexture)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(null==this.textCanvas){if(this.textCanvas=r,null==this.textCanvas)return Ie.SR_ERR_FONT;if(this.textCanvasCtx=this.textCanvas.getContext("2d"),null==this.textCanvasCtx)return Ie.SR_ERR_FONT}this.textCanvasCtx.canvas.width=this.nDrawFontWidth,this.textCanvasCtx.canvas.height=this.nDrawFontHeight,this.textCanvasCtx.clearRect(0,0,this.nDrawFontWidth,this.nDrawFontHeight);for(var o=0;o<t;++o){var l=e[o].nFontWidth,_=e[o].nFontHeight;1==this.bIsCapturing&&(l=Math.round(this.nCaptureWidth/this.nWndWidth*l),_=Math.round(this.nCaptureHeight/this.nWndHeight*_));var h=l<_?l:_;this.textCanvasCtx.font="".concat(h,"px ").concat(e[o].pFontFamily),this.textCanvasCtx.textAlign=e[o].textAlign||"left",this.textCanvasCtx.textBaseline=e[o].textBaseline||"top",this.textCanvasCtx.save();var f=e[o].pstStartPos.fX*this.nDrawFontWidth,c=e[o].pstStartPos.fY*this.nDrawFontHeight;if(this.textCanvasCtx.translate(f,c),this.textCanvasCtx.rotate(e[o].fRotateAngle*Math.PI/180),e[o].bBackGround){var u=e[o].pstStartPos.fX,d=e[o].pstStartPos.fY,m=this.textCanvasCtx.measureText(e[o].pString).width,R=h;switch(this.textCanvasCtx.textAlign){case"center":u-=m/2;break;case"right":case"end":u-=m}switch(this.textCanvasCtx.textBaseline){case"top":case"hanging":break;case"middle":d-=R/2;break;default:d-=R}var P=e[o].pstBGColor;this.textCanvasCtx.fillStyle="rgb(".concat(255*P.fR,", ").concat(255*P.fG,", ").concat(255*P.fB,")"),this.textCanvasCtx.globalAlpha=P.fA,this.textCanvasCtx.fillRect(u,d,m,R)}var b=e[o].pstFontColor;this.textCanvasCtx.fillStyle="rgb(".concat(255*b.fR,", ").concat(255*b.fG,", ").concat(255*b.fB,")"),this.textCanvasCtx.globalAlpha=e[o].pstFontColor.fA,this.textCanvasCtx.fillText(e[o].pString,0,0),this.textCanvasCtx.restore()}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,this.textCanvasCtx.canvas),0==this.nFontShaderProgram&&(this.nFontShaderProgram=this.CompileProgram("\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n    uniform int bCapture;\n    uniform   mat4   matRotate;\n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        if(bCapture == 1)\n        {\n            gl_Position.y = -position.y;\n        }\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = matRotate * texCoord; \n    }\n","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n"),this.nFontShaderProgram<=0))return Ie.SR_ERR_WEBGL_RESOURCE;if(1==this.bIsCapturing?(i=this.nCaptureWidth,n=this.nCaptureHeight):(i=this.nWndWidth,n=this.nWndHeight),1==a){if(0==this.glFontVertexPosBuffer){var y=new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0]),E=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,E),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,y,this.ctx.STATIC_DRAW),this.glFontVertexPosBuffer=E,y=0}if(0==this.glFontTexturePosBuffer){var g=new Float32Array([0,1,1,1,1,0,0,0]),F=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,F),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,g,this.ctx.STATIC_DRAW),this.glFontTexturePosBuffer=F,g=0}}this.ctx.viewport(0,0,i,n),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFuncSeparate(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA,this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.useProgram(this.nFontShaderProgram);var v=this.ctx.getUniformLocation(this.nFontShaderProgram,"bCapture");if(v<=0)return Ie.SR_ERR_WEBGL_RESOURCE;1==this.bIsCapturing?this.ctx.uniform1i(v,1):this.ctx.uniform1i(v,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture);var C=this.ctx.getUniformLocation(this.nFontShaderProgram,"texture");this.ctx.uniform1i(C,0);var T=p(),D=p(),A=p();S(A,T,D);var I=this.ctx.getUniformLocation(this.nFontShaderProgram,"matRotate");if(I<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(I,!1,A),1==a?this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glFontVertexPosBuffer):this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var M=this.ctx.getAttribLocation(this.nFontShaderProgram,"position");this.ctx.enableVertexAttribArray(M),1==a?this.ctx.vertexAttribPointer(M,3,this.ctx.FLOAT,!1,0,0):this.ctx.vertexAttribPointer(M,2,this.ctx.FLOAT,!1,0,0),1==a?this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glFontTexturePosBuffer):this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var L=this.ctx.getAttribLocation(this.nFontShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(L),this.ctx.vertexAttribPointer(L,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.disable(this.ctx.DEPTH_TEST),1==a?this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4):this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),Ie.SR_OK}},{key:"DrawImage",value:function(e,t,a,r,i,n){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==e||t<=0||a<=0||null==r||n<0||n>1)return Ie.SR_ERR_PARAM;if(this.nDrawImageWidth=t,this.nDrawImageHeight=a,0==this.glImagePosBuffer&&(this.glImagePosBuffer=this.ctx.createBuffer(),0==this.glImagePosBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;if(0==this.glImageClrBuffer&&(this.glImageClrBuffer=this.ctx.createBuffer(),0==this.glImageClrBuffer))return Ie.SR_ERR_WEBGL_RESOURCE;if(null==this.pImageClrVertices){if(this.pImageClrVertices=new Float32Array(12),null==this.pImageClrVertices)return Ie.SR_ERR_ALLOC_MEMORY;this.pImageClrVertices[0]=0,this.pImageClrVertices[1]=0,this.pImageClrVertices[2]=0,this.pImageClrVertices[3]=1,this.pImageClrVertices[4]=1,this.pImageClrVertices[5]=0,this.pImageClrVertices[6]=1,this.pImageClrVertices[7]=0,this.pImageClrVertices[8]=0,this.pImageClrVertices[9]=1,this.pImageClrVertices[10]=1,this.pImageClrVertices[11]=1}var s={},x={};if(s.fLeft=(r.fLeft-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fRight=(r.fRight-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fTop=(r.fTop-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),s.fBottom=(r.fBottom-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),x.fLeft=this.fDstUseLeft+s.fLeft*(this.fDstUseRight-this.fDstUseLeft),x.fRight=this.fDstUseLeft+s.fRight*(this.fDstUseRight-this.fDstUseLeft),x.fTop=this.fDstUseTop+s.fTop*(this.fDstUseBottom-this.fDstUseTop),x.fBottom=this.fDstUseTop+s.fBottom*(this.fDstUseBottom-this.fDstUseTop),null==this.pImagePosVertices&&(this.pImagePosVertices=new Float32Array(12),null==this.pImagePosVertices))return Ie.SR_ERR_ALLOC_MEMORY;switch(this.pImagePosVertices.fill(0),this.pImagePosVertices[0]=2*x.fLeft-1,this.pImagePosVertices[1]=1-2*x.fTop,this.pImagePosVertices[2]=2*x.fLeft-1,this.pImagePosVertices[3]=1-2*x.fBottom,this.pImagePosVertices[4]=2*x.fRight-1,this.pImagePosVertices[5]=1-2*x.fTop,this.pImagePosVertices[6]=2*x.fRight-1,this.pImagePosVertices[7]=1-2*x.fTop,this.pImagePosVertices[8]=2*x.fLeft-1,this.pImagePosVertices[9]=1-2*x.fBottom,this.pImagePosVertices[10]=2*x.fRight-1,this.pImagePosVertices[11]=1-2*x.fBottom,1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.nWndWidth,this.nWndHeight),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFuncSeparate(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA,this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA),i){case Oe.SR_PF_SURFACE:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var o=this.ctx.getAttribLocation(this.videoShaderProgram,"position");if(o<0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.vertexAttribPointer(o,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(o),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var l=this.ctx.getAttribLocation(this.videoShaderProgram,"texCoord");if(l<0)return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.vertexAttribPointer(l,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(l),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(null),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var _=this.CompileProgram($e,Qe);if(_<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.nImageShaderProgram=_}break;case Oe.SR_PF_RGBA32:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var h=this.CompileProgram($e,Qe);if(h<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.nImageShaderProgram=h}break;case Oe.SR_PF_RGB565:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGB,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGB,this.ctx.UNSIGNED_SHORT_5_6_5,e),0==this.nImageShaderProgram){var f=this.CompileProgram($e,"\n    precision mediump float; \n    uniform sampler2D texture; \n    varying lowp vec4 pp;\n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n");if(f<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.nImageShaderProgram=f}break;default:return Ie.SR_ERR_NOT_SUPPORT}var c=this.nImageShaderProgram;this.ctx.useProgram(c);var u=this.ctx.getUniformLocation(this.nImageShaderProgram,"bCapture");if(u<=0)return Ie.SR_ERR_WEBGL_RESOURCE;1==this.bIsCapturing?this.ctx.uniform1i(u,1):this.ctx.uniform1i(u,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture);var d=this.ctx.getUniformLocation(this.nImageShaderProgram,"texture");this.ctx.uniform1i(d,0),d=this.ctx.getUniformLocation(this.nImageShaderProgram,"fAlpha"),this.ctx.uniform1f(d,n);var p=this.ctx.getUniformLocation(this.nImageShaderProgram,"matRotate");if(p<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniformMatrix4fv(p,!1,this.matRotate),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImagePosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImagePosVertices,this.ctx.STATIC_DRAW);var m=this.ctx.getAttribLocation(this.nImageShaderProgram,"position");this.ctx.enableVertexAttribArray(m),this.ctx.vertexAttribPointer(m,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImageClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImageClrVertices,this.ctx.STATIC_DRAW);var S=this.ctx.getAttribLocation(this.nImageShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(S),this.ctx.vertexAttribPointer(S,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.disable(this.ctx.DEPTH_TEST),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),Ie.SR_OK}},{key:"DrawMosaic",value:function(e,t,a,r,i){if(e<0||t<0||a<0||r<0||e>1||t>1||a>1||r>1||i<=0)return Ie.SR_ERR_PARAM;if(0==this.nMosaicShaderProgram){var n=this.CompileProgram("\n    attribute vec4  position; \n    attribute vec4  texCoord; \n    varying vec4  out_texCoord; \n    uniform int bCapture;\n    \n    void main() \n    { \n        gl_Position  = position; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -gl_Position.y;\n        }\n        out_texCoord = texCoord; \n    } \n","\n    varying lowp vec4 out_texCoord; \n    uniform sampler2D texture; \n    uniform mediump float videoWidth; \n    uniform mediump float videoHeight; \n    uniform mediump float mosaicSize; \n    uniform mediump float left; \n    uniform mediump float right; \n    uniform mediump float top; \n    uniform mediump float bottom; \n\n    void main(void) \n    { \n        lowp vec2 uv; \n        uv.x = floor(out_texCoord.x * videoWidth / mosaicSize) * mosaicSize / videoWidth; \n        uv.y = floor(out_texCoord.y * videoHeight / mosaicSize) * mosaicSize / videoHeight; \n        gl_FragColor = texture2D(texture, uv); \n        if(out_texCoord.x < left || out_texCoord.x > right || out_texCoord.y < top || out_texCoord.y > bottom) \n        { \n            gl_FragColor.a = 0.0; \n        } \n        else \n        { \n            gl_FragColor.a = 1.0;  \n        } \n    } \n");if(n<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.nMosaicShaderProgram=n}1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.nWndWidth,this.nWndHeight),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFuncSeparate(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA,this.ctx.ONE,this.ctx.ONE_MINUS_SRC_ALPHA);var s=this.nMosaicShaderProgram;this.ctx.useProgram(s);var x=this.ctx.getUniformLocation(s,"bCapture");if(x<=0)return Ie.SR_ERR_WEBGL_RESOURCE;1==this.bIsCapturing?this.ctx.uniform1i(x,1):this.ctx.uniform1i(x,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]);var o=this.ctx.getUniformLocation(s,"texture");this.ctx.uniform1i(o,0);var l=this.ctx.getUniformLocation(s,"videoWidth");if(l<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(l,this.frameDisplayWidth);var _=this.ctx.getUniformLocation(s,"videoHeight");if(_<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(_,this.frameDisplayHeight);var h=this.ctx.getUniformLocation(s,"mosaicSize");if(h<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(h,i);var f=this.ctx.getUniformLocation(s,"left");if(f<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(f,e);var c=this.ctx.getUniformLocation(s,"right");if(c<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(c,t);var u=this.ctx.getUniformLocation(s,"top");if(u<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(u,a);var d=this.ctx.getUniformLocation(s,"bottom");if(d<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.uniform1f(d,r);var p=this.ctx.getAttribLocation(s,"position");this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer),this.ctx.vertexAttribPointer(p,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(p);var m=this.ctx.getAttribLocation(s,"texCoord");return this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer),this.ctx.vertexAttribPointer(m,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(m),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),Ie.SR_OK}},{key:"SetCallBack",value:function(e,t,a){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;switch(a){case Ve.SR_CBT_NULL:this.pfuncCBIn=e,this.pUserIn=t;break;case Ve.SR_CBT_OUT:this.pfuncCBOut=e,this.pUserOut=t;break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"DoCallBack",value:function(){return null==this.ctx?Ie.SR_ERR_CALL_ORDER:(null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),Ie.SR_OK)}},{key:"SetViewParam",value:function(e,t){if(!this.b3DPort)return Ie.SR_ERR_NOT_SUPPORT;switch(e){case Ne.SR_VT_ROTATION_X:if((this.enDisplayEffect==we.SR_DE_FISH_PLANET||this.enDisplayEffect==we.SR_DE_PANORAMA_PLANET)&&(t>1.57||t<-1.57))return Ie.SR_ERR_PARAM;if(this.enDisplayEffect==we.SR_DE_ELLIPSOID_VIEWLIMITED&&(t<this.fBlackModeMinY||t>this.fBlackModeMaxY))return Ie.SR_ERR_PARAM;if((this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR)&&(t>.78539815||t<0))return Ie.SR_ERR_PARAM;if((this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitX||t<-this.fRotateLimitX))return Ie.SR_ERR_PARAM;this.fRotateX=t;break;case Ne.SR_VT_ROTATION_Y:if((this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitY||t<-this.fRotateLimitY))return Ie.SR_ERR_PARAM;this.fRotateY=t;break;case Ne.SR_VT_SCALE:if(this.enDisplayEffect==we.SR_DE_FISH_PLANET&&(t>1.2||t<-.3))return Ie.SR_ERR_PARAM;if(this.enDisplayEffect==we.SR_DE_FISH_SEMISPHERE){if(t<-.8||t>900)return Ie.SR_ERR_PARAM}else if(this.enDisplayEffect==we.SR_DE_PANORAMA_SPHERE){if(t<-.95||t>.95)return Ie.SR_ERR_PARAM}else if(this.enDisplayEffect==we.SR_DE_ELLIPSOID_VIEWLIMITED){var a;if(this.enBlackSize!==Le.SR_VLR_BLACK_1216_2832)return Ie.SR_ERR_NOT_SUPPORT;if(a=.004,t<-.84||t>.18)return Ie.SR_ERR_PARAM;var r=t-this.fScale;r>0?(this.fBlackModeMaxY-=a,this.fBlackModeMinY+=a):r<0&&(this.fBlackModeMaxY+=a,this.fBlackModeMinY-=a),this.fRotateX<this.fBlackModeMinY?this.fRotateX=this.fBlackModeMinY:this.fRotateX>this.fBlackModeMaxY&&(this.fRotateX=this.fBlackModeMaxY)}else if(this.enDisplayEffect==we.SR_DE_PANORAMA_PLANET){if(t<.1||t>2.6)return Ie.SR_ERR_PARAM}else if(this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_CEILING){if(t<0||t>900)return Ie.SR_ERR_PARAM}else if(this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(t<-.3||t>5)return Ie.SR_ERR_PARAM;this._ComputeRotateLimits()}else if(this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_CEILING||this.enDisplayEffect==we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR)return Ie.SR_ERR_NOT_SUPPORT;this.fScale=t;break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"GetViewParam",value:function(e,t){if(!this.b3DPort)return Ie.SR_ERR_CALL_ORDER;var a=0;switch(e){case Ne.SR_VT_ROTATION_X:a=this.fRotateX;break;case Ne.SR_VT_ROTATION_Y:a=this.fRotateY;break;case Ne.SR_VT_SCALE:a=this.fScale;break;default:return Ie.SR_ERR_NOT_SUPPORT}return t.fValue=a,Ie.SR_OK}},{key:"SetViewLimitateRate",value:function(e){return this.enBlackSize=e,Ie.SR_OK}},{key:"SetRenderMode",value:function(e){return this.bRenderToTex=e,Ie.SR_OK}},{key:"_InitVideoShader",value:function(e,t){var a,r;switch(t){case we.SR_DE_NULL:a=ze,r="\nprecision mediump float;\nvarying highp vec4 pp;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nuniform int bDataFormat;\n\nvec3 rgb;\nvec3 yuv2rgb(float y, float u, float v)\n{\n    float r,g,b; \n    y = 1.1643 * (y - 0.0625); \n    u = u - 0.5; \n    v = v - 0.5; \n    r = y + 1.5958 * v; \n    g = y - 0.39173 * u - 0.81290 * v; \n    b = y + 2.017 * u; \n    return vec3(r, g, b);\n}\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n\n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \n\nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \n\nvec3 sharpen(vec3 c) \n{ \n    vec3 sharpenColor; \n\n    if(bDataFormat == 0)\n    {\n        float sharpenColorY;\n        float sharpenColorU;\n        float sharpenColorV;\n        float offWidth  = 1.0 / fWndWidth; \n        float offHeight = 1.0 / fWndHeight; \n        float tempSharpness = fSharpness * 100.0; \n\n        sharpenColor = (1.0 + 4.0 * tempSharpness) * c;\n\n        vec2 uv       = pp.st + vec2(offWidth, 0); \n        sharpenColorY = texture2D(Ytexture, uv).r; \n        sharpenColorU = texture2D(Utexture, uv).r; \n        sharpenColorV = texture2D(Vtexture, uv).r; \n        sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n        uv            = pp.st + vec2(-offWidth, 0); \n        sharpenColorY = texture2D(Ytexture, uv).r;\n        sharpenColorU = texture2D(Utexture, uv).r; \n        sharpenColorV = texture2D(Vtexture, uv).r; \n        sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n        uv            = pp.st + vec2(0, offHeight);\n        sharpenColorY = texture2D(Ytexture, uv).r; \n        sharpenColorU = texture2D(Utexture, uv).r; \n        sharpenColorV = texture2D(Vtexture, uv).r; \n        sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n        uv            = pp.st + vec2(0, -offHeight); \n        sharpenColorY = texture2D(Ytexture, uv).r; \n        sharpenColorU = texture2D(Utexture, uv).r; \n        sharpenColorV = texture2D(Vtexture, uv).r; \n        sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n    }\n    else if(bDataFormat == 1)\n    {\n        vec3 sharpenColorY;\n        float offWidth  = 1.0 / fWndWidth; \n        float offHeight = 1.0 / fWndHeight; \n        float tempSharpness = fSharpness * 100.0;\n        vec2 uv = pp.st;\n        sharpenColorY = (1.0 + 4.0 * tempSharpness) * texture2D(Ytexture, uv).rgb;\n\n        uv       = pp.st + vec2(offWidth, 0); \n        sharpenColorY -= tempSharpness * texture2D(Ytexture, uv).rgb;\n\n        uv            = pp.st + vec2(-offWidth, 0); \n        sharpenColorY -= tempSharpness * texture2D(Ytexture, uv).rgb;\n\n        uv            = pp.st + vec2(0, offHeight);\n        sharpenColorY -= tempSharpness * texture2D(Ytexture, uv).rgb;\n\n        uv            = pp.st + vec2(0, -offHeight); \n        sharpenColorY -= tempSharpness * texture2D(Ytexture, uv).rgb;\n\n        sharpenColor = sharpenColorY;\n    }\n\n    return sharpenColor; \n} \nvoid main(void)\n{\n    float r, g, b, y, u, v;\n    if(bDataFormat == 1)\n    {\n        r = texture2D(Ytexture, pp.st).r; \n        g = texture2D(Ytexture, pp.st).g; \n        b = texture2D(Ytexture, pp.st).b; \n        rgb = vec3(r, g, b);\n    }\n    else if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, pp.st).r;\n        u = texture2D(Utexture, pp.st).r;\n        v = texture2D(Vtexture, pp.st).r;\n        rgb = yuv2rgb(y, u, v);\n    }\n\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen(rgb);                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                        //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n\n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n}\n";break;case we.SR_DE_FISH_ORIGINAL:a=ze,r="\nprecision mediump float;\nvarying vec4 pp;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\nuniform int bDataFormat;\n\nvoid main()\n{ \n\tfloat r,g,b,y,u,v;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = pp.s * (rightCut-leftCut) + leftCut;\n\torigin.t = pp.t * (bottomCut-topCut) + topCut;\n\n    if(bDataFormat == 1)\n    {\n        r = texture2D(Ytexture, origin.st).r; \n        g = texture2D(Ytexture, origin.st).g; \n        b = texture2D(Ytexture, origin.st).b; \n    }\n    else if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, origin.st).r;\n        u = texture2D(Utexture, origin.st).r;\n        v = texture2D(Vtexture, origin.st).r;\n        \n        y=1.1643*(y-0.0625);\n        u=u-0.5; \n        v=v-0.5; \n\n        r=y+1.5958*v; \n        g=y-0.39173*u-0.81290*v; \n        b=y+2.017*u; \n    }\n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n";break;case we.SR_DE_FISH_PTZ_CEILING:a=ze,r="\nprecision mediump float;\nvarying vec4 pp; \nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \nuniform int bDataFormat;\n\nvoid main()\n{\n\tfloat r,g,b,y,u,v;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = pp.s - 0.5;\n    origin1.t = 0.5 - pp.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    if(bDataFormat == 1)\n    {\n        r = texture2D(Ytexture, result.st).r; \n        g = texture2D(Ytexture, result.st).g; \n        b = texture2D(Ytexture, result.st).b; \n    }\n    else if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, result.st).r;\n        u = texture2D(Utexture, result.st).r;\n        v = texture2D(Vtexture, result.st).r;\n        \n        y=1.1643*(y-0.0625);\n        u=u-0.5; \n        v=v-0.5; \n\n        r=y+1.5958*v; \n        g=y-0.39173*u-0.81290*v; \n        b=y+2.017*u; \n    }\n\n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n";break;case we.SR_DE_FISH_PTZ_FLOOR:a=ze,r="\nprecision mediump float;\nvarying vec4 pp; \nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \nuniform int bDataFormat;\n\nvoid main()\n{\n\tfloat r,g,b,y,u,v;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;\n    origin1.s = pp.s - 0.5;\n    origin1.t = pp.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    if(bDataFormat == 1)\n    {\n        r = texture2D(Ytexture, result.st).r; \n        g = texture2D(Ytexture, result.st).g; \n        b = texture2D(Ytexture, result.st).b; \n    }\n    else if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, result.st).r;\n        u = texture2D(Utexture, result.st).r;\n        v = texture2D(Vtexture, result.st).r;\n        \n        y=1.1643*(y-0.0625);\n        u=u-0.5; \n        v=v-0.5; \n\n        r=y+1.5958*v; \n        g=y-0.39173*u-0.81290*v; \n        b=y+2.017*u; \n    }\n\n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n";break;case we.SR_DE_FISH_PTZ_WALL:a=ze,r="\nprecision mediump float;\nvarying vec4 pp; \nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \nuniform int bDataFormat;\n\nvoid main()\n{\n\tfloat r,g,b,y,u,v;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;\n\n    origin1.s = pp.s - 0.5;\n    origin1.t = pp.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    if(bDataFormat == 1)\n    {\n        r = texture2D(Ytexture, result.st).r; \n        g = texture2D(Ytexture, result.st).g; \n        b = texture2D(Ytexture, result.st).b; \n    }\n    else if(bDataFormat == 0)\n    {\n        y = texture2D(Ytexture, result.st).r;\n        u = texture2D(Utexture, result.st).r;\n        v = texture2D(Vtexture, result.st).r;\n        \n        y=1.1643*(y-0.0625);\n        u=u-0.5; \n        v=v-0.5; \n\n        r=y+1.5958*v; \n        g=y-0.39173*u-0.81290*v; \n        b=y+2.017*u; \n    }\n\n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n";break;case we.SR_DE_FISH_PANORAMA_CEILING_360:a=ze,r="\n    precision highp float;\n    varying vec4 pp; \n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    uniform int bDataFormat;\n    \n    void main()\n    {\n    \n        float r,g,b,y,u,v;\n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = pp.s;\n        origin.t = (bottomCut - topCut) * pp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        if(bDataFormat == 1)\n        {\n            r = texture2D(Ytexture, result.st).r; \n            g = texture2D(Ytexture, result.st).g; \n            b = texture2D(Ytexture, result.st).b; \n        }\n        else if(bDataFormat == 0)\n        {\n            y = texture2D(Ytexture, result.st).r;\n            u = texture2D(Utexture, result.st).r;\n            v = texture2D(Vtexture, result.st).r;\n            \n            y=1.1643*(y-0.0625);\n            u=u-0.5; \n            v=v-0.5; \n\n            r=y+1.5958*v; \n            g=y-0.39173*u-0.81290*v; \n            b=y+2.017*u; \n        }\n\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n";break;case we.SR_DE_FISH_PANORAMA_CEILING_180:a=ze,r="\n    precision highp float;\n    varying vec4 pp; \n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    uniform int bDataFormat;\n    \n    void main()\n    {\n        float r,g,b,y,u,v;\n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (pp.t  <= 0.5)\n        {\n            newpp.s =  pp.s / 2.0 + 0.5;\n            newpp.t =  pp.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  pp.s / 2.0;\n            newpp.t =  (pp.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        if(bDataFormat == 1)\n        {\n            r = texture2D(Ytexture, result.st).r; \n            g = texture2D(Ytexture, result.st).g; \n            b = texture2D(Ytexture, result.st).b; \n        }\n        else if(bDataFormat == 0)\n        {\n            y = texture2D(Ytexture, result.st).r;\n            u = texture2D(Utexture, result.st).r;\n            v = texture2D(Vtexture, result.st).r;\n            \n            y=1.1643*(y-0.0625);\n            u=u-0.5; \n            v=v-0.5; \n\n            r=y+1.5958*v; \n            g=y-0.39173*u-0.81290*v; \n            b=y+2.017*u; \n        }\n\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n";break;case we.SR_DE_FISH_PANORAMA_FLOOR_360:a=ze,r="\n    precision highp float;\n    varying vec4 pp; \n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    uniform int bDataFormat;\n\n    void main()\n    {\n        float r,g,b,y,u,v;\n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - pp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - pp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        if(bDataFormat == 1)\n        {\n            r = texture2D(Ytexture, result.st).r; \n            g = texture2D(Ytexture, result.st).g; \n            b = texture2D(Ytexture, result.st).b; \n        }\n        else if(bDataFormat == 0)\n        {\n            y = texture2D(Ytexture, result.st).r;\n            u = texture2D(Utexture, result.st).r;\n            v = texture2D(Vtexture, result.st).r;\n            \n            y=1.1643*(y-0.0625);\n            u=u-0.5; \n            v=v-0.5; \n\n            r=y+1.5958*v; \n            g=y-0.39173*u-0.81290*v; \n            b=y+2.017*u; \n        }\n\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n";break;case we.SR_DE_FISH_PANORAMA_FLOOR_180:a=ze,r="\n    precision highp float;\n    varying vec4 pp; \n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    uniform int bDataFormat;\n\n    void main()\n    {\n        float r,g,b,y,u,v;\n\n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (pp.t  <= 0.5) \n        {\n            newpp.s =  pp.s / 2.0;\n            newpp.t =  pp.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  pp.s / 2.0 + 0.5;\n            newpp.t =  (pp.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        if(bDataFormat == 1)\n        {\n            r = texture2D(Ytexture, result.st).r; \n            g = texture2D(Ytexture, result.st).g; \n            b = texture2D(Ytexture, result.st).b; \n        }\n        else if(bDataFormat == 0)\n        {\n            y = texture2D(Ytexture, result.st).r;\n            u = texture2D(Utexture, result.st).r;\n            v = texture2D(Vtexture, result.st).r;\n            \n            y=1.1643*(y-0.0625);\n            u=u-0.5; \n            v=v-0.5; \n\n            r=y+1.5958*v; \n            g=y-0.39173*u-0.81290*v; \n            b=y+2.017*u; \n        }\n\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n";break;case we.SR_DE_FISH_PANORAMA_WALL:a=ze,r="\n    precision highp float;\n    varying vec4 pp; \n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1; \n    uniform float fRY2; \n    uniform int bDataFormat;\n\n    void main()\n    {\n        float r,g,b,y,u,v;\n    \n        vec4 origin;\n        vec4 result;\n        float  d;\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float  defaultTopCut = 0.1;\n        float  defaultBottomCut = 0.9;\n        float  leftCut = 0.0;    ///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\n        float  rightCut = 1.0;\n        float  topCut = defaultTopCut;\n        float  bottomCut = defaultBottomCut;\n        if(fRX1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            leftCut = tmp;\n        }\n        if(fRX2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            rightCut = 1.0 - tmp;\n        }\n        if(fRY1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > defaultTopCut)\n                topCut = tmp;\n            else\n                topCut = defaultTopCut;\n        }\n        if(fRY2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > 1.0 - defaultBottomCut)\n                bottomCut = 1.0 - tmp;\n            else\n                bottomCut = defaultBottomCut;\n        }\n        origin.s = pp.s * (rightCut-leftCut) + leftCut;\n        origin.t = pp.t * (bottomCut-topCut) + topCut;\n        float tmpx = origin.s * 2.0 * fRadius + fCenterX - fRadius; ///<纹理坐标转化为原图上的实际坐标\n        float tmpy = origin.t * 2.0 * fRadius + fCenterY - fRadius;\n        d = sqrt(fRadius*fRadius - (tmpy-fCenterY)*(tmpy-fCenterY));\n        result.s = ((tmpx-fCenterX) * d / fRadius + fCenterX) / w;\n        result.t = tmpy / h;\n    \n        if(bDataFormat == 1)\n        {\n            r = texture2D(Ytexture, result.st).r; \n            g = texture2D(Ytexture, result.st).g; \n            b = texture2D(Ytexture, result.st).b; \n        }\n        else if(bDataFormat == 0)\n        {\n            y = texture2D(Ytexture, result.st).r;\n            u = texture2D(Utexture, result.st).r;\n            v = texture2D(Vtexture, result.st).r;\n            \n            y=1.1643*(y-0.0625);\n            u=u-0.5; \n            v=v-0.5; \n\n            r=y+1.5958*v; \n            g=y-0.39173*u-0.81290*v; \n            b=y+2.017*u; \n        }\n\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n";break;case we.SR_DE_FISH_SEMISPHERE:case we.SR_DE_PANORAMA_SPHERE:case we.SR_DE_PANORAMA_PLANET:case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_FLOOR:case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:case we.SR_DE_FISH_PLANET:case we.SR_DE_ELLIPSOID_VIEWLIMITED:a="\n    precision lowp  float;\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4    pp; \n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * position;\n        pp = texCoord;\n        if(bCapture == 1)\n        {\n          gl_Position.y = - gl_Position.y;\n        }\n    }\n",r=Ke;break;case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:a="\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4    pp; \n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    uniform highp vec4    vecCylinderParam;\n    uniform highp float   fTextureOffset;\n    uniform mediump float fRX1;\n    uniform mediump float fRX2;\n    uniform mediump float fRY1;\n    uniform mediump float fRY2;\n    void main(void) {\n        highp float  w;\n        highp float  h;\n        highp float  fCenterX;\n        highp float  fCenterY;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n\n        highp float dx     = position.x - vecCylinderParam.x;\n        highp float dz     = position.z - (vecCylinderParam.z + vecCylinderParam.y); \n        highp float theta  = atan(abs(dx/dz));\n        highp float fDis   = (3.1415926 - 2.0 * theta) * 1.0;\n        highp float fdx    = 0.0;\n        if (dx > 0.0)\n        {\n            fdx = 1.0;\n        }\n        else\n        {\n            fdx = -1.0;\n        }\n        fDis               = fdx * fDis; \n        highp float lx     = fDis; \n        highp float lz     = vecCylinderParam.z + vecCylinderParam.y; \n        highp float fRate  = (3.1415926 / 2.0 + vecCylinderParam.w) / 3.1415926 * 2.0; \n        highp vec4 newPos  = position; \n        newPos.x     = fRate * (lx - newPos.x) + newPos.x; \n        newPos.z     = fRate * (lz - newPos.z) + newPos.z; \n        gl_Position  = matProj * matView * newPos; \n        if(bCapture == 1)\n        {\n          gl_Position.y = - gl_Position.y;\n        }\n\n        highp float s = texCoord.s * w - fCenterX; \n        highp float t = fCenterY - texCoord.t * h; \n        pp.s = (s*cos(fTextureOffset) - t*sin(fTextureOffset) + fCenterX) / w; \n        pp.t = (fCenterY - (s*sin(fTextureOffset) + t*cos(fTextureOffset))) / h;\n    }\n",r=Ke;break;default:return Ie.SR_ERR_NOT_SUPPORT}var i=this.CompileProgram(a,r);return i<=0?Ie.SR_ERR_WEBGL_RESOURCE:(this.videoShaderProgram=i,Ie.SR_OK)}},{key:"_InitVideoVertex",value:function(e,t,a){var r=null,i=null,n=null,s=Ie.SR_OK;if(0==this.b3DPort)r=new Float32Array([-1,1,-1,-1,1,1,1,1,-1,-1,1,-1]),i=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]);else{if(this.fRX1=a.fRXLeft,this.fRX2=a.fRXRight,this.fRY1=a.fRYTop,this.fRY2=a.fRYBottom,t==we.SR_DE_FISH_SEMISPHERE||t==we.SR_DE_FISH_PLANET)s=this._CreateSemiSphere(this.fRX1,this.fRX2,this.fRY1,this.fRY2),r=this.pSemiSpherePos,i=this.pSemiSphereTex;else if(t==we.SR_DE_PANORAMA_SPHERE||t==we.SR_DE_PANORAMA_PLANET)s=this._CreateSphere(),r=this.pSpherePos,i=this.pSphereTex,n=this.pSphereInd;else if(t==we.SR_DE_ELLIPSOID_VIEWLIMITED){if(this.enBlackSize!==Le.SR_VLR_BLACK_1216_2832)return Ie.SR_ERR_NOT_SUPPORT;s=this._CreateEllipsoid(),r=this.pSpherePos,i=this.pSphereTex,n=this.pSphereInd}else if(t==we.SR_DE_FISH_CYLINDER_CEILING||t==we.SR_DE_FISH_CYLINDER_FLOOR||t==we.SR_DE_FISH_CYLINDER_SPLIT_CEILING||t==we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR)s=this._CreateCylinder(t,this.fRX1,this.fRX2,this.fRY1,this.fRY2,0,0),r=this.pCylinderPos,i=this.pCylinderTex;else{if(t!=we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&t!=we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return Ie.SR_ERR_NOT_SUPPORT;s=t==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._CreateArcSphere(t,.05,.95,-.3,1.3):this._CreateArcSphere(t,-.16,1.16,.005,.995),r=this.pArcSpherePos,i=this.pArcSphereTex}if(s!=Ie.SR_OK)return s}if(null==r||null==i)return Ie.SR_ERR_NOT_SUPPORT;var x=this.ctx.createBuffer();if(this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,x),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,r,this.ctx.STATIC_DRAW),this.vertexPosBuffer=x,t==we.SR_DE_PANORAMA_SPHERE||t==we.SR_DE_PANORAMA_PLANET||t==we.SR_DE_ELLIPSOID_VIEWLIMITED){var o=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ELEMENT_ARRAY_BUFFER,o),this.ctx.bufferData(this.ctx.ELEMENT_ARRAY_BUFFER,n,this.ctx.STATIC_DRAW),this.indicesPosBuffer=o}var l=this.ctx.createBuffer();return this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,l),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,i,this.ctx.STATIC_DRAW),this.texturePosBuffer=l,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),r=null,i=null,Ie.SR_OK}},{key:"_InitCamera",value:function(e){if(null!=this.pCamera)return Ie.SR_ERR_CALL_ORDER;switch(e){case we.SR_DE_NULL:case we.SR_DE_FISH_ORIGINAL:case we.SR_DE_FISH_PTZ_CEILING:case we.SR_DE_FISH_PTZ_FLOOR:case we.SR_DE_FISH_PTZ_WALL:case we.SR_DE_FISH_PANORAMA_CEILING_360:case we.SR_DE_FISH_PANORAMA_CEILING_180:case we.SR_DE_FISH_PANORAMA_FLOOR_360:case we.SR_DE_FISH_PANORAMA_FLOOR_180:case we.SR_DE_FISH_PANORAMA_WALL:return Ie.SR_OK;case we.SR_DE_FISH_SEMISPHERE:if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(Ee),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=4.71,this.pCamera.SetPitch(3.14-this.fRotateX),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case we.SR_DE_PANORAMA_SPHERE:if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(Ee),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=0,this.pCamera.SetPitch(3.14-this.fRotateX),this.fScale=0,this.pCamera.SetScale(this.fScale);break;case we.SR_DE_ELLIPSOID_VIEWLIMITED:if(this.enBlackSize!==Le.SR_VLR_BLACK_1216_2832)return Ie.SR_ERR_NOT_SUPPORT;if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(Ee),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=.65,this.pCamera.SetPitch(this.fRotateX),this.fScale=.18,this.pCamera.SetEye(0,-.2,.18),this.pCamera.SetCenter(0,-.2,-100),this.fBlackModeMinY=.46,this.fBlackModeMaxY=.91;break;case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_FLOOR:if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(Ee),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=.785,this.pCamera.SetPitch(-this.fRotateX),this.fScale=6,this.pCamera.SetScale(this.fScale);break;case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetOrtho(!0),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:if(this.pCamera=new et,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(1.25663704),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fScale=2,this.pCamera.SetScale(this.fScale),we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(this.fRotateLimitX=Ce,this.fRotateLimitY=Te):(this.fRotateLimitX=De,this.fRotateLimitY=Ae);break;case we.SR_DE_FISH_PLANET:if(this.pCamera=new tt,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetFov(2.16),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=Pe,this.pCamera.SetPitch(this.fRotateX),this.pCamera.SetYaw(Re+this.fRotateY),this.fScale=1,this.pCamera.SetScale(this.fScale);break;case we.SR_DE_PANORAMA_PLANET:if(this.pCamera=new tt,null==this.pCamera)return Ie.SR_ERR_ALLOC_MEMORY;this.pCamera.SetPano(!0),this.pCamera.SetNear(be),this.pCamera.SetFar(ye),this.fRotateX=Pe,this.pCamera.SetPitch(this.fRotateX),this.fRotateY=-1.57,this.pCamera.SetYaw(Re+this.fRotateY),this.fScale=2.6,this.pCamera.SetScale(this.fScale);break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"CompileProgram",value:function(e,t){var a=this.ctx;if(null==a||null==e||null==t)return-1;var r=a.createShader(a.VERTEX_SHADER);if(a.shaderSource(r,e),a.compileShader(r),!a.getShaderParameter(r,a.COMPILE_STATUS))return console.log("Vertex shader failed to compile: "+a.getShaderInfoLog(r)),-1;var i=a.createShader(a.FRAGMENT_SHADER);if(a.shaderSource(i,t),a.compileShader(i),!a.getShaderParameter(i,a.COMPILE_STATUS))return console.log("Fragment shader failed to compile: "+a.getShaderInfoLog(i)),-1;var n=a.createProgram();return a.attachShader(n,r),a.attachShader(n,i),a.linkProgram(n),a.getProgramParameter(n,a.LINK_STATUS)?(a.deleteShader(r),a.deleteShader(i),n):(console.log("Program failed to compile: "+a.getProgramInfoLog(n)),-1)}},{key:"_CreateSemiSphere",value:function(e,t,a,r){if(null!=this.pSemiSpherePos||null!=this.pSemiSphereTex)return Ie.SR_ERR_CALL_ORDER;this.pSemiSpherePos=new Float32Array(43200),this.pSemiSphereTex=new Float32Array(28800);for(var i=(t-e)/(r-a),n=(t-e)/2*1,s=6.2831852/60,x=.0392699075,o=0,l=0,_=0,h=0;h<60;++h)for(var f=0;f<40;++f){var c=h*s;0==h&&(o=c);var u=59==h?o:(h+1)*s,d=-f*x,p=-(f+1)*x,m=void 0,S=void 0;this.pSemiSpherePos[l]=-1*Math.cos(d)*Math.cos(c),this.pSemiSpherePos[l+1]=1*Math.sin(d),this.pSemiSpherePos[l+2]=-1*Math.cos(d)*Math.sin(c),S=.5-.5*(1+d/1.5707963)*Math.sin(c),m=.5-.5*(1+d/1.5707963)*Math.cos(c),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(c),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(c),S=.5-.5*(1+p/1.5707963)*Math.sin(c),m=.5-.5*(1+p/1.5707963)*Math.cos(c),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(d)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(d),this.pSemiSpherePos[l+2]=-1*Math.cos(d)*Math.sin(u),S=.5-.5*(1+d/1.5707963)*Math.sin(u),m=.5-.5*(1+d/1.5707963)*Math.cos(u),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(d)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(d),this.pSemiSpherePos[l+2]=-1*Math.cos(d)*Math.sin(u),S=.5-.5*(1+d/1.5707963)*Math.sin(u),m=.5-.5*(1+d/1.5707963)*Math.cos(u),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(c),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(c),S=.5-.5*(1+p/1.5707963)*Math.sin(c),m=.5-.5*(1+p/1.5707963)*Math.cos(c),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(u),S=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[_++]=(2*m*n+1*e)/1,this.pSemiSphereTex[_++]=(2*S*n+a*i)/i,l+=3}return this.nSemiSpherePosNum=l/3,this.nSemiSpherePosSize=3,this.nSemiSphereTexSize=2,Ie.SR_OK}},{key:"_CreateSphere",value:function(){if(null!=this.pSpherePos||null!=this.pSphereTex)return Ie.SR_ERR_CALL_ORDER;this.pSpherePos=new Float32Array(7803),this.pSphereTex=new Float32Array(5202),this.pSphereInd=new Uint16Array(15e3);for(var e=0,t=0,a=0;a<=Fe;++a)for(var r=a*Re/Fe-1.5707963,i=Math.sin(r),n=Math.cos(r),s=0;s<=ge;++s){var x=2*s*Re/ge-Re,o=Math.sin(x),l=1*n*Math.cos(x),_=1*i,h=1*n*o;this.pSpherePos[e]=-l,this.pSpherePos[e+1]=_,this.pSpherePos[e+2]=h;var f=s/ge,c=a/Fe;this.pSphereTex[t++]=f,this.pSphereTex[t++]=c,e+=3}for(var u=0,d=0;d<Fe;++d)for(var p=0;p<ge;++p){var m=51*d+p,S=m+ge+1;this.pSphereInd[u+0]=m,this.pSphereInd[u+1]=S,this.pSphereInd[u+2]=m+1,this.pSphereInd[u+3]=S,this.pSphereInd[u+4]=S+1,this.pSphereInd[u+5]=m+1,u+=6}return this.nSpherePosNum=2500,this.nSpherePosSize=3,this.nSphereTexSize=2,Ie.SR_OK}},{key:"_CreateEllipsoid",value:function(){if(null!=this.pSpherePos||null!=this.pSphereTex)return Ie.SR_ERR_CALL_ORDER;this.pSpherePos=new Float32Array(7803),this.pSphereTex=new Float32Array(5202),this.pSphereInd=new Uint16Array(15e3);for(var e=0,t=0,a=0;a<=Fe;++a)for(var r=a*Re/Fe,i=Math.sin(r),n=Math.cos(r),s=0;s<=ge;++s){var x=2*s*Re/ge+Re,o=Math.sin(x),l=2*i*Math.cos(x),_=1*n,h=2*i*o;this.pSpherePos[e++]=-l,this.pSpherePos[e++]=-_,this.pSpherePos[e++]=h;var f=s/ge,c=a/Fe;this.pSphereTex[t++]=f,this.pSphereTex[t++]=c}for(var u=0,d=0;d<Fe;++d)for(var p=0;p<ge;++p){var m=51*d+p,S=m+ge+1;this.pSphereInd[u+0]=m,this.pSphereInd[u+1]=S,this.pSphereInd[u+2]=m+1,this.pSphereInd[u+3]=S,this.pSphereInd[u+4]=S+1,this.pSphereInd[u+5]=m+1,u+=6}return this.nSpherePosNum=2500,this.nSpherePosSize=3,this.nSphereTexSize=2,Ie.SR_OK}},{key:"_CreateCylinder",value:function(e,t,a,r,i,n,s){if(null!=this.pCylinderPos||null!=this.pCylinderTex)return Ie.SR_ERR_CALL_ORDER;if(Math.abs(n-0)<Se)this.fCylinderHeight=2;else{if(n<.5||n>6)return Ie.SR_ERR_PARAM;this.fCylinderHeight=n}if(Math.abs(s-0)<Se)e==we.SR_DE_FISH_CYLINDER_FLOOR||e==we.SR_DE_FISH_CYLINDER_CEILING?this.fCylinderRadius=2:this.fCylinderRadius=1;else{if(s<.5||s>4)return Ie.SR_ERR_PARAM;this.fCylinderRadius=s}if(this.pCylinderPos=new Float32Array(43200),this.pCylinderTex=new Float32Array(28800),null==this.pCylinderPos||null==this.pCylinderTex)return this.pCylinderPos=null,this.pCylinderTex=null,Ie.SR_ERR_ALLOC_MEMORY;for(var x=(a-t)/(i-r),o=(a-t)/2*1,l=6.2831852/60,_=this.fCylinderHeight/40,h=0,f=0,c=0;c<60;++c)for(var u=0;u<40;++u){var d=c*l,p=(c+1)*l,m=void 0,S=void 0;this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(d),S=.5+(.1+.01*u)*Math.cos(d)):(m=.5-(.5-.01*u)*Math.sin(d),S=.5+(.5-.01*u)*Math.cos(d)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(d),S=.5+(.1+.01*(u+1))*Math.cos(d)):(m=.5-(.5-.01*(u+1))*Math.sin(d),S=.5+(.5-.01*(u+1))*Math.cos(d)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(p),S=.5+(.1+.01*u)*Math.cos(p)):(m=.5-(.5-.01*u)*Math.sin(p),S=.5+(.5-.01*u)*Math.cos(p)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(p),S=.5+(.1+.01*u)*Math.cos(p)):(m=.5-(.5-.01*u)*Math.sin(p),S=.5+(.5-.01*u)*Math.cos(p)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(d),S=.5+(.1+.01*(u+1))*Math.cos(d)):(m=.5-(.5-.01*(u+1))*Math.sin(d),S=.5+(.5-.01*(u+1))*Math.cos(d)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*_,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),we.SR_DE_FISH_CYLINDER_FLOOR==e||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(p),S=.5+(.1+.01*(u+1))*Math.cos(p)):(m=.5-(.5-.01*(u+1))*Math.sin(p),S=.5+(.5-.01*(u+1))*Math.cos(p)),this.pCylinderTex[f++]=(2*m*o+1*t)/1,this.pCylinderTex[f++]=(2*S*o+r*x)/x,h+=3}return this.nCylinderPosNum=h/3,this.nCylinderPosSize=3,this.nCylinderTexSize=2,Ie.SR_OK}},{key:"_CreateArcSphere",value:function(e,t,a,r,i){if(null!=this.pArcSpherePos||null!=this.pArcSphereTex)return Ie.SR_ERR_CALL_ORDER;if(e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL){if(r>0||i<1)return Ie.SR_ERR_PARAM}else{if(e!=we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return Ie.SR_ERR_NOT_SUPPORT;if(t>0||a<1)return Ie.SR_ERR_PARAM}if(this.fImageWidth=1,this.fImageHeight=(a-t)/(i-r),this.fTexCenterX=(t+a)/2*this.fImageWidth,this.fTexCenterY=(r+i)/2*this.fImageHeight,this.fTexRadius=(a-t)/2*this.fImageWidth,null==this.pArcSphereTex&&(this.pArcSphereTex=new Float32Array(14688),null==this.pArcSphereTex))return Ie.SR_ERR_ALLOC_MEMORY;if(null==this.pArcSpherePos&&(this.pArcSpherePos=new Float32Array(22032),null==this.pArcSpherePos))return Ie.SR_ERR_ALLOC_MEMORY;var n=new Float32Array(64);if(null==n)return Ie.SR_ERR_ALLOC_MEMORY;var s=Ie.SR_OK;if(e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?s=this._ComputeLatitudeHorizontal(n,25,40,1):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&(s=this._ComputeLatitudeVertical(n,25,40,1)),Ie.SR_OK!=s)return this.pArcSpherePos=null,this.pArcSphereTex=null,s;this.fFirstLatitude=n[12],this.fLastLatitude=n[51];var x=0,o=0,l=new Float32Array(5);if(null==l)return this.pArcSpherePos=null,this.pArcSphereTex=null,Ie.SR_ERR_ALLOC_MEMORY;for(var _=Re/24,h=-12;h<12;++h)for(var f=h<0?-h:h,c=h<0?f:f+1,u=h<0?64-2*(f-1)-2:64-2*f-2,d=0;d<u;++d,++c)e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*h,n[c],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*h,n[c],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3,e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*(h+1),n[c],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*(h+1),n[c],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3,h>=0&&0==d?e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*h,n[c-1],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*h,n[c-1],l):e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*(h+1),n[c-1],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*(h+1),n[c-1],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3,e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*(h+1),n[c],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*(h+1),n[c],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3,e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*h,n[c],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*h,n[c],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3,h<0&&d==u-1?e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*(h+1),n[c+1],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*(h+1),n[c+1],l):e==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-_*h,n[c+1],l):e==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-_*h,n[c+1],l),this.pArcSpherePos[x]=l[0],this.pArcSpherePos[x+1]=l[1],this.pArcSpherePos[x+2]=l[2],this.pArcSphereTex[o++]=l[3],this.pArcSphereTex[o++]=l[4],x+=3;return this.nArcSpherePosNum=x/3,this.nArcSpherePosSize=3,this.nArcSphereTexSize=2,n=null,l=null,Ie.SR_OK}},{key:"_ComputeIntersectionOfPlaneAndLongtitude",value:function(e,t,a){if(null==e)return Ie.SR_ERR_PARAM;var r,i=e[1]*a,n=e[2]*a*Math.sin(t),s=-e[3],x=0;if(e[1]>0){var o=i*i*s*s-(i*i+n*n)*(s*s-n*n);x=(-i*s-Math.sqrt(o))/(i*i+n*n),o=n*n*s*s-(i*i+n*n)*(s*s-i*i)}if(e[1]<0){var l=i*i*s*s-(i*i+n*n)*(s*s-n*n);x=(-i*s+Math.sqrt(l))/(i*i+n*n),l=n*n*s*s-(i*i+n*n)*(s*s-i*i)}return r=-a*x,Math.asin(r/a)}},{key:"_ComputeLatitudeHorizontal",value:function(e,t,a,r){if(null==e)return Ie.SR_ERR_PARAM;var i=0,n=(this.fTexCenterY,Re/(t-1)),s=Re*this.fTexCenterY/(2*this.fTexRadius),x=Math.asin(this.fTexCenterY/this.fTexRadius),o=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(x))),l=new Float32Array(4);l[0]=0,l[1]=Math.sin(o),l[2]=Math.cos(o),l[3]=-r*Math.sin(o)*Math.sin(x),e[i++]=s;for(var _=1;_<=(t-3)/2;++_){var h=this._ComputeIntersectionOfPlaneAndLongtitude(l,1.5707963-n*_,r);e[i++]=h}for(var f=-Math.asin((this.fImageHeight-this.fTexCenterY)/this.fTexRadius),c=x,u=(c-f)/(a-1),d=0;d<a;++d)e[i++]=c-d*u;var p=f,m=Re*(this.fTexCenterY-this.fImageHeight)/(2*this.fTexRadius);o=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var S=new Float32Array(4);S[0]=0,S[1]=-Math.sin(o),S[2]=Math.cos(o),S[3]=r*Math.sin(o)*Math.sin(p);for(var R=1;R<=(t-3)/2;++R){var P=this._ComputeIntersectionOfPlaneAndLongtitude(S,n*R,r);e[i++]=P}return e[i++]=m,l=null,S=null,Ie.SR_OK}},{key:"_ComputeVertexAndTexturePosHorizontal",value:function(e,t,a,r){if(null==r)return Ie.SR_ERR_PARAM;r[2]=-e*Math.cos(a)*Math.sin(t),r[0]=e*Math.cos(a)*Math.cos(t),r[1]=e*Math.sin(a);var i,n=-Math.asin(-r[2]/e)/Re;i=a>=0?Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1])):6.2831852-Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1]));var s=this.fTexCenterX-this.fTexRadius,x=this.fTexRadius-this.fTexCenterY;return r[3]=(Math.cos(i)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,r[4]=(Math.sin(i)*this.fTexRadius*(-1-2*n)+this.fTexRadius-x)/this.fImageHeight,Ie.SR_OK}},{key:"_ComputeLatitudeVertical",value:function(e,t,a,r){if(null==e)return Ie.SR_ERR_PARAM;var i=0,n=Re/(t-1),s=Re*this.fTexCenterX/(2*this.fTexRadius),x=Math.asin(this.fTexCenterX/this.fTexRadius),o=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(x))),l=new Float32Array(4);l[0]=0,l[1]=Math.sin(o),l[2]=Math.cos(o),l[3]=-r*Math.sin(o)*Math.sin(x),e[i++]=s;for(var _=1;_<=(t-3)/2;++_){var h=this._ComputeIntersectionOfPlaneAndLongtitude(l,1.5707963-n*_,r);e[i++]=h}for(var f=-Math.asin((this.fImageWidth-this.fTexCenterX)/this.fTexRadius),c=x,u=(c-f)/(a-1),d=0;d<a;++d)e[i++]=c-d*u;var p=f,m=Re*(this.fTexCenterX-this.fImageWidth)/(2*this.fTexRadius);o=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var S=new Float32Array(4);S[0]=0,S[1]=-Math.sin(o),S[2]=Math.cos(o),S[3]=r*Math.sin(o)*Math.sin(p);for(var R=1;R<=(t-3)/2;++R){var P=this._ComputeIntersectionOfPlaneAndLongtitude(S,n*R,r);e[i++]=P}return e[i++]=m,l=null,S=null,Ie.SR_OK}},{key:"_ComputeVertexAndTexturePosVertical",value:function(e,t,a,r){if(null==r)return Ie.SR_ERR_PARAM;r[2]=-e*Math.cos(a)*Math.sin(t),r[1]=e*Math.cos(a)*Math.cos(t),r[0]=-e*Math.sin(a);var i,n=-Math.asin(-r[2]/e)/Re;i=t<=1.5707963?Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1])):6.2831852-Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1]));var s=this.fTexCenterX-this.fTexRadius,x=this.fTexRadius-this.fTexCenterY;return r[3]=(Math.cos(i)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,r[4]=(Math.sin(i)*this.fTexRadius*(-1-2*n)+this.fTexRadius-x)/this.fImageHeight,Ie.SR_OK}},{key:"_BeginCapture",value:function(){var e=Ie.SR_OK;return 0==this.bCaptureResInit&&(e=this._InitRenderTarget(this.nCaptureWidth,this.nCaptureHeight,!1,!0),Ie.SR_OK!=e)?e:(e=this._Resize(this.nCaptureWidth,this.nCaptureHeight,!1,!0),Ie.SR_OK!=e?e:(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.bIsCapturing=!0,Ie.SR_OK))}},{key:"_InitRenderTarget",value:function(e,t,a,r){if(0!=this.nCaptureRTTex||0!=this.nCaptureFBO)return Ie.SR_ERR_CALL_ORDER;if(e<=0||t<=0)return Ie.SR_ERR_PARAM;if(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0)return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MINMAP_LINEAR):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,e,t,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),0==this.nCaptureFBO&&(this.nCaptureFBO=this.ctx.createFramebuffer(),this.nCaptureFBO<=0))return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==r&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,this.bCaptureResInit=!0,Ie.SR_OK}},{key:"_Resize",value:function(e,t,a,r){if(this.nCaptureFBOWidth!=e||this.nCaptureFBOHeight!=t){if(this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),0==this.nCaptureRTTex&&(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0))return Ie.SR_ERR_WEBGL_RESOURCE;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MINMAP_LINEAR):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nCaptureFBOWidth,this.nCaptureFBOHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==r&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)}return Ie.SR_OK}},{key:"_EndCapture",value:function(e){return null==this.ctx?(this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_CALL_ORDER):null==e.pBuffer||null==e.pBuffer?(this.bIsCapturing=!1,this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),Ie.SR_ERR_PARAM):(this.ctx.readPixels(0,0,this.nCaptureWidth,this.nCaptureHeight,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e.pBuffer),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.bIsCapturing=!1,Ie.SR_OK)}},{key:"_ComputeRotateLimits",value:function(){if(this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){var e,t;if(this.enDisplayEffect==we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?(e=Ce,t=Te):(e=De,t=Ae),0==this.nWndWidth||0==this.nWndHeight)this.fRotateLimitX=e,this.fRotateLimitY=t;else{var a=Math.tan(2.748893525);if(Math.abs(a*this.fScale)<1){var r=a*a+1,i=-2*a*a*this.fScale,n=a*a*this.fScale*this.fScale-1,s=(-i-Math.sqrt(i*i-4*r*n))/(2*r),x=a*(s-this.fScale);this.fRotateLimitX=Math.acos(x/Math.sqrt(s*s+x*x)),this.fRotateLimitX<e&&(this.fRotateLimitX=e)}else this.fRotateLimitX=e;var o=Math.atan(this.nWndWidth/this.nWndHeight*Math.tan(.392699075));if(a=Math.tan(Re-o),Math.abs(a*this.fScale)<1){var l=a*a+1,_=-2*a*a*this.fScale,h=a*a*this.fScale*this.fScale-1,f=(-_-Math.sqrt(_*_-4*l*h))/(2*l),c=a*(f-this.fScale);this.fRotateLimitY=Math.acos(c/Math.sqrt(f*f+c*c)),this.fRotateLimitY<t&&(this.fRotateLimitY=t)}else this.fRotateLimitY=t}this.fRotateX>this.fRotateLimitX&&(this.fRotateX=this.fRotateLimitX),this.fRotateX<-this.fRotateLimitX&&(this.fRotateX=-this.fRotateLimitX),this.fRotateY>this.fRotateLimitY&&(this.fRotateY=this.fRotateLimitX),this.fRotateY<-this.fRotateLimitX&&(this.fRotateY=-this.fRotateLimitX)}return Ie.SR_OK}},{key:"SetMSAACache",value:function(e,t){return this.msaaFrameBuffer=e,this.renderBuffer=t,Ie.SR_OK}}]),rt=d((function e(){u(this,e),this.canvas=null,this.ctx=null,this.pFrameData=null,this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bAntialiasStateNeedChange=!1,this.bRecreateTex=!0,this.nSurfaceTexture=[],this.nSurfaceTexture[0]=0,this.nSurfaceTexture[1]=0,this.nSurfaceTexture[2]=0,this.bOpenMsaa=!1,this.nMsaaFBO=0,this.nResolveFBO=0,this.nMsaaColorBuffer=0,this.nResolveTexture=0,this.nMsaaSample=0,this.pFishParamManager=null,this.enDisplayEffect=we.SR_DE_NULL,this.nFECPort=ve,this.enPixelFormat=Oe.SR_PF_NULL,this.nTextureNum=0,this.nViewLimitateRate=Le.SR_VLR_BLACK_NULL,this.nCaptureWidth=0,this.nCaptureHeight=0,this.pSubDisplay=null,this.nRTWidth=0,this.nRTHeight=0,this.pRenderToTex=null,this.bRenderToTex=!1,this.b3DPort=!1,this.preImageRotateValue=0}),[{key:"SR_Init",value:function(e,t){if(null==e)return Ie.SR_ERR_PARAM;if(this.canvas=e,this.ctx=this.canvas.getContext("webgl2"),!this.ctx){if(this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),!this.ctx)return console.log("your browser does not support WebGL"),Ie.SR_ERR_CANVAS;this.onlySupportedWebGL1=!0,console.log("only support webgl1")}if(t==Oe.SR_PF_NV12||t==Oe.SR_PF_NV21)return Ie.SR_ERR_NOT_SUPPORT;switch(t){case Oe.SR_PF_YV12:case Oe.SR_PF_I420:this.nTextureNum=3;break;case Oe.SR_PF_SURFACE:this.nTextureNum=1;break;default:return Ie.SR_ERR_NOT_SUPPORT}return this.enPixelFormat=t,Ie.SR_OK}},{key:"SR_AddSubPort",value:function(e){var t=ve;if(null==this.ctx)return t;if(null!=this.pFishParamManager?(t=this.pFishParamManager.GetFECPort(e),this.b3DPort=!0):e==we.SR_DE_NULL&&(t=0),t==ve)return ve;this.nFECPort=t;var a=Ie.SR_OK;if(null==this.pSubDisplay&&(this.pSubDisplay=new at,null==this.pSubDisplay))return Ie.SR_ERR_ALLOC_MEMORY;if((a=this.pSubDisplay.SetCanvasSize(this.canvas.width,this.canvas.height))!=Ie.SR_OK)return a;if((a=this.pSubDisplay.SetWebGL2Support(this.onlySupportedWebGL1))!=Ie.SR_OK)return a;var r={};if(null!=this.pFishParamManager){this.pSubDisplay.SetFishParamManager(this.pFishParamManager),this.pSubDisplay.SetFECPort(this.nFECPort);for(var i=0;i<de&&Ie.SR_OK!=this.pFishParamManager.GetRenderParam(i,r);++i);}if(this.pSubDisplay.SetViewLimitateRate(this.nViewLimitateRate),(a=this.pSubDisplay.Init(this.ctx,this.enPixelFormat,e,r))!=Ie.SR_OK)return a;if(we.SR_DE_NULL!=e){a=this.pFishParamManager.SetPTZDisplayMode(ke.SR_DM_NULL);var n={};if((a=this.pFishParamManager.GetFishParam(this.nFECPort,n))!=Ie.SR_OK)return a;if(we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e){if(n.nFishParamType=Be.SR_FPT_CENTER,n.fRXLeft=.05,n.fRXRight=.95,n.fRYTop=-.3,n.fRYBottom=1.3,(a=this.pFishParamManager.SetFishParam(this.nFECPort,n))!=Ie.SR_OK)return a}else if(we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(n.nFishParamType=Be.SR_FPT_CENTER,n.fRXLeft=-.16,n.fRXRight=1.16,n.fRYTop=.005,n.fRYBottom=.995,(a=this.pFishParamManager.SetFishParam(this.nFECPort,n))!=Ie.SR_OK))return a}return null!=this.pFishParamManager&&this.pFishParamManager.ComputePTZPoints(),this.enDisplayEffect=e,this.nFECPort}},{key:"SR_UpdateFrameData",value:function(e,t,a,r,i){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==e||t<=0||a<=0)return Ie.SR_ERR_PARAM;this.frameDisplayWidth==t&&this.frameDisplayHeight==a||(this.bRecreateTex=!0);var n=Ie.SR_OK;if(Oe.SR_PF_SURFACE==this.enPixelFormat)this.frameDisplayWidth=t,this.frameDisplayHeight=a;else if(n=this._ResizeFrameData(e,t,a,r),Ie.SR_OK!=n)return n;if(1==this.bRecreateTex){if(this.enPixelFormat==Oe.SR_PF_SURFACE){if(0!=this.nSurfaceTexture[0]){var s=this.nSurfaceTexture[0];this.ctx.deleteTexture(s),this.nSurfaceTexture[0]=0}var x=this.ctx.createTexture();if(x<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,x),this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.nSurfaceTexture[0]=x}else if(this.enPixelFormat==Oe.SR_PF_YV12||this.enPixelFormat==Oe.SR_PF_I420)for(var o=0;o<this.nTextureNum;o++){if(0!=this.nSurfaceTexture[o]){var l=this.nSurfaceTexture[o];this.ctx.deleteTexture(l),this.nSurfaceTexture[o]=0}var _=this.ctx.createTexture();if(_<=0)return Ie.SR_ERR_WEBGL_RESOURCE;this.ctx.bindTexture(this.ctx.TEXTURE_2D,_),this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.nSurfaceTexture[o]=_,this.ctx.bindTexture(this.ctx.TEXTURE_2D,null)}this.bRecreateTex=!1}if(Oe.SR_PF_YV12==this.enPixelFormat){var h=this.pFrameData.subarray(0,t*a);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,a,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,h),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)));var f=this.pFrameData.subarray(t*a+t/2*a/2,t*a+t/2*a/2+t/2*a/2);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,a/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,f),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)));var c=this.pFrameData.subarray(t*a,t*a+t/2*a/2);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,a/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,c),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)),this.bAntialiasStateNeedChange=!1),h=null,f=null,c=null}else if(Oe.SR_PF_I420==this.enPixelFormat){var u=this.pFrameData.subarray(0,t*a);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,a,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,u),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)));var d=this.pFrameData.subarray(t*a,t*a+t/2*a/2);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,a/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,d),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)));var p=this.pFrameData.subarray(t*a+t/2*a/2,t*a+t/2*a/2+t/2*a/2);this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,a/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,p),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)),this.bAntialiasStateNeedChange=!1),u=null,d=null,p=null}else Oe.SR_PF_SURFACE==this.enPixelFormat&&(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,t,a,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),this.bAntialiasStateNeedChange&&(this.onlySupportedWebGL1||1!=this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR):(this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST),this.ctx.generateMipmap(this.ctx.TEXTURE_2D)),this.bAntialiasStateNeedChange=!1));return Ie.SR_OK}},{key:"SR_Display",value:function(e){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;this.pSubDisplay.SetTextureNum(this.nTextureNum);for(var t=0;t<this.nTextureNum;t++)this.pSubDisplay.SetTextures(t,this.nSurfaceTexture[t]);if(null!=this.pFishParamManager){var a={};this.pFishParamManager.GetRenderParam(this.nFECPort,a),this.pSubDisplay.SetFishParam(a)}var r=this.pSubDisplay.Render(!1);if(Ie.SR_OK!=r)return r;if(null!=this.pFishParamManager){var i=this.pFishParamManager.GetWndPort();i!=ve&&i==this.nFECPort&&this.DrawPTZLines()}return this.pSubDisplay.SetVideoResolution(this.frameDisplayWidth,this.frameDisplayHeight),e||this.pSubDisplay.DoCallBack(),Ie.SR_OK}},{key:"SR_SetDisplayRect",value:function(e,t,a,r,i){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var n=Ie.SR_OK;return(n=this.pSubDisplay.SetDisplayRect(e,t,a,r,i))!=Ie.SR_OK?n:Ie.SR_OK}},{key:"SR_SetImagePostProcess",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay&&(this.pSubDisplay=new at,null==this.pSubDisplay))return Ie.SR_ERR_ALLOC_MEMORY;var a=Ie.SR_OK;return(a=this.pSubDisplay.SetImagePostProcess(e,t))!=Ie.SR_OK?a:Ie.SR_OK}},{key:"SR_SetRenderState",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var a=Ie.SR_OK;return(a=this.pSubDisplay.SetRenderState(e,t))!=Ie.SR_OK?a:(e==Ue.SR_RST_IMAGE_ROTATE&&(this.preImageRotateValue=t),Ie.SR_OK)}},{key:"SR_GetCaptureSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e)return Ie.SR_ERR_PARAM;if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var a=Ie.SR_OK;return(a=this.pSubDisplay.GetCaptureSize(e,t))!=Ie.SR_OK?a:(this.nCaptureWidth=e.nWidth,this.nCaptureHeight=e.nHeight,Ie.SR_OK)}},{key:"SR_CaptureScreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return 0==this.nSurfaceTexture[0]||null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:this.pSubDisplay.CaptureScreen(e,t)}},{key:"SR_DrawMosaic",value:function(e,t,a,r,i){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var n=Ie.SR_OK;return(n=this.pSubDisplay.DrawMosaic(e,t,a,r,i))!=Ie.SR_OK?n:Ie.SR_OK}},{key:"DrawPTZLines",value:function(){if(null==this.pFishParamManager)return Ie.SR_ERR_CALL_ORDER;var e=this.pFishParamManager.GetPTZDisplayMode();if(e==ke.SR_DM_RANGE||e==ke.SR_DM_RECT)for(var t=0,a={fR:0,fG:0,fB:0,fA:0},r=Ie.SR_OK,i=0;i<de;++i)if(0!=this.pFishParamManager.IsPortAllocated(i)&&(t=2,r=this.pFishParamManager.GetPTZColor(i,a),Ie.SR_OK==r)){1==this.pFishParamManager.IsPTZSelected(i)&&(t+=1);var n=this.pFishParamManager.GetWndPort();if(i!=n&&ke.SR_DM_RANGE==e)if(we.SR_DE_FISH_ORIGINAL==this.pFishParamManager.GetDisplayEffect(n)){var s={};if(r=this.pFishParamManager.GetPTZPoints(i,s,ke.SR_DM_RANGE),Ie.SR_OK!=r)continue;if(null!=s.pstPoints&&0!=s.nPointNum&&(r=this.SR_DrawLines(s.pstPoints,s.nPointNum,!0,a,t,!1),Ie.SR_OK!=r))continue}else{var x;if((x=this.pFishParamManager.GetPTZFragmentNum(i))<=0)continue;for(var o=0;o<x;o++){var l={};this.pFishParamManager.GetPTZFragmentPoints(i,l,o),null!=l.pstPoints&&0!=l.nPointNum&&this.SR_DrawLines(l.pstPoints,l.nPointNum,!1,a,t,!1)}}else if(i!=n&&ke.SR_DM_RECT==e){var _={};if(r=this.pFishParamManager.GetPTZPoints(i,_,ke.SR_DM_RECT),Ie.SR_OK!=r)continue;if(null!=_.pstPoints&&0!=_.nPointNum&&(r=this.SR_DrawLines(_.pstPoints,_.nPointNum,!0,a,t,!1),Ie.SR_OK!=r))continue}}return Ie.SR_OK}},{key:"SR_DrawLines",value:function(e,t,a,r,i,n){return null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:this.pSubDisplay.DrawLines(e,t,a,r,i,n)}},{key:"SR_DrawLinesEx",value:function(e,t,a,r){return null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:this.pSubDisplay.DrawLinesEx(e,t,a,r)}},{key:"SR_DrawFont",value:function(e,t,a,r,i,n,s,x,o,l,_){return Ie.SR_ERR_NOT_SUPPORT}},{key:"SR_DrawFontEx",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;return null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:this.pSubDisplay.DrawFontEx(e,t,a,r)}},{key:"SR_DrawImage",value:function(e,t,a,r,i,n){return null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:this.pSubDisplay.DrawImage(e,t,a,r,i,n)}},{key:"SR_DelSubPort",value:function(e){return null==this.ctx||null==this.pSubDisplay?Ie.SR_ERR_CALL_ORDER:(this.pSubDisplay.DelSubPort(),null!=this.pFishParamManager&&this.nFECPort==e&&this.pFishParamManager.FreeFECPort(this.nFECPort),this.enDisplayEffect=we.SR_DE_NULL,this.pSubDisplay=null,Ie.SR_OK)}},{key:"SR_GetFishParam",value:function(e){return null==e?Ie.SR_ERR_PARAM:null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.GetFishParam(this.nFECPort,e)}},{key:"SR_SetFishParam",value:function(e){return null==e?Ie.SR_ERR_PARAM:null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.SetFishParam(this.nFECPort,e)}},{key:"SR_Destroy",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.pFrameData=null;for(var t=0;t<this.nTextureNum;t++)0!=this.nSurfaceTexture[t]&&null!=this.ctx&&(this.ctx.deleteTexture(this.nSurfaceTexture[t]),this.nSurfaceTexture[t]=0);if(this.SR_DelSubPort(this.nFECPort),e){var a=this.ctx.getExtension("WEBGL_lose_context");a.loseContext&&a.loseContext()}return this.ctx=null,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bAntialiasStateNeedChange=!1,this.bOpenMsaa=!1,this.bRecreateTex=!0,this.pFishParamManager=null,Ie.SR_OK}},{key:"SR_SetCanvasSize",value:function(e,t){if(!this.pSubDisplay||!this.canvas)return Ie.SR_ERR_CALL_ORDER;this.canvas.width=e,this.canvas.height=t;var a=this.pSubDisplay.SetCanvasSize(e,t);return a!=Ie.SR_OK?a:Ie.SR_OK}},{key:"SR_GetCanvasSize",value:function(){return this.canvas?(console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height),Ie.SR_OK):Ie.SR_ERR_CALL_ORDER}},{key:"SR_SetAntialias",value:function(e){if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;if(1==this.onlySupportedWebGL1)return Ie.SR_ERR_NOT_SUPPORT;this.bAntialias!=e&&(this.bAntialias=e,this.bAntialiasStateNeedChange=!0);var t=this.pSubDisplay.SetAntialias(this.bAntialias);return t!=Ie.SR_OK?t:Ie.SR_OK}},{key:"SR_SetPTZDisplayMode",value:function(e){return null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.SetPTZDisplayMode(e)}},{key:"SR_SetFishParamManager",value:function(e){return null!=this.pFishParamManager?Ie.SR_ERR_NOT_SUPPORT:(this.pFishParamManager=e,Ie.SR_OK)}},{key:"SR_SetViewParam",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var a=this.pSubDisplay.SetViewParam(e,t);return a!=Ie.SR_OK?a:Ie.SR_OK}},{key:"SR_GetViewParam",value:function(e,t){if(null==this.ctx)return Ie.SR_ERR_CALL_ORDER;if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var a=this.pSubDisplay.GetViewParam(e,t);return a!=Ie.SR_OK?a:Ie.SR_OK}},{key:"SR_SetCallBack",value:function(e,t,a){if(null==this.pSubDisplay)return Ie.SR_ERR_CALL_ORDER;var r=Ie.SR_OK;return(r=this.pSubDisplay.SetCallBack(e,t,a))!=Ie.SR_OK?r:Ie.SR_OK}},{key:"SR_SetPTZColor",value:function(e,t){return null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.SetPTZColor(e,t)}},{key:"SR_GetPTZColor",value:function(e,t){return null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.GetPTZColor(e,t)}},{key:"SR_SetPTZPort",value:function(e){return null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:this.pFishParamManager.SetPTZPort(e)}},{key:"SR_GetPTZPort",value:function(e,t,a){return null==this.pFishParamManager?Ie.SR_ERR_CALL_ORDER:null==a?Ie.SR_ERR_PARAM:this.pFishParamManager.GetPTZPort(e,t,a)}},{key:"SR_SetViewLimitateRate",value:function(e){return this.nViewLimitateRate=e,Ie.SR_OK}},{key:"SR_GetDllVersion",value:function(){return"V3.1.1.2_build20251119_svn98375"}},{key:"_ResizeFrameData",value:function(e,t,a,r){if(0==t%8&&null==r)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(a),this.pFrameData=e,Ie.SR_OK;if(null!=r&&0==r.nCropBottom&&0==r.nCropLeft&&0==r.nCropRight&&0==r.nCropTop&&0==t%8)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(a),this.pFrameData=e,Ie.SR_OK;if((null==this.pFrameData||this.frameDisplayWidth!=t/8*8||this.frameDisplayHeight!=a)&&(this.frameDisplayWidth=8*Math.round(t/8),this.frameDisplayHeight=Math.round(a),this.pFrameData=null,this.pFrameData=new Uint8Array(this.frameDisplayWidth*this.frameDisplayHeight*3/2),null==this.pFrameData))return Ie.SR_ERR_ALLOC_MEMORY;var i=0,n=0,s=Math.round(r.nCodeWidth),x=Math.round(r.nCodeHeight),o=0;if(Oe.SR_PF_YV12==this.enPixelFormat||Oe.SR_PF_I420==this.enPixelFormat){var l,_,h;null!=r?(i=Math.round(r.nCropLeft),n=Math.round(r.nCropTop),l=e.subarray(i*s+n,s*x),_=e.subarray(s*x+n*s/4+i/2,s*x*5/4),h=e.subarray(s*x*5/4+n*s/4+i/2,s*x*3/2),o=s):(l=e.subarray(0,t*a),_=e.subarray(t*a,t*a*5/4),h=e.subarray(t*a*5/4,t*a*3/2),o=this.frameDisplayWidth);for(var f=null,c=0;c<this.frameDisplayHeight;++c){var u=Math.round(c*o),d=Math.round(c*o+this.frameDisplayWidth);f=l.slice(u,d);var p=Math.round(c*this.frameDisplayWidth);this.pFrameData.set(f,p)}for(var m=0;m<this.frameDisplayHeight/2;++m){var S=Math.round(m*o/2),R=Math.round(m*o/2+this.frameDisplayWidth/2);f=_.slice(S,R);var P=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+m*this.frameDisplayWidth/2);this.pFrameData.set(f,P)}for(var b=0;b<this.frameDisplayHeight/2;++b){var y=Math.round(b*o/2),E=Math.round(b*o/2+this.frameDisplayWidth/2);f=h.slice(y,E);var g=Math.round(this.frameDisplayWidth*this.frameDisplayHeight*5/4+b*this.frameDisplayWidth/2);this.pFrameData.set(f,g)}l=null,_=null,h=null,f=null}else if(Oe.SR_PF_NV12==this.enPixelFormat){var F,v,C;null!=r?(i=Math.round(r.nCropLeft),n=Math.round(r.nCropTop),F=e.subarray(n*s+i,s*x),v=e.subarray(s*x+n*s/4+i/2,s*x*3/2),o=Math.round(r.nCodeWidth)):(F=e.subarray(0,s*x),v=e.subarray(s*x,s*x*3/2),o=this.frameDisplayWidth);for(var T=0;T<this.frameDisplayHeight;++T){var D=Math.round(T*o),A=Math.round(T*o+this.frameDisplayWidth);C=F.slice(D,A);var I=Math.round(T*this.frameDisplayWidth);this.pFrameData.set(C,I)}for(var M=0;M<this.frameDisplayHeight/2;++M){var L=Math.round(M*o),w=Math.round(M*o+this.frameDisplayWidth);C=v.slice(L,w);var O=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+M*this.frameDisplayWidth);this.pFrameData.set(C,O)}F=null,v=null,C=null}return Ie.SR_OK}}]),it=d((function e(){u(this,e),this.bPortAllocated=[],this.pRenderParam=[],this.pFishParam=[],this.stPTZColor=[],this.pPTZSetColor=[];for(var t=0;t<de;++t)this.pPTZSetColor[t]={},this.pPTZSetColor[t].fR=0,this.pPTZSetColor[t].fG=0,this.pPTZSetColor[t].fB=0,this.pPTZSetColor[t].fA=1,this.pPTZSetColor[t].bSetColor=!1;this.nBasePTZPointNum=[],this.nOriPTZPointNum=[],this.nPanoPTZPointNum=[],this.nPTZFragmentNum=[],this.pBasePTZPoints=[],this.pPanoPTZPoints=[],this.pRectPoints=[],this.nPTZRectNum=[],this.nPTZDisplayMode=ke.SR_DM_NULL,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=[],this.nWndPort=ve,this.nPlaceType=0,this.nPTZFragmentNode=[],this.bPTZSelected=[],this.nPTZDisplayMode=ke.SR_DM_RANGE;for(var a=0;a<de;++a){this.bPortAllocated[a]=!1,this.bPTZSelected[a]=!1,this.pRenderParam[a]=null,this.pFishParam[a]=null,this.stPTZColor[a]={},this.stPTZColor[a].fR=0,this.stPTZColor[a].fG=0,this.stPTZColor[a].fB=0,this.stPTZColor[a].fA=0,this.nBasePTZPointNum[a]=0,this.nOriPTZPointNum[a]=0,this.nPanoPTZPointNum[a]=0,this.nPTZRectNum[a]=0,this.pPanoPTZPoints[a]=[],this.pRectPoints[a]=[],this.pBasePTZPoints[a]=[],this.pOriPTZPoints[a]=[];for(var r=0;r<4;++r)this.pRectPoints[a][r]={},this.pRectPoints[a][r].fX=0,this.pRectPoints[a][r].fY=0;for(var i=0;i<pe;++i)this.pBasePTZPoints[a][i]={},this.pBasePTZPoints[a][i].fX=0,this.pBasePTZPoints[a][i].fY=0,this.pOriPTZPoints[a][i]={},this.pOriPTZPoints[a][i].fX=0,this.pOriPTZPoints[a][i].fY=0,this.pPanoPTZPoints[a][i]={},this.pPanoPTZPoints[a][i].fX=0,this.pPanoPTZPoints[a][i].fY=0;this.nPTZFragmentNum[a]=0,this.nPTZFragmentNode[a]=[];for(var n=0;n<100;++n)this.nPTZFragmentNode[a][n]=0}this.InitColorList()}),[{key:"GetFECPort",value:function(e){for(var t=ve,a=0;a<de;++a)if(0==this.bPortAllocated[a]){t=a;break}if(t==ve)return t;if(e==we.SR_DE_NULL)return t;var r=this.JudgeDisplayEffect(e);if(Ie.SR_OK!=r)return this.FreeFECPort(t),ve;if(we.SR_DE_FISH_PANORAMA_CEILING_360==e||we.SR_DE_FISH_PANORAMA_CEILING_180==e||we.SR_DE_FISH_PANORAMA_FLOOR_360==e||we.SR_DE_FISH_PANORAMA_FLOOR_180==e||we.SR_DE_FISH_PANORAMA_WALL==e||we.SR_DE_FISH_ORIGINAL==e){if(ve!=this.nWndPort)return this.FreeFECPort(t),ve;this.nWndPort=t}if(!(we.SR_DE_FISH_PTZ_CEILING!=e&&we.SR_DE_FISH_PTZ_FLOOR!=e&&we.SR_DE_FISH_PTZ_WALL!=e||ve==this.nWndPort||null==this.pRenderParam[this.nWndPort]||we.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[this.nWndPort].nDisplayEffect&&we.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[this.nWndPort].nDisplayEffect))return this.FreeFECPort(t),ve;if(we.SR_DE_FISH_PANORAMA_CEILING_180==e||we.SR_DE_FISH_PANORAMA_FLOOR_180==e)for(var i=0;i<de;++i)if(null!=this.pRenderParam[i]&&(we.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_WALL==this.pRenderParam[i].nDisplayEffect))return this.FreeFECPort(t),ve;if(we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e)for(var n=0;n<de;++n)if(null!=this.pRenderParam[n]&&we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[n].nDisplayEffect)return this.FreeFECPort(t),ve;if(we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e)for(var s=0;s<de;++s)if(null!=this.pRenderParam[s]&&we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[s].nDisplayEffect)return this.FreeFECPort(t),ve;return this.pRenderParam[t]={},this.pRenderParam[t].fCosH=1,this.pRenderParam[t].fSinH=0,this.pRenderParam[t].fCosV=1,this.pRenderParam[t].fSinV=0,this.pRenderParam[t].fAngle=0,this.pRenderParam[t].fRX1=this.fRX1,this.pRenderParam[t].fRX2=this.fRX2,this.pRenderParam[t].fRY1=this.fRY1,this.pRenderParam[t].fRY2=this.fRY2,this.pRenderParam[t].bBlack=this.bBlack,this.pRenderParam[t].fZoom=.035+.8,this.pRenderParam[t].nDisplayEffect=e,this.pRenderParam[t].bBlack=!1,this.pRenderParam[t].bCut=!1,this.pFishParam[t]={},this.pFishParam[t].nFishParamType=0,this.pFishParam[t].bCut=!1,this.pFishParam[t].fAngle=this.pRenderParam[t].fAngle,this.pFishParam[t].fPTZX=.5,this.pFishParam[t].fPTZY=.5,this.pFishParam[t].fRXLeft=this.pRenderParam[t].fRX1,this.pFishParam[t].fRXRight=this.pRenderParam[t].fRX2,this.pFishParam[t].fRYTop=this.pRenderParam[t].fRY1,this.pFishParam[t].fRYBottom=this.pRenderParam[t].fRY2,this.pFishParam[t].bBlack=this.pRenderParam[t].bBlack,this.pFishParam[t].fZoom=(this.pRenderParam[t].fZoom-.8)/7,this.bPortAllocated[t]=!0,t}},{key:"FreeFECPort",value:function(e){if(e<0||e>=de)return Ie.SR_ERR_PARAM;this.nWndPort==e&&(this.nWndPort=ve),null!=this.pRenderParam[e]&&(this.pRenderParam[e].fCosH=1,this.pRenderParam[e].fSinH=0,this.pRenderParam[e].fCosV=1,this.pRenderParam[e].fSinV=0,this.pRenderParam[e].fAngle=0,this.pRenderParam[e].fZoom=0,this.pRenderParam[e].fRX1=0,this.pRenderParam[e].fRX2=1,this.pRenderParam[e].fRY1=0,this.pRenderParam[e].fRY2=1,this.pRenderParam[e].nDisplayEffect=0,this.pRenderParam[e].bBlack=!1,this.pRenderParam[e].bCut=!1),null!=this.pFishParam[e]&&(this.pFishParam[e].nFishParamType=0,this.pFishParam[e].fRXLeft=0,this.pFishParam[e].fRXRight=1,this.pFishParam[e].fRYTop=0,this.pFishParam[e].fRYBottom=1,this.pFishParam[e].bBlack=!1,this.pFishParam[e].bCut=!1,this.pFishParam[e].fAngle=0,this.pFishParam[e].fZoom=0,this.pFishParam[e].fPTZX=.5,this.pFishParam[e].fPTZY=.5),this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0;for(var t=0;t<4;++t)this.pRectPoints[e][t].fX=0,this.pRectPoints[e][t].fY=0;for(var a=0;a<pe;++a)this.pBasePTZPoints[e][a].fX=0,this.pBasePTZPoints[e][a].fY=0,this.pOriPTZPoints[e][a].fX=0,this.pOriPTZPoints[e][a].fY=0,this.pPanoPTZPoints[e][a].fX=0,this.pPanoPTZPoints[e][a].fY=0;if(this.pPTZSetColor[e].bSetColor&&(this.pPTZSetColor[e].fA=0,this.pPTZSetColor[e].fR=0,this.pPTZSetColor[e].fG=0,this.pPTZSetColor[e].fB=0,this.pPTZSetColor[e].bSetColor=!1),this.bPTZSelected[e]=!1,0!=this.nPlaceType){for(var r=!1,i=0;i<de;++i)if(null!=this.pRenderParam[i]&&(we.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_WALL==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PANORAMA_CEILING_360==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PANORAMA_CEILING_180==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PANORAMA_WALL==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_CYLINDER_CEILING==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_CYLINDER_FLOOR==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[i].nDisplayEffect)){r=!0;break}r||(this.nPlaceType=0)}for(var n=!1,s=0;s<de;++s)if(null!=this.pRenderParam[s]){n=!0;break}n||(this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1),this.nPTZFragmentNum[e]=0;for(var x=0;x<100;++x)this.nPTZFragmentNode[e][x]=0;return this.bPortAllocated[e]=!1,Ie.SR_OK}},{key:"DeInit",value:function(){for(var e=0;e<de;++e){for(var t=0;t<4;++t)this.pRectPoints[e][t]=null;for(var a=0;a<pe;++a)this.pBasePTZPoints[e][a]=null,this.pOriPTZPoints[e][a]=null,this.pPanoPTZPoints[e][a]=null;this.nPTZFragmentNum[e]=0,this.nPTZFragmentNode[e]=null,this.bPortAllocated[e]=!1,this.bPTZSelected[e]=!1,this.pRenderParam[e]=null,this.pFishParam[e]=null,this.stPTZColor[e]=null,this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0,this.pPanoPTZPoints[e]=null,this.pRectPoints[e]=null,this.pBasePTZPoints[e]=null,this.pOriPTZPoints[e]=null}return this.bPortAllocated=null,this.pRenderParam=null,this.pFishParam=null,this.stPTZColor=null,this.nBasePTZPointNum=null,this.nOriPTZPointNum=null,this.nPanoPTZPointNum=null,this.nPTZFragmentNum=null,this.pBasePTZPoints=null,this.pPanoPTZPoints=null,this.pRectPoints=null,this.nPTZRectNum=null,this.nPTZDisplayMode=ke.SR_DM_NULL,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=null,this.pBasePTZPoints=null,this.nWndPort=ve,this.nPlaceType=0,this.nPTZFragmentNode=null,this.bPTZSelected=null,this.nPTZDisplayMode=ke.SR_DM_RANGE,Ie.SR_OK}},{key:"InitColorList",value:function(){this.stPTZColor[0].fR=.5,this.stPTZColor[0].fG=.5,this.stPTZColor[0].fB=0,this.stPTZColor[0].fA=1,this.stPTZColor[1].fR=1,this.stPTZColor[1].fG=0,this.stPTZColor[1].fB=0,this.stPTZColor[1].fA=1,this.stPTZColor[2].fR=0,this.stPTZColor[2].fG=1,this.stPTZColor[2].fB=0,this.stPTZColor[2].fA=1,this.stPTZColor[3].fR=0,this.stPTZColor[3].fG=0,this.stPTZColor[3].fB=1,this.stPTZColor[3].fA=1,this.stPTZColor[4].fR=1,this.stPTZColor[4].fG=1,this.stPTZColor[4].fB=0,this.stPTZColor[4].fA=1,this.stPTZColor[5].fR=.5,this.stPTZColor[5].fG=0,this.stPTZColor[5].fB=1,this.stPTZColor[5].fA=1,this.stPTZColor[6].fR=0,this.stPTZColor[6].fG=1,this.stPTZColor[6].fB=1,this.stPTZColor[6].fA=1,this.stPTZColor[7].fR=1,this.stPTZColor[7].fG=.5,this.stPTZColor[7].fB=0,this.stPTZColor[7].fA=1,this.stPTZColor[8].fR=0,this.stPTZColor[8].fG=.5,this.stPTZColor[8].fB=.5,this.stPTZColor[8].fA=1;for(var e=9;e<de;e++)this.stPTZColor[e].fR=1*e/de,this.stPTZColor[e].fG=1*e/de,this.stPTZColor[e].fB=1*e/de,this.stPTZColor[e].fA=1;return Ie.SR_OK}},{key:"GetRangePoints",value:function(e){if(e<0||e>=de)return Ie.SR_ERR_PARAM;if(null==this.pRenderParam[e])return Ie.SR_ERR_CALL_ORDER;var t=0,a=0;switch(this.nOriPTZPointNum[e]=0,this.nBasePTZPointNum[e]=0,this.pRenderParam[e].nDisplayEffect){case we.SR_DE_FISH_PTZ_CEILING:for(a=0;a<1;a+=.01)this.GetFishPTZCeiling(t,a,e);for(a=.9995,t=0;t<1;t+=.02)this.GetFishPTZCeiling(t,a,e);for(t=.999,a=.9995;a>=0;a-=.01)this.GetFishPTZCeiling(t,a,e);for(a=0,t=.999;t>=0;t-=.02)this.GetFishPTZCeiling(t,a,e);break;case we.SR_DE_FISH_PTZ_FLOOR:for(a=0;a<1;a+=.01)this.GetFishPTZFloor(t,a,e);for(a=.9995,t=0;t<1;t+=.02)this.GetFishPTZFloor(t,a,e);for(t=.999,a=.9995;a>=0;a-=.01)this.GetFishPTZFloor(t,a,e);for(a=0,t=.999;t>=0;t-=.02)this.GetFishPTZFloor(t,a,e);break;case we.SR_DE_FISH_PTZ_WALL:for(a=0;a<1;a+=.01)this.GetFishPTZWALL(t,a,e);for(a=.9995,t=0;t<1;t+=.02)this.GetFishPTZWALL(t,a,e);for(t=.999,a=.9995;a>=0;a-=.01)this.GetFishPTZWALL(t,a,e);for(a=0,t=.999;t>=0;t-=.02)this.GetFishPTZWALL(t,a,e);break;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_OK}},{key:"TransformPTZRangePoints",value:function(e){if(ve==this.nWndPort)return Ie.SR_ERR_CALL_ORDER;if(null==this.pBasePTZPoints[e]||null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;this.nPanoPTZPointNum[e]=0;var t=Ie.SR_OK,a=this.nWndPort;switch(this.pRenderParam[a].nDisplayEffect){case we.SR_DE_FISH_PANORAMA_WALL:if(t=this.GetPanoPTZWall(e),Ie.SR_OK!=t)return t;break;case we.SR_DE_FISH_PANORAMA_FLOOR_360:if(t=this.GetPanoPTZFloor(e),Ie.SR_OK!=t)return t;break;case we.SR_DE_FISH_PANORAMA_CEILING_360:if(t=this.GetPanoPTZCeiling(e),Ie.SR_OK!=t)return t}return this.CalcPTZFragmentPoints(e),Ie.SR_OK}},{key:"GetRectPoints",value:function(e){if(e<0||e>=de)return Ie.SR_ERR_PARAM;if(this.nWndPort==ve)return Ie.SR_ERR_CALL_ORDER;if(null==this.pRenderParam[this.nWndPort]||null==this.pFishParam[e])return Ie.SR_ERR_CALL_ORDER;var t=this.pRenderParam[this.nWndPort].nDisplayEffect,a=Ie.SR_OK,r={fX:0,fY:0};switch(t){case we.SR_DE_FISH_PANORAMA_WALL:if(a=this.GetPointFish2PanoWall(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY),Ie.SR_OK!=a)return a;break;case we.SR_DE_FISH_PANORAMA_FLOOR_360:if(a=this.GetPointFish2PanoFloor(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY),Ie.SR_OK!=a)return Ie.SR_ERR_NOT_SUPPORT==a&&(this.pRectPoints[e]=null),a;break;case we.SR_DE_FISH_PANORAMA_CEILING_360:if(a=this.GetPointFish2PanoCeiling(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY),Ie.SR_OK!=a)return Ie.SR_ERR_NOT_SUPPORT==a&&(this.pRectPoints[e]=null),a;break;case we.SR_DE_FISH_ORIGINAL:r.fX=this.pFishParam[e].fPTZX,r.fY=this.pFishParam[e].fPTZY}if(null==this.pRectPoints[e]){this.pRectPoints[e]=[];for(var i=0;i<4;++i)this.pRectPoints[e][i]={},this.pRectPoints[e][i].fX=0,this.pRectPoints[e][i].fY=0}return this.pRectPoints[e][0].fX=r.fX-me,this.pRectPoints[e][0].fY=r.fY-me,this.pRectPoints[e][1].fX=r.fX+me,this.pRectPoints[e][1].fY=r.fY-me,this.pRectPoints[e][2].fX=r.fX+me,this.pRectPoints[e][2].fY=r.fY+me,this.pRectPoints[e][3].fX=r.fX-me,this.pRectPoints[e][3].fY=r.fY+me,this.nPTZRectNum[e]=4,Ie.SR_OK}},{key:"GetFishPTZCeiling",value:function(e,t,a){var r,i,n,s,x,o,l,_={fX:0,fY:0},h={fX:0,fY:0},f={fX:0,fY:0},c={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),x=(this.fRX1+this.fRX2)/2*1,o=(this.fRY1+this.fRY2)/2*s,l=(this.fRX2-this.fRX1)/2*1,_.fX=t-.5,_.fY=.5-e,r=this.pRenderParam[a].fZoom,h.fX=_.fX,h.fY=_.fY*this.pRenderParam[a].fCosV+r*this.pRenderParam[a].fSinV,i=r*this.pRenderParam[a].fCosV-_.fY*this.pRenderParam[a].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY+i*i),d=Math.asin(n/u)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,f.fX=h.fX*this.pRenderParam[a].fCosH-h.fY*this.pRenderParam[a].fSinH,f.fY=h.fX*this.pRenderParam[a].fSinH+h.fY*this.pRenderParam[a].fCosH,c.fX=2*f.fX*l+x,c.fY=2*-f.fY*l+o;var p=this.nBasePTZPointNum[a];this.pBasePTZPoints[a][p].fX=f.fX+.5,this.pBasePTZPoints[a][p].fY=.5-f.fY,this.nBasePTZPointNum[a]=this.nBasePTZPointNum[a]+1;var m=this.fRX1<=0?0:1*this.fRX1,S=this.fRY1<=0?0:this.fRY1*s,R=this.fRX2>=1?1-m:1*this.fRX2-m,P=this.fRY2>=1?s-S:this.fRY2*s-S;if(c.fX=(c.fX-m)/R,c.fY=(c.fY-S)/P,c.fX<=1&&c.fY<=1&&c.fX>=0&&c.fY>=0){var b=this.nOriPTZPointNum[a];this.pOriPTZPoints[a][b].fX=c.fX,this.pOriPTZPoints[a][b].fY=c.fY,this.nOriPTZPointNum[a]=this.nOriPTZPointNum[a]+1}return Ie.SR_OK}},{key:"GetFishPTZFloor",value:function(e,t,a){var r,i,n,s,x,o,l,_={fX:0,fY:0},h={fX:0,fY:0},f={fX:0,fY:0},c={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),x=(this.fRX1+this.fRX2)/2*1,o=(this.fRY1+this.fRY2)/2*s,l=(this.fRX2-this.fRX1)/2*1,_.fX=e-.5,_.fY=t-.5,r=this.pRenderParam[a].fZoom,h.fX=_.fX,h.fY=_.fY*this.pRenderParam[a].fCosV+r*this.pRenderParam[a].fSinV,i=r*this.pRenderParam[a].fCosV-_.fY*this.pRenderParam[a].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY+i*i),d=Math.asin(n/u)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,f.fX=h.fX*this.pRenderParam[a].fCosH-h.fY*this.pRenderParam[a].fSinH,f.fY=h.fX*this.pRenderParam[a].fSinH+h.fY*this.pRenderParam[a].fCosH,c.fX=2*f.fX*l+x,c.fY=2*f.fY*l+o;var p=this.nBasePTZPointNum[a];this.pBasePTZPoints[a][p].fX=f.fX+.5,this.pBasePTZPoints[a][p].fY=f.fY+.5,this.nBasePTZPointNum[a]=this.nBasePTZPointNum[a]+1;var m=this.fRX1<=0?0:1*this.fRX1,S=this.fRY1<=0?0:this.fRY1*s,R=this.fRX2>=1?1-m:1*this.fRX2-m,P=this.fRY2>=1?s-S:this.fRY2*s-S;if(c.fX=(c.fX-m)/R,c.fY=(c.fY-S)/P,c.fX<=1&&c.fY<=1&&c.fX>=0&&c.fY>=0){var b=this.nOriPTZPointNum[a];this.pOriPTZPoints[a][b].fX=c.fX,this.pOriPTZPoints[a][b].fY=c.fY,this.nOriPTZPointNum[a]=this.nOriPTZPointNum[a]+1}return Ie.SR_OK}},{key:"GetFishPTZWALL",value:function(e,t,a){var r,i,n,s,x,o,l,_,h={fX:0,fY:0},f={fX:0,fY:0},c={fX:0,fY:0},u={};x=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),o=(this.fRX1+this.fRX2)/2*1,l=(this.fRY1+this.fRY2)/2*x,_=(this.fRX2-this.fRX1)/2*1,h.fX=t-.5,h.fY=e-.5,r=this.pRenderParam[a].fZoom,f.fX=h.fX,f.fY=h.fY*this.pRenderParam[a].fCosV+r*this.pRenderParam[a].fSinV,i=r*this.pRenderParam[a].fCosV-h.fY*this.pRenderParam[a].fSinV,c.fX=f.fX*this.pRenderParam[a].fCosH+i*this.pRenderParam[a].fSinH,c.fY=f.fY,n=i*this.pRenderParam[a].fCosH-f.fX*this.pRenderParam[a].fSinH,s=Math.sqrt(c.fX*c.fX+c.fY*c.fY);var d=Math.sqrt(c.fX*c.fX+c.fY*c.fY+n*n),p=Math.asin(s/d)/1.5707963*.5;u.fX=p*c.fX/s*_*2+o,u.fY=p*c.fY/s*_*2+l;var m=this.nBasePTZPointNum[a];this.pBasePTZPoints[a][m].fX=p*c.fX/s+.5,this.pBasePTZPoints[a][m].fY=p*c.fY/s+.5,this.nBasePTZPointNum[a]=this.nBasePTZPointNum[a]+1;var S=this.fRX1<=0?0:1*this.fRX1,R=this.fRY1<=0?0:this.fRY1*x,P=this.fRX2>=1?1-S:1*this.fRX2-S,b=this.fRY2>=1?x-R:this.fRY2*x-R;if(u.fX=(u.fX-S)/P,u.fY=(u.fY-R)/b,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var y=this.nOriPTZPointNum[a];this.pOriPTZPoints[a][y].fX=u.fX,this.pOriPTZPoints[a][y].fY=u.fY,this.nOriPTZPointNum[a]=this.nOriPTZPointNum[a]+1}return Ie.SR_OK}},{key:"GetPanoPTZCeiling",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==this.pBasePTZPoints[e])return Ie.SR_ERR_CALL_ORDER;var t,a,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var i,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(i=1*-this.fRX1)>n&&(n=i),this.fRX2>1&&(i=1*(this.fRX2-1))>n&&(n=i),this.fRY1<0&&(i=-this.fRY1*t)>n&&(n=i),this.fRY2>1&&(i=(this.fRY2-1)*t)>n&&(n=i));for(var s,x=n/a,o={fX:0,fY:0},l={fX:0,fY:0},_=0;_<r;++_)if(l.fX=this.pBasePTZPoints[e][_].fX,l.fY=this.pBasePTZPoints[e][_].fY,!(Math.abs(l.fX-.5)<Se&&Math.abs(l.fY-.5)<Se)){var h={fX:0,fY:0},f={fX:0,fY:0};h.fX=l.fX-.5,h.fY=l.fY-.5,f.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),f.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(h.fX*h.fX+h.fY*h.fY),u=Math.sqrt(f.fX*f.fX+f.fY*f.fY);if(s=Math.acos((h.fX*f.fX+h.fY*f.fY)/(c*u)),h.fX*f.fY-h.fY*f.fX>0&&(s=6.2831852-s),o.fX=s/6.2831853,o.fY=(2*(.5-c)-x)/(.8-x),o.fY>=0&&o.fX>=0&&o.fY<=1&&o.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=o.fX,this.pPanoPTZPoints[e][d].fY=o.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return Ie.SR_OK}},{key:"GetPanoPTZFloor",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==this.pBasePTZPoints[e])return Ie.SR_ERR_CALL_ORDER;var t,a,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var i,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(i=1*-this.fRX1)>n&&(n=i),this.fRX2>1&&(i=1*(this.fRX2-1))>n&&(n=i),this.fRY1<0&&(i=-this.fRY1*t)>n&&(n=i),this.fRY2>1&&(i=(this.fRY2-1)*t)>n&&(n=i));for(var s,x=n/a,o={fX:0,fY:0},l={fX:0,fY:0},_=0;_<r;++_)if(l.fX=this.pBasePTZPoints[e][_].fX,l.fY=this.pBasePTZPoints[e][_].fY,!(Math.abs(l.fX-.5)<Se&&Math.abs(l.fY-.5)<Se)){var h={fX:0,fY:0},f={fX:0,fY:0};h.fX=l.fX-.5,h.fY=l.fY-.5,f.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),f.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(h.fX*h.fX+h.fY*h.fY),u=Math.sqrt(f.fX*f.fX+f.fY*f.fY);if(s=Math.acos((h.fX*f.fX+h.fY*f.fY)/(c*u)),h.fX*f.fY-h.fY*f.fX>0&&(s=6.2831852-s),o.fX=1-s/6.2831853,o.fY=1-(2*(.5-c)-x)/(.8-x),o.fY>=0&&o.fX>=0&&o.fY<=1&&o.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=o.fX,this.pPanoPTZPoints[e][d].fY=o.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return Ie.SR_OK}},{key:"GetPanoPTZWall",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==this.pBasePTZPoints[e])return Ie.SR_ERR_CALL_ORDER;var t,a,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var i,n,s,x,o,l=0,_=1,h=.1,f=.9;this.fRX1<0&&(i=1*-this.fRX1,l=i/=2*a),this.fRX2>1&&(n=1*(this.fRX2-1),_=1-(n/=2*a)),this.fRY1<0&&(s=-this.fRY1*t,h=(s/=2*a)>.1?s:.1),this.fRY2>1&&(x=(this.fRY2-1)*t,f=(x/=2*a)>1-.9?1-x:.9);for(var c={fX:0,fY:0},u={fX:0,fY:0},d=0;d<r;++d){u.fX=this.pBasePTZPoints[e][d].fX,u.fY=this.pBasePTZPoints[e][d].fY;var p=2*u.fX*a,m=2*u.fY*a;if(o=Math.sqrt(a*a-(m-a)*(m-a)),!(Math.abs(o)<Se)&&(u.fX=a*(p-a)/o+a,u.fY=m,c.fX=(u.fX-2*l*a)/(2*(_-l)*a),c.fY=(u.fY-2*h*a)/(2*(f-h)*a),c.fY>=0&&c.fX>=0&&c.fY<=1&&c.fX<=1)){var S=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][S].fX=c.fX,this.pPanoPTZPoints[e][S].fY=c.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return Ie.SR_OK}},{key:"GetPointPano2FishCeiling",value:function(e,t,a){if(null==e||null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s=0,x=1,o=0,l=1,_=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>_&&(_=n),s=n/=2*i),this.fRX2>1&&((n=1*(this.fRX2-1))>_&&(_=n),x=1-(n/=2*i)),this.fRY1<0&&((n=-this.fRY1*r)>_&&(_=n),o=n/=2*i),this.fRY2>1&&((n=(this.fRY2-1)*r)>_&&(_=n),l=1-(n/=2*i)));var h,f,c=_/i,u={},d={};return u.fX=t,u.fY=(.8-c)*a+c,h=6.2831853*u.fX+this.pRenderParam[this.nWndPort].fAngle,f=.5*(1-u.fY),d.fX=.5-f*Math.sin(h),d.fY=.5+f*Math.cos(h),d.fX=(d.fX-s)/(x-s),d.fY=(d.fY-o)/(l-o),e.fX=d.fX,e.fY=d.fY,Ie.SR_OK}},{key:"GetPointPano2FishFloor",value:function(e,t,a){if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==e)return Ie.SR_ERR_PARAM;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s=0,x=1,o=0,l=1,_=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>_&&(_=n),s=n/=2*i),this.fRX2>1&&((n=1*(this.fRX2-1))>_&&(_=n),x=1-(n/=2*i)),this.fRY1<0&&((n=-this.fRY1*r)>_&&(_=n),o=n/=2*i),this.fRY2>1&&((n=(this.fRY2-1)*r)>_&&(_=n),l=1-(n/=2*i)));var h,f,c=_/i,u={},d={};return u.fX=1-t,u.fY=(.8-c)*(1-a)+c,h=6.2831853*u.fX+this.pRenderParam[this.nWndPort].fAngle,f=.5*(1-u.fY),d.fX=.5-f*Math.sin(h),d.fY=.5+f*Math.cos(h),d.fX=(d.fX-s)/(x-s),d.fY=(d.fY-o)/(l-o),e.fX=d.fX,e.fY=d.fY,Ie.SR_OK}},{key:"GetPointPano2FishWall",value:function(e,t,a){if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==e)return Ie.SR_ERR_PARAM;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s,x,o,l=0,_=1,h=.1,f=.9,c=0,u=1,d=0,p=1;this.fRX1<0&&(n=1*-this.fRX1,l=n/=2*i,c=n),this.fRX2>1&&(s=1*(this.fRX2-1),_=1-(s/=2*i),u=1-s),this.fRY1<0&&(x=-this.fRY1*r,h=(x/=2*i)>.1?x:.1,d=x),this.fRY2>1&&(o=(this.fRY2-1)*r,f=(o/=2*i)>1-.9?1-o:.9,p=1-o);var m={},S={};m.fX=t*(_-l)+l,m.fY=a*(f-h)+h;var R=Math.sqrt(.25-(m.fY-.5)*(m.fY-.5));return S.fX=(m.fX-.5)*R/.5+.5,S.fY=m.fY,S.fX=(S.fX-c)/(u-c),S.fY=(S.fY-d)/(p-d),e.fX=S.fX,e.fY=S.fY,Ie.SR_OK}},{key:"UpdatePTZPosition",value:function(e,t,a){if(null==this.pRenderParam[e])return Ie.SR_ERR_CALL_ORDER;var r={fHAngleSin:0,fHAngleCos:0,fVAngleSin:0,fVAngleCos:0},i=Ie.SR_OK;if(we.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||we.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect){if((i=this.ComputeAngleVertical(t,a,r,this.pRenderParam[e].nDisplayEffect))!=Ie.SR_OK)return i}else{if(we.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect)return Ie.SR_ERR_NOT_SUPPORT;if((i=this.ComputeAngleHorizontal(t,a,r))!=Ie.SR_OK)return i}return 0==this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,r,this.pRenderParam[e].fZoom,this.pRenderParam[e].nDisplayEffect)?Ie.SR_ERR_PARAM:(this.pRenderParam[e].fCosH=r.fHAngleCos,this.pRenderParam[e].fSinH=r.fHAngleSin,this.pRenderParam[e].fCosV=r.fVAngleCos,this.pRenderParam[e].fSinV=r.fVAngleSin,Ie.SR_OK)}},{key:"JudgeDisplayEffect",value:function(e){var t=0;switch(t){case 0:return t=this.GetPlaceType(e),4==this.nPlaceType&&(this.nPlaceType=0),Ie.SR_OK;case 3:return(t=this.GetPlaceType(e))==this.nPlaceType||4==this.nPlaceType?Ie.SR_OK:Ie.SR_ERR_NOT_SUPPORT;case 2:case 1:return(t=this.GetPlaceType(e))==this.nPlaceType||4==t?Ie.SR_OK:Ie.SR_ERR_NOT_SUPPORT;default:return Ie.SR_ERR_NOT_SUPPORT}return Ie.SR_ERR_NOT_SUPPORT}},{key:"GetPlaceType",value:function(e){switch(e){case we.SR_DE_FISH_PTZ_CEILING:case we.SR_DE_FISH_PANORAMA_CEILING_360:case we.SR_DE_FISH_PANORAMA_CEILING_180:case we.SR_DE_FISH_CYLINDER_CEILING:case we.SR_DE_FISH_CYLINDER_SPLIT_CEILING:return 3;case we.SR_DE_FISH_PTZ_FLOOR:case we.SR_DE_FISH_PANORAMA_FLOOR_360:case we.SR_DE_FISH_PANARAMA_FLOOR_180:case we.SR_DE_FISH_CYLINDER_FLOOR:case we.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:return 2;case we.SR_DE_FISH_PTZ_WALL:case we.SR_DE_FISH_PANORAMA_WALL:case we.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case we.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:return 1;case we.SR_DE_FISH_SEMISPHERE:case we.SR_DE_FISH_ORIGINAL:case we.SR_DE_FISH_PLANET:case we.SR_DE_PANORAMA_SPHERE:case we.SR_DE_PANORAMA_PLANET:case we.SR_DE_ELLIPSOID_VIEWLIMITED:return 4;default:return 0}return 0}},{key:"SetFishParam",value:function(e,t){if(e<0||e>=de)return Ie.SR_ERR_PARAM;if(null==t)return Ie.SR_ERR_PARAM;if(null==this.pRenderParam[e])return Ie.SR_ERR_CALL_ORDER;var a=Ie.SR_OK;switch(t.nFishParamType){case Be.SR_FPT_CENTER:if((a=this.UpdateCircyeParam(t.fRXLeft,t.fRXRight,t.fRYTop,t.fRYBottom))!=Ie.SR_OK)return a;this.pRenderParam[e].bCut=t.bCut,this.bBlack=t.bBlack;break;case Be.SR_FPT_ANGLE:if(we.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PANORAMA_FLOOR_360!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[e].nDisplayEffect)return Ie.SR_ERR_NOT_SUPPORT;if((a=this.UpdateWideScanAngle(e,t.fAngle))!=Ie.SR_OK)return a;this.pFishParam[e].fAngle=t.fAngle;break;case Be.SR_FPT_ZOOM:if(we.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return Ie.SR_ERR_NOT_SUPPORT;if((a=this.UpdateRangeParam(e,t.fZoom))!=Ie.SR_OK)return a;this.pFishParam[e].fZoom=t.fZoom;break;case Be.SR_FPT_PTZ:if(we.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return Ie.SR_ERR_NOT_SUPPORT;if((a=this.UpdatePTZPosition(e,t.fPTZX,t.fPTZY,this.pRenderParam[e].fZoom,!0))!=Ie.SR_OK)return a;this.pFishParam[e].fPTZX=t.fPTZX,this.pFishParam[e].fPTZY=t.fPTZY;break;case Be.SR_FPT_NULL:default:return Ie.SR_ERR_NOT_SUPPORT}return this.ComputePTZPoints(),Ie.SR_OK}},{key:"GetFishParam",value:function(e,t){return e<0||e>=de||null==t||null==this.pFishParam[e]?Ie.SR_ERR_PARAM:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.bCut=this.pRenderParam[e].bCut,t.nFishParamType=this.pFishParam[e].nFishParamType,t.fAngle=this.pFishParam[e].fAngle,t.fZoom=this.pFishParam[e].fZoom,t.fPTZX=this.pFishParam[e].fPTZX,t.fPTZY=this.pFishParam[e].fPTZY,Ie.SR_OK)}},{key:"GetRenderParam",value:function(e,t){return e<0||e>=de||null==t||null==this.pRenderParam[e]?Ie.SR_ERR_PARAM:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.fCosH=this.pRenderParam[e].fCosH,t.fSinH=this.pRenderParam[e].fSinH,t.fCosV=this.pRenderParam[e].fCosV,t.fSinV=this.pRenderParam[e].fSinV,t.fAngle=this.pRenderParam[e].fAngle,t.fZoom=this.pRenderParam[e].fZoom,t.nDisplayEffect=this.pRenderParam[e].nDisplayEffect,t.bCut=this.pRenderParam[e].bCut,Ie.SR_OK)}},{key:"UpdateCircyeParam",value:function(e,t,a,r){if(e<=-.5||e>=.4||t<=.6||t>=1.5||a<=-.5||a>=.4||r<=.6||r>=1.5||e+t<=.8||e+t>=1.2||a+r<=.8||a+r>=1.2)return Ie.SR_ERR_PARAM;if(e<0||t>1||a<0||r>1)for(var i=0;i<de;++i)if(null!=this.pRenderParam[i]&&(we.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[i].nDisplayEffect||we.SR_DE_FISH_PTZ_WALL==this.pRenderParam[i].nDisplayEffect)){var n={};if(n.fHAngleCos=this.pRenderParam[i].fCosH,n.fHAngleSin=this.pRenderParam[i].fSinH,n.fVAngleCos=this.pRenderParam[i].fCosV,n.fVAngleSin=this.pRenderParam[i].fSinV,0==this.IsInImage(e,t,a,r,n,this.pRenderParam[i].fZoom,this.pRenderParam[i].nDisplayEffect))return Ie.SR_ERR_PARAM}return this.fRX1=e,this.fRX2=t,this.fRY1=a,this.fRY2=r,Ie.SR_OK}},{key:"UpdateWideScanAngle",value:function(e,t){return null==this.pRenderParam[e]?Ie.SR_ERR_CALL_ORDER:(we.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[e].nDisplayEffect||we.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[e].nDisplayEffect?this.pRenderParam[e].fAngle=t:we.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect||(this.pRenderParam[e].fAngle=-t),Ie.SR_OK)}},{key:"ComputeAngleVertical",value:function(e,t,a,r){var i=e,n=t,s=Math.sqrt((n-.5)*(n-.5)+(i-.5)*(i-.5));if(s>.5)return Ie.SR_ERR_PARAM;if(s<.001)return a.fVAngleCos=1,a.fVAngleSin=0,a.fHAngleCos=1,a.fHAngleSin=0,Ie.SR_OK;if(r==we.SR_DE_FISH_PTZ_CEILING){a.fHAngleCos=(.5-n)/s,a.fHAngleSin=(.5-i)/s;var x=s*Re;a.fVAngleCos=Math.cos(x),a.fVAngleSin=Math.sin(x)}else{if(r!=we.SR_DE_FISH_PTZ_FLOOR)return Ie.SR_ERR_PARAM;a.fHAngleCos=(n-.5)/s,a.fHAngleSin=(.5-i)/s;var o=s*Re;a.fVAngleCos=Math.cos(o),a.fVAngleSin=Math.sin(o)}return Ie.SR_OK}},{key:"ComputeAngleHorizontal",value:function(e,t,a){var r,i,n,s,x,o,l,_=e,h=t;return(h-(x=.5))*(h-x)+(_-x)*(_-x)>.25?Ie.SR_ERR_PARAM:(o=(h-x)/x*Re/2,r=Math.cos(o),i=Math.sin(o),(_-x)/x/r>1||(_-x)/x/r<-1?Ie.SR_ERR_PARAM:(l=(_-x)/x/r*Re/2,n=Math.cos(l),s=Math.sin(l),a.fVAngleCos=r,a.fVAngleSin=i,a.fHAngleCos=n,a.fHAngleSin=s,Ie.SR_OK))}},{key:"IsInImage",value:function(e,t,a,r,i,n,s){return 1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,1,.5,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,0,.5,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,.5,1,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,.5,0,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,0,0,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,0,1,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,1,1,s)&&1!=this.IsOutofImage(e,t,a,r,i.fHAngleCos,i.fHAngleSin,i.fVAngleCos,i.fVAngleSin,n,1,0,s)}},{key:"IsOutofImage",value:function(e,t,a,r,i,n,s,x,o,l,_,h){var f,c,u,d,p,m,S,R,P,b,y,E,g;if(y=(e+t)/2*1,E=(a+r)/2*(b=(t-e)/(r-a)),g=(t-e)/2*1,h==we.SR_DE_FISH_PTZ_CEILING){if(c=l-.5,u=(f=.5-_)*s+(m=o)*x,(S=m*s-f*x)<=0)return!0;P=Math.sqrt(c*c+u*u);var F=Math.sqrt(c*c+u*u+S*S),v=Math.asin(P/F)/1.5707963*.5;if(p=(-((c=v*c/P)*n+(u=v*u/P)*i)*g*2+E)/b,(d=((c*i-u*n)*g*2+y)/1)<0||d>1||p<0||p>1)return!0}if(h==we.SR_DE_FISH_PTZ_FLOOR){if(c=l-.5,u=(f=_-.5)*s+(m=o)*x,(S=m*s-f*x)<=0)return!0;P=Math.sqrt(c*c+u*u);var C=Math.sqrt(c*c+u*u+S*S),T=Math.asin(P/C)/1.5707963*.5;if(p=(((c=T*c/P)*n+(u=T*u/P)*i)*g*2+E)/b,(d=((c*i-u*n)*g*2+y)/1)<0||d>1||p<0||p>1)return!0}if(h==we.SR_DE_FISH_PTZ_WALL){if(d=(c=l-.5)*i+(S=(m=o)*s-(f=_-.5)*x)*n,p=u=f*s+m*x,(R=S*i-c*n)<=0)return!0;P=Math.sqrt(d*d+p*p);var D=Math.sqrt(d*d+p*p+R*R),A=Math.asin(P/D)/1.5707963*.5;if(p=(A*p/P*g*2+E)/b,(d=(A*d/P*g*2+y)/1)<0||d>1||p<0||p>1)return!0}return!1}},{key:"ComputePTZPoints",value:function(){if(ve==this.nWndPort)return Ie.SR_ERR_CALL_ORDER;for(var e=0;e<de;++e)if(null!=this.pRenderParam[e]&&(we.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect||we.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||we.SR_DE_FISH_PTZ_WALL==this.pRenderParam[e].nDisplayEffect)){var t=Ie.SR_OK;if(this.nPTZDisplayMode==ke.SR_DM_RANGE){if(t=this.GetRangePoints(e),Ie.SR_OK!=t)continue;if(t=this.TransformPTZRangePoints(e),Ie.SR_OK!=t)continue}else if(this.nPTZDisplayMode==ke.SR_DM_RECT&&(t=this.GetRectPoints(e),Ie.SR_OK!=t))continue}return Ie.SR_OK}},{key:"GetWndPort",value:function(){return this.nWndPort}},{key:"GetPTZDisplayMode",value:function(){return this.nPTZDisplayMode}},{key:"GetPTZColor",value:function(e,t){return e<0||e>=de||null==t?Ie.SR_ERR_PARAM:(t.fA=this.stPTZColor[e].fA,t.fR=this.stPTZColor[e].fR,t.fG=this.stPTZColor[e].fG,t.fB=this.stPTZColor[e].fB,this.pPTZSetColor[e].bSetColor&&(Math.abs(this.pPTZSetColor[e].fA)<Se||Math.abs(this.pPTZSetColor[e].fR)<Se||Math.abs(this.pPTZSetColor[e].fG)<Se||Math.abs(this.pPTZSetColor[e].fB)<Se)&&(t.fA=this.pPTZSetColor[e].fA,t.fR=this.pPTZSetColor[e].fR,t.fG=this.pPTZSetColor[e].fG,t.fB=this.pPTZSetColor[e].fB),Ie.SR_OK)}},{key:"SetPTZColor",value:function(e,t){return e<0||e>=de||null==t?Ie.SR_ERR_PARAM:(this.pPTZSetColor[e].fR=t.fR,this.pPTZSetColor[e].fG=t.fG,this.pPTZSetColor[e].fB=t.fB,this.pPTZSetColor[e].fA=t.fA,this.pPTZSetColor[e].bSetColor=!0,Ie.SR_OK)}},{key:"IsPTZSelected",value:function(e){return!(e<0||e>=de)&&this.bPTZSelected[e]}},{key:"GetPTZPort",value:function(e,t,a){if(this.nWndPort==ve)return Ie.SR_ERR_CALL_ORDER;if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;var r=de,i={};i.fX=e,i.fY=t;for(var n=0;n<de;++n)this.bPTZSelected[n]=!1;if(this.nPTZDisplayMode==ke.SR_DM_RANGE){switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case we.SR_DE_FISH_PANORAMA_FLOOR_360:this.GetPointPano2FishFloor(i,e,t);break;case we.SR_DE_FISH_PANORAMA_CEILING_360:this.GetPointPano2FishCeiling(i,e,t);break;case we.SR_DE_FISH_PANORAMA_WALL:this.GetPointPano2FishWall(i,e,t)}for(var s=0;s<de;++s)if(0!=this.nOriPTZPointNum[s]){var x={};x.fX=this.pOriPTZPoints[s][0].fX,x.fY=this.pOriPTZPoints[s][0].fY;var o={};o.fX=this.pOriPTZPoints[s][0].fX,o.fY=this.pOriPTZPoints[s][0].fY;for(var l=1;l<this.nOriPTZPointNum[s];++l)this.GetPTZRectange(x,o,this.pOriPTZPoints[s][l]);if(i.fX<=x.fX&&i.fX>=o.fX&&i.fY>=o.fY&&i.fY<=x.fY){r=s;break}}}else{if(this.nPTZDisplayMode!=ke.SR_DM_RECT)return Ie.SR_ERR_NOT_SUPPORT;for(var _=0;_<de;++_)if(i.fX<=this.pRectPoints[_][2].fX&&i.fX>=this.pRectPoints[_][0].fX&&i.fY>=this.pRectPoints[_][0].fY&&i.fY<=this.pRectPoints[_][2].fY){r=_;break}}return r<de?(this.bPTZSelected[r]=!0,a.nPTZPort=r,Ie.SR_OK):Ie.SR_ERR_NOT_SUPPORT}},{key:"SetPTZPort",value:function(e){if(e<0||e>=de)return Ie.SR_ERR_PARAM;for(var t=0;t<de;++t)this.bPTZSelected[t]=!1;if(this.nPTZDisplayMode==ke.SR_DM_RANGE){if(0==this.nOriPTZPointNum[e])return Ie.SR_ERR_PARAM;this.bPTZSelected[e]=!0}else{if(0==this.nPTZRectNum[e])return Ie.SR_ERR_PARAM;this.bPTZSelected[e]=!0}return Ie.SR_OK}},{key:"GetPTZRectange",value:function(e,t,a){return a.fX<t.fX&&(t.fX=a.fX),a.fY<t.fY&&(t.fY=a.fY),a.fX>e.fX&&(e.fX=a.fX),a.fY>e.fY&&(e.fY=a.fY),Ie.SR_OK}},{key:"GetPTZPoints",value:function(e,t,a){return e<0||e>=de?Ie.SR_ERR_PARAM:null==this.pRenderParam[this.nWndPort]?Ie.SR_ERR_CALL_ORDER:(ke.SR_DM_RANGE==a?null!=this.pOriPTZPoints[e]&&0!=this.nOriPTZPointNum[e]&&(t.pstPoints=this.pOriPTZPoints[e],t.nPointNum=this.nOriPTZPointNum[e]):ke.SR_DM_RECT==a&&null!=this.pRectPoints[e]&&(t.pstPoints=this.pRectPoints[e],t.nPointNum=4),Ie.SR_OK)}},{key:"SetPTZDisplayMode",value:function(e){return this.nPTZDisplayMode=e,this.ComputePTZPoints()}},{key:"GetDisplayEffect",value:function(e){return e<0||e>=de||null==this.pRenderParam?we.SR_DE_NULL:this.pRenderParam[e].nDisplayEffect}},{key:"GetPTZFragmentPoints",value:function(e,t,a){if(e<0||e>=de)return Ie.SR_ERR_PARAM;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return Ie.SR_ERR_PARAM;var r=this.nPTZFragmentNode[e][a];if(t.nPointNum=this.nPTZFragmentNode[e][a+1]-this.nPTZFragmentNode[e][a],t.nPointNum<0)return Ie.SR_ERR_CALL_ORDER;t.pstPoints=[];for(var i=0;i<t.nPointNum;++i){var n={};n.fX=this.pPanoPTZPoints[e][r+i].fX,n.fY=this.pPanoPTZPoints[e][r+i].fY,t.pstPoints.push(n)}return Ie.SR_OK}},{key:"GetPTZFragmentNum",value:function(e){return e<0||e>=de||0==this.nPTZFragmentNum[e]?0:this.nPTZFragmentNum[e]}},{key:"CalcPTZFragmentPoints",value:function(e){if(e<0||e>=de)return Ie.SR_ERR_PARAM;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return Ie.SR_ERR_CALL_ORDER;this.nPTZFragmentNode[e][0]=0,this.nPTZFragmentNum[e]=1;for(var t=0,a=0;a<this.nPanoPTZPointNum[e]-1;a++)Math.abs(this.pPanoPTZPoints[e][a+1].fX-this.pPanoPTZPoints[e][a].fX)>.5&&(t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=a+1,this.nPTZFragmentNum[e]=this.nPTZFragmentNum[e]+1);var r=this.nPanoPTZPointNum[e];return Math.abs(this.pPanoPTZPoints[e][0].fX-this.pPanoPTZPoints[e][r-1].fX)<.5&&(this.pPanoPTZPoints[e][r].fX=this.pPanoPTZPoints[e][0].fX,this.pPanoPTZPoints[e][r].fY=this.pPanoPTZPoints[e][0].fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1),t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=this.nPanoPTZPointNum[e],Ie.SR_OK}},{key:"IsPortAllocated",value:function(e){return this.bPortAllocated[e]}},{key:"GetPointFish2PanoCeiling",value:function(e,t,a){if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==e)return Ie.SR_ERR_PARAM;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*r)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*r)>s&&(s=n));var x,o=s/i,l={fX:0,fY:0};if(Math.abs(t-.5)<Se&&Math.abs(a-.5)<Se)return Ie.SR_ERR_NOT_SUPPORT;var _={},h={};_.fX=t-.5,_.fY=a-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var f=Math.sqrt(_.fX*_.fX+_.fY*_.fY),c=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return x=Math.acos((_.fX*h.fX+_.fY*h.fY)/(f*c)),_.fX*h.fY-_.fY*h.fX>0&&(x=6.2831852-x),l.fX=x/6.2831853,l.fY=(2*(.5-f)-o)/(.8-o),l.fY>=0&&l.fX>=0&&l.fY<=1&&l.fX<=1?(e.fX=l.fX,e.fY=l.fY,Ie.SR_OK):Ie.SR_ERR_PARAM}},{key:"GetPointFish2PanoFloor",value:function(e,t,a){if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==e)return Ie.SR_ERR_PARAM;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*r)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*r)>s&&(s=n));var x,o=s/i,l={fX:0,fY:0};if(Math.abs(t-.5)<Se&&Math.abs(a-.5)<Se)return Ie.SR_ERR_NOT_SUPPORT;var _={},h={};_.fX=t-.5,_.fY=a-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var f=Math.sqrt(_.fX*_.fX+_.fY*_.fY),c=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return x=Math.acos((_.fX*h.fX+_.fY*h.fY)/(f*c)),_.fX*h.fY-_.fY*h.fX>0&&(x=6.2831852-x),l.fX=1-x/6.2831853,l.fY=1-(2*(.5-f)-o)/(.8-o),l.fY>=0&&l.fX>=0&&l.fY<=1&&l.fX<=1?(e.fX=l.fX,e.fY=l.fY,Ie.SR_OK):Ie.SR_ERR_PARAM}},{key:"GetPointFish2PanoWall",value:function(e,t,a){if(null==this.pRenderParam[this.nWndPort])return Ie.SR_ERR_CALL_ORDER;if(null==e)return Ie.SR_ERR_PARAM;var r,i;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var n,s,x,o,l,_=0,h=1,f=.1,c=.9;this.fRX1<0&&(n=1*-this.fRX1,_=n/=2*i),this.fRX2>1&&(s=1*(this.fRX2-1),h=1-(s/=2*i)),this.fRY1<0&&(x=-this.fRY1*r,f=(x/=2*i)>.1?x:.1),this.fRY2>1&&(o=(this.fRY2-1)*r,c=(o/=2*i)>1-.9?1-o:.9);var u={fX:0,fY:0},d=2*t*i,p=2*a*i;return l=Math.sqrt(i*i-(p-i)*(p-i)),Math.abs(l)<Se?Ie.SR_ERR_PARAM:(t=i*(d-i)/l+i,a=p,u.fX=(t-2*_*i)/(2*(h-_)*i),u.fY=(a-2*f*i)/(2*(c-f)*i),u.fY>=0&&u.fX>=0&&u.fY<=1&&u.fX<=1?(e.fX=u.fX,e.fY=u.fY,Ie.SR_OK):Ie.SR_ERR_PARAM)}},{key:"UpdateRangeParam",value:function(e,t){if(null==this.pRenderParam[e])return Ie.SR_ERR_CALL_ORDER;if(t<1e-5||t>.6)return Ie.SR_ERR_PARAM;var a=0;return we.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&we.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect||(a=7*t+.8,this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,this.pRenderParam[e].fCosH,this.pRenderParam[e].fSinH,this.pRenderParam[e].fCosV,this.pRenderParam[e].fSinV,a,this.pRenderParam[e].nDisplayEffect))?(this.pRenderParam[e].fZoom=a,Ie.SR_OK):Ie.SR_ERR_PARAM}}]),nt=function(){function a(){e(this,a),this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1,this.bAntialias=!1,this.bRecreateAntia=!1,this.pfuncCBIn=null,this.pUserIn=null,this.pfuncCBOut=null,this.pUserOut=null}return t(a,[{key:"SR_Init",value:function(e){this.canvas=e,this.ctx=this.canvas.getContext("2d"),console.log("2d render init"),this.ctx||console.log("your browser does not support 2d render")}},{key:"SR_Draw",value:function(e){return this.needRect?this.ctx.drawImage(e,this.regionSx,this.regionSy,this.regionSw,this.regionSh,0,0,this.canvas.width,this.canvas.height):this.ctx.drawImage(e,0,0,e.displayWidth,e.displayHeight,0,0,this.canvas.width,this.canvas.height),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),1}},{key:"SR_UpdateFrameData",value:function(e,t,a,r,i){return this.needRect?this.ctx.drawImage(e,this.regionSx,this.regionSy,this.regionSw,this.regionSh,0,0,this.canvas.width,this.canvas.height):this.ctx.drawImage(e,0,0,t,a,0,0,this.canvas.width,this.canvas.height),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),1}},{key:"SR_Display",value:function(e){return 1}},{key:"SR_GetCaptureSize",value:function(){return 0}},{key:"GetCanvasData",value:function(e){console.log("%c start time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);console.log("%c 2 time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var a=document.createElement("canvas"),r=a.getContext("2d");a.width=this.canvas.width,a.height=this.canvas.height,r.putImageData(t,0,0);var i=a.toDataURL(),n=document.createElement("a");n.download=(new Date).getTime()+".jpeg",n.href=i,n.dataset.downloadurl=["image/jpeg",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("%c end time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue")}},{key:"SR_DelSubPort",value:function(e){return 0}},{key:"SR_AddSubPort",value:function(e){return 0}},{key:"SR_SetDisplayRect",value:function(e,t,a,r){this.regionSx=e,this.regionSy=t,this.regionSw=a,this.regionSh=r,this.needRect=!0}},{key:"SR_Destroy",value:function(){this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1}},{key:"SR_SetCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"SR_GetCanvasSize",value:function(){console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height)}},{key:"SR_SetAntialias",value:function(e){return e!=this.bAntialias?(this.bAntialias=e,this.bRecreateAntia=!0):this.bRecreateAntia=!1,this.bRecreateAntia&&(this.bAntialias?(this.canvas.width=5*this.canvas.width,this.canvas.height=5*this.canvas.height,this.canvas.style.transform="scale(0.2)",this.canvas.style.transformOrigin="0 0"):(this.canvas.width=this.canvas.width/5,this.canvas.height=this.canvas.height/5,this.canvas.style.transform="scale(1)",this.canvas.style.transformOrigin="0 0")),1}},{key:"SR_SetCallBack",value:function(e,t,a){switch(a){case ce.SRCALLBACKTYPE.SR_CBT_NULL:this.pfuncCBIn=e,this.pUserIn=t;break;case ce.SRCALLBACKTYPE.SR_CBT_OUT:this.pfuncCBOut=e,this.pUserOut=t;break;default:return 0}return 1}},{key:"SR_DrawFont",value:function(e,t,a,r,i,n,s,x,o){var l=[],_={};return _.bBackground=n,_.nFontWidth=r,_.nFontHeight=i,_.pstBGColor=s,_.pstFontColor=a,_.pString=e,_.pstStartPos=t,_.fRotateAngle=x,_.pFontFamily=o,l.push(_),this.SR_DrawFontEx(l,1),1}},{key:"SR_DrawFontEx",value:function(e,t){for(var a=0;a<t;a++){this.ctx.textBaseline="top";var r=e[a].nFontWidth,i=e[a].nFontHeight,n=(r=Math.round(r))<(i=Math.round(i))?r:i;this.ctx.font=n.toString()+"px "+e[a].pFontFamily;var s=parseInt(255*e[a].pstFontColor.fR),x=parseInt(255*e[a].pstFontColor.fG),o=parseInt(255*e[a].pstFontColor.fB),l=s<16?"0"+s.toString(16):s.toString(16),_=x<16?"0"+x.toString(16):x.toString(16),h=o<16?"0"+o.toString(16):o.toString(16);this.ctx.fillStyle="#"+l+_+h,this.ctx.globalAlpha=e[a].pstFontColor.fA,this.ctx.fillText(e[a].pString,e[a].pstStartPos.fX*this.canvas.width,e[a].pstStartPos.fY*this.canvas.height)}return 1}},{key:"SR_DrawImage",value:function(e,t,a,r,i,n){return 1}},{key:"SR_DrawLinesEx",value:function(e,t,a,r){return 1}}]),a}(),st=16,xt=16,ot=30,lt=function(){function a(t){e(this,a),this.oVideoRenderHandle=t,this.renderEngine="webgl",this.oVideoHandle=null,this.mainCanvasID=null,this.curTimestamp=0,this.mainSubPort=0,this.mainVaildSubPort=0,this.mainFECCorrect=ce.SRDISPLAYEFFECT.SR_DE_NULL,this.FECErrorCode=0,this.subPortNum=0,this.FECShowMode=ce.SRPTZDISPLAYMODE.SR_DM_RANGE,this.pFishParamManager=null,this.enPixelFormat=ce.SRPIXELFORMAT.SR_PF_NULL,this.InitFECParam(),this.nTimePerFrame=0,this.nFrameRate=0,this.privateNormalLinesInfo=[],this.maxNormalPrivateLineTimeStamp=0,this.curNormalLinesInfo=null,this.privateThermalLinesInfo=[],this.curThermalLinesInfo=null,this.privateTemLinesInfo=[],this.maxTemPrivateLineTimeStamp=0,this.curTemLinesInfo=null,this.m_nTEMDrawLinescount=0,this.m_nTEMDrawFontscount=0,this.privateTargetLinesInfo=[],this.maxTargetPrivateLineTimeStamp=0,this.curTargetLinesInfo=null,this.privateMDLinesInfo=[],this.maxMDPrivateLineTimeStamp=0,this.curMDLinesInfo=null,this.privateExactLinesInfo=[],this.maxExactPrivateLineTimeStamp=0,this.curExactLinesInfo=null,this.privateExactRuleLinesInfo=[],this.maxExactRulePrivateLineTimeStamp=0,this.curExactRuleLinesInfo=null,this.DrawlinesParamArray=[],this.DrawlinesParamArrayAllPointNum=0,this.bDrawlinesParamArrayFill=0,this.DrawMosaiclinesParamArray=[],this.DrawTargetlinesParamArray=[],this.DrawPOSFontsParamArray=[],this.DrawTargetEventIDList=[],this.privateNormalFontsInfo=[],this.maxNormalPrivateFontTimeStamp=0,this.curNormalFontsInfo=null,this.curNormalPOSFontsInfo=null,this.privateTemFontsInfo=[],this.maxTemPrivateFontTimeStamp=0,this.curTemFontsInfo=null,this.privateTargetFontsInfo=[],this.maxTargetPrivateFontTimeStamp=0,this.curTargetFontsInfo=null,this.privateExactPOSFontsInfo=[],this.maxExactPOSPrivateFontTimeStamp=0,this.curExactPOSFontsInfo=null,this.privateExactFontsInfo=[],this.maxExactPrivateFontTimeStamp=0,this.curExactFontsInfo=null,this.DrawFontParamArray=[],this.privateImageInfo=[],this.maxPrivateImageTimeStamp=0,this.curImagesInfo={},this.privatePNGImageInfo=[],this.m_bEnableIVSEx=!0,this.m_bEnableMDEx=!0,this.m_bEnablePICEx=!1,this.m_bDisPos=!1,this.m_bEnableTEMEx=!1,this.m_bEnableTEMBox=!1,this.m_bEnableTEMLine=!1,this.m_bEnableTEMPoint=!1,this.m_bEnableTrackEx=!1,this.m_bEnableTrackPeople=!0,this.m_bEnableTrackVehicle=!0,this.m_bEnableThermal=!1,this.m_bEnableThermalFireMask=!1,this.m_bEnableThermalRuleGas=!1,this.m_bEnableThermalTargetGas=!1,this.m_bEnableFIREEx=!0,this.m_bEnableFireDis=!0,this.m_bEnableFireMax=!1,this.m_bEnableFireMaxPos=!0,this.m_bEnableFireDistance=!0,this.bSRCallBackFlag=!1,this.hasSetFECParamManager=!1,this.panoramaDisplayEffect=0,this.viewParamType=3,this.viewParamValue=.2,this.VRViewLimitRate=0,this.pstWaterFontParamArray=[];for(var r=0;r<st;r++)this.pstWaterFontParamArray[r]=[];this.pstWaterFontParam=null,this.pWaterImageParam=[],this.waterMarkImageIndex=0,this.waterMarkImageMax=1,this.baseWaterMarkImageTime=0,this.finishDecodeImage=!1,this.aPOSAdaptBuf=[],this.textCanvas=null,this.MosaicType=0,this.MosaicSize=0,this.MosaicColorR=0,this.MosaicColorG=0,this.MosaicColorB=0,this.MosaicColorA=0}return t(a,[{key:"InitDisplay",value:function(e,t,a){if(this.renderEngine=t,this.mainCanvasID=e,this.printfFlag=this.oVideoRenderHandle.printfFlag,"2d"===this.renderEngine||"2D"===this.renderEngine)this.oVideoHandle=new nt,this.printfFlag>=0&&console.log("2d render");else{this.oVideoHandle=new rt,this.mainFECCorrect==ce.SRDISPLAYEFFECT.SR_DE_NULL&&0==this.panoramaDisplayEffect||(null==this.pFishParamManager&&(this.pFishParamManager=new it),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0);var r=ce.SRDISPLAYEFFECT.SR_DE_NULL;(r=1==this.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE:3==this.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET:ce.SRDISPLAYEFFECT.SR_DE_NULL)!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE&&r!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET||0!=this.VRViewLimitRate&&(r=ce.SRDISPLAYEFFECT.SR_DE_ELLIPSOID_VIEWLIMITED,this.oVideoHandle.SR_SetViewLimitateRate(ce.SRVIEWLIMITATERATE.SR_VLR_BLACK_1216_2832)),this.printfFlag>=0&&console.log("webgl render this.printfFlag:"+this.printfFlag)}return this.enPixelFormat=a,this.oVideoHandle.SR_Init(e,a),this.mainVaildSubPort=this.oVideoHandle.SR_AddSubPort(this.mainFECCorrect),-1==this.mainVaildSubPort?(console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this.mainVaildSubPort),0):(this.mainFECCorrect==ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE&&this.oVideoHandle.SR_SetViewParam(this.viewParamType,this.viewParamValue),1)}},{key:"ReleaseDisplay",value:function(){if(null!=this.oVideoHandle&&(this.oVideoHandle.SR_DelSubPort(this.mainVaildSubPort),this.oVideoHandle.SR_Destroy(),this.oVideoHandle=null),this.subPortNum>0)for(var e=1;e<st;e++)0!=this.stFishEyeManager[e].nSubPort&&null!=this.stFishEyeManager[e].sCanvasID&&0!=this.stFishEyeManager[e].bInited&&(this.FEC_Disable(e),this.FEC_DelPort(e));for(var t=0;t<st;t++)this.stFishEyeManager[t].pRender=null;return this.stFishEyeManager.splice(0,this.stFishEyeManager.length),this.stFishParam.splice(0,this.stFishParam.length),null!=this.pFishParamManager&&(this.pFishParamManager.DeInit(),this.pFishParamManager=null),this.FECShowMode=ce.SRPTZDISPLAYMODE.SR_DM_RANGE,this.DeInitPrivateParam(),1}},{key:"DeInitPrivateParam",value:function(){this.privateNormalLinesInfo.splice(0,this.privateNormalLinesInfo.length),this.curNormalLinesInfo=null,this.privateThermalLinesInfo.splice(0,this.privateThermalLinesInfo.length),this.curThermalLinesInfo=null,this.privateTemLinesInfo.splice(0,this.privateTemLinesInfo.length),this.curTemLinesInfo=null,this.privateTargetLinesInfo.splice(0,this.privateTargetLinesInfo.length),this.curTargetLinesInfo=null,this.privateMDLinesInfo.splice(0,this.privateMDLinesInfo.length),this.curMDLinesInfo=null,this.privateExactLinesInfo.splice(0,this.privateExactLinesInfo.length),this.curExactLinesInfo=null,this.privateExactRuleLinesInfo.splice(0,this.privateExactRuleLinesInfo.length),this.curExactRuleLinesInfo=null,this.privateNormalFontsInfo.splice(0,this.privateNormalFontsInfo.length),this.curNormalFontsInfo=null,this.curNormalPOSFontsInfo=null,this.privateTemFontsInfo.splice(0,this.privateTemFontsInfo.length),this.curTemFontsInfo=null,this.privateTargetFontsInfo.splice(0,this.privateTargetFontsInfo.length),this.curTargetFontsInfo=null,this.privateExactPOSFontsInfo.splice(0,this.privateExactPOSFontsInfo.length),this.curExactPOSFontsInfo=null,this.privateExactFontsInfo.splice(0,this.privateExactFontsInfo.length),this.curExactFontsInfo=null,this.privateImageInfo.splice(0,this.privateImageInfo.length),this.curImagesInfo=null,this.privatePNGImageInfo.splice(0,this.privatePNGImageInfo.length),this.DrawlinesParamArray.splice(0,this.DrawlinesParamArray.length),this.DrawTargetlinesParamArray.splice(0,this.DrawTargetlinesParamArray.length),this.DrawMosaiclinesParamArray.splice(0,this.DrawMosaiclinesParamArray.length),this.DrawPOSFontsParamArray.splice(0,this.DrawPOSFontsParamArray.length),this.DrawTargetEventIDList.splice(0,this.DrawTargetEventIDList.length),this.DrawFontParamArray.splice(0,this.DrawFontParamArray.length);for(var e=0;e<st;e++)this.pstWaterFontParamArray[e].splice(0,this.pstWaterFontParamArray[e].length);this.pWaterImageParam.splice(0,this.pWaterImageParam.length),this.bSRCallBackFlag=!1,this.textCanvas=null,this.curLinesInfo=null,this.pstWaterFontParam=null}},{key:"DisplayFrame",value:function(e,t,a,r,i,n,s,x,o){var l=this;return new Promise((function(_){if(null!=l.oVideoHandle&&o!=l.VRViewLimitRate&&l.enPixelFormat==ce.SRPIXELFORMAT.SR_PF_SURFACE){l.VRViewLimitRate=o,l.oVideoHandle.SR_DelSubPort(l.mainVaildSubPort),l.oVideoHandle.SR_Destroy(),l.oVideoHandle=null,l.oVideoHandle=new rt,null==l.pFishParamManager&&(l.pFishParamManager=new it),l.oVideoHandle.SR_SetFishParamManager(l.pFishParamManager),l.hasSetFECParamManager=!0;var h=ce.SRDISPLAYEFFECT.SR_DE_NULL;if((h=1==l.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE:3==l.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET:ce.SRDISPLAYEFFECT.SR_DE_NULL)!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE&&h!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET||0!=l.VRViewLimitRate&&(h=ce.SRDISPLAYEFFECT.SR_DE_ELLIPSOID_VIEWLIMITED,l.oVideoHandle.SR_SetViewLimitateRate(ce.SRVIEWLIMITATERATE.SR_VLR_BLACK_1216_2832)),l.oVideoHandle.SR_Init(l.mainCanvasID,l.enPixelFormat),l.mainVaildSubPort=l.oVideoHandle.SR_AddSubPort(h),-1==l.mainVaildSubPort)return console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",l.mainVaildSubPort),0}null!=e&&(l.curTimestamp=r,l.displayWidth=t,l.displayHeight=a),l.bSRCallBackFlag||null!=l.oVideoHandle&&l.oVideoHandle.SR_SetCallBack(l.WebGLDisplayCallBack,l,ce.SRCALLBACKTYPE.SR_CBT_NULL)==ce.ERRCODE.SR_OK&&(l.bSRCallBackFlag=!0);var f=1;if(2==l.panoramaDisplayEffect&&(t==2*a?l.SetPanoramaDisplayEffect(1):l.SetPanoramaDisplayEffect(0)),null!=e&&(l.nFrameRate=s,l.nTimePerFrame=1e3/s,0==x&&(l.FindIntelNodefromList(l.curTimestamp),l.CheckLinesInfo(),l.CheckFontsInfo()),null!=l.oVideoHandle&&1==(f=l.oVideoHandle.SR_UpdateFrameData(e,t,a,i,n))&&(f=l.oVideoHandle.SR_Display(!1)),l.subPortNum>0))for(var c=1;c<st;c++)0!=l.stFishEyeManager[c].nSubPort&&null!=l.stFishEyeManager[c].sCanvasID&&0!=l.stFishEyeManager[c].bInited&&null!=l.stFishEyeManager[c].pRender&&1==(f=l.stFishEyeManager[c].pRender.SR_UpdateFrameData(e,t,a,null,null))&&(f=l.stFishEyeManager[c].pRender.SR_Display(!1));_({timestamp:l.curTimestamp,DrawRet:f})}))}},{key:"SetDisplayRect",value:function(e,t,a,r){if(null!=this.oVideoHandle){var i=0,n=0,s=1,x=1;0!=this.displayHeight&&0!=this.displayWidth&&(i=e/this.displayWidth,n=t/this.displayHeight,s=a/this.displayWidth,x=r/this.displayHeight),this.oVideoHandle.SR_SetDisplayRect(i,n,s,x,ce.SRSETRECTTYPE.SR_SRT_SRC),null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[0].splice(0,this.pstWaterFontParamArray[0].length),this.CalculateWaterMarkParam(this.oVideoHandle,0,this.pstWaterFontParam))}return 1}},{key:"SetCanvasSize",value:function(e,t,a){var r=this.oVideoHandle;if(a>0&&(r=this.stFishEyeManager[a].pRender),null!=r){if(r.SR_SetCanvasSize(e,t),0!=this.pstWaterFontParamArray[a].length&&null!=this.pstWaterFontParam)if(1==this.pstWaterFontParam.pstCanvasAdapt.nCanvasAdaptMode)this.pstWaterFontParamArray[a].splice(0,this.pstWaterFontParamArray[a].length),this.CalculateWaterMarkParam(r,a,this.pstWaterFontParam);else if(2==this.pstWaterFontParam.pstCanvasAdapt.nCanvasAdaptMode){var i=this.mainCanvasID.width,n=this.mainCanvasID.height;a>0&&(i=this.stFishEyeManager[a].sCanvasID.width,n=this.stFishEyeManager[a].sCanvasID.height);for(var s=0;s<this.pstWaterFontParamArray[a].length;++s)this.pstWaterFontParamArray[a][s].nFontWidth=this.pstWaterFontParam.pstFontSize.nFontWidth*i/this.pstWaterFontParam.pstCanvasAdapt.nBaseCanvasWidth,this.pstWaterFontParamArray[a][s].nFontHeight=this.pstWaterFontParam.pstFontSize.nFontHeight*n/this.pstWaterFontParam.pstCanvasAdapt.nBaseCanvasHeight}return 1}return 0}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoHandle?this.oVideoHandle.SR_GetCanvasSize():0}},{key:"SetAntialias",value:function(e){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetAntialias(e):0}},{key:"SetD3DPostProcess",value:function(e,t){var a=1;return null!=this.oVideoHandle?(a=this.oVideoHandle.SR_SetImagePostProcess(e,t),null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[0].splice(0,this.pstWaterFontParamArray[0].length),this.CalculateWaterMarkParam(this.oVideoHandle,0,this.pstWaterFontParam))):a=0,a}},{key:"InitFECParam",value:function(){this.stFishEyeManager=[];for(var e=0;e<st;e++)this.stFishEyeManager[e]={},this.stFishEyeManager[e].pRender=null,this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;this.stFishParam=[];for(var t=0;t<st;t++)this.stFishParam[t]={},this.stFishParam[t].nUpDateType=0,this.stFishParam[t].stPTZParam={},this.stFishParam[t].stPTZParam.fPTZPositionX=0,this.stFishParam[t].stPTZParam.fPTZPositionY=0,this.stFishParam[t].stCycleParam={},this.stFishParam[t].stCycleParam.fRadiusLeft=0,this.stFishParam[t].stCycleParam.fRadiusRight=0,this.stFishParam[t].stCycleParam.fRadiusTop=0,this.stFishParam[t].stCycleParam.fRadiusBottom=0,this.stFishParam[t].fZoom=0,this.stFishParam[t].fWideScanOffset=0,this.stFishParam[t].stPTZColor={},this.stFishParam[t].stPTZColor.nR=0,this.stFishParam[t].stPTZColor.nG=0,this.stFishParam[t].stPTZColor.nB=0,this.stFishParam[t].stPTZColor.nAlpha=0,this.stFishParam[t].stPTZSelect={},this.stFishParam[t].stPTZSelect.fTop=0,this.stFishParam[t].stPTZSelect.fBottom=0,this.stFishParam[t].stPTZSelect.fLeft=0,this.stFishParam[t].stPTZSelect.fRight=0,this.stFishParam[t].nCut=0}},{key:"FEC_SetCanvasID",value:function(e){return this.mainFECCorrect=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL,1}},{key:"FEC_ResetCorrectType",value:function(e,t,a){if(!1===this.hasSetFECParamManager&&(null==this.pFishParamManager&&(this.pFishParamManager=new it),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),0!=a&&a!=X&&a!=J&&a!=j&&a!=G&&a!=Z&&a!=z&&a!=K&&a!=q&&a!=$&&a!=Q)return console.log("%c hardDecoder not support correctType:%d","color:red",a),this.FECErrorCode=O,0;if(1!=this.FECParamJudge(e,t,a))return 0;var r=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;if(r=this._ConvertDisplayEffect(t,a),0==e&&null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=this.oVideoHandle,this.stFishEyeManager[e].nSubPort=e,this.stFishEyeManager[e].sCanvasID=this.mainCanvasID,this.stFishEyeManager[e].bUsed=1,this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].nValidSubPort=this.mainVaildSubPort,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=a,this.stFishEyeManager[e].emEffect=r,this.mainFECCorrect=r),null!=this.stFishEyeManager[e].pRender){this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort);var i=this.stFishEyeManager[e].pRender.SR_AddSubPort(r);if(0==e?this.oVideoHandle.SR_SetCallBack(this.WebGLDisplayCallBack,this,ce.SRCALLBACKTYPE.SR_CBT_NULL):this.stFishEyeManager[e].pRender.SR_SetCallBack(this.WebGLDisplaySubCallBack,{nUser:this,handle:this.stFishEyeManager[e].pRender,nSubPort:e},ce.SRCALLBACKTYPE.SR_CBT_NULL),null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[e].splice(0,this.pstWaterFontParamArray[e].length),this.CalculateWaterMarkParam(this.stFishEyeManager[e].pRender,e,this.pstWaterFontParam)),-1==i)return console.info("%c FEC_ResetCorrectType SR_AddSubPort error subport:%d","color: red",i),0;if(this.stFishEyeManager[e].nValidSubPort=i,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=a,this.stFishEyeManager[e].emEffect=r,j<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(ce.SRRENDERSTATETYPE.SR_RST_BACK_CULL,0);ce.ERRCODE.SR_OK!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}}return this.FECShowMode>0&&null!=this.stFishEyeManager[e].pRender&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),0==e&&(this.mainVaildSubPort=this.stFishEyeManager[e].nValidSubPort),1}},{key:"FEC_GetPort",value:function(e,t){if(0!=t&&t!=X&&t!=J&&t!=j&&t!=G&&t!=Z&&t!=z&&t!=$&&t!=Q)return console.log("%c 20231112 hardDecoder not support emCorrectType:%d","color:red",t),this.FECErrorCode=O,-1;var a;if(1!=this.FECParamJudge(-1,e,t))return console.log("VideoRender.js FEC_GetPort FECParamJudge Get error"),-1;var r=0;for(a=1;a<st;a++)if(0==this.stFishEyeManager[a].nSubPort&&0==this.stFishEyeManager[a].bUsed){this.stFishEyeManager[a].nSubPort=a,this.stFishEyeManager[a].nValidSubPort=-1,this.stFishEyeManager[a].bUsed=1,this.stFishEyeManager[a].emPlaceType=e,this.stFishEyeManager[a].emCorrectType=t,r=a;break}if(st==a)return console.info("%c FEC_GetPort-12 fish subport max","color: red"),this.FECErrorCode=1284,-1;var i=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;return i=this._ConvertDisplayEffect(this.stFishEyeManager[r].emPlaceType,this.stFishEyeManager[r].emCorrectType),ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL!=i?(0==this.stFishEyeManager[r].bInited&&(this.stFishEyeManager[r].emEffect=i,this.stFishEyeManager[r].bInited=0,this.stFishParam[r].fZoom=.005,this.stFishParam[r].stPTZParam.fPTZPositionX=.5,this.stFishParam[r].stPTZParam.fPTZPositionY=.5,this.stFishParam[r].fWideScanOffset=0),this.FECErrorCode=0,this.subPortNum++,r):r<st&&0==this.stFishEyeManager[r].bInited?(this.stFishEyeManager[r].emEffect=i,this.stFishEyeManager[r].bInited=0,this.stFishParam[r].fZoom=0,this.stFishParam[r].stPTZParam.fPTZPositionX=0,this.stFishParam[r].stPTZParam.fPTZPositionY=0,this.stFishParam[r].fWideScanOffset=0,this.FECErrorCode=0,this.subPortNum++,r):(this.stFishEyeManager[a].pRender=null,this.stFishEyeManager[a].nSubPort=0,this.stFishEyeManager[a].sCanvasID=null,this.stFishEyeManager[a].bUsed=0,this.stFishEyeManager[a].bInited=0,this.stFishEyeManager[a].nValidSubPort=0,this.stFishEyeManager[a].emPlaceType=3,this.stFishEyeManager[a].emCorrectType=0,this.stFishEyeManager[a].emEffect=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL,this.FECErrorCode=N,-1)}},{key:"FECParamJudge",value:function(e,t,a){if(0!=e){if(0==a||a==X||a==J||a==Z||a==q||a==$||a==Q)return console.log("VideoRender.js FECParamJudge 1 emCorrectType:"+a),this.FECErrorCode=N,0;if(this.stFishEyeManager[0].emCorrectType==Q||this.stFishEyeManager[0].emCorrectType==$)return this.FECErrorCode=N,console.log("VideoRender.js FECParamJudge 2 emCorrectType:"+a),0}if(0==e&&($==a||Q==a))for(var r=1;r<st;r++)if(this.stFishEyeManager[r].bUsed)return this.FECErrorCode=N,console.log("VideoRender.js FECParamJudge 3 subPort:"+e+",emCorrectType:"+a),0;if(!(2!=t&&3!=t||Z!=a&&$!=a&&Q!=a))return console.info("%c VideoRender.js FECParamJudge 4 floor and ceiling not support lat","color: red"),this.FECErrorCode=N,0;if(1==t&&(z==a||K==a||X==a))return console.info("%c VideoRender.js FECParamJudge 5 wall not support cylinger","color: red"),this.FECErrorCode=N,0;if(1!=t&&2!=t&&3!=t)return console.info("%c VideoRender.js FECParamJudge 6 emPlaceType only support floor, ceiling and wall","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;if(0!=a&&a!=G&&a!=X&&a!=J&&a!=Z&&a!=j&&a!=z&&a!=K&&a!=q&&a!=$&&a!=Q)return console.info("%c VideoRender.js FECParamJudge 7 emCorrectType error","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;for(var i=0;i<st;i++){if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emPlaceType!=t)return console.info("%c VideoRender.js FECParamJudge 8 emPlaceType changed","color: red"),this.FECErrorCode=1303,0;if(i!=e){if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType!=G&&this.stFishEyeManager[i].emCorrectType!=j&&this.stFishEyeManager[i].emCorrectType!=z&&this.stFishEyeManager[i].emCorrectType!=K&&this.stFishEyeManager[i].emCorrectType!=q&&this.stFishEyeManager[i].emCorrectType!=$&&this.stFishEyeManager[i].emCorrectType!=Q&&a!=G&&a!=j&&a!=z&&a!=K&&a!=q&&a!=$&&a!=Q)return console.info("%c VideoRender.js FECParamJudge 9 origin/180/360/lat only display one port","color: red"),this.FECErrorCode=1304,0;if(this.stFishEyeManager[i].bUsed&&(this.stFishEyeManager[i].emCorrectType==G&&a==X||this.stFishEyeManager[i].emCorrectType==X&&a==G))return console.info("%c VideoRender.js FECParamJudge 10 180 cannot support ptz","color: red"),this.FECErrorCode=1304,0}}return 1}},{key:"FEC_Enable",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_Enable-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0):null!==this.stFishEyeManager[e].pRender?(console.info("%c FEC_Enable-2 nSubPort:%d","color: red",e),this.FECErrorCode=1301,0):(null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=new rt,null==this.pFishParamManager&&(this.pFishParamManager=new it),this.stFishEyeManager[e].pRender.SR_SetFishParamManager(this.pFishParamManager)),1)}},{key:"FEC_SetWnd",value:function(e,t){if(e<1||e>31||null==e)return console.info("%c FEC_SetWnd-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetWnd-2 nSubPort:%d pRender is null","color: red",e),this.FECErrorCode=B,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetWnd-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=k,0;if(null==t)return console.info("%c FEC_SetWnd-4 nSubPort:%d sCanvasID:%s","color: red",e,t),this.FECErrorCode=1305,0;if(0!=this.stFishEyeManager[e].nSubPort&&0!=this.stFishEyeManager[e].bUsed){if(0!=this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].sCanvasID)return t!=this.stFishEyeManager[e].sCanvasID?(console.info("%c FEC_SetWnd-5 nSubPort:%d sCanvasID:%s already init","color: red",e,t),this.FECErrorCode=1286,0):1;var a=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;a=this._ConvertDisplayEffect(this.stFishEyeManager[e].emPlaceType,this.stFishEyeManager[e].emCorrectType);var r=this.stFishEyeManager[e].pRender.SR_Init(t,this.enPixelFormat),i=this.stFishEyeManager[e].pRender.SR_AddSubPort(a);if(-1==i)return console.info("%c FEC_SetWnd SR_AddSubPort error subport:%d","color: red",e),0;if(this.stFishEyeManager[e].nValidSubPort=i,ce.ERRCODE.SR_OK!=r)return this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].sCanvasID=null,this.FECErrorCode=k,0;if(this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].sCanvasID=t,j<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(ce.SRRENDERSTATETYPE.SR_RST_BACK_CULL,0);ce.ERRCODE.SR_OK!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}return this.stFishEyeManager[e].pRender.SR_SetCallBack(this.WebGLDisplaySubCallBack,{nUser:this,handle:this.stFishEyeManager[e].pRender,nSubPort:e},ce.SRCALLBACKTYPE.SR_CBT_NULL),null!=this.pstWaterFontParam&&this.SetWaterMarkFont(this.pstWaterFontParam),this.FECShowMode>0&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),1}return this.FECErrorCode=k,0}},{key:"FEC_Disable",value:function(e,t,a){if(e<1||e>31||null==e)return console.info("%c FEC_Disable-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0;if(1==this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].pRender){if(ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort))return console.info("%c FEC_Disable-2 SR_DelSubPort error nSubPort:%d","color: red",e),0;this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=-1,this.stFishEyeManager[e].pRender.SR_Destroy(),this.stFishEyeManager[e].pRender=null}return 1}},{key:"FEC_DelPort",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_DelPort-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0):0==this.stFishEyeManager[e].bUsed?(console.info("%c FEC_DelPort-2 nSubPort:%d bUsed：%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=k,0):(this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL,this.stFishParam[e].stCycleParam.fRadiusLeft=0,this.stFishParam[e].stCycleParam.fRadiusRight=1,this.stFishParam[e].stCycleParam.fRadiusTop=0,this.stFishParam[e].stCycleParam.fRadiusBottom=1,this.subPortNum>0&&this.subPortNum--,1)}},{key:"FEC_SetParam",value:function(e,t){if(this.FECErrorCode=0,e<0||e>31||null==e)return console.info("%c FEC_SetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetParam-2 nSubPort:%d pRender:%d","color: red",e,this.stFishEyeManager[e].pRender),this.FECErrorCode=B,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetParam-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=k,0;if(this.stFishEyeManager[e].emCorrectType>=j&&this.stFishEyeManager[e].emCorrectType<=Q&&30&t.upDateType)return console.info("%c FEC_SetParam-4 nSubPort:%d not 3D","color: red",e),this.FECErrorCode=H,0;if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=U,0;for(var a=1;a<st;a++){if(this.stFishEyeManager[a].bUsed&&this.stFishEyeManager[a].nSubPort&&$==this.stFishEyeManager[a].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>=.4||t.stCycleParam.fRadiusRight<=.6||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>0||t.stCycleParam.fRadiusBottom<1||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=U,0;if(this.stFishEyeManager[a].bUsed&&this.stFishEyeManager[a].nSubPort&&Q==this.stFishEyeManager[a].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>0||t.stCycleParam.fRadiusRight<1||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>=.4||t.stCycleParam.fRadiusBottom<=.6||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=U,0}}if(0==this.stFishEyeManager[e].bInited){if(4&t.upDateType){if(X!=this.stFishEyeManager[e].emCorrectType&&J!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=H,0;for(var r=1;r<st;r++)if(this.stFishEyeManager[r].nSubPort&&this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].emCorrectType==G)return this.FECErrorCode=V,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=U,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=H,0;this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(G!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=H,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(G!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=H,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(32&t.upDateType){if(null==this.stFishParam.stPTZSelect)return 0;if(G!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=H,0;this.stFishParam.stPTZSelect.fTop=t.stPTZSelect.fTop,this.stFishParam.stPTZSelect.fBottom=t.stPTZSelect.fBottom,this.stFishParam.stPTZSelect.fLeft=t.stPTZSelect.fLeft,this.stFishParam.stPTZSelect.fRight=t.stPTZSelect.fRight}if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=U,0;if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=U,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 1}if(4&t.upDateType){if(X!=this.stFishEyeManager[e].emCorrectType&&J!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=H,0;for(var i=1;i<st;i++)if(this.stFishEyeManager[i].nSubPort&&this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType==G)return this.FECErrorCode=V,0;var n={};if(n.nFishParamType=ce.SRFISHPARAMTYPE.SR_FPT_ANGLE,n.bBlack=0,n.fAngle=t.fValue,ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetFishParam(n))return this.FECErrorCode=V,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=H,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=H,0;var s={};if(s.fR=t.stPTZColor.nR/255,s.fG=t.stPTZColor.nG/255,s.fB=t.stPTZColor.nB/255,s.fA=t.stPTZColor.nAlpha/255,ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetPTZColor(e,s))return this.FECErrorCode=V,V;this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(G!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=H,0;var x={};x.nFishParamType=ce.SRFISHPARAMTYPE.SR_FPT_PTZ,x.bBlack=0,x.fPTZX=t.fPTZParam.fPTZPositionX,x.fPTZY=t.fPTZParam.fPTZPositionY;var o=this.stFishEyeManager[e].pRender.SR_SetFishParam(x);if(ce.ERRCODE.SR_OK!=o)return this.FECErrorCode=V,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(G!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=H,0;var l={};if(l.nFishParamType=ce.SRFISHPARAMTYPE.SR_FPT_ZOOM,l.bBlack=0,l.fZoom=t.fPTZZoom,ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetFishParam(l))return this.FECErrorCode=V,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(1&t.upDateType){if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=U,0;var _={};if(_.nFishParamType=ce.SRFISHPARAMTYPE.SR_FPT_CENTER,_.bBlack=1,_.fRXLeft=t.stCycleParam.fRadiusLeft,_.fRXRight=t.stCycleParam.fRadiusRight,_.fRYTop=t.stCycleParam.fRadiusTop,_.fRYBottom=t.stCycleParam.fRadiusBottom,ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].nValidSubPort,_))return this.FECErrorCode=U,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 32&t.upDateType&&G==this.stFishEyeManager[e].emCorrectType&&ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].stPTZSelect)?(this.FECErrorCode=1299,0):(null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[e].splice(e,this.pstWaterFontParamArray[e].length),this.CalculateWaterMarkParam(this.stFishEyeManager[e].pRender,e,this.pstWaterFontParam)),1)}},{key:"FEC_GetParam",value:function(e,t){return e<0||e>31||null==e?(console.info("%c FEC_GetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=B,0):(this.stFishEyeManager[e].pRender.SR_GetFishParam(t),t.emCorrectType=this.stFishEyeManager[e].emCorrectType,1)}},{key:"_IsValidRadiusParam",value:function(e){return e.fRadiusBottom<=e.fRadiusTop||e.fRadiusRight<=e.fRadiusLeft?0:1}},{key:"FEC_SetViewParam",value:function(e,t,a){return e<0||e>31||null==e?(console.info("%c FEC_SetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=B,0):t<ce.SRVIEWTYPE.SR_VT_ROTATION_X||t>ce.SRVIEWTYPE.SR_VT_SCALE?(this.FECErrorCode=Y,0):(this.FECErrorCode=0,0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=k,0):j<=this.stFishEyeManager[e].emCorrectType?ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetViewParam(t,a)?(this.FECErrorCode=Y,0):(null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[e].splice(0,this.pstWaterFontParamArray[e].length),this.CalculateWaterMarkParam(this.stFishEyeManager[e].pRender,e,this.pstWaterFontParam)),1):(this.FECErrorCode=H,0))}},{key:"FEC_GetViewParam",value:function(e,t,a){return a.fValue=-1,e<0||e>31||null==e?(console.info("%c FEC_GetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=B,0):t<1||t>3||0==this.stFishEyeManager[e].bInited?0:(j<=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].pRender.SR_GetViewParam(t,a),1)}},{key:"FEC_SetDisplayRegion",value:function(e,t,a,r,i,n,s){if(e<0||e>31||null==e)return console.info("%c FEC_SetDisplayRegion-1 nSubPort:%d","color: red",e),this.FECErrorCode=W,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetDisplayRegion-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=B,0;if(0!=t||0!=a)return this.FECErrorCode=Y,0;if(0!=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].emCorrectType!=X&&this.stFishEyeManager[e].emCorrectType!=J&&this.stFishEyeManager[e].emCorrectType!=Z)return this.FECErrorCode=N,0;if(0==this.stFishEyeManager[e].bInited)return this.FECErrorCode=k,0;if(r<0||i<0||n<0||s<0)return this.FECErrorCode=Y,0;var x=0,o=0,l=1,_=1;return 0!=this.displayHeight&&0!=this.displayWidth&&(x=r/this.displayWidth,o=i/this.displayHeight,l=n/this.displayWidth,_=s/this.displayHeight),ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetDisplayRect(x,o,l,_,ce.SRSETRECTTYPE.SR_SRT_SRC)?(this.FECErrorCode=1297,0):(null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[e].splice(0,this.pstWaterFontParamArray[e].length),this.CalculateWaterMarkParam(this.stFishEyeManager[e].pRender,e,this.pstWaterFontParam)),1)}},{key:"FEC_SetBackCilling",value:function(e,t){return e<0||e>31||null==e?(this.FECErrorCode=W,0):null==this.stFishEyeManager[e].pRender?(this.FECErrorCode=B,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=k,0):ce.ERRCODE.SR_OK!=this.stFishEyeManager[e].pRender.SR_SetRenderState(ce.SRRENDERSTATETYPE.SR_RST_BACK_CULL,t)?(this.FECErrorCode=1297,0):(null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[e].splice(0,this.pstWaterFontParamArray[e].length),this.CalculateWaterMarkParam(this.stFishEyeManager[e].pRender,e,this.pstWaterFontParam)),1)}},{key:"FEC_GetPTZPort",value:function(e,t,a){if(null!=this.stFishEyeManager[e].pRender){var r={nPTZPort:-1};if(this.stFishEyeManager[e].pRender.SR_GetPTZPort(t,a,r)==ce.ERRCODE.SR_OK)return r.nPTZPort}return-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return e>=0&&e<=2?(null!=this.stFishEyeManager[0].pRender&&this.stFishEyeManager[0].pRender.SR_SetPTZDisplayMode(e),this.FECShowMode=e,1):(console.info("%c FEC_SetPTZDisplayMode ptzMode:%d","color: red",e),0)}},{key:"FEC_Capture",value:function(e,t){if(null!=this.stFishEyeManager[e].pRender){var a={nWidth:0,nHeight:0,nBufferLen:0},r=this.stFishEyeManager[e].pRender.SR_GetCaptureSize(a);if(ce.ERRCODE.SR_OK!=r||a.nBufferLen<=0)return t(null,0,0,e),0;var i=new Uint8Array(a.nBufferLen);if(null==i)return t(null,0,0,e),0;var n={};return n.pBuffer=i,this.stFishEyeManager[e].pRender.SR_CaptureScreen(n),t(i,a.nWidth,a.nHeight,e),i=null,1}return t(null,0,0,e),0}},{key:"CheckFrameRGB",value:function(e,t,a,r,i,n){if(null==e||null==e.width||null==e.height||null==e.pBuffer||e.width<=0||e.height<=0||e.pBuffer.length<=0)return 0;for(var s=e.width/(r-1),x=e.height/(a-1),o=0,l=0,_=[],h=0;h<a*r;h++)_[h]=0,this.aPOSAdaptBuf[h]=0;if(t){for(var f=0,c=0;c<e.height;c++)for(var u=0;u<e.width;u++){o=(o=Math.round(u/(s/2)/2))<r?o:r-1,l=(l=Math.round(c/(x/2)/2))<a?l:a-1;var d=e.pBuffer[f],p=e.pBuffer[f+1],m=e.pBuffer[f+2],S=Math.round(.299*d+.587*p+.114*m);this.aPOSAdaptBuf[o+l*r]+=S,_[o+l*r]++,f+=4}for(var R=0,P=0;P<a*r;P++)R=this.aPOSAdaptBuf[P]/_[P],this.aPOSAdaptBuf[P]=R>128?0:1}else{var b=Math.round(i*e.width),y=Math.round(n*e.height),E=b-2;E=(E=E>0?E:0)<e.width?E:e.width-1;var g=b+2;g=(g=g>0?g:0)<e.width?g:e.width-1;var F=y-2;F=(F=F>0?F:0)<e.height?F:e.height-1;var v=y+2;v=(v=v>0?v:0)<e.height?v:e.height-1;for(var C=F;C<v;C++)for(var T=E;T<g;T++){var D=4*Math.floor((4*T+C*e.width*4)/4),A=e.pBuffer[D],I=e.pBuffer[D+1],M=e.pBuffer[D+2],L=Math.round(.299*A+.587*I+.114*M);this.aPOSAdaptBuf[0]+=L,_[0]++}this.aPOSAdaptBuf[0]=this.aPOSAdaptBuf[0]/_[0]>128?0:1}return 1}},{key:"GetWaterFontParam",value:function(e,t,a,r,i,n,s){var x=a.pFontString.length,o=a.pstFontRotate.fRotateAngle%360/360*2*Math.PI,l=Math.min(a.pstFontSize.nFontWidth,a.pstFontSize.nFontHeight);if(2==a.pstCanvasAdapt.nCanvasAdaptMode){var _=a.pstFontSize.nFontWidth*r/a.pstCanvasAdapt.nBaseCanvasWidth,h=a.pstFontSize.nFontHeight*i/a.pstCanvasAdapt.nBaseCanvasHeight;l=Math.min(_,h)}var f=l/r,c=l/i,u=f*Math.cos(Math.PI/2-o)*a.pSpace,d=c*Math.sin(Math.PI/2-o)*a.pSpace,p=[],m=[],S=[];if(a.nFontAlign)for(var R=0;R<x;R++)p[R]=a.pFontString[0].length*f/6,m[R]=Math.atan2(p[0],d),S[R]=Math.sqrt(p[0]*p[0],d*d);else for(var P=0;P<x;P++)p[P]=0,m[P]=0,S[P]=0;var b={};if(this.pstWaterFontParam.nColorAdapt){var y={nWidth:16,nHeight:16,nBufferLen:0},E=e.SR_GetCaptureSize(y);if(ce.ERRCODE.SR_OK==E){var g=new Uint8Array(y.nBufferLen);b.pBuffer=g,e.SR_CaptureScreen(b,!0),b.width=y.nWidth,b.height=y.nHeight,g=null}}var F=n*s;if(a.pstFontRotate.fFillFullScreen){var v=[],C=[];if(1==a.pstCanvasAdapt.nCanvasAdaptMode){if(s<xt)for(var T=0;T*a.pstCanvasAdapt.ntotalColSpace<=r;T++)C[T]=(T*a.pstCanvasAdapt.ntotalColSpace+a.pstCanvasAdapt.nColSpace/2)/r;else for(var D=1/(s-1),A=0;A<s;A++)C[A]=D*A+u*((x-1)/2);if(n<xt)for(var I=0;I*a.pstCanvasAdapt.ntotalRowSpace<=i;I++)v[I]=(I*a.pstCanvasAdapt.ntotalRowSpace+a.pstCanvasAdapt.nRowSpace/2)/i;else for(var M=1/(n-1),L=0;L<n;L++)v[L]=M*L-d*((x-1)/2);for(var w=0;w<x;w++)p[w]=0,m[w]=0,S[w]=0}else{if(1==n)v[0]=.5;else for(var O=1/(n-1),B=0;B<n;B++)v[B]=O*B-d*((x-1)/2);if(1==s)C[0]=.5;else for(var k=1/(s-1),N=0;N<s;N++)C[N]=k*N+u*((x-1)/2)}this.pstWaterFontParamArray[t]=[];for(var V=0;V<F;++V)for(var U=0;U<x;U++){this.pstWaterFontParamArray[t][x*V+U]={},this.pstWaterFontParamArray[t][x*V+U].pString=a.pFontString[U],this.pstWaterFontParamArray[t][x*V+U].nFontWidth=l,this.pstWaterFontParamArray[t][x*V+U].nFontHeight=l,this.pstWaterFontParamArray[t][x*V+U].pstStartPos={};var H=V%s,W=Math.floor(V/s),Y=Math.PI/2-o+m[U];this.pstWaterFontParamArray[t][x*V+U].pstStartPos.fX=C[H]-U*u+S[U]*Math.cos(Y),this.pstWaterFontParamArray[t][x*V+U].pstStartPos.fY=v[W]+U*d-S[U]*Math.sin(Y),a.nColorAdapt?(0==U&&this.CheckFrameRGB(b,0,1,1,this.pstWaterFontParamArray[t][x*V+U].pstStartPos.fX,this.pstWaterFontParamArray[t][x*V+U].pstStartPos.fY),this.pstWaterFontParamArray[t][x*V+U].pstFontColor={},this.pstWaterFontParamArray[t][x*V+U].pstFontColor.fR=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][x*V+U].pstFontColor.fG=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][x*V+U].pstFontColor.fB=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][x*V+U].pstFontColor.fA=a.pstFontColor.fA):this.pstWaterFontParamArray[t][x*V+U].pstFontColor=a.pstFontColor,this.pstWaterFontParamArray[t][x*V+U].bBackGround=!1,this.pstWaterFontParamArray[t][x*V+U].pstBGColor=null,this.pstWaterFontParamArray[t][x*V+U].fRotateAngle=a.pstFontRotate.fRotateAngle,this.pstWaterFontParamArray[t][x*V+U].pFontFamily=a.pFontFamily,a.nFontAlign?(this.pstWaterFontParamArray[t][x*V+U].textAlign="left",this.pstWaterFontParamArray[t][x*V+U].textBaseline="top"):(this.pstWaterFontParamArray[t][x*V+U].textAlign="center",this.pstWaterFontParamArray[t][x*V+U].textBaseline="middle")}}else for(var G=0;G<a.pFontString.length;G++)this.pstWaterFontParamArray[t][G]={},this.pstWaterFontParamArray[t][G].pString=a.pFontString[G],this.pstWaterFontParamArray[t][G].nFontWidth=l,this.pstWaterFontParamArray[t][G].nFontHeight=l,this.pstWaterFontParamArray[t][G].pstStartPos={},this.pstWaterFontParamArray[t][G].pstStartPos.fX=a.pstStartPos.fX-G*u,this.pstWaterFontParamArray[t][G].pstStartPos.fY=a.pstStartPos.fY+G*d,a.nColorAdapt?(this.CheckFrameRGB(b,0,1,1,this.pstWaterFontParamArray[t][G].pstStartPos.fX,this.pstWaterFontParamArray[t][G].pstStartPos.fY),this.pstWaterFontParamArray[t][G].pstFontColor={},this.pstWaterFontParamArray[t][G].pstFontColor.fR=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][G].pstFontColor.fG=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][G].pstFontColor.fB=this.aPOSAdaptBuf[0],this.pstWaterFontParamArray[t][G].pstFontColor.fA=a.pstFontColor.fA):this.pstWaterFontParamArray[t][G].pstFontColor=a.pstFontColor,this.pstWaterFontParamArray[t][G].bBackGround=!1,this.pstWaterFontParamArray[t][G].pstBGColor=null,this.pstWaterFontParamArray[t][G].fRotateAngle=a.pstFontRotate.fRotateAngle,this.pstWaterFontParamArray[t][G].pFontFamily=a.pFontFamily,a.nFontAlign?(this.pstWaterFontParamArray[t][G].textAlign="left",this.pstWaterFontParamArray[t][G].textBaseline="top"):(this.pstWaterFontParamArray[t][G].textAlign="center",this.pstWaterFontParamArray[t][G].textBaseline="middle");return 1}},{key:"CalculateWaterMarkParam",value:function(e,t,a){var r=this.mainCanvasID.width,i=this.mainCanvasID.height;t>0&&(r=this.stFishEyeManager[t].sCanvasID.width,i=this.stFishEyeManager[t].sCanvasID.height);var n=Math.floor(a.pstFontNumber.nRowNumber),s=Math.floor(a.pstFontNumber.nColNumber);1==a.pstCanvasAdapt.nCanvasAdaptMode&&(n=(n=(n=Math.floor(i/a.pstCanvasAdapt.ntotalRowSpace+1))<1?1:n)>xt?xt:n,s=(s=(s=Math.floor(r/a.pstCanvasAdapt.ntotalColSpace+1))<1?1:s)>xt?xt:s),this.GetWaterFontParam(e,t,a,r,i,n,s)}},{key:"SetWaterMarkFont",value:function(e){if(0!=this.pstWaterFontParamArray.length)for(var t=0;t<st;t++)this.pstWaterFontParamArray[t].splice(0,this.pstWaterFontParamArray[t].length);if(this.pstWaterFontParam=e,null===e)return 1;this.CalculateWaterMarkParam(this.oVideoHandle,0,e);for(var a=1;a<st;a++)null!=this.stFishEyeManager[a].pRender&&this.CalculateWaterMarkParam(this.stFishEyeManager[a].pRender,a,e);return 1}},{key:"SetMosaicType",value:function(e){return this.MosaicType=e.nMosaicType,this.MosaicSize=e.nMosaicSize,this.MosaicColorR=e.pstMosaicColor.fMosaicColorR/255,this.MosaicColorG=e.pstMosaicColor.fMosaicColorG/255,this.MosaicColorB=e.pstMosaicColor.fMosaicColorB/255,this.MosaicColorA=e.pstMosaicColor.fMosaicColorA/100,1}},{key:"SetTextCanvas",value:function(e){return this.textCanvas=e,1}},{key:"SetPrintLogFlag",value:function(e){return this.printfFlag=e,1}},{key:"SetRotateAngle",value:function(e){var t;if(null!=this.oVideoHandle&&(t=this.oVideoHandle.SR_SetRenderState(ce.SRRENDERSTATETYPE.SR_RST_IMAGE_ROTATE,e),null!=this.pstWaterFontParam&&this.pstWaterFontParam.nColorAdapt&&(this.pstWaterFontParamArray[0].splice(0,this.pstWaterFontParamArray[0].length),this.CalculateWaterMarkParam(this.oVideoHandle,0,this.pstWaterFontParam)),t==ce.ERRCODE.SR_OK))return 1;return 0}},{key:"ImageDecoder",value:function(e,t,a){var r=this;e.decode({frameIndex:a}).then((function(i){r.pWaterImageParam[a]={},r.pWaterImageParam[a].videoStream=i.image,r.pWaterImageParam[a].nImageWidth=i.image.displayWidth,r.pWaterImageParam[a].nImageHeight=i.image.displayHeight,r.pWaterImageParam[a].timeStamp=i.image.timestamp/1e3,r.pWaterImageParam[a].duration=i.image.duration/1e3,null!=t.pstRectPos?r.pWaterImageParam[a].pstRectPos=t.pstRectPos:r.pWaterImageParam[a].pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1},null!=t.fAlpha&&t.fAlpha<=1&&t.fAlpha>=0?r.pWaterImageParam[a].fAlpha=t.fAlpha:r.pWaterImageParam[a].fAlpha=1,r.waterMarkImageMax=e.tracks.selectedTrack.frameCount,a<e.tracks.selectedTrack.frameCount-1?r.ImageDecoder(e,t,a+1):(r.baseWaterMarkImageTime=r.curTimestamp,r.finishDecodeImage=!0)}))}},{key:"SetWaterMarkImage",value:function(e){var t=this;if(this.pWaterImageParam.splice(0,this.pWaterImageParam.length),null===e)return 1;if(null!=e.pImageData){var a=new ImageDecoder({data:e.pImageData,type:"image/"+e.pImageType});a.tracks.ready.then((function(){a.completed.then((function(){t.ImageDecoder(a,e,0)}))}))}return this.waterMarkImageIndex=0,1}},{key:"SelectIntelInfoFeatureToDraw",value:function(e){if(this.DrawTargetEventIDList.splice(0,this.DrawTargetEventIDList.length),null===e)return 0;if(pImageParam.NodeNumber>0)for(var t=0;t<pImageParam.NodeNumber;t++)this.DrawTargetEventIDList.push(e.pIntelInfoNode[t]);return 1}},{key:"_ConvertDisplayEffect",value:function(e,t){switch(e){case 1:return G==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PTZ_WALL:J==t||Z==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PANORAMA_WALL:j==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_SEMISPHERE:q==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PLANET:$==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:Q==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;case 2:return G==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PTZ_FLOOR:J==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PANORAMA_FLOOR_360:X==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PANORAMA_FLOOR_180:j==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_SEMISPHERE:z==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_CYLINDER_FLOOR:K==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:q==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PLANET:ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;case 3:return G==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PTZ_CEILING:J==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PANORAMA_CEILING_360:X==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PANORAMA_CEILING_180:j==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_SEMISPHERE:z==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_CYLINDER_CEILING:K==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_CYLINDER_SPLIT_CEILING:q==t?ce.SRDISPLAYEFFECT.SR_DE_FISH_PLANET:ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL;default:return ce.SRDISPLAYEFFECT.SR_DE_FISH_ORIGINAL}}},{key:"GetCanvasData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i={};i.nWidth=t,i.nHeight=a,i.nBufferLen=0;var n=this.oVideoHandle.SR_GetCaptureSize(i,r);if(ce.ERRCODE.SR_OK!=n||i.nBufferLen<=0)e(null);else{var s=new Uint8Array(i.nBufferLen);if(null!=s){var x={};x.pBuffer=s,this.oVideoHandle.SR_CaptureScreen(x),e(s,i.nWidth,i.nHeight)}else e(null)}}},{key:"FindIntelNodefromList",value:function(e){if(0!=this.privateNormalLinesInfo.length){for(var t=!1,a=0,r=!1,i=0,n=0,s=1e8,x=0;x<this.privateNormalLinesInfo.length;x++){if(0==(n=Math.abs(this.privateNormalLinesInfo[x].absTimeStamp-e))){r=!0,i=x;break}n<=this.nTimePerFrame+1e3&&n<s&&(t=!0,a=x,s=n)}r?(this.curNormalLinesInfo=this.privateNormalLinesInfo[i],this.privateNormalLinesInfo.shift()):t&&(this.curNormalLinesInfo=this.privateNormalLinesInfo[a],this.privateNormalLinesInfo.shift())}if(0!=this.privateThermalLinesInfo.length&&(this.curThermalLinesInfo=this.privateThermalLinesInfo[0]),0!=this.privateTemLinesInfo.length){for(var o=!1,l=0,_=!1,h=0,f=0,c=1e8,u=0;u<this.privateTemLinesInfo.length;u++){if(0==(f=Math.abs(this.privateTemLinesInfo[u].absTimeStamp-e))){_=!0,h=u;break}f<=this.nTimePerFrame+1e3&&f<c&&(o=!0,l=u,c=f)}_?(this.curTemLinesInfo=this.privateTemLinesInfo[h],this.privateTemLinesInfo.shift()):o?(this.curTemLinesInfo=this.privateTemLinesInfo[l],this.privateTemLinesInfo.shift()):this.nFrameRate<=30?this.m_nTEMDrawLinescount<=30?this.m_nTEMDrawLinescount++:this.curTemLinesInfo=null:this.m_nTEMDrawLinescount<=60?this.m_nTEMDrawLinescount++:this.curTemLinesInfo=null}else this.nFrameRate<=30?this.m_nTEMDrawLinescount<=30?this.m_nTEMDrawLinescount++:this.curTemLinesInfo=null:this.m_nTEMDrawLinescount<=60?this.m_nTEMDrawLinescount++:this.curTemLinesInfo=null;if(0!=this.privateTargetLinesInfo.length){for(var d=!1,p=0,m=!1,S=0,R=0,P=1e8,b=0;b<this.privateTargetLinesInfo.length;b++){if(0==(R=Math.abs(this.privateTargetLinesInfo[b].absTimeStamp-e))){m=!0,S=b;break}R<=this.nTimePerFrame+1e3&&R<P&&(d=!0,p=b,P=R)}m?(this.curTargetLinesInfo=this.privateTargetLinesInfo[S],this.privateTargetLinesInfo.shift()):d?(this.curTargetLinesInfo=this.privateTargetLinesInfo[p],this.privateTargetLinesInfo.shift()):this.curTargetLinesInfo=null}else this.curTargetLinesInfo=null;if(0!=this.privateMDLinesInfo.length){for(var y=!1,E=0,g=!1,F=0,v=0,C=1e8,T=0;T<this.privateMDLinesInfo.length;T++){if(0==(v=Math.abs(this.privateMDLinesInfo[T].absTimeStamp-e))){g=!0,F=T;break}v<=this.nTimePerFrame+1e3&&v<C&&(y=!0,E=T,C=v)}g?(this.curMDLinesInfo=this.privateMDLinesInfo[F],this.privateMDLinesInfo.shift()):y?(this.curMDLinesInfo=this.privateMDLinesInfo[E],this.privateMDLinesInfo.shift()):this.curMDLinesInfo=null}else this.curMDLinesInfo=null;if(0!=this.privateExactLinesInfo.length){for(var D=!1,A=0,I=!1,M=0,L=0,w=1e8,O=0;O<this.privateExactLinesInfo.length;O++){if(0==(L=Math.abs(this.privateExactLinesInfo[O].absTimeStamp-e))){I=!0,M=O;break}L<=this.nTimePerFrame/2&&L<w&&(D=!0,A=O,w=L)}I?(this.curExactLinesInfo=this.privateExactLinesInfo[M],this.privateExactLinesInfo.shift()):D?(this.curExactLinesInfo=this.privateExactLinesInfo[A],this.privateExactLinesInfo.shift()):this.curExactLinesInfo=null}else this.curExactLinesInfo=null;if(0!=this.privateExactRuleLinesInfo.length){for(var B=!1,k=0,N=!1,V=0,U=0,H=1e8,W=0;W<this.privateExactRuleLinesInfo.length;W++){if(0==(U=Math.abs(this.privateExactRuleLinesInfo[W].absTimeStamp-e))){N=!0,V=W;break}U<=this.nTimePerFrame/2&&U<H&&(B=!0,k=W,H=U)}N?(this.curExactRuleLinesInfo=this.privateExactRuleLinesInfo[V],this.privateExactRuleLinesInfo.shift()):B&&(this.curExactRuleLinesInfo=this.privateExactRuleLinesInfo[k],this.privateExactRuleLinesInfo.shift())}if(0!=this.privateNormalFontsInfo.length){for(var Y=!1,G=0,X=!1,J=0,Z=0,j=1e8,z=0;z<this.privateNormalFontsInfo.length;z++){if(0==(Z=Math.abs(this.privateNormalFontsInfo[z].absTimeStamp-e))){X=!0,J=z;break}Z<=this.nTimePerFrame+1e3&&Z<j&&(Y=!0,G=z,j=Z)}X?(this.curNormalFontsInfo=this.privateNormalFontsInfo[J],this.privateNormalFontsInfo.shift()):Y&&(this.curNormalFontsInfo=this.privateNormalFontsInfo[G],this.privateNormalFontsInfo.shift())}if(0!=this.privateTemFontsInfo.length){for(var K=!1,q=0,$=!1,Q=0,ee=0,te=1e8,ae=0;ae<this.privateTemFontsInfo.length;ae++){if(0==(ee=Math.abs(this.privateTemFontsInfo[ae].absTimeStamp-e))){$=!0,Q=ae;break}ee<=this.nTimePerFrame+1e3&&ee<te&&(K=!0,q=ae,te=ee)}$?(this.curTemFontsInfo=this.privateTemFontsInfo[Q],this.privateTemFontsInfo.shift()):K?(this.curTemFontsInfo=this.privateTemFontsInfo[q],this.privateTemFontsInfo.shift()):this.nFrameRate<=30?this.m_nTEMDrawFontscount<=30?this.m_nTEMDrawFontscount++:this.curTemFontsInfo=null:this.m_nTEMDrawFontscount<=60?this.m_nTEMDrawFontscount++:this.curTemFontsInfo=null}else this.nFrameRate<=30?this.m_nTEMDrawFontscount<=30?this.m_nTEMDrawFontscount++:this.curTemFontsInfo=null:this.m_nTEMDrawFontscount<=60?this.m_nTEMDrawFontscount++:this.curTemFontsInfo=null;if(0!=this.privateTargetFontsInfo.length){for(var re=!1,ie=0,ne=!1,se=0,xe=0,oe=1e8,le=0;le<this.privateTargetFontsInfo.length;le++){if(0==(xe=Math.abs(this.privateTargetFontsInfo[le].absTimeStamp-e))){ne=!0,se=le;break}xe<=this.nTimePerFrame+1e3&&xe<oe&&(re=!0,ie=le,oe=xe)}ne?(this.curTargetFontsInfo=this.privateTargetFontsInfo[se],this.privateTargetFontsInfo.shift()):re?(this.curTargetFontsInfo=this.privateTargetFontsInfo[ie],this.privateTargetFontsInfo.shift()):this.curTargetFontsInfo=null}else this.curTargetFontsInfo=null;if(0!=this.privateExactPOSFontsInfo.length){for(var _e=!1,he=0,fe=!1,ce=0,ue=0,de=1e8,pe=0;pe<this.privateExactPOSFontsInfo.length;pe++){if(0==(ue=Math.abs(this.privateExactPOSFontsInfo[pe].absTimeStamp-e))){fe=!0,ce=pe;break}ue<=this.nTimePerFrame/2&&ue<de&&(_e=!0,he=pe,de=ue)}fe?(this.curExactPOSFontsInfo=this.privateExactPOSFontsInfo[ce],this.privateExactPOSFontsInfo.shift()):_e?(this.curExactPOSFontsInfo=this.privateExactPOSFontsInfo[he],this.privateExactPOSFontsInfo.shift()):this.curExactPOSFontsInfo=null}else this.curExactPOSFontsInfo=null;if(0!=this.privateExactFontsInfo.length){for(var me=!1,Se=0,Re=!1,Pe=0,be=0,ye=1e8,Ee=0;Ee<this.privateExactFontsInfo.length;Ee++){if(0==(be=Math.abs(this.privateExactFontsInfo[Ee].absTimeStamp-e))){Re=!0,Pe=Ee;break}be<=this.nTimePerFrame/2&&be<ye&&(me=!0,Se=Ee,ye=be)}Re?(this.curExactFontsInfo=this.privateExactFontsInfo[Pe],this.privateExactFontsInfo.shift()):me?(this.curExactFontsInfo=this.privateExactFontsInfo[Se],this.privateExactFontsInfo.shift()):this.curExactFontsInfo=null}else this.curExactFontsInfo=null;if(0!=this.privateImageInfo.length){for(var ge=!1,Fe=0,ve=!1,Ce=0,Te=0,De=1e8,Ae=0;Ae<this.privateImageInfo.length;Ae++){if(0==(Te=Math.abs(this.privateImageInfo[Ae].absTimeStamp-e))){ve=!0,Ce=Ae;break}Te<=this.nTimePerFrame+1e8&&Te<De&&(ge=!0,Fe=Ae,De=Te)}ve?(this.curImagesInfo=this.privateImageInfo[Ce],this.privateImageInfo.shift()):ge&&(this.curImagesInfo=this.privateImageInfo[Fe],this.privateImageInfo.shift())}return 1}},{key:"RenderPrivateData",value:function(e,t){return 1&e&&(this.m_bEnableIVSEx=t),2&e&&(this.m_bEnableMDEx=t),4&e&&(this.m_bDisPos=t),8&e&&(this.m_bEnablePICEx=t),16&e&&(this.m_bEnableFIREEx=t),32&e&&(this.m_bEnableTEMEx=t),64&e&&(this.m_bEnableTrackEx=t),128&e&&(this.m_bEnableThermal=t),1}},{key:"RenderPrivateDataEx",value:function(e,t,a){return 16==e&&(1&t&&(this.m_bEnableFireDis=a),4&t&&(this.m_bEnableFireMaxPos=a),8&t&&(this.m_bEnableFireDistance=a)),32==e&&(1&t&&(this.m_bEnableTEMBox=a),2&t&&(this.m_bEnableTEMLine=a),4&t&&(this.m_bEnableTEMPoint=a)),64==e&&(1&t&&(this.m_bEnableTrackPeople=a),2&t&&(this.m_bEnableTrackVehicle=a)),128==e&&(1&t&&(this.m_bEnableThermalFireMask=a),2&t&&(this.m_bEnableThermalRuleGas=a),4&t&&(this.m_bEnableThermalTargetGas=a)),1}},{key:"InputPrivateInfo",value:function(e,t,a){var r=this,i=!1,n=0;if(e.linesNum>0){var s={linesNum:0};s.absTimeStamp=e.absTimeStamp,s.stDrawLinesArray=[];var x={linesNum:0};x.absTimeStamp=e.absTimeStamp,x.stDrawLinesArray=[];var o={linesNum:0};o.absTimeStamp=e.absTimeStamp,o.stDrawLinesArray=[];var l={linesNum:0};l.absTimeStamp=e.absTimeStamp,l.stDrawLinesArray=[];var _={linesNum:0};_.absTimeStamp=e.absTimeStamp,_.stDrawLinesArray=[];var h={linesNum:0};h.absTimeStamp=e.absTimeStamp,h.stDrawLinesArray=[];var f={linesNum:0};f.absTimeStamp=e.absTimeStamp,f.stDrawLinesArray=[];for(var c=0;c<e.linesNum;c++)1==e.stDrawLinesArray[c].dwMatchType?2==e.stDrawLinesArray[c].dwIntelFlag?(h.stDrawLinesArray.push(e.stDrawLinesArray[c]),++h.linesNum):(_.stDrawLinesArray.push(e.stDrawLinesArray[c]),++_.linesNum):1==e.stDrawLinesArray[c].dwIntelFlag?(s.stDrawLinesArray.push(e.stDrawLinesArray[c]),++s.linesNum):4==e.stDrawLinesArray[c].dwIntelFlag?(this.m_nTEMDrawLinescount=0,x.stDrawLinesArray.push(e.stDrawLinesArray[c]),++x.linesNum):6==e.stDrawLinesArray[c].dwIntelFlag?(o.stDrawLinesArray.push(e.stDrawLinesArray[c]),++o.linesNum):8!=e.stDrawLinesArray[c].dwIntelFlag||1!=e.stDrawLinesArray[c].dwSubIntelFlag&&2!=e.stDrawLinesArray[c].dwSubIntelFlag?(l.stDrawLinesArray.push(e.stDrawLinesArray[c]),++l.linesNum):(f.stDrawLinesArray.push(e.stDrawLinesArray[c]),++f.linesNum);if(_.linesNum>0){if(_.absTimeStamp<=this.maxExactPrivateLineTimeStamp){var u=0;for(u=0;u<this.privateExactLinesInfo.length;u++)if(this.privateExactLinesInfo[u].absTimeStamp==_.absTimeStamp){i=!0,n=u;break}}if(i){this.privateExactLinesInfo[n].linesNum=_.linesNum;for(var d=0;d<_.linesNum;d++){this.privateExactLinesInfo[n].stDrawLinesArray[d]={},this.privateExactLinesInfo[n].stDrawLinesArray[d].vertex_num=_.stDrawLinesArray[d].vertex_num,this.privateExactLinesInfo[n].stDrawLinesArray[d].lineWidth=_.stDrawLinesArray[d].lineWidth,this.privateExactLinesInfo[n].stDrawLinesArray[d].bFill=_.stDrawLinesArray[d].bFill,this.privateExactLinesInfo[n].stDrawLinesArray[d].bLoop=_.stDrawLinesArray[d].bLoop,this.privateExactLinesInfo[n].stDrawLinesArray[d].dwMatchType=_.stDrawLinesArray[d].dwMatchType,this.privateExactLinesInfo[n].stDrawLinesArray[d].dwIntelFlag=_.stDrawLinesArray[d].dwIntelFlag,this.privateExactLinesInfo[n].stDrawLinesArray[d].dwSubIntelFlag=_.stDrawLinesArray[d].dwSubIntelFlag,this.privateExactLinesInfo[n].stDrawLinesArray[d].color={},this.privateExactLinesInfo[n].stDrawLinesArray[d].color.R=_.stDrawLinesArray[d].color.R,this.privateExactLinesInfo[n].stDrawLinesArray[d].color.G=_.stDrawLinesArray[d].color.G,this.privateExactLinesInfo[n].stDrawLinesArray[d].color.B=_.stDrawLinesArray[d].color.B,this.privateExactLinesInfo[n].stDrawLinesArray[d].color.A=_.stDrawLinesArray[d].color.A,this.privateExactLinesInfo[n].stDrawLinesArray[d].stPoint=[];for(var p=0;p<_.stDrawLinesArray[d].vertex_num;p++)this.privateExactLinesInfo[n].stDrawLinesArray[d].stPoint[p]={},this.privateExactLinesInfo[n].stDrawLinesArray[d].stPoint[p].x=_.stDrawLinesArray[d].stPoint[p].x,this.privateExactLinesInfo[n].stDrawLinesArray[d].stPoint[p].y=_.stDrawLinesArray[d].stPoint[p].y;this.privateExactLinesInfo[n].stDrawLinesArray[d].dwFillPicID=_.stDrawLinesArray[d].dwFillPicID,this.privateExactLinesInfo[n].stDrawLinesArray[d].eventid=_.stDrawLinesArray[d].dwEventID}}else this.maxExactPrivateLineTimeStamp<_.absTimeStamp&&(this.maxExactPrivateLineTimeStamp=_.absTimeStamp),this.privateExactLinesInfo.push(_)}if(i=!1,n=0,l.linesNum>0){if(this.privateNormalLinesInfo.length>=ot&&this.privateNormalLinesInfo.shift(),l.absTimeStamp<=this.maxNormalPrivateLineTimeStamp){var m=0;for(m=0;m<this.privateNormalLinesInfo.length;m++)if(this.privateNormalLinesInfo[m].absTimeStamp==l.absTimeStamp){i=!0,n=m;break}}if(i)for(var S=0;S<l.linesNum;S++)this.privateNormalLinesInfo[n].stDrawLinesArray.push(l.stDrawLinesArray[S]),++this.privateNormalLinesInfo[n].linesNum;else this.maxNormalPrivateLineTimeStamp<l.absTimeStamp&&(this.maxNormalPrivateLineTimeStamp=l.absTimeStamp),this.privateNormalLinesInfo.push(l)}if(f.linesNum>0)if(this.privateThermalLinesInfo.length>=ot&&this.privateThermalLinesInfo.shift(),0!=this.privateThermalLinesInfo.length){this.privateThermalLinesInfo[0].linesNum=f.linesNum;for(var R=0;R<f.linesNum;R++){this.privateThermalLinesInfo[0].stDrawLinesArray[R]={},this.privateThermalLinesInfo[0].stDrawLinesArray[R].vertex_num=f.stDrawLinesArray[R].vertex_num,this.privateThermalLinesInfo[0].stDrawLinesArray[R].lineWidth=f.stDrawLinesArray[R].lineWidth,this.privateThermalLinesInfo[0].stDrawLinesArray[R].bFill=f.stDrawLinesArray[R].bFill,this.privateThermalLinesInfo[0].stDrawLinesArray[R].bLoop=f.stDrawLinesArray[R].bLoop,this.privateThermalLinesInfo[0].stDrawLinesArray[R].dwMatchType=f.stDrawLinesArray[R].dwMatchType,this.privateThermalLinesInfo[0].stDrawLinesArray[R].dwIntelFlag=f.stDrawLinesArray[R].dwIntelFlag,this.privateThermalLinesInfo[0].stDrawLinesArray[R].dwSubIntelFlag=f.stDrawLinesArray[R].dwSubIntelFlag,this.privateThermalLinesInfo[0].stDrawLinesArray[R].color={},this.privateThermalLinesInfo[0].stDrawLinesArray[R].color.R=f.stDrawLinesArray[R].color.R,this.privateThermalLinesInfo[0].stDrawLinesArray[R].color.G=f.stDrawLinesArray[R].color.G,this.privateThermalLinesInfo[0].stDrawLinesArray[R].color.B=f.stDrawLinesArray[R].color.B,this.privateThermalLinesInfo[0].stDrawLinesArray[R].color.A=f.stDrawLinesArray[R].color.A,this.privateThermalLinesInfo[0].stDrawLinesArray[R].stPoint=[];for(var P=0;P<f.stDrawLinesArray[R].vertex_num;P++)this.privateThermalLinesInfo[0].stDrawLinesArray[R].stPoint[P]={},this.privateThermalLinesInfo[0].stDrawLinesArray[R].stPoint[P].x=f.stDrawLinesArray[R].stPoint[P].x,this.privateThermalLinesInfo[0].stDrawLinesArray[R].stPoint[P].y=f.stDrawLinesArray[R].stPoint[P].y}}else this.privateThermalLinesInfo.push(f);if(i=!1,n=0,h.linesNum>0){if(h.absTimeStamp<=this.maxExactRulePrivateLineTimeStamp){var b=0;for(b=0;b<this.privateExactRuleLinesInfo.length;b++)if(this.privateExactRuleLinesInfo[b].absTimeStamp==h.absTimeStamp){i=!0,n=b;break}}if(i){this.privateExactRuleLinesInfo[n].linesNum=h.linesNum;for(var y=0;y<h.linesNum;y++){this.privateExactRuleLinesInfo[n].stDrawLinesArray[y]={},this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].vertex_num=h.stDrawLinesArray[y].vertex_num,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].lineWidth=h.stDrawLinesArray[y].lineWidth,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].bFill=h.stDrawLinesArray[y].bFill,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].bLoop=h.stDrawLinesArray[y].bLoop,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].dwMatchType=h.stDrawLinesArray[y].dwMatchType,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].dwIntelFlag=h.stDrawLinesArray[y].dwIntelFlag,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].dwSubIntelFlag=h.stDrawLinesArray[y].dwSubIntelFlag,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].color={},this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].color.R=h.stDrawLinesArray[y].color.R,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].color.G=h.stDrawLinesArray[y].color.G,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].color.B=h.stDrawLinesArray[y].color.B,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].color.A=h.stDrawLinesArray[y].color.A,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].stPoint=[];for(var E=0;E<h.stDrawLinesArray[y].vertex_num;E++)this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].stPoint[E]={},this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].stPoint[E].x=h.stDrawLinesArray[y].stPoint[E].x,this.privateExactRuleLinesInfo[n].stDrawLinesArray[y].stPoint[E].y=h.stDrawLinesArray[y].stPoint[E].y}}else this.maxExactRulePrivateLineTimeStamp<h.absTimeStamp&&(this.maxExactRulePrivateLineTimeStamp=h.absTimeStamp),this.privateExactRuleLinesInfo.push(h)}if(i=!1,n=0,s.linesNum>0){if(s.absTimeStamp<=this.maxTargetPrivateLineTimeStamp){var g=0;for(g=0;g<this.privateTargetLinesInfo.length;g++)if(this.privateTargetLinesInfo[g].absTimeStamp==s.absTimeStamp){i=!0,n=g;break}}if(i){this.privateTargetLinesInfo[n].linesNum=s.linesNum;for(var F=0;F<s.linesNum;F++){this.privateTargetLinesInfo[n].stDrawLinesArray[F]={},this.privateTargetLinesInfo[n].stDrawLinesArray[F].vertex_num=s.stDrawLinesArray[F].vertex_num,this.privateTargetLinesInfo[n].stDrawLinesArray[F].lineWidth=s.stDrawLinesArray[F].lineWidth,this.privateTargetLinesInfo[n].stDrawLinesArray[F].bFill=s.stDrawLinesArray[F].bFill,this.privateTargetLinesInfo[n].stDrawLinesArray[F].bLoop=s.stDrawLinesArray[F].bLoop,this.privateTargetLinesInfo[n].stDrawLinesArray[F].dwMatchType=s.stDrawLinesArray[F].dwMatchType,this.privateTargetLinesInfo[n].stDrawLinesArray[F].dwIntelFlag=s.stDrawLinesArray[F].dwIntelFlag,this.privateTargetLinesInfo[n].stDrawLinesArray[F].dwSubIntelFlag=s.stDrawLinesArray[F].dwSubIntelFlag,this.privateTargetLinesInfo[n].stDrawLinesArray[F].color={},this.privateTargetLinesInfo[n].stDrawLinesArray[F].color.R=s.stDrawLinesArray[F].color.R,this.privateTargetLinesInfo[n].stDrawLinesArray[F].color.G=s.stDrawLinesArray[F].color.G,this.privateTargetLinesInfo[n].stDrawLinesArray[F].color.B=s.stDrawLinesArray[F].color.B,this.privateTargetLinesInfo[n].stDrawLinesArray[F].color.A=s.stDrawLinesArray[F].color.A,this.privateTargetLinesInfo[n].stDrawLinesArray[F].stPoint=[];for(var C=0;C<s.stDrawLinesArray[F].vertex_num;C++)this.privateTargetLinesInfo[n].stDrawLinesArray[F].stPoint[C]={},this.privateTargetLinesInfo[n].stDrawLinesArray[F].stPoint[C].x=s.stDrawLinesArray[F].stPoint[C].x,this.privateTargetLinesInfo[n].stDrawLinesArray[F].stPoint[C].y=s.stDrawLinesArray[F].stPoint[C].y;this.privateTargetLinesInfo[n].stDrawLinesArray[F].dwFillPicID=s.stDrawLinesArray[F].dwFillPicID,this.privateTargetLinesInfo[n].stDrawLinesArray[F].eventid=s.stDrawLinesArray[F].dwEventID}}else this.maxTargetPrivateLineTimeStamp<s.absTimeStamp&&(this.maxTargetPrivateLineTimeStamp=s.absTimeStamp),this.privateTargetLinesInfo.push(s)}if(i=!1,n=0,o.linesNum>0){if(this.privateMDLinesInfo.length>=ot&&this.privateMDLinesInfo.shift(),o.absTimeStamp<=this.maxMDPrivateLineTimeStamp){var T=0;for(T=0;T<this.privateMDLinesInfo.length;T++)if(this.privateMDLinesInfo[T].absTimeStamp==o.absTimeStamp){i=!0,n=T;break}}if(i){this.privateMDLinesInfo[n].linesNum=o.linesNum;for(var D=0;D<o.linesNum;D++){this.privateMDLinesInfo[n].stDrawLinesArray[D]={},this.privateMDLinesInfo[n].stDrawLinesArray[D].vertex_num=o.stDrawLinesArray[D].vertex_num,this.privateMDLinesInfo[n].stDrawLinesArray[D].lineWidth=o.stDrawLinesArray[D].lineWidth,this.privateMDLinesInfo[n].stDrawLinesArray[D].bFill=o.stDrawLinesArray[D].bFill,this.privateMDLinesInfo[n].stDrawLinesArray[D].bLoop=o.stDrawLinesArray[D].bLoop,this.privateMDLinesInfo[n].stDrawLinesArray[D].dwMatchType=o.stDrawLinesArray[D].dwMatchType,this.privateMDLinesInfo[n].stDrawLinesArray[D].dwIntelFlag=o.stDrawLinesArray[D].dwIntelFlag,this.privateMDLinesInfo[n].stDrawLinesArray[D].dwSubIntelFlag=o.stDrawLinesArray[D].dwSubIntelFlag,this.privateMDLinesInfo[n].stDrawLinesArray[D].color={},this.privateMDLinesInfo[n].stDrawLinesArray[D].color.R=o.stDrawLinesArray[D].color.R,this.privateMDLinesInfo[n].stDrawLinesArray[D].color.G=o.stDrawLinesArray[D].color.G,this.privateMDLinesInfo[n].stDrawLinesArray[D].color.B=o.stDrawLinesArray[D].color.B,this.privateMDLinesInfo[n].stDrawLinesArray[D].color.A=o.stDrawLinesArray[D].color.A,this.privateMDLinesInfo[n].stDrawLinesArray[D].stPoint=[];for(var A=0;A<o.stDrawLinesArray[D].vertex_num;A++)this.privateMDLinesInfo[n].stDrawLinesArray[D].stPoint[A]={},this.privateMDLinesInfo[n].stDrawLinesArray[D].stPoint[A].x=o.stDrawLinesArray[D].stPoint[A].x,this.privateMDLinesInfo[n].stDrawLinesArray[D].stPoint[A].y=o.stDrawLinesArray[D].stPoint[A].y}}else this.maxMDPrivateLineTimeStamp<o.absTimeStamp&&(this.maxMDPrivateLineTimeStamp=o.absTimeStamp),this.privateMDLinesInfo.push(o)}if(i=!1,n=0,x.linesNum>0){if(this.privateTemLinesInfo.length>=ot&&this.privateTemLinesInfo.shift(),x.absTimeStamp<=this.maxTemPrivateLineTimeStamp){var I=0;for(I=0;I<this.privateTemLinesInfo.length;I++)if(this.privateTemLinesInfo[I].absTimeStamp==x.absTimeStamp){i=!0,n=I;break}}if(i){this.privateTemLinesInfo[n].linesNum=x.linesNum;for(var M=0;M<x.linesNum;M++){this.privateTemLinesInfo[n].stDrawLinesArray[M]={},this.privateTemLinesInfo[n].stDrawLinesArray[M].vertex_num=x.stDrawLinesArray[M].vertex_num,this.privateTemLinesInfo[n].stDrawLinesArray[M].lineWidth=x.stDrawLinesArray[M].lineWidth,this.privateTemLinesInfo[n].stDrawLinesArray[M].bFill=x.stDrawLinesArray[M].bFill,this.privateTemLinesInfo[n].stDrawLinesArray[M].bLoop=x.stDrawLinesArray[M].bLoop,this.privateTemLinesInfo[n].stDrawLinesArray[M].dwMatchType=x.stDrawLinesArray[M].dwMatchType,this.privateTemLinesInfo[n].stDrawLinesArray[M].dwIntelFlag=x.stDrawLinesArray[M].dwIntelFlag,this.privateTemLinesInfo[n].stDrawLinesArray[M].dwSubIntelFlag=x.stDrawLinesArray[M].dwSubIntelFlag,this.privateTemLinesInfo[n].stDrawLinesArray[M].color={},this.privateTemLinesInfo[n].stDrawLinesArray[M].color.R=x.stDrawLinesArray[M].color.R,this.privateTemLinesInfo[n].stDrawLinesArray[M].color.G=x.stDrawLinesArray[M].color.G,this.privateTemLinesInfo[n].stDrawLinesArray[M].color.B=x.stDrawLinesArray[M].color.B,this.privateTemLinesInfo[n].stDrawLinesArray[M].color.A=x.stDrawLinesArray[M].color.A,this.privateTemLinesInfo[n].stDrawLinesArray[M].stPoint=[];for(var L=0;L<x.stDrawLinesArray[M].vertex_num;L++)this.privateTemLinesInfo[n].stDrawLinesArray[M].stPoint[L]={},this.privateTemLinesInfo[n].stDrawLinesArray[M].stPoint[L].x=x.stDrawLinesArray[M].stPoint[L].x,this.privateTemLinesInfo[n].stDrawLinesArray[M].stPoint[L].y=x.stDrawLinesArray[M].stPoint[L].y}}else this.maxTemPrivateLineTimeStamp<x.absTimeStamp&&(this.maxTemPrivateLineTimeStamp=x.absTimeStamp),this.privateTemLinesInfo.push(x)}}if(t.nFontsNum>0){var w={nFontsNum:0};w.absTimeStamp=t.absTimeStamp,w.stDrawFontsArray=[];var O={nFontsNum:0};O.absTimeStamp=t.absTimeStamp,O.stDrawFontsArray=[];var B={nFontsNum:0};B.absTimeStamp=t.absTimeStamp,B.stDrawFontsArray=[];var k={nFontsNum:0};k.absTimeStamp=t.absTimeStamp,k.stDrawFontsArray=[];var N={nFontsNum:0};N.absTimeStamp=t.absTimeStamp,N.stDrawFontsArray=[];var V={nFontsNum:0};V.absTimeStamp=t.absTimeStamp,V.stDrawFontsArray=[];for(var U=0;U<t.nFontsNum;U++)1==t.stDrawFontsArray[U].dwMatchType?1==t.stDrawFontsArray[U].dwIntelFlag?(N.stDrawFontsArray.push(t.stDrawFontsArray[U]),++N.nFontsNum):3==t.stDrawFontsArray[U].dwIntelFlag&&(V.stDrawFontsArray.push(t.stDrawFontsArray[U]),++V.nFontsNum):1==t.stDrawFontsArray[U].dwIntelFlag?(w.stDrawFontsArray.push(t.stDrawFontsArray[U]),++w.nFontsNum):4==t.stDrawFontsArray[U].dwIntelFlag?(this.m_nTEMDrawFontscount=0,O.stDrawFontsArray.push(t.stDrawFontsArray[U]),++O.nFontsNum):3==t.stDrawFontsArray[U].dwIntelFlag?t.stDrawFontsArray[U].NeedClearNormalPos?this.curNormalPOSFontsInfo=null:(k.stDrawFontsArray.push(t.stDrawFontsArray[U]),++k.nFontsNum):(B.stDrawFontsArray.push(t.stDrawFontsArray[U]),++B.nFontsNum);if(i=!1,n=0,V.nFontsNum>0){if(this.privateExactPOSFontsInfo.length>=ot&&this.privateExactPOSFontsInfo.shift(),V.absTimeStamp<=this.maxExactPOSPrivateFontTimeStamp){var H=0;for(H=0;H<this.privateExactPOSFontsInfo.length;H++)if(this.privateExactPOSFontsInfo[H].absTimeStamp==V.absTimeStamp){i=!0,n=H;break}}if(i){this.privateExactPOSFontsInfo[n].nFontsNum=V.nFontsNum;for(var W=0;W<V.nFontsNum;W++)this.privateExactPOSFontsInfo[n].stDrawFontsArray[W]={},this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].nFontSizeW=V.stDrawFontsArray[W].nFontSizeW,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].nFontSizeH=V.stDrawFontsArray[W].nFontSizeH,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].dwMatchType=V.stDrawFontsArray[W].dwMatchType,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].dwIntelFlag=V.stDrawFontsArray[W].dwIntelFlag,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].dwSubIntelFlag=V.stDrawFontsArray[W].dwSubIntelFlag,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].color={},this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].color.R=V.stDrawFontsArray[W].color.R,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].color.G=V.stDrawFontsArray[W].color.G,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].color.B=V.stDrawFontsArray[W].color.B,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].color.A=V.stDrawFontsArray[W].color.A,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].stPoint={},this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].stPoint.x=V.stDrawFontsArray[W].stPoint.x,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].stPoint.y=V.stDrawFontsArray[W].stPoint.y,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].fontString=V.stDrawFontsArray[W].fontString,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].BGcolor={},this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].BGcolor.R=V.stDrawFontsArray[W].BGcolor.R,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].BGcolor.G=V.stDrawFontsArray[W].BGcolor.G,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].BGcolor.B=V.stDrawFontsArray[W].BGcolor.B,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].BGcolor.A=V.stDrawFontsArray[W].BGcolor.A,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].bBackGround=V.stDrawFontsArray[W].bBackGround,this.privateExactPOSFontsInfo[n].stDrawFontsArray[W].EventID=V.stDrawFontsArray[W].dwEventID}else this.maxExactPOSPrivateFontTimeStamp<V.absTimeStamp&&(this.maxExactPOSPrivateFontTimeStamp=V.absTimeStamp),this.privateExactPOSFontsInfo.push(V)}if(i=!1,n=0,N.nFontsNum>0){if(this.privateExactFontsInfo.length>=ot&&this.privateExactFontsInfo.shift(),N.absTimeStamp<=this.maxExactPrivateFontTimeStamp){var Y=0;for(Y=0;Y<this.privateExactFontsInfo.length;Y++)if(this.privateExactFontsInfo[Y].absTimeStamp==N.absTimeStamp){i=!0,n=Y;break}}if(i)for(var G=0;G<N.nFontsNum;G++)this.privateExactFontsInfo[n].stDrawFontsArray.push(N.stDrawFontsArray[G]),++this.privateExactFontsInfo[n].nFontsNum;else this.maxExactPrivateFontTimeStamp<N.absTimeStamp&&(this.maxExactPrivateFontTimeStamp=N.absTimeStamp),this.privateExactFontsInfo.push(N)}if(i=!1,n=0,B.nFontsNum>0){if(this.privateNormalFontsInfo.length>=ot&&this.privateNormalFontsInfo.shift(),B.absTimeStamp<=this.maxNormalPrivateFontTimeStamp){var X=0;for(X=0;X<this.privateNormalFontsInfo.length;X++)if(this.privateNormalFontsInfo[X].absTimeStamp==B.absTimeStamp){i=!0,n=X;break}}if(i)for(var J=0;J<B.nFontsNum;J++)this.privateNormalFontsInfo[n].stDrawFontsArray.push(B.stDrawFontsArray[J]),++this.privateNormalFontsInfo[n].nFontsNum;else this.maxNormalPrivateFontTimeStamp<B.absTimeStamp&&(this.maxNormalPrivateFontTimeStamp=B.absTimeStamp),this.privateNormalFontsInfo.push(B)}if(k.nFontsNum>0)if(null==this.curNormalPOSFontsInfo)this.curNormalPOSFontsInfo=k;else{this.curNormalPOSFontsInfo.nFontsNum=k.nFontsNum,this.curNormalPOSFontsInfo.absTimeStamp=k.absTimeStamp;for(var Z=0;Z<k.nFontsNum;Z++)this.curNormalPOSFontsInfo.stDrawFontsArray[Z]={},this.curNormalPOSFontsInfo.stDrawFontsArray[Z].nFontSizeW=k.stDrawFontsArray[Z].nFontSizeW,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].nFontSizeH=k.stDrawFontsArray[Z].nFontSizeH,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].dwMatchType=k.stDrawFontsArray[Z].dwMatchType,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].dwIntelFlag=k.stDrawFontsArray[Z].dwIntelFlag,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].dwSubIntelFlag=k.stDrawFontsArray[Z].dwSubIntelFlag,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].color={},this.curNormalPOSFontsInfo.stDrawFontsArray[Z].color.R=k.stDrawFontsArray[Z].color.R,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].color.G=k.stDrawFontsArray[Z].color.G,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].color.B=k.stDrawFontsArray[Z].color.B,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].color.A=k.stDrawFontsArray[Z].color.A,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].stPoint={},this.curNormalPOSFontsInfo.stDrawFontsArray[Z].stPoint.x=k.stDrawFontsArray[Z].stPoint.x,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].stPoint.y=k.stDrawFontsArray[Z].stPoint.y,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].fontString=k.stDrawFontsArray[Z].fontString,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].BGcolor={},this.curNormalPOSFontsInfo.stDrawFontsArray[Z].BGcolor.R=k.stDrawFontsArray[Z].BGcolor.R,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].BGcolor.G=k.stDrawFontsArray[Z].BGcolor.G,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].BGcolor.B=k.stDrawFontsArray[Z].BGcolor.B,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].BGcolor.A=k.stDrawFontsArray[Z].BGcolor.A,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].bBackGround=k.stDrawFontsArray[Z].bBackGround,this.curNormalPOSFontsInfo.stDrawFontsArray[Z].EventID=k.stDrawFontsArray[Z].dwEventID}if(i=!1,n=0,w.nFontsNum>0){if(this.privateTargetFontsInfo.length>=ot&&this.privateTargetFontsInfo.shift(),w.absTimeStamp<=this.maxTargetPrivateFontTimeStamp){var j=0;for(j=0;j<this.privateTargetFontsInfo.length;j++)if(this.privateTargetFontsInfo[j].absTimeStamp==w.absTimeStamp){i=!0,n=j;break}}if(i){this.privateTargetFontsInfo[n].nFontsNum=w.nFontsNum;for(var z=0;z<w.nFontsNum;z++)this.privateTargetFontsInfo[n].stDrawFontsArray[z]={},this.privateTargetFontsInfo[n].stDrawFontsArray[z].nFontSizeW=w.stDrawFontsArray[z].nFontSizeW,this.privateTargetFontsInfo[n].stDrawFontsArray[z].nFontSizeH=w.stDrawFontsArray[z].nFontSizeH,this.privateTargetFontsInfo[n].stDrawFontsArray[z].dwMatchType=w.stDrawFontsArray[z].dwMatchType,this.privateTargetFontsInfo[n].stDrawFontsArray[z].dwIntelFlag=w.stDrawFontsArray[z].dwIntelFlag,this.privateTargetFontsInfo[n].stDrawFontsArray[z].dwSubIntelFlag=w.stDrawFontsArray[z].dwSubIntelFlag,this.privateTargetFontsInfo[n].stDrawFontsArray[z].color={},this.privateTargetFontsInfo[n].stDrawFontsArray[z].color.R=w.stDrawFontsArray[z].color.R,this.privateTargetFontsInfo[n].stDrawFontsArray[z].color.G=w.stDrawFontsArray[z].color.G,this.privateTargetFontsInfo[n].stDrawFontsArray[z].color.B=w.stDrawFontsArray[z].color.B,this.privateTargetFontsInfo[n].stDrawFontsArray[z].color.A=w.stDrawFontsArray[z].color.A,this.privateTargetFontsInfo[n].stDrawFontsArray[z].stPoint={},this.privateTargetFontsInfo[n].stDrawFontsArray[z].stPoint.x=w.stDrawFontsArray[z].stPoint.x,this.privateTargetFontsInfo[n].stDrawFontsArray[z].stPoint.y=w.stDrawFontsArray[z].stPoint.y,this.privateTargetFontsInfo[n].stDrawFontsArray[z].fontString=w.stDrawFontsArray[z].fontString,this.privateTargetFontsInfo[n].stDrawFontsArray[z].BGcolor={},this.privateTargetFontsInfo[n].stDrawFontsArray[z].BGcolor.R=w.stDrawFontsArray[z].BGcolor.R,this.privateTargetFontsInfo[n].stDrawFontsArray[z].BGcolor.G=w.stDrawFontsArray[z].BGcolor.G,this.privateTargetFontsInfo[n].stDrawFontsArray[z].BGcolor.B=w.stDrawFontsArray[z].BGcolor.B,this.privateTargetFontsInfo[n].stDrawFontsArray[z].BGcolor.A=w.stDrawFontsArray[z].BGcolor.A,this.privateTargetFontsInfo[n].stDrawFontsArray[z].bBackGround=w.stDrawFontsArray[z].bBackGround}else this.maxTargetPrivateFontTimeStamp<w.absTimeStamp&&(this.maxTargetPrivateFontTimeStamp=w.absTimeStamp),this.privateTargetFontsInfo.push(w)}if(i=!1,n=0,O.nFontsNum>0){if(this.privateTemFontsInfo.length>=ot&&this.privateTemFontsInfo.shift(),O.absTimeStamp<=this.maxTemPrivateFontTimeStamp){var K=0;for(K=0;K<this.privateTemFontsInfo.length;K++)if(this.privateTemFontsInfo[K].absTimeStamp==O.absTimeStamp){i=!0,n=K;break}}if(i){this.privateTemFontsInfo[n].nFontsNum=O.nFontsNum;for(var q=0;q<O.nFontsNum;q++)this.privateTemFontsInfo[n].stDrawFontsArray[q]={},this.privateTemFontsInfo[n].stDrawFontsArray[q].nFontSizeW=O.stDrawFontsArray[q].nFontSizeW,this.privateTemFontsInfo[n].stDrawFontsArray[q].nFontSizeH=O.stDrawFontsArray[q].nFontSizeH,this.privateTemFontsInfo[n].stDrawFontsArray[q].dwMatchType=O.stDrawFontsArray[q].dwMatchType,this.privateTemFontsInfo[n].stDrawFontsArray[q].dwIntelFlag=O.stDrawFontsArray[q].dwIntelFlag,this.privateTemFontsInfo[n].stDrawFontsArray[q].dwSubIntelFlag=O.stDrawFontsArray[q].dwSubIntelFlag,this.privateTemFontsInfo[n].stDrawFontsArray[q].color={},this.privateTemFontsInfo[n].stDrawFontsArray[q].color.R=O.stDrawFontsArray[q].color.R,this.privateTemFontsInfo[n].stDrawFontsArray[q].color.G=O.stDrawFontsArray[q].color.G,this.privateTemFontsInfo[n].stDrawFontsArray[q].color.B=O.stDrawFontsArray[q].color.B,this.privateTemFontsInfo[n].stDrawFontsArray[q].color.A=O.stDrawFontsArray[q].color.A,this.privateTemFontsInfo[n].stDrawFontsArray[q].stPoint={},this.privateTemFontsInfo[n].stDrawFontsArray[q].stPoint.x=O.stDrawFontsArray[q].stPoint.x,this.privateTemFontsInfo[n].stDrawFontsArray[q].stPoint.y=O.stDrawFontsArray[q].stPoint.y,this.privateTemFontsInfo[n].stDrawFontsArray[q].fontString=O.stDrawFontsArray[q].fontString}else this.maxTemPrivateFontTimeStamp<O.absTimeStamp&&(this.maxTemPrivateFontTimeStamp=O.absTimeStamp),this.privateTemFontsInfo.push(O)}}if(i=!1,n=0,4==a.nPixelFormat){if(this.privateImageInfo.length>=ot&&this.privateImageInfo.shift(),a.absTimeStamp<=this.maxPrivateImageTimeStamp){var $=0;for($=0;$<this.privateImageInfo.length;$++)if(this.privateImageInfo[$].absTimeStamp==a.absTimeStamp){i=!0,n=$;break}}i?(this.privateImageInfo[n].nWidth=a.nWidth,this.privateImageInfo[n].nHeight=a.nHeight,this.privateImageInfo[n].pstRect={},this.privateImageInfo[n].pstRect.fTop=a.pstRect.fTop,this.privateImageInfo[n].pstRect.fBottom=a.pstRect.fBottom,this.privateImageInfo[n].pstRect.fLeft=a.pstRect.fLeft,this.privateImageInfo[n].pstRect.fRight=a.pstRect.fRight,this.privateImageInfo[n].nPixelFormat=a.nPixelFormat,this.privateImageInfo[n].fAlpha=a.fAlpha,this.privateImageInfo[n].picImageData=a.picImageData):(this.maxPrivateImageTimeStamp<a.absTimeStamp&&(this.maxPrivateImageTimeStamp=a.absTimeStamp),this.privateImageInfo.push(a))}else if(256==a.nPixelFormat&&null!=a.picImageData)try{var Q=new ImageDecoder({data:a.picImageData,type:"image/png"});Q.tracks.ready.then((function(){return Q.completed})).then((function(){return Q.decode({frameIndex:0})})).then((function(e){r.privatePNGImageInfo.length>=20&&r.privatePNGImageInfo.shift();var t=r.privatePNGImageInfo.findIndex((function(e){return e.PicID===a.PicID}));-1!==t?r.privatePNGImageInfo[t]=v(v({},r.privatePNGImageInfo[t]),{},{PicID:a.PicID,videoStream:e.image,nImageWidth:e.image.displayWidth,nImageHeight:e.image.displayHeight,pstRectPos:{fTop:a.pstRect.fTop,fBottom:a.pstRect.fBottom,fLeft:a.pstRect.fLeft,fRight:a.pstRect.fRight},nPixelFormat:a.nPixelFormat,fAlpha:a.fAlpha}):r.privatePNGImageInfo.push({PicID:a.PicID,videoStream:e.image,nImageWidth:e.image.displayWidth,nImageHeight:e.image.displayHeight,pstRectPos:{fTop:a.pstRect.fTop,fBottom:a.pstRect.fBottom,fLeft:a.pstRect.fLeft,fRight:a.pstRect.fRight},nPixelFormat:a.nPixelFormat,fAlpha:a.fAlpha})})).catch((function(e){console.error("Image processing failed:",e)}))}catch(e){console.error("ImageDecoder initialization failed:",e)}return 1}},{key:"CheckLinesInfo",value:function(){if(this.DrawlinesParamArray.splice(0,this.DrawlinesParamArray.length),this.DrawlinesParamArrayAllPointNum=0,this.bDrawlinesParamArrayFill=0,this.DrawMosaiclinesParamArray.splice(0,this.DrawMosaiclinesParamArray.length),this.DrawTargetlinesParamArray.splice(0,this.DrawTargetlinesParamArray.length),null!=this.curNormalLinesInfo)for(var e=[],t=0,a=0;a<this.curNormalLinesInfo.linesNum;a++)if(2==this.curNormalLinesInfo.stDrawLinesArray[a].dwIntelFlag&&1==this.m_bEnableIVSEx||7==this.curNormalLinesInfo.stDrawLinesArray[a].dwIntelFlag&&1==this.m_bEnableFIREEx&&(1==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag&&1==this.m_bEnableFireDis||4==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag&&1==this.m_bEnableFireMaxPos)||8==this.curNormalLinesInfo.stDrawLinesArray[a].dwIntelFlag&&1==this.m_bEnableThermal&&4==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag&&1==this.m_bEnableThermalTargetGas||9==this.curNormalLinesInfo.stDrawLinesArray[a].dwIntelFlag&&1==this.m_bEnableTrackEx&&(1==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag&&1==this.m_bEnableTrackPeople||2==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag&&1==this.m_bEnableTrackVehicle||0==this.curNormalLinesInfo.stDrawLinesArray[a].dwSubIntelFlag)){e[t]={},e[t].nPointNum=this.curNormalLinesInfo.stDrawLinesArray[a].vertex_num,e[t].nLineWidth=this.curNormalLinesInfo.stDrawLinesArray[a].lineWidth,this.curNormalLinesInfo.stDrawLinesArray[a].bFill,e[t].bLoop=this.curNormalLinesInfo.stDrawLinesArray[a].bLoop,e[t].pstColor={},e[t].pstColor.fR=this.curNormalLinesInfo.stDrawLinesArray[a].color.R,e[t].pstColor.fG=this.curNormalLinesInfo.stDrawLinesArray[a].color.G,e[t].pstColor.fB=this.curNormalLinesInfo.stDrawLinesArray[a].color.B,e[t].pstColor.fA=this.curNormalLinesInfo.stDrawLinesArray[a].color.A,e[t].pstPoints=[];for(var r=0;r<e[t].nPointNum;r++)e[t].pstPoints[r]={},e[t].pstPoints[r].fX=this.curNormalLinesInfo.stDrawLinesArray[a].stPoint[r].x,e[t].pstPoints[r].fY=this.curNormalLinesInfo.stDrawLinesArray[a].stPoint[r].y;e[t].dwMosaictype=this.curNormalLinesInfo.stDrawLinesArray[a].dwMosaictype,e[t].dwMosaictype?this.DrawMosaiclinesParamArray.push(e[t]):(this.DrawlinesParamArray.push(e[t]),this.DrawlinesParamArrayAllPointNum+=e[t].nPointNum,e[t].nPointNum),++t}if(null!=this.curThermalLinesInfo)for(var i=[],n=0,s=0;s<this.curThermalLinesInfo.linesNum;s++)if(8==this.curThermalLinesInfo.stDrawLinesArray[s].dwIntelFlag&&1==this.m_bEnableThermal&&(1==this.curThermalLinesInfo.stDrawLinesArray[s].dwSubIntelFlag&&1==this.m_bEnableThermalFireMask||2==this.curThermalLinesInfo.stDrawLinesArray[s].dwSubIntelFlag&&1==this.m_bEnableThermalRuleGas)){i[n]={},i[n].nPointNum=this.curThermalLinesInfo.stDrawLinesArray[s].vertex_num,i[n].nLineWidth=this.curThermalLinesInfo.stDrawLinesArray[s].lineWidth,this.curThermalLinesInfo.stDrawLinesArray[s].bFill,i[n].bLoop=this.curThermalLinesInfo.stDrawLinesArray[s].bLoop,i[n].pstColor={},i[n].pstColor.fR=this.curThermalLinesInfo.stDrawLinesArray[s].color.R,i[n].pstColor.fG=this.curThermalLinesInfo.stDrawLinesArray[s].color.G,i[n].pstColor.fB=this.curThermalLinesInfo.stDrawLinesArray[s].color.B,i[n].pstColor.fA=this.curThermalLinesInfo.stDrawLinesArray[s].color.A,i[n].pstPoints=[];for(var x=0;x<i[n].nPointNum;x++)i[n].pstPoints[x]={},i[n].pstPoints[x].fX=this.curThermalLinesInfo.stDrawLinesArray[s].stPoint[x].x,i[n].pstPoints[x].fY=this.curThermalLinesInfo.stDrawLinesArray[s].stPoint[x].y;this.DrawlinesParamArray.push(i[n]),this.DrawlinesParamArrayAllPointNum+=i[n].nPointNum,i[n].nPointNum,++n}if(null!=this.curTemLinesInfo)for(var o=[],l=0,_=0;_<this.curTemLinesInfo.linesNum;_++)if(1==this.m_bEnableTEMEx&&(1==this.curTemLinesInfo.stDrawLinesArray[_].dwSubIntelFlag&&1==this.m_bEnableTEMBox||2==this.curTemLinesInfo.stDrawLinesArray[_].dwSubIntelFlag&&1==this.m_bEnableTEMLine||4==this.curTemLinesInfo.stDrawLinesArray[_].dwSubIntelFlag&&1==this.m_bEnableTEMPoint)){o[l]={},o[l].nPointNum=this.curTemLinesInfo.stDrawLinesArray[_].vertex_num,o[l].nLineWidth=this.curTemLinesInfo.stDrawLinesArray[_].lineWidth,this.curTemLinesInfo.stDrawLinesArray[_].bFill,o[l].bLoop=this.curTemLinesInfo.stDrawLinesArray[_].bLoop,o[l].pstColor={},o[l].pstColor.fR=this.curTemLinesInfo.stDrawLinesArray[_].color.R,o[l].pstColor.fG=this.curTemLinesInfo.stDrawLinesArray[_].color.G,o[l].pstColor.fB=this.curTemLinesInfo.stDrawLinesArray[_].color.B,o[l].pstColor.fA=this.curTemLinesInfo.stDrawLinesArray[_].color.A,o[l].pstPoints=[];for(var h=0;h<o[l].nPointNum;h++)o[l].pstPoints[h]={},o[l].pstPoints[h].fX=this.curTemLinesInfo.stDrawLinesArray[_].stPoint[h].x,o[l].pstPoints[h].fY=this.curTemLinesInfo.stDrawLinesArray[_].stPoint[h].y;this.DrawlinesParamArray.push(o[l]),this.DrawlinesParamArrayAllPointNum+=o[l].nPointNum,o[l].nPointNum,++l}if(null!=this.curTargetLinesInfo)for(var f=[],c=0,u=0;u<this.curTargetLinesInfo.linesNum;u++)if(1==this.m_bEnableIVSEx){f[c]={},f[c].nPointNum=this.curTargetLinesInfo.stDrawLinesArray[u].vertex_num,f[c].nLineWidth=this.curTargetLinesInfo.stDrawLinesArray[u].lineWidth,this.curTargetLinesInfo.stDrawLinesArray[u].bFill,f[c].bLoop=this.curTargetLinesInfo.stDrawLinesArray[u].bLoop,f[c].pstColor={},f[c].pstColor.fR=this.curTargetLinesInfo.stDrawLinesArray[u].color.R,f[c].pstColor.fG=this.curTargetLinesInfo.stDrawLinesArray[u].color.G,f[c].pstColor.fB=this.curTargetLinesInfo.stDrawLinesArray[u].color.B,f[c].pstColor.fA=this.curTargetLinesInfo.stDrawLinesArray[u].color.A,f[c].pstPoints=[];for(var d=0;d<f[c].nPointNum;d++)f[c].pstPoints[d]={},f[c].pstPoints[d].fX=this.curTargetLinesInfo.stDrawLinesArray[u].stPoint[d].x,f[c].pstPoints[d].fY=this.curTargetLinesInfo.stDrawLinesArray[u].stPoint[d].y;f[c].dwFillPicID=this.curTargetLinesInfo.stDrawLinesArray[u].dwFillPicID,f[c].eventid=this.curTargetLinesInfo.stDrawLinesArray[u].eventid,this.DrawTargetlinesParamArray.push(f[c]),++c}if(null!=this.curMDLinesInfo)for(var p=[],m=0,S=0;S<this.curMDLinesInfo.linesNum;S++)if(1==this.m_bEnableMDEx){p[m]={},p[m].nPointNum=this.curMDLinesInfo.stDrawLinesArray[S].vertex_num,p[m].nLineWidth=this.curMDLinesInfo.stDrawLinesArray[S].lineWidth,this.curMDLinesInfo.stDrawLinesArray[S].bFill,p[m].bLoop=this.curMDLinesInfo.stDrawLinesArray[S].bLoop,p[m].pstColor={},p[m].pstColor.fR=this.curMDLinesInfo.stDrawLinesArray[S].color.R,p[m].pstColor.fG=this.curMDLinesInfo.stDrawLinesArray[S].color.G,p[m].pstColor.fB=this.curMDLinesInfo.stDrawLinesArray[S].color.B,p[m].pstColor.fA=this.curMDLinesInfo.stDrawLinesArray[S].color.A,p[m].pstPoints=[];for(var R=0;R<p[m].nPointNum;R++)p[m].pstPoints[R]={},p[m].pstPoints[R].fX=this.curMDLinesInfo.stDrawLinesArray[S].stPoint[R].x,p[m].pstPoints[R].fY=this.curMDLinesInfo.stDrawLinesArray[S].stPoint[R].y;this.DrawlinesParamArray.push(p[m]),this.DrawlinesParamArrayAllPointNum+=p[m].nPointNum,p[m].nPointNum,++m}if(null!=this.curExactLinesInfo)for(var P=[],b=0,y=0;y<this.curExactLinesInfo.linesNum;y++)if(1==this.curExactLinesInfo.stDrawLinesArray[y].dwIntelFlag&&1==this.m_bEnableIVSEx||9==this.curExactLinesInfo.stDrawLinesArray[y].dwIntelFlag&&1==this.m_bEnableTrackEx&&(1==this.curExactLinesInfo.stDrawLinesArray[y].dwSubIntelFlag&&1==this.m_bEnableTrackPeople||2==this.curExactLinesInfo.stDrawLinesArray[y].dwSubIntelFlag&&1==this.m_bEnableTrackVehicle||0==this.curExactLinesInfo.stDrawLinesArray[y].dwSubIntelFlag)){P[b]={},P[b].nPointNum=this.curExactLinesInfo.stDrawLinesArray[y].vertex_num,P[b].nLineWidth=this.curExactLinesInfo.stDrawLinesArray[y].lineWidth,this.curExactLinesInfo.stDrawLinesArray[y].bFill,P[b].bLoop=this.curExactLinesInfo.stDrawLinesArray[y].bLoop,P[b].pstColor={},P[b].pstColor.fR=this.curExactLinesInfo.stDrawLinesArray[y].color.R,P[b].pstColor.fG=this.curExactLinesInfo.stDrawLinesArray[y].color.G,P[b].pstColor.fB=this.curExactLinesInfo.stDrawLinesArray[y].color.B,P[b].pstColor.fA=this.curExactLinesInfo.stDrawLinesArray[y].color.A,P[b].pstPoints=[];for(var E=0;E<P[b].nPointNum;E++)P[b].pstPoints[E]={},P[b].pstPoints[E].fX=this.curExactLinesInfo.stDrawLinesArray[y].stPoint[E].x,P[b].pstPoints[E].fY=this.curExactLinesInfo.stDrawLinesArray[y].stPoint[E].y;P[b].dwFillPicID=this.curExactLinesInfo.stDrawLinesArray[y].dwFillPicID,P[b].eventid=this.curExactLinesInfo.stDrawLinesArray[y].eventid,P[b].dwMosaictype=this.curExactLinesInfo.stDrawLinesArray[y].dwMosaictype,P[b].dwMosaictype?this.DrawMosaiclinesParamArray.push(P[b]):this.DrawTargetlinesParamArray.push(P[b]),++b}if(null!=this.curExactRuleLinesInfo)for(var g=[],F=0,v=0;v<this.curExactRuleLinesInfo.linesNum;v++)if(1==this.m_bEnableIVSEx){g[F]={},g[F].nPointNum=this.curExactRuleLinesInfo.stDrawLinesArray[v].vertex_num,g[F].nLineWidth=this.curExactRuleLinesInfo.stDrawLinesArray[v].lineWidth,this.curExactRuleLinesInfo.stDrawLinesArray[v].bFill,g[F].bLoop=this.curExactRuleLinesInfo.stDrawLinesArray[v].bLoop,g[F].pstColor={},g[F].pstColor.fR=this.curExactRuleLinesInfo.stDrawLinesArray[v].color.R,g[F].pstColor.fG=this.curExactRuleLinesInfo.stDrawLinesArray[v].color.G,g[F].pstColor.fB=this.curExactRuleLinesInfo.stDrawLinesArray[v].color.B,g[F].pstColor.fA=this.curExactRuleLinesInfo.stDrawLinesArray[v].color.A,g[F].pstPoints=[];for(var C=0;C<g[F].nPointNum;C++)g[F].pstPoints[C]={},g[F].pstPoints[C].fX=this.curExactRuleLinesInfo.stDrawLinesArray[v].stPoint[C].x,g[F].pstPoints[C].fY=this.curExactRuleLinesInfo.stDrawLinesArray[v].stPoint[C].y;this.DrawlinesParamArray.push(g[F]),this.DrawlinesParamArrayAllPointNum+=g[F].nPointNum,g[F].nPointNum,++F}}},{key:"CheckFontsInfo",value:function(){if(this.DrawFontParamArray.splice(0,this.DrawFontParamArray.length),this.DrawPOSFontsParamArray.splice(0,this.DrawPOSFontsParamArray.length),null!=this.curNormalFontsInfo)for(var e=[],t=0,a=0;a<this.curNormalFontsInfo.nFontsNum;a++)7==this.curNormalFontsInfo.stDrawFontsArray[a].dwIntelFlag&&1==this.m_bEnableFIREEx&&(1==this.curNormalFontsInfo.stDrawFontsArray[a].dwSubIntelFlag&&1==this.m_bEnableFireDis||8==this.curNormalFontsInfo.stDrawFontsArray[a].dwSubIntelFlag&&1==this.m_bEnableFireDistance)&&(e[t]={},e[t].pString=this.curNormalFontsInfo.stDrawFontsArray[a].fontString,e[t].nFontWidth=this.curNormalFontsInfo.stDrawFontsArray[a].nFontSizeW,e[t].nFontHeight=this.curNormalFontsInfo.stDrawFontsArray[a].nFontSizeH,e[t].pstStartPos={},e[t].pstStartPos.fX=this.curNormalFontsInfo.stDrawFontsArray[a].stPoint.x,e[t].pstStartPos.fY=this.curNormalFontsInfo.stDrawFontsArray[a].stPoint.y,e[t].pstFontColor={},e[t].pstFontColor.fR=this.curNormalFontsInfo.stDrawFontsArray[a].color.R,e[t].pstFontColor.fG=this.curNormalFontsInfo.stDrawFontsArray[a].color.G,e[t].pstFontColor.fB=this.curNormalFontsInfo.stDrawFontsArray[a].color.B,e[t].pstFontColor.fA=this.curNormalFontsInfo.stDrawFontsArray[a].color.A,e[t].bBackGround=!1,e[t].pstBGColor=null,e[t].fRotateAngle=0,e[t].pFontFamily="sans-serif",this.DrawFontParamArray.push(e[t]),++t);if(null!=this.curNormalPOSFontsInfo)for(var r=[],i=0,n=0;n<this.curNormalPOSFontsInfo.nFontsNum;n++)1==this.m_bDisPos&&(r[i]={},r[i].pString=this.curNormalPOSFontsInfo.stDrawFontsArray[n].fontString,r[i].nFontWidth=this.curNormalPOSFontsInfo.stDrawFontsArray[n].nFontSizeW,r[i].nFontHeight=this.curNormalPOSFontsInfo.stDrawFontsArray[n].nFontSizeH,r[i].pstStartPos={},r[i].pstStartPos.fX=this.curNormalPOSFontsInfo.stDrawFontsArray[n].stPoint.x,r[i].pstStartPos.fY=this.curNormalPOSFontsInfo.stDrawFontsArray[n].stPoint.y,r[i].pstFontColor={},r[i].pstFontColor.fR=this.curNormalPOSFontsInfo.stDrawFontsArray[n].color.R,r[i].pstFontColor.fG=this.curNormalPOSFontsInfo.stDrawFontsArray[n].color.G,r[i].pstFontColor.fB=this.curNormalPOSFontsInfo.stDrawFontsArray[n].color.B,r[i].pstFontColor.fA=this.curNormalPOSFontsInfo.stDrawFontsArray[n].color.A,r[i].bBackGround=this.curNormalPOSFontsInfo.stDrawFontsArray[n].bBackGround,r[i].pstBGColor={},r[i].pstBGColor.fR=this.curNormalPOSFontsInfo.stDrawFontsArray[n].BGcolor.R,r[i].pstBGColor.fG=this.curNormalPOSFontsInfo.stDrawFontsArray[n].BGcolor.G,r[i].pstBGColor.fB=this.curNormalPOSFontsInfo.stDrawFontsArray[n].BGcolor.B,r[i].pstBGColor.fA=this.curNormalPOSFontsInfo.stDrawFontsArray[n].BGcolor.A,r[i].fRotateAngle=0,r[i].pFontFamily="sans-serif",r[i].EventID=this.curNormalPOSFontsInfo.stDrawFontsArray[n].EventID,this.DrawPOSFontsParamArray.push(r[i]),++i);if(null!=this.curTemFontsInfo)for(var s=[],x=0,o=0;o<this.curTemFontsInfo.nFontsNum;o++)1==this.m_bEnableTEMEx&&(1==this.curTemFontsInfo.stDrawFontsArray[o].dwSubIntelFlag&&1==this.m_bEnableTEMBox||2==this.curTemFontsInfo.stDrawFontsArray[o].dwSubIntelFlag&&1==this.m_bEnableTEMLine||4==this.curTemFontsInfo.stDrawFontsArray[o].dwSubIntelFlag&&1==this.m_bEnableTEMPoint)&&(s[x]={},s[x].pString=this.curTemFontsInfo.stDrawFontsArray[o].fontString,s[x].nFontWidth=this.curTemFontsInfo.stDrawFontsArray[o].nFontSizeW,s[x].nFontHeight=this.curTemFontsInfo.stDrawFontsArray[o].nFontSizeH,s[x].pstStartPos={},s[x].pstStartPos.fX=this.curTemFontsInfo.stDrawFontsArray[o].stPoint.x,s[x].pstStartPos.fY=this.curTemFontsInfo.stDrawFontsArray[o].stPoint.y,s[x].pstFontColor={},s[x].pstFontColor.fR=this.curTemFontsInfo.stDrawFontsArray[o].color.R,s[x].pstFontColor.fG=this.curTemFontsInfo.stDrawFontsArray[o].color.G,s[x].pstFontColor.fB=this.curTemFontsInfo.stDrawFontsArray[o].color.B,s[x].pstFontColor.fA=this.curTemFontsInfo.stDrawFontsArray[o].color.A,s[x].bBackGround=!1,s[x].pstBGColor=null,s[x].fRotateAngle=0,s[x].pFontFamily="sans-serif",this.DrawFontParamArray.push(s[x]),++x);if(null!=this.curTargetFontsInfo)for(var l=[],_=0,h=0;h<this.curTargetFontsInfo.nFontsNum;h++)1==this.m_bEnableIVSEx&&(l[_]={},l[_].pString=this.curTargetFontsInfo.stDrawFontsArray[h].fontString,l[_].nFontWidth=this.curTargetFontsInfo.stDrawFontsArray[h].nFontSizeW,l[_].nFontHeight=this.curTargetFontsInfo.stDrawFontsArray[h].nFontSizeH,l[_].pstStartPos={},l[_].pstStartPos.fX=this.curTargetFontsInfo.stDrawFontsArray[h].stPoint.x,l[_].pstStartPos.fY=this.curTargetFontsInfo.stDrawFontsArray[h].stPoint.y,l[_].pstFontColor={},l[_].pstFontColor.fR=this.curTargetFontsInfo.stDrawFontsArray[h].color.R,l[_].pstFontColor.fG=this.curTargetFontsInfo.stDrawFontsArray[h].color.G,l[_].pstFontColor.fB=this.curTargetFontsInfo.stDrawFontsArray[h].color.B,l[_].pstFontColor.fA=this.curTargetFontsInfo.stDrawFontsArray[h].color.A,l[_].bBackGround=this.curTargetFontsInfo.stDrawFontsArray[h].bBackGround,l[_].pstBGColor={},l[_].pstBGColor.fR=this.curTargetFontsInfo.stDrawFontsArray[h].BGcolor.R,l[_].pstBGColor.fG=this.curTargetFontsInfo.stDrawFontsArray[h].BGcolor.G,l[_].pstBGColor.fB=this.curTargetFontsInfo.stDrawFontsArray[h].BGcolor.B,l[_].pstBGColor.fA=this.curTargetFontsInfo.stDrawFontsArray[h].BGcolor.A,l[_].fRotateAngle=0,l[_].pFontFamily="sans-serif",this.DrawFontParamArray.push(l[_]),++_);if(null!=this.curExactFontsInfo)for(var f=[],c=0,u=0;u<this.curExactFontsInfo.nFontsNum;u++)1==this.curExactFontsInfo.stDrawFontsArray[u].dwIntelFlag&&1==this.m_bEnableIVSEx&&(f[c]={},f[c].pString=this.curExactFontsInfo.stDrawFontsArray[u].fontString,f[c].nFontWidth=this.curExactFontsInfo.stDrawFontsArray[u].nFontSizeW,f[c].nFontHeight=this.curExactFontsInfo.stDrawFontsArray[u].nFontSizeH,f[c].pstStartPos={},f[c].pstStartPos.fX=this.curExactFontsInfo.stDrawFontsArray[u].stPoint.x,f[c].pstStartPos.fY=this.curExactFontsInfo.stDrawFontsArray[u].stPoint.y,f[c].pstFontColor={},f[c].pstFontColor.fR=this.curExactFontsInfo.stDrawFontsArray[u].color.R,f[c].pstFontColor.fG=this.curExactFontsInfo.stDrawFontsArray[u].color.G,f[c].pstFontColor.fB=this.curExactFontsInfo.stDrawFontsArray[u].color.B,f[c].pstFontColor.fA=this.curExactFontsInfo.stDrawFontsArray[u].color.A,f[c].bBackGround=this.curExactFontsInfo.stDrawFontsArray[u].bBackGround,f[c].pstBGColor={},f[c].pstBGColor.fR=this.curExactFontsInfo.stDrawFontsArray[u].BGcolor.R,f[c].pstBGColor.fG=this.curExactFontsInfo.stDrawFontsArray[u].BGcolor.G,f[c].pstBGColor.fB=this.curExactFontsInfo.stDrawFontsArray[u].BGcolor.B,f[c].pstBGColor.fA=this.curExactFontsInfo.stDrawFontsArray[u].BGcolor.A,f[c].fRotateAngle=0,f[c].pFontFamily="sans-serif",this.DrawFontParamArray.push(f[c]),++c);if(null!=this.curExactPOSFontsInfo)for(var d=[],p=0,m=0;m<this.curExactPOSFontsInfo.nFontsNum;m++)3==this.curExactPOSFontsInfo.stDrawFontsArray[m].dwIntelFlag&&1==this.m_bDisPos&&(d[p]={},d[p].pString=this.curExactPOSFontsInfo.stDrawFontsArray[m].fontString,d[p].nFontWidth=this.curExactPOSFontsInfo.stDrawFontsArray[m].nFontSizeW,d[p].nFontHeight=this.curExactPOSFontsInfo.stDrawFontsArray[m].nFontSizeH,d[p].pstStartPos={},d[p].pstStartPos.fX=this.curExactPOSFontsInfo.stDrawFontsArray[m].stPoint.x,d[p].pstStartPos.fY=this.curExactPOSFontsInfo.stDrawFontsArray[m].stPoint.y,d[p].pstFontColor={},d[p].pstFontColor.fR=this.curExactPOSFontsInfo.stDrawFontsArray[m].color.R,d[p].pstFontColor.fG=this.curExactPOSFontsInfo.stDrawFontsArray[m].color.G,d[p].pstFontColor.fB=this.curExactPOSFontsInfo.stDrawFontsArray[m].color.B,d[p].pstFontColor.fA=this.curExactPOSFontsInfo.stDrawFontsArray[m].color.A,d[p].bBackGround=this.curExactPOSFontsInfo.stDrawFontsArray[m].bBackGround,d[p].pstBGColor={},d[p].pstBGColor.fR=this.curExactPOSFontsInfo.stDrawFontsArray[m].BGcolor.R,d[p].pstBGColor.fG=this.curExactPOSFontsInfo.stDrawFontsArray[m].BGcolor.G,d[p].pstBGColor.fB=this.curExactPOSFontsInfo.stDrawFontsArray[m].BGcolor.B,d[p].pstBGColor.fA=this.curExactPOSFontsInfo.stDrawFontsArray[m].BGcolor.A,d[p].fRotateAngle=0,d[p].pFontFamily="sans-serif",d[p].EventID=this.curExactPOSFontsInfo.stDrawFontsArray[m].EventID,this.DrawPOSFontsParamArray.push(d[p]),++p)}},{key:"WebGLDisplaySubCallBack",value:function(e){null!=e.handle&&0!=e.nUser.pstWaterFontParamArray[e.nSubPort]&&null!=e.nUser.pstWaterFontParam&&e.handle.SR_DrawFontEx(e.nUser.pstWaterFontParamArray[e.nSubPort],e.nUser.pstWaterFontParamArray[e.nSubPort].length,1,e.nUser.textCanvas)}},{key:"WebGLDisplayCallBack",value:function(e){0!=e.DrawlinesParamArray.length&&e.oVideoHandle.SR_DrawLinesEx(e.DrawlinesParamArray,e.DrawlinesParamArray.length,e.DrawlinesParamArrayAllPointNum,e.bDrawlinesParamArrayFill);for(var t=0;t<e.DrawMosaiclinesParamArray.length;t++){var a=e.DrawMosaiclinesParamArray[t].dwMosaictype,r=0,i={};i.fR=e.DrawMosaiclinesParamArray[t].pstColor.fR,i.fG=e.DrawMosaiclinesParamArray[t].pstColor.fG,i.fB=e.DrawMosaiclinesParamArray[t].pstColor.fB,i.fA=e.DrawMosaiclinesParamArray[t].pstColor.fA,0!=e.MosaicType&&(a=e.MosaicType,r=e.MosaicSize,i.fR=e.MosaicColorR,i.fG=e.MosaicColorG,i.fB=e.MosaicColorB,i.fA=e.MosaicColorA),r=0==r?50:r,5==(a=0==a?1:a)?e.oVideoHandle.SR_DrawLines(e.DrawMosaiclinesParamArray[t].pstPoints,e.DrawMosaiclinesParamArray[t].nPointNum,1,e.DrawMosaiclinesParamArray[t].pstColor,e.DrawMosaiclinesParamArray[t].nLineWidth,0):3==a?e.oVideoHandle.SR_DrawLines(e.DrawMosaiclinesParamArray[t].pstPoints,e.DrawMosaiclinesParamArray[t].nPointNum,1,i,e.DrawMosaiclinesParamArray[t].nLineWidth,1):e.oVideoHandle.SR_DrawMosaic(e.DrawMosaiclinesParamArray[t].pstPoints[0].fX,e.DrawMosaiclinesParamArray[t].pstPoints[2].fX,e.DrawMosaiclinesParamArray[t].pstPoints[0].fY,e.DrawMosaiclinesParamArray[t].pstPoints[2].fY,r)}for(var n=0;n<e.DrawTargetlinesParamArray.length;n++)if(e.privatePNGImageInfo.length>0&&-1!=e.DrawTargetlinesParamArray[n].dwFillPicID){for(var s=-1,x=0,o=0;o<e.privatePNGImageInfo.length;o++)if(e.DrawTargetlinesParamArray[n].dwFillPicID==e.privatePNGImageInfo[o].PicID){if(s=o,e.DrawTargetEventIDList.length>0){for(var l=0;l<e.DrawTargetEventIDList.length;l++)if(e.DrawTargetEventIDList[l].nID==e.DrawTargetlinesParamArray[n].eventid){x=1;break}}else x=1;break}-1!=s&&1==x&&(e.privatePNGImageInfo[s].pstRectPos.fTop=e.DrawTargetlinesParamArray[n].pstPoints[0].fY,e.privatePNGImageInfo[s].pstRectPos.fBottom=e.DrawTargetlinesParamArray[n].pstPoints[2].fY,e.privatePNGImageInfo[s].pstRectPos.fLeft=e.DrawTargetlinesParamArray[n].pstPoints[0].fX,e.privatePNGImageInfo[s].pstRectPos.fRight=e.DrawTargetlinesParamArray[n].pstPoints[2].fX,e.oVideoHandle.SR_DrawImage(e.privatePNGImageInfo[s].videoStream,e.privatePNGImageInfo[s].nImageWidth,e.privatePNGImageInfo[s].nImageHeight,e.privatePNGImageInfo[s].pstRectPos,ce.SRPIXELFORMAT.SR_PF_SURFACE,e.privatePNGImageInfo[s].fAlpha))}else e.oVideoHandle.SR_DrawLines(e.DrawTargetlinesParamArray[n].pstPoints,e.DrawTargetlinesParamArray[n].nPointNum,e.DrawTargetlinesParamArray[n].bLoop,e.DrawTargetlinesParamArray[n].pstColor,e.DrawTargetlinesParamArray[n].nLineWidth,e.DrawTargetlinesParamArray[n].bFill);0!=e.DrawFontParamArray.length&&e.oVideoHandle.SR_DrawFontEx(e.DrawFontParamArray,e.DrawFontParamArray.length,0,e.textCanvas);for(var _=e.DrawPOSFontsParamArray.length-1;_>=0;_--){var h=0;if(-1!=e.DrawPOSFontsParamArray[_].EventID&&e.DrawTargetEventIDList.length>0){for(var f=0;f<e.DrawTargetEventIDList.length;f++)if(e.DrawTargetEventIDList[f].nID==e.DrawPOSFontsParamArray[_].EventID){h=1;break}}else h=1;1!=h&&e.DrawPOSFontsParamArray.splice(_,1)}if(0!=e.DrawPOSFontsParamArray.length&&e.oVideoHandle.SR_DrawFontEx(e.DrawPOSFontsParamArray,e.DrawPOSFontsParamArray.length,0,e.textCanvas),null!=e.curImagesInfo&&0!=e.curImagesInfo.nWidth&&0!=e.curImagesInfo.nHeight&&1==e.m_bEnablePICEx){var c=null;null!=e.curImagesInfo&&null!=e.curImagesInfo&&null!=e.curImagesInfo.picImageData&&null!=e.curImagesInfo.picImageData&&(c=new Uint16Array(e.curImagesInfo.picImageData.buffer)),null!=e.curImagesInfo&&e.curImagesInfo.nPixelFormat>0&&e.oVideoHandle.SR_DrawImage(c,e.curImagesInfo.nWidth,e.curImagesInfo.nHeight,e.curImagesInfo.pstRect,e.curImagesInfo.nPixelFormat,e.curImagesInfo.fAlpha)}if(0!==e.pstWaterFontParamArray[0].length&&null!=e.pstWaterFontParam&&e.oVideoHandle.SR_DrawFontEx(e.pstWaterFontParamArray[0],e.pstWaterFontParamArray[0].length,1,e.textCanvas),0!==e.pWaterImageParam.length&&e.finishDecodeImage){e.baseWaterMarkImageTime<=0&&(e.baseWaterMarkImageTime=e.curTimestamp);var u=e.curTimestamp-e.baseWaterMarkImageTime;u<0&&(e.baseWaterMarkImageTime=e.curTimestamp,u=0,e.waterMarkImageIndex=0),u>=e.pWaterImageParam[e.waterMarkImageIndex].timeStamp-e.pWaterImageParam[0].timeStamp&&e.waterMarkImageIndex++,e.waterMarkImageIndex>=e.waterMarkImageMax&&(e.waterMarkImageIndex=0,e.baseWaterMarkImageTime=e.curTimestamp);var d=e.waterMarkImageIndex;e.oVideoHandle.SR_DrawImage(e.pWaterImageParam[d].videoStream,e.pWaterImageParam[d].nImageWidth,e.pWaterImageParam[d].nImageHeight,e.pWaterImageParam[d].pstRectPos,ce.SRPIXELFORMAT.SR_PF_SURFACE,e.pWaterImageParam[d].fAlpha)}}},{key:"SetPanoramaDisplayEffect",value:function(e){if("2d"===this.renderEngine||"2D"===this.renderEngine)return 0;if(null!=this.oVideoHandle){if(e!=this.panoramaDisplayEffect){this.panoramaDisplayEffect=e,this.oVideoHandle.SR_DelSubPort(this.mainVaildSubPort),0==this.hasSetFECParamManager&&(null==this.pFishParamManager&&(this.pFishParamManager=new it),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0);var t=ce.SRDISPLAYEFFECT.SR_DE_NULL;if((t=1==this.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE:3==this.panoramaDisplayEffect?ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET:ce.SRDISPLAYEFFECT.SR_DE_NULL)!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_SPHERE&&t!=ce.SRDISPLAYEFFECT.SR_DE_PANORAMA_PLANET||0!=this.VRViewLimitRate&&(t=ce.SRDISPLAYEFFECT.SR_DE_ELLIPSOID_VIEWLIMITED,this.oVideoHandle.SR_SetViewLimitateRate(ce.SRVIEWLIMITATERATE.SR_VLR_BLACK_1216_2832)),this.mainVaildSubPort=this.oVideoHandle.SR_AddSubPort(t),-1==this.mainVaildSubPort)return console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this.mainVaildSubPort),0}}else this.panoramaDisplayEffect=e;return 1}},{key:"SetPanoramaSphereViewParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==t||null==t||e<1||e>3?0:(this.viewParamType=e,this.viewParamValue=t,null!=this.oVideoHandle?(1!=this.panoramaDisplayEffect&&this.panoramaDisplayEffect,this.oVideoHandle.SR_SetViewParam(e,t)!=ce.ERRCODE.SR_OK?0:1):0)}},{key:"GetPanoramaSphereViewParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==t||null==t||e<1||e>3?0:null!=this.oVideoHandle?(1!=this.panoramaDisplayEffect&&this.panoramaDisplayEffect,t.fValue=-1,this.oVideoHandle.SR_GetViewParam(e,t)!=ce.ERRCODE.SR_OK?0:1):0}}]),a}(),_t=function(){function a(t,r){e(this,a),this.EncoderObj=null,this.FirstFrame=!0,this.frameRate=25,this.EncoderCurStatus=2,this.frameCounter=0,this.frameNum=0,this.stopEncodflag=!1,this.encodeFrameGlobalTime=[],this.oPlayCtrlHandle=null,null!=t&&(this.oPlayCtrlHandle=t),this.player=null,null!=r&&(this.player=r),this.output=this.output.bind(this),this.reportError=this.reportError.bind(this),this.userAgent=0,this.bWriteData=!1,this.aTotalBuffer=[],this.iFrameNum=0}return t(a,[{key:"initEncoder",value:function(e,t,a){if(this.codecString=e,this.encodeWidth=t.encodeWidth,this.encodeHeight=t.encodeHeight,this.bitrate=t.bitrate,this.frameRate=t.frameRate,0==t.bitrateMode?this.bitrateMode="variable":this.bitrateMode="constant",0==t.latencyMode?this.latencyMode="realtime":this.latencyMode="quality",this.rawDataCB=a,this.FirstFrame=!0,this.EncoderCurStatus=2,this.frameCounter=0,this.frameNum=0,this.stopEncodflag=!1,null==this.EncoderObj){var r={output:this.output,error:this.reportError};this.EncoderObj=new VideoEncoder(r)}this.format="annexb";var i=navigator.userAgent||navigator.vendor||window.opera;i.indexOf("Windows NT")>-1?this.userAgent=0:i.indexOf("Linux")>-1?this.userAgent=1:i.indexOf("Mac OS X")>-1?(this.userAgent=2,this.format="avc"):/Android/.test(i)?this.userAgent=3:/like Mac OS X/.test(i)?this.userAgent=4:this.userAgent=0;var n={codec:e,width:this.encodeWidth,height:this.encodeHeight,displayWidth:this.encodeWidth,displayHeight:this.encodeHeight,bitrate:this.bitrate,framerate:this.frameRate,bitrateMode:this.bitrateMode,latencyMode:this.latencyMode,avc:{format:this.format}};console.log("1videoEncode config width:"+this.encodeWidth+",height:"+this.encodeHeight+",bitrate:"+this.bitrate+",framerate:"+this.frameRate+",bitrateMode:"+this.bitrateMode+",latencMode:"+this.latencyMode),this.EncoderObj.configure(n)}},{key:"inputData",value:function(e,t){null==this.EncoderObj||this.stopEncodflag||("configured"==this.EncoderObj.state||this.FirstFrame)&&this.EncodeProcess(e,t)}},{key:"EncodeProcess",value:function(e,t){if(4!=this.EncoderCurStatus&&null!=this.EncoderObj&&"configured"==this.EncoderObj.state&&this.EncoderObj.encodeQueueSize<10){var a=this.frameCounter%50==0;1==a&&this.encodeFrameGlobalTime.push(t),this.EncoderObj.encode(e,{keyFrame:a}),this.frameCounter++}}},{key:"output",value:function(e,t){if("configured"==this.EncoderObj.state){t.decoderConfig,t.svc,t.alphaSideData,e.type;var a=e.timestamp;if(e.byteLength,!this.stopEncodflag){var r=new Uint8Array(e.byteLength);e.copyTo(r);var i={dataType:1};if(i.width=this.encodeWidth,i.height=this.encodeHeight,i.frameRate=this.frameRate,i.timeStamp=a/1e3,i.frameNum=this.frameNum,i.bitrate=0,i.globalTime={},"key"==e.type){var n=this.encodeFrameGlobalTime.shift();"year"in n?(i.globalTime.year=n.year,i.globalTime.month=n.month,i.globalTime.day=n.day,i.globalTime.hour=n.hour,i.globalTime.minute=n.minute,i.globalTime.second=n.second,i.globalTime.milliseconds=n.milliseconds):(i.globalTime.year=2024,i.globalTime.month=0,i.globalTime.day=0,i.globalTime.hour=0,i.globalTime.minute=0,i.globalTime.second=0,i.globalTime.milliseconds=0)}var s=null,x=new Uint8Array(4);x[0]=0,x[1]=0,x[2]=0,x[3]=1;var o=null,l=0,_=null,h=0,f=null,c=null,u=0,d=0,p=0;if("key"==e.type){if("decoderConfig"in t&&"description"in t.decoderConfig&&(c=new Uint8Array(t.decoderConfig.description)),2==this.userAgent){for(null!=c&&(l=256*(o=c.slice(6,c.length))[0]+o[1],_=o.slice(2,2+l),h=256*o[3+l]+o[4+l],f=o.slice(5+l,5+l+h),l+=4,h+=4);d<r.length;)p=256*r[d]*256*256+256*r[d+1]*256+256*r[d+2]+r[d+3],r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=1,d=d+4+p;u=l+h+r.length,s=new Uint8Array(u);var m=0;null!=_&&(s.set(x,0),s.set(_,x.length),m=x.length+_.length),null!=f&&(s.set(x,m),s.set(f,m+x.length),m=x.length+_.length+x.length+f.length),s.set(r,m),i.rawData=s}else{for(var S=r.slice(6,r.length),R=0;R<S.length&&(0!=S[R]||0!=S[R+1]||1!=S[R+2]||110!=S[R+3]);R++);o=S.slice(0,R);for(var P=S.slice(R,S.length),b=0;b<P.length&&(0!=P[b]||0!=P[b+1]||1!=P[b+2]||101!=P[b+3]);b++);var y=P.slice(b-1,P.length);y[0]=0,u=o.length+y.length,(s=new Uint8Array(u)).set(o,0),s.set(y,o.length),S=null,P=null,y=null}i.rawData=s,this.player?this.rawDataCB&&this.rawDataCB(i):postMessage({function:"VideoRecoderInfo",videoInfo:i},[i.rawData.buffer])}else{if(2==this.userAgent){for(;d<r.length;)p=256*r[d]*256*256+256*r[d+1]*256+256*r[d+2]+r[d+3],r[d]=0,r[d+1]=0,r[d+2]=0,r[d+3]=1,d=d+4+p;i.rawData=r}else i.rawData=r;this.player?this.rawDataCB&&this.rawDataCB(i):postMessage({function:"VideoRecoderInfo",videoInfo:i},[i.rawData.buffer])}r=null,s=null,x=null,o=null,_=null,f=null,c=null,this.frameNum++}}}},{key:"_downloadFile",value:function(e,t){var a=e;i(e,Blob)||i(e,File)||(a=new Blob([e]));var r=window.URL.createObjectURL(a),n=window.document.createElement("a");n.href=r,n.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),n.dispatchEvent(s)}},{key:"downloadData",value:function(e){if(this.bWriteData){for(var t=e,a=this.aTotalBuffer.length,r=0,i=t.length;r<i;r++)this.aTotalBuffer[a+r]=t[r];this.iFrameNum++,t=null,console.log("downloadEncodedata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&(this.iFrameNum>=600||this.stopEncodflag)){console.log("download600encodeData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Encode600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}},{key:"stopEncode",value:function(){if(this.EncoderCurStatus=4,this.frameCounter=0,this.frameNum=0,this.stopEncodflag=!0,this.destroyEncoder(),this.bWriteData&&this.stopEncodflag){console.log("download600encodeData");var e=new Uint8Array(this.aTotalBuffer);this._downloadFile(e,"Encode600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,e=null}}},{key:"reportError",value:function(e){console.log("hardEncode reportError:"+e.message+",state:"+this.EncoderObj.state+",frameRate:"+this.frameRate)}},{key:"destroyEncoder",value:function(){var e=this;return new Promise((function(t,a){e.clearEncoderObjBuffer().then((function(){null!=e.EncoderObj&&("closed"!=e.EncoderObj.state&&e.EncoderObj.close(),console.log(">>>JS 11 destroy VideoEncoderObj"),e.EncoderObj=null),e.EncoderCurStatus=4,e.FirstFrame=!0,t()}),(function(){a()}))}))}},{key:"resetEncoder",value:function(){var e=this;return new Promise((function(t,a){e.destroyEncoder().then((function(){var a={encodeWidth:e.encodeWidth,encodeHeight:e.encodeHeight,bitrate:e.bitrate,frameRate:e.frameRate,bitrateMode:e.bitrateMode,latencyMode:e.latencyMode};e.initEncoder(e.codecString,a,e.rawDataCB),console.log("%c reset hard Encoder","color:red"),t()}),(function(){a()}))}))}},{key:"clearEncoderObjBuffer",value:function(){var e=this;return new Promise((function(t,a){null!=e.EncoderObj&&"configured"==e.EncoderObj.state&&e.EncoderObj.reset(),t()}))}}]),a}(),ht=function(){function a(t,r){e(this,a),this.AudioEncoderObj=null,this.FirstFrame=!0,this.EncoderCurStatus=2,this.stopEncodflag=!1,this.aTimeStamp=0,this.oPlayCtrlHandle=null,null!=t&&(this.oPlayCtrlHandle=t),this.player=null,null!=r&&(this.player=r),this.output=this.output.bind(this),this.reportError=this.reportError.bind(this)}var r;return t(a,[{key:"initEncoder",value:(r=l(se().mark((function e(t,a,r){var i,n;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.codecString=t,this.sampleRate=a.sampleRate,this.numberOfChannels=a.numberOfChannels,this.bitrate=a.bitrate,this.AudioDataCB=r,this.FirstFrame=!0,this.EncoderCurStatus=2,this.stopEncodflag=!1,this.aTimeStamp=0,null==this.AudioEncoderObj&&(i={output:this.output,error:this.reportError},this.AudioEncoderObj=new AudioEncoder(i)),this.format="adts",n={codec:t,sampleRate:this.sampleRate,numberOfChannels:this.numberOfChannels,bitrate:this.bitrate,aac:{format:this.format}},console.log("2audioEncode config sampleRate:"+this.sampleRate+",numberOfChannels:"+this.numberOfChannels+",bitrate:"+this.bitrate),this.AudioEncoderObj.configure(n);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t,a){return r.apply(this,arguments)})},{key:"inputData",value:function(e){null!=this.AudioEncoderObj&&("configured"==this.AudioEncoderObj.state||this.FirstFrame)&&this.EncodeProcess(e),this.FirstFrame&&(1==this.oPlayCtrlHandle.recoderBaseTimestampMode?this.audioBaseTimeStamp=e.timestamp:0==this.oPlayCtrlHandle.recoderBaseTimestampMode&&(this.audioBaseTimeStamp=0),this.FirstFrame=!1)}},{key:"EncodeProcess",value:function(e){4!=this.EncoderCurStatus&&null!=this.AudioEncoderObj&&"configured"==this.AudioEncoderObj.state&&this.AudioEncoderObj.encode(e)}},{key:"output",value:function(e,t){if("configured"==this.AudioEncoderObj.state&&(e.type,e.timestamp,e.byteLength,!this.stopEncodflag)){this.aTimeStamp+=e.duration/1e3;var a={dataType:2,width:1,height:16,frameRate:48e3};a.timeStamp=this.aTimeStamp+this.audioBaseTimeStamp,a.frameNum=0,a.bitrate=128e3,a.globalTime={};var r=new Uint8Array(e.byteLength);e.copyTo(r),a.rawData=r,this.player?null!=this.AudioDataCB&&this.AudioDataCB(a):postMessage({function:"AudioRecoderInfo",audioInfo:a},[a.rawData.buffer]),r=null}}},{key:"stopEncode",value:function(){this.stopEncodflag=!0,this.destroyEncoder()}},{key:"reportError",value:function(e){console.log("hardEncode reportError:"+e.message+",state:"+this.AudioEncoderObj.state)}},{key:"destroyEncoder",value:function(){var e=this;return new Promise((function(t,a){e.clearEncoderObjBuffer().then((function(){null!=e.AudioEncoderObj&&("closed"!=e.AudioEncoderObj.state&&e.AudioEncoderObj.close(),console.log(">>>JS 12 destroy AudioEncoderObj"),e.AudioEncoderObj=null),e.EncoderCurStatus=4,e.FirstFrame=!0,t()}),(function(){a()}))}))}},{key:"resetEncoder",value:function(){var e=this;return new Promise((function(t,a){e.destroyEncoder().then((function(){var a={sampleRate:e.sampleRate,numberOfChannels:e.numberOfChannels,bitrate:e.bitrate};e.initEncoder(e.codecString,a,e.AudioDataCB),console.log("%c reset hard Encoder","color:red"),t()}),(function(){a()}))}))}},{key:"clearEncoderObjBuffer",value:function(){var e=this;return new Promise((function(t,a){null!=e.AudioEncoderObj&&"configured"==e.AudioEncoderObj.state&&e.AudioEncoderObj.reset(),t()}))}}]),a}(),ft=function(){function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,a),this.canvas=null,this.streamOpenMode=0,this.context=null,this.oVideoDecoder=null,this.frameBuffers=[],this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.renderLastStatus=2,this.playSpeed=1,this.nplaySpeed=1,this.displayBuf=14,this.needForward=!1,this.firstFrame=!0,this.LatcyTime=50,this.nFrameRate=0,this.needSaveFrameInfo=!1,this.displayFrameInfoCB=null,this.displayFrameInfo=[],this.curFrameInfo={},this.curFrameInfo.timeStamp=0,this.bResetdisplayFrameInfoCB=!0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.displayRunning=!1,this.oRenderTimer=null,this.waitIFrameTimestamp=0,this.curFrame=null,this.player=null,null!=t&&(this.player=t),this.renderEngine="webgl",this.oVideoRender=null,this.FECCanvasID="",this.oVideoRender=new lt(this),this.bSetStreamEnd=!1,this.printfFlag=0,this.oVideoEncoder=null,this.oAudioEncoder=null,this.startRecoderFlag=!1,this.stopRecoderFlag=!1,this.recoderFrameNum=0,this.vBaseTimeStamp=0,this.encodeVideoInfo={encodeVideoType:"avc",encodeWidth:1280,encodeHeight:720,bitrate:1e6,frameRate:25,bitrateMode:0,latencyMode:0},this.encodeAudioInfo={encodeAudioType:"aac",sampleRate:48e3,numberOfChannels:1,bitrate:128e3},this.recoderBaseTimestampMode=0,this.recoderGetOriginData=0,this.nstreamEndloopNum=0,this.runtimeCBFun=null,this.nTargetRelativePos=0,this.ProcessPositionflag=!1,this.nMPPlayMode=0,this.nMPPosType=0,this.VideoPrivateInfoMap=new Map,this.curPrivateInfo={},this.curPrivateInfo.linesInfo=[],this.curPrivateInfo.fontInfo=[],this.curPrivateInfo.imageInfo=[],this.StretchPlayTime=0,this.StretchPlayedTime=0,this.StretchPlaySpeed=1,this.StretchPlayFlag=!1,this.Prevideowidth=0,this.Prevideoheight=0,this.PrecodecType=0,this.PlayOrBackMode=1,this.pstRuntimeInfo={nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:0,nInputDataInterval:0,nFrameNumInterval:0,nAverageDecodeTime:0,nSystemFormat:0,nDetectRes:0,nMp4FileTime:0,nMp4TotalFrameNum:0,AbsTimeYear:0,AbsTimeMonth:0,AbsTimeDay:0,AbsTimeHour:0,AbsTimeMinute:0,AbsTimeSecond:0,AbsTimeMilliseconds:0},this.firstRenderBegin=!0,this.DecodeTypeFlagMap=new Map,this.RenderTypeFlagMap=new Map,this.VRViewLimitRate=0}var r,i;return t(a,[{key:"init",value:function(e,t,a,r,i){if(this.canvas=e,this.streamOpenMode=t,this.renderEngine=r,this.printfFlag=i,this.SetCurStatus(2),null==this.oVideoDecoder&&(this.oVideoDecoder=new he(a,this,this.player,this.canvas),null!==this.oVideoDecoder&&this.oVideoDecoder.initDecoder(),null!=this.runtimeCBFun&&this.oVideoDecoder.SetRunTimeInfoCallBackFun(2,this.runtimeCBFun),this.DecodeTypeFlagMap.size>0)){var n,s=C(this.DecodeTypeFlagMap.keys());try{for(s.s();!(n=s.n()).done;){var x=n.value,o=this.DecodeTypeFlagMap.get(x);1==o&&this.oVideoDecoder.SetRunTimeInfoCallbackType(2,x,o)}}catch(e){s.e(e)}finally{s.f()}}""!=this.canvas&&null!=this.canvas&&(this.frameBuffers=this.oVideoDecoder.ready_frames,null!=this.oVideoRender&&this.oVideoRender.InitDisplay(this.canvas,this.renderEngine,256),null==this.oRenderTimer&&(this.oRenderTimer=new _e))}},{key:"HardDecodeError",value:function(){return this.player._switchHardToSoft(),1}},{key:"inputData",value:function(e,t){if(this.curPrivateInfo.linesInfo.length>0||this.curPrivateInfo.fontInfo.length>0||this.curPrivateInfo.imageInfo.length>0){var a=this.deepClone(this.curPrivateInfo);this.VideoPrivateInfoMap.set(t.timeStamp,a),this.curPrivateInfo.linesInfo.splice(0,this.curPrivateInfo.linesInfo.length),this.curPrivateInfo.fontInfo.splice(0,this.curPrivateInfo.fontInfo.length),this.curPrivateInfo.imageInfo.splice(0,this.curPrivateInfo.imageInfo.length)}if(0!=this.PrecodecType&&this.PrecodecType!=t.codecType&&(this.firstFrame=!0,this.oVideoDecoder.resetDecoderObj()),this.needSaveFrameInfo){var r=new Object;r.port=t.port,r.codecType=t.codecType,r.frameType=t.frameType,r.frameSize=t.frameSize,r.width=t.width,r.height=t.height,r.timeStamp=t.timeStamp,r.frameRate=t.frameRate,r.frameNum=t.frameNum,r.interlace=t.interlace,r.streamEnd=t.streamEnd,r.cropLeft=t.cropLeft,r.cropRight=t.cropRight,r.cropTop=t.cropTop,r.cropBottom=t.cropBottom,r.year=t.year,r.month=t.month,r.week=t.week,r.day=t.day,r.hour=t.hour,r.minute=t.minute,r.second=t.second,r.milliseconds=t.milliseconds,r.isKeyFrame=t.isKeyFrame,this.nFrameRate=r.frameRate,this.Prevideowidth=t.width,this.Prevideoheight=t.height,this.PrecodecType=t.codecType,this.VRViewLimitRate=t.VRViewLimitRate,this.displayFrameInfo.push(r),r=null}else this.displayFrameInfo.splice(0,this.displayFrameInfo.length);null!=this.oVideoDecoder&&this.oVideoDecoder.inputData(e,t)}},{key:"_resetDecoder",value:function(){var e=this;return new Promise((function(t,a){e.oVideoDecoder.resetDecoder().then((function(){e.displayFrameInfo.splice(0,e.displayFrameInfo.length),e.curFrameInfo={},e.oVideoRender.DeInitPrivateParam(),e.VideoPrivateInfoMap.clear(),e.curPrivateInfo.linesInfo.splice(0,e.curPrivateInfo.linesInfo.length),e.curPrivateInfo.fontInfo.splice(0,e.curPrivateInfo.fontInfo.length),e.curPrivateInfo.imageInfo.splice(0,e.curPrivateInfo.imageInfo.length),e.renderCurStatus=2,e.renderLastStatus=2,e.player?e.player.JSPlayM4_ResetEnd():postMessage({function:"resetEnd"}),t()}),(function(){a()}))}))}},{key:"_resetRenderTimer",value:function(){this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,null!=this.oRenderTimer&&this.oRenderTimer.timerReset(),this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.renderLastStatus=2,this.curTimeStamp=0,this.getImageJPEG=!1,this.getImageBMP=!1,this.getCropImageJPEG=!1,this.getCropImageBMP=!1,1==this.bResetdisplayFrameInfoCB&&(this.displayFrameInfoCB=null),this.displayFrameInfo.splice(0,this.displayFrameInfo.length),this.VideoPrivateInfoMap.clear(),this.curPrivateInfo.linesInfo.splice(0,this.curPrivateInfo.linesInfo.length),this.curPrivateInfo.fontInfo.splice(0,this.curPrivateInfo.fontInfo.length),this.curPrivateInfo.imageInfo.splice(0,this.curPrivateInfo.imageInfo.length),this.curFrameInfo={},this.DecodeTypeFlagMap.clear(),this.RenderTypeFlagMap.clear()}},{key:"_destroyPlayCtrl",value:function(){var e=this;this.oVideoDecoder.destroyDecoder().then((function(){e.oVideoDecoder=null,null!=e.oVideoRender&&(e.oVideoRender.ReleaseDisplay(),e.oVideoRender=null),e._resetRenderTimer(),e.oRenderTimer=null,e.displayRunning=!1,e.runtimeCBFun=null,e.printfFlag>=0&&console.log(">>>JS 02 destroy oVideoDecoder/oVideoRender"),null!=e.oVideoEncoder&&(e.oVideoEncoder.destroyEncoder(),e.oVideoEncoder=null),null!=e.oAudioEncoder&&(e.oAudioEncoder.destroyEncoder(),e.oAudioEncoder=null)}),(function(){e.printfFlag>=0&&console.log("stop failed ")}))}},{key:"Sleep",value:(i=l(se().mark((function e(t){var a;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a=t>6e4?6e4:t)<0?0:a,e.abrupt("return",new Promise((function(e){setTimeout(e,a)})));case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"RenderFrame",value:(r=l(se().mark((function e(){var t,a=this;return se().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.renderCurStatus,null!=this.oVideoDecoder&&null!=this.oVideoDecoder.decoderObj&&(this.player?this.player.JSPlayM4_GetDecodeBufferSize(this.oVideoDecoder.decoderObj.decodeQueueSize,this.oVideoDecoder.ready_frames.length):postMessage({function:"GetDecodeBufferSize",rawSize:this.oVideoDecoder.decoderObj.decodeQueueSize,frameSize:this.oVideoDecoder.ready_frames.length}),this.oVideoDecoder.decoderObj.decodeQueueSize<=3&&this.oVideoDecoder.ready_frames.length<=3&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"})),this.printfFlag>0&&console.log("VideoPlayCtrl.js output1 cb decodeQueueSize:"+this.oVideoDecoder.decoderObj.decodeQueueSize+",length:"+this.oVideoDecoder.ready_frames.length)),e.t0=t,e.next=0===e.t0?5:2===e.t0||6===e.t0?8:3===e.t0?10:5===e.t0?13:4===e.t0?15:17;break;case 5:return this._resetRenderTimer(),this._resetDecoder().then((function(){requestAnimationFrame(a.RenderFrame)}),(function(){})),e.abrupt("break",18);case 8:return this.displayRunning?(this.printfFlag>0&&console.log("displayBuf:"+this.displayBuf+",this.streamOpenMode:"+this.streamOpenMode+",LatcyTime:"+this.LatcyTime),this.chooseFrame().then((function(e){if(a.curFrame=e,1==a.ProcessPositionflag)if(null!=a.curFrame){var r=0;if(1==a.nMPPosType&&(r=a.findFramebyTime(a.curFrame.timestamp,0).frameNum),0==a.nMPPosType&&a.curFrame.timestamp<a.nTargetRelativePos||1==a.nMPPosType&&r<a.nTargetRelativePos)requestAnimationFrame(a.RenderFrame);else{if(a.ProcessPositionflag=!1,a.player.needPlaySound&&a.player.JSPlayM4_PlaySound(),a.paint(a.curFrame),a.curTimeStamp=a.curFrame.timestamp,null!=a.player){var i={nRes:1};i.nRelativePos=a.nTargetRelativePos,null!=a.player.SetPlayPosCBFun?a.player.SetPlayPosCBFun(i):postMessage({function:"SetPlayPosCB",value:a.nTargetRelativePos})}1==a.nMPPlayMode&&a.SetCurStatus(3),a.RenderFrame()}}else requestAnimationFrame(a.RenderFrame);else if(-1==a.displayBuf||0==a.streamOpenMode&&0==a.LatcyTime)null!=a.curFrame&&(a.curTimeStamp=a.curFrame.timestamp,a.paint(a.curFrame)),requestAnimationFrame(a.RenderFrame);else if(null!=a.curFrame){a.initTimer&&!a.resetTimer||(a.oRenderTimer.Init(),a.initTimer=!0,a.resetTimer=!1,a.preTimeStamp=a.curFrame.timestamp,a.baseTimeStamp=a.curFrame.timestamp,1==a.streamOpenMode&&(a.LatcyTime=0)),a.curTimeStamp=a.curFrame.timestamp;var n=0,s=0;6==t?(n=a.preTimeStamp-a.curTimeStamp,s=a.baseTimeStamp-a.curTimeStamp):(n=a.curTimeStamp-a.preTimeStamp,s=a.curTimeStamp-a.baseTimeStamp);var x=a.oRenderTimer.GetTimerWalk();(n>5e3||n<0||s<0||x<=0)&&(a.oRenderTimer.Init(),a.preTimeStamp=a.curFrame.timestamp,a.baseTimeStamp=a.curTimeStamp,s=6==t?a.baseTimeStamp-a.curTimeStamp:a.curTimeStamp-a.baseTimeStamp,x=a.oRenderTimer.GetTimerWalk());var o;o=a.StretchPlayFlag?a.StretchPlaySpeed:a.playSpeed;var l=(s+a.LatcyTime)/o-x;a.printfFlag>0&&console.log("baseTimerWalk:"+x+",lDeta:"+l+",Date :"+(new Date).getFullYear()+"/"+((new Date).getMonth()+1)+"/"+(new Date).getDate()+" "+(new Date).getHours()+"-"+(new Date).getMinutes()+"-"+(new Date).getSeconds()+"-"+(new Date).getMilliseconds()),l<15&&l>-15||l<0?(a.StretchPlayFlag&&a.VideoStretchProcess(a.curTimeStamp),a.paint(a.curFrame),a.preTimeStamp=a.curTimeStamp,a.RenderFrame()):a.Sleep(l-5).then((function(){2!=a.renderCurStatus&&6!=a.renderCurStatus||(a.StretchPlayFlag&&a.VideoStretchProcess(a.curTimeStamp),a.paint(a.curFrame),a.preTimeStamp=a.curTimeStamp),a.RenderFrame()}))}else requestAnimationFrame(a.RenderFrame)}))):requestAnimationFrame(this.RenderFrame),e.abrupt("break",18);case 10:return this._refresh(),requestAnimationFrame(this.RenderFrame),e.abrupt("break",18);case 13:return this.needForward?this.chooseFrame().then((function(e){a.curFrame=e,null!=a.curFrame&&(a.curTimeStamp=a.curFrame.timestamp,a.paint(a.curFrame),a.needForward=!1),requestAnimationFrame(a.RenderFrame)})):(this._refresh(),requestAnimationFrame(this.RenderFrame)),e.abrupt("break",18);case 15:return this._destroyPlayCtrl(),e.abrupt("return");case 17:return e.abrupt("return");case 18:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"paint",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(r,i){if(4==t.renderCurStatus||null==e||null==t.oVideoRender||1==t.ProcessPositionflag||null==e.timestamp)r();else{t.waitIFrameTimestamp===e.timestamp&&(t.resetTimer=!0);var n,s={};n=null!=e.image&&null!=e.image?e.image:e,s.nCropLeft=0,s.nCropRight=0,s.nCropTop=0,s.nCropBottom=0,s.nCodeWidth=e.displayWidth,s.nCodeHeight=e.displayHeight;var x={x:0,y:0};if(x.width=e.displayWidth,x.height=e.displayHeight,t.RenderTypeFlagMap.size>0){var o,l=C(t.RenderTypeFlagMap.keys());try{for(l.s();!(o=l.n()).done;){var _=o.value;if(_==ae&&1==t.RenderTypeFlagMap.get(_)&&null!=t.runtimeCBFun&&1==t.firstRenderBegin){if(t.pstRuntimeInfo.nRunTimeModule=3,t.pstRuntimeInfo.nStrVersion=1,t.pstRuntimeInfo.nFrameTimeStamp=e.timestamp,t.pstRuntimeInfo.nFrameNum=0,t.pstRuntimeInfo.nErrorCode=ae,t.pstRuntimeInfo.nInputDataInterval=0,t.pstRuntimeInfo.nFrameNumInterval=0,t.pstRuntimeInfo.nAverageDecodeTime=0,1==a)t.pstRuntimeInfo.AbsTimeYear=t.curFrameInfo.year,t.pstRuntimeInfo.AbsTimeMonth=t.curFrameInfo.month,t.pstRuntimeInfo.AbsTimeDay=t.curFrameInfo.day,t.pstRuntimeInfo.AbsTimeHour=t.curFrameInfo.hour,t.pstRuntimeInfo.AbsTimeMinute=t.curFrameInfo.minute,t.pstRuntimeInfo.AbsTimeSecond=t.curFrameInfo.second,t.pstRuntimeInfo.AbsTimeMilliseconds=t.curFrameInfo.milliseconds;else{var h=new Object;h=t.findFramebyTime(e.timestamp,0),t.pstRuntimeInfo.AbsTimeYear=h.year,t.pstRuntimeInfo.AbsTimeMonth=h.month,t.pstRuntimeInfo.AbsTimeDay=h.day,t.pstRuntimeInfo.AbsTimeHour=h.hour,t.pstRuntimeInfo.AbsTimeMinute=h.minute,t.pstRuntimeInfo.AbsTimeSecond=h.second,t.pstRuntimeInfo.AbsTimeMilliseconds=h.milliseconds}t.runtimeCBFun(t.pstRuntimeInfo),t.firstRenderBegin=!1}}}catch(e){l.e(e)}finally{l.f()}}t.oVideoRender.DisplayFrame(n,e.displayWidth,e.displayHeight,e.timestamp,s,null,t.nFrameRate,a,t.VRViewLimitRate).then((function(e){var a=e.timestamp,i=e.DrawRet;if(t.RenderTypeFlagMap.size>0&&1!=i){var n,s=C(t.RenderTypeFlagMap.keys());try{for(s.s();!(n=s.n()).done;){var x=n.value;x==ie&&1==t.RenderTypeFlagMap.get(x)&&null!=t.runtimeCBFun&&(t.pstRuntimeInfo.nRunTimeModule=3,t.pstRuntimeInfo.nStrVersion=1,t.pstRuntimeInfo.nFrameTimeStamp=a,t.pstRuntimeInfo.nFrameNum=0,t.pstRuntimeInfo.nErrorCode=ie,t.runtimeCBFun(t.pstRuntimeInfo))}}catch(e){s.e(e)}finally{s.f()}}if(null!==t.displayFrameInfoCB&&t.respondFrameInfoCB(a),t.RenderTypeFlagMap.size>0){var o,l=C(t.RenderTypeFlagMap.keys());try{for(l.s();!(o=l.n()).done;){var _=o.value;_==re&&1==t.RenderTypeFlagMap.get(_)&&null!=t.runtimeCBFun&&(t.pstRuntimeInfo.nRunTimeModule=3,t.pstRuntimeInfo.nStrVersion=1,t.pstRuntimeInfo.nFrameTimeStamp=a,t.pstRuntimeInfo.nFrameNum=0,t.pstRuntimeInfo.nErrorCode=re,t.pstRuntimeInfo.nInputDataInterval=0,t.pstRuntimeInfo.nFrameNumInterval=0,t.pstRuntimeInfo.nAverageDecodeTime=0,t.pstRuntimeInfo.AbsTimeYear=t.curFrameInfo.year,t.pstRuntimeInfo.AbsTimeMonth=t.curFrameInfo.month,t.pstRuntimeInfo.AbsTimeDay=t.curFrameInfo.day,t.pstRuntimeInfo.AbsTimeHour=t.curFrameInfo.hour,t.pstRuntimeInfo.AbsTimeMinute=t.curFrameInfo.minute,t.pstRuntimeInfo.AbsTimeSecond=t.curFrameInfo.second,t.pstRuntimeInfo.AbsTimeMilliseconds=t.curFrameInfo.milliseconds,t.runtimeCBFun(t.pstRuntimeInfo))}}catch(e){l.e(e)}finally{l.f()}}if(t.firstFrame){t.firstFrame=!1;var h=t;t.oVideoRender.GetCanvasData((function(e,t,a){if(null!=e){var r=h.checkColorAnomaly(e,t,a);console.log("checkColorAnomaly resC:"+r),r&&h.HardDecodeError()}})),null!=t.player?null!=t.player.FFCallBackFun&&t.player.FFCallBackFun({decodeEngine:1}):postMessage({function:"firstFrameCB",value:!0})}t.startRecoderFlag&&0==t.stopRecoderFlag&&t.oVideoRender.GetCanvasData((function(e,i,n){if(null!=e){if(0==t.recoderBaseTimestampMode){0==t.vBaseTimeStamp&&(t.vBaseTimeStamp=60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds());var s=60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds();t.recoderFrameTimeStamp=s-t.vBaseTimeStamp}else 1==t.recoderBaseTimestampMode||(t.recoderBaseTimestampMode=1),t.recoderFrameTimeStamp=a;var x={timestamp:1e3*t.recoderFrameTimeStamp,codedWidth:t.encodeVideoInfo.encodeWidth,codedHeight:t.encodeVideoInfo.encodeHeight,format:"RGBA"},o=new VideoFrame(e,x),l={};l.year=t.curFrameInfo.year,l.month=t.curFrameInfo.month,l.day=t.curFrameInfo.day,l.hour=t.curFrameInfo.hour,l.minute=t.curFrameInfo.minute,l.second=t.curFrameInfo.second,l.milliseconds=t.curFrameInfo.milliseconds,t.oVideoEncoder.inputData(o,l),o.close(),e=null,t.recoderFrameNum++}r()}),t.encodeVideoInfo.encodeWidth,t.encodeVideoInfo.encodeHeight,t.recoderGetOriginData)}))}}))}},{key:"checkColorAnomaly",value:function(e,t,a){for(var r=0,i=t*a,n=0;n<e.length;n+=4){var s=e[n],x=e[n+1],o=e[n+2];x>1.5*s&&x>1.5*o&&r++}return r/i>.05}},{key:"respondFrameInfoCB",value:function(e){if(0!=this.displayFrameInfo.length&&(this.curFrameInfo.timeStamp!==e||0==e&&0==this.curFrameInfo.timeStamp)){var t=this.findFramebyTime(e,1);this.curFrameInfo.port=t.port,this.curFrameInfo.codecType=t.codecType,this.curFrameInfo.frameType=t.frameType,this.curFrameInfo.frameSize=t.frameSize,this.curFrameInfo.width=t.width-(t.cropLeft+t.cropRight),this.curFrameInfo.height=t.height-(t.cropTop+t.cropBottom),this.curFrameInfo.timeStamp=t.timeStamp,this.curFrameInfo.frameRate=t.frameRate,this.curFrameInfo.frameNum=t.frameNum,this.curFrameInfo.interlace=t.interlace,this.curFrameInfo.streamEnd=t.streamEnd,this.curFrameInfo.cropLeft=t.cropLeft,this.curFrameInfo.cropRight=t.cropRight,this.curFrameInfo.cropTop=t.cropTop,this.curFrameInfo.cropBottom=t.cropBottom,this.curFrameInfo.year=t.year,this.curFrameInfo.month=t.month,this.curFrameInfo.week=t.week,this.curFrameInfo.day=t.day,this.curFrameInfo.hour=t.hour,this.curFrameInfo.minute=t.minute,this.curFrameInfo.second=t.second,this.curFrameInfo.milliseconds=t.milliseconds,t=null,null!=this.displayFrameInfoCB&&this.displayFrameInfoCB(this.curFrameInfo)}}},{key:"findFramebyTime",value:function(e,t){var a=new Object;if(a=this.displayFrameInfo.find((function(t){return t.timeStamp==e})),1==t){var r=this.displayFrameInfo.findIndex((function(t){return t.timeStamp==e}));this.displayFrameInfo.splice(r,1)}return a}},{key:"chooseFrame",value:function(){var e=this;return new Promise((function(t,a){if(null==e.oVideoRender||null==e.oVideoDecoder)t(null);else if(e.oVideoDecoder.decoderObjNeedReset)e.oVideoDecoder.resetDecoder().then((function(){e.oVideoDecoder.decoderObjNeedReset=!1,t(null)}),(function(){a()}));else{var r=e.oVideoDecoder.GetFrameBufferLength();if(-1!=e.displayBuf)if(r<3){if(1==e.bSetStreamEnd&&(e.nstreamEndloopNum++,e.nstreamEndloopNum>=50&&null!=e.player&&null!=e.player.runtimeCBFun)){e.player.runtimeCBFun({nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:9}),e.bSetStreamEnd=!1,e.nstreamEndloopNum=0}t(null)}else 1==e.bSetStreamEnd&&(e.nstreamEndloopNum=0),e.oVideoDecoder.GetFrame().then((function(e){t(e)}),(function(){}));else if(0==r){if(1==e.bSetStreamEnd&&(e.nstreamEndloopNum++,e.nstreamEndloopNum>=50&&null!=e.player&&null!=e.player.runtimeCBFun)){e.player.runtimeCBFun({nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:9}),e.bSetStreamEnd=!1,e.nstreamEndloopNum=0}t(null)}else 1==e.bSetStreamEnd&&(e.nstreamEndloopNum=0),e.oVideoDecoder.GetFrame().then((function(e){t(e)}),(function(){}))}}))}},{key:"SetDisplayRegion",value:function(e,t,a,r){return null==this.oVideoRender?0:(this.sx=e,this.sy=t,this.sw=a,this.sh=r,this.oVideoRender.SetDisplayRect(e,t,a,r))}},{key:"SetCurStatus",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.bResetdisplayFrameInfoCB=t,this.renderCurStatus=e,1}},{key:"fast",value:function(){var e=this._GetFastSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"slow",value:function(){var e=this._GetSlowSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"Pause",value:function(e){if(e)2!=this.renderCurStatus&&6!=this.renderCurStatus||(this.renderLastStatus=this.renderCurStatus),this.SetCurStatus(3);else{if(3!==this.renderCurStatus)return 0;2===this.renderLastStatus?this.SetCurStatus(2):6===this.renderLastStatus&&this.SetCurStatus(6),this.resetTimer=!0}return 1}},{key:"NotifyBackPlay",value:function(e){if(e?this.SetCurStatus(6):this.SetCurStatus(2),null!=this.oVideoDecoder)if(2==this.PlayOrBackMode)this.oVideoDecoder.NotifyBackPlay(e,this.preTimeStamp,0);else{var t=1==e?2:1;this.oVideoDecoder.NotifyBackPlay(e,this.preTimeStamp,t)}return this.resetTimer=!0,1}},{key:"SetPlayOrBackSwitchMode",value:function(e){return this.PlayOrBackMode=e,1}},{key:"SetStretchPlay",value:function(e,t){return 2!=this.renderCurStatus||this.playSpeed>1.1||this.playSpeed<.9?0:(this.StretchPlayTime=e,this.StretchPlayedTime=0,this.StretchPlaySpeed=t,this.StretchPlayFlag=!0,this.resetTimer=!0,1)}},{key:"VideoStretchProcess",value:function(e){return this.StretchPlayFlag&&(this.printfFlag>0&&console.log("StretchPlayedTime:"+this.StretchPlayedTime+",StretchPlayTime:"+this.StretchPlayTime),this.StretchPlayedTime<this.StretchPlayTime?this.StretchPlayedTime+=e-this.preTimeStamp:(this.StretchPlayedTime=0,this.StretchPlayFlag=!1,this.resetTimer=!0)),1}},{key:"_refresh",value:function(){0!=this.frameBuffers.length&&this.paint(this.frameBuffers[0],!0)}},{key:"OneByOne",value:function(e){if(e)2!=this.renderCurStatus&&6!=this.renderCurStatus||(this.renderLastStatus=this.renderCurStatus),this.SetCurStatus(5),this.needForward=!0;else{if(5!==this.renderCurStatus)return-1;2===this.renderLastStatus?this.SetCurStatus(2):6===this.renderLastStatus&&this.SetCurStatus(6),this.resetTimer=!0,this.needForward=!1,this._SetPlaySpeed(1)}return 1}},{key:"SetCanvasSize",value:function(e,t,a){return null!=this.oVideoRender?this.oVideoRender.SetCanvasSize(e,t,a):0}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoRender?this.oVideoRender.GetCanvasSize():0}},{key:"GetPlayedTime",value:function(){return this.curTimeStamp}},{key:"SetTargetRelativePos",value:function(e,t,a){this.nTargetRelativePos=e,this.nMPPlayMode=a,this.nMPPosType=t,this.ProcessPositionflag=!0}},{key:"_SetPlaySpeed",value:function(e){switch(e){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return e===this.nplaySpeed||(this.nplaySpeed=e,this.playSpeed=e>0?e:-1/e,console.log("playSpeed:"+this.playSpeed),this.resetTimer=!0,this.needForward=!1,2!=this.renderCurStatus&&6!=this.renderCurStatus&&(2===this.renderLastStatus?this.SetCurStatus(2):6===this.renderLastStatus&&this.SetCurStatus(6))),1}},{key:"_GetFastSpeed",value:function(e){var t=0;switch(e){case-16:t=-8;break;case-8:t=-4;break;case-4:t=-2;break;case-2:t=1;break;case 1:t=2;break;case 2:t=4;break;case 4:t=8;break;case 8:t=16;break;case 16:t=32;break;case 32:t=64;break;default:t=0}return t}},{key:"_GetSlowSpeed",value:function(e){var t=0;switch(e){case-8:t=-16;break;case-4:t=-8;break;case-2:t=-4;break;case 1:t=-2;break;case 2:t=1;break;case 4:t=2;break;case 8:t=4;break;case 16:t=8;break;case 32:t=16;break;case 64:t=32;break;default:t=0}return t}},{key:"SetDisplayBuf",value:function(e){return this.displayBuf=e,this.LatcyTime=1==e?0:15==e?700:45==e?1900:e>6&&e<45?40*e+100:-1==e?0:50,1}},{key:"GetJPEG",value:function(){var e=this;null!=this.oVideoDecoder&&this.oVideoDecoder.GetImageYUV("jpeg",0,0,0,0).then((function(t){var a=t.yuvFrameBuffer,r=t.yuvLength,i=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=a&&(e.player?e.player._GetImage2(a,r,i,n,"jpeg",s,0,0,0,0):postMessage({function:"imageYUV",value:a.buffer,size:r,width:i,height:n,type:"jpeg",yuvType:s,sx:0,sy:0,sw:0,sh:0},[a.buffer]))}),(function(){}))}},{key:"GetBMP",value:function(){var e=this;null!=this.oVideoDecoder&&this.oVideoDecoder.GetImageYUV("bmp",0,0,0,0).then((function(t){var a=t.yuvFrameBuffer,r=t.yuvLength,i=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=a&&(e.player?e.player._GetImage2(a,r,i,n,"bmp",s,0,0,0,0):postMessage({function:"imageYUV",value:a.buffer,size:r,width:i,height:n,type:"bmp",yuvType:s,sx:0,sy:0,sw:0,sh:0},[a.buffer]))}),(function(){}))}},{key:"GetCropJPEG",value:function(){var e=this;null!=this.oVideoDecoder&&this.oVideoDecoder.GetImageYUV("jpeg",this.sx,this.sy,this.sw,this.sh).then((function(t){var a=t.yuvFrameBuffer,r=t.yuvLength,i=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=a&&(e.player?e.player._GetImage2(a,r,i,n,"jpeg",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:a.buffer,size:r,width:i,height:n,type:"jpeg",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[a.buffer]))}),(function(){}))}},{key:"GetCropBMP",value:function(){var e=this;null!=this.oVideoDecoder&&this.oVideoDecoder.GetImageYUV("bmp",this.sx,this.sy,this.sw,this.sh).then((function(t){var a=t.yuvFrameBuffer,r=t.yuvLength,i=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=a&&(e.player?e.player._GetImage2(a,r,i,n,"bmp",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:a.buffer,size:r,width:i,height:n,type:"bmp",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[a.buffer]))}),(function(){}))}},{key:"GetCanvasCapture",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support GetCanvasCapture","color:red"),0):(this.oVideoRender.GetCanvasData(e,t,a),1)}},{key:"SetDecodeFrameType",value:function(e){return this.waitIFrameTimestamp=e,1}},{key:"SetStreamEnd",value:function(e){return this.bSetStreamEnd=e,this.oVideoDecoder.SetStreamEnd(),1}},{key:"SetAntialias",value:function(e){return null!=this.oVideoRender?this.oVideoRender.SetAntialias(e):0}},{key:"SetFrameInfoCallBack",value:function(e,t){return t?(this.needSaveFrameInfo=!0,this.displayFrameInfoCB=e):(this.needSaveFrameInfo=!1,this.displayFrameInfoCB=null),1}},{key:"FEC_SetCanvasID",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetCanvasID(e):(this.FECCanvasID=e,0)}},{key:"FEC_ResetCorrectType",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_ResetCorrectType(e,t,a):0}},{key:"FEC_GetPort",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPort(e,t):-1}},{key:"FEC_Enable",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Enable(e):0}},{key:"FEC_SetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetParam(e,t):0}},{key:"FEC_GetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetParam(e,t):0}},{key:"FEC_SetViewParam",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetViewParam(e,t,a):0}},{key:"FEC_GetViewParam",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetViewParam(e,t,a):0}},{key:"FEC_SetWnd",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetWnd(e,t):0}},{key:"FEC_Disable",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Disable(e,t,a):0}},{key:"FEC_DelPort",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_DelPort(e):0}},{key:"FEC_SetDisplayRegion",value:function(e,t,a,r,i,n,s){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetDisplayRegion(e,t,a,r,i,n,s):0}},{key:"FEC_SetBackCilling",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetBackCilling(e,t):0}},{key:"FEC_GetPTZPort",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPTZPort(e,t,a):-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetPTZDisplayMode(e):0}},{key:"FEC_Capture",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC_Capture","color:red"),0):this.oVideoRender.FEC_Capture(e,t)}},{key:"InputPrivateInfo",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):((null!=e&&e.linesNum>0||null!=t&&t.nFontsNum>0)&&0==this.firstFrame&&(this.LatcyTime=100),this.curPrivateInfo.linesInfo.push(e),this.curPrivateInfo.fontInfo.push(t),this.curPrivateInfo.imageInfo.push(a),1)}},{key:"deepClone",value:function(e){if(null===e||"object"!==le(e))return e;if(Array.isArray(e)){for(var t=[],a=0;a<e.length;a++)t[a]=this.deepClone(e[a]);return t}if(ArrayBuffer.isView(e)){var r=new Uint8Array(e.length);return r.set(e),r}var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=this.deepClone(e[n]));return i}},{key:"RenderPrivateData",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.RenderPrivateData(e,t):0}},{key:"RenderPrivateDataEx",value:function(e,t,a){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.RenderPrivateDataEx(e,t,a):0}},{key:"SetWaterMarkFont",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==this.oVideoRender?(console.log("%c param error this.renderEngine:%d,this.oVideoRender:%d","color:red",this.renderEngine,this.oVideoRender),0):null!=this.oVideoRender?this.oVideoRender.SetWaterMarkFont(e):0}},{key:"SetWaterMarkImage",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetWaterMarkImage","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetWaterMarkImage(e):0}},{key:"SetMosaicType",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==this.oVideoRender?(console.log("%c 2D render not support SetMosaicType","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetMosaicType(e):0}},{key:"SelectIntelInfoFeatureToDraw",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SelectIntelInfoFeatureToDraw","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SelectIntelInfoFeatureToDraw(e):0}},{key:"SetD3DPostProcess",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetD3DPostProcess(e,t):0}},{key:"SetTextCanvas",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetTextCanvas(e):0}},{key:"SetPrintLogFlag",value:function(e){return this.printfFlag=e,null!=this.oVideoDecoder&&this.oVideoDecoder.SetPrintLogFlag(e),null!=this.oVideoRender&&this.oVideoRender.SetPrintLogFlag(e),1}},{key:"SetRotateAngle",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetRotateAngle","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetRotateAngle(e):0}},{key:"InitEncoder",value:function(e,t){return e.encodeWidth>0||e.encodeHeight>0?(this.encodeVideoInfo.encodeWidth=e.encodeWidth,this.encodeVideoInfo.encodeHeight=e.encodeHeight):null!=this.curFrameInfo.width&&this.curFrameInfo.width>0&&this.curFrameInfo.width<=1400&&null!=this.curFrameInfo.height&&this.curFrameInfo.height>0&&this.curFrameInfo.height<=800?(this.encodeVideoInfo.encodeWidth=this.curFrameInfo.width,this.encodeVideoInfo.encodeHeight=this.curFrameInfo.height):(this.encodeVideoInfo.encodeWidth=1280,this.encodeVideoInfo.encodeHeight=720),e.bitrate>0?this.encodeVideoInfo.bitrate=e.bitrate:this.encodeVideoInfo.encodeWidth>1580?this.encodeVideoInfo.bitrate=4e6:this.encodeVideoInfo.encodeWidth>800?this.encodeVideoInfo.bitrate=2e6:this.encodeVideoInfo.bitrate=1e6,e.frameRate>0?this.encodeVideoInfo.frameRate=e.frameRate:"frameRate"in this.curFrameInfo&&(this.encodeVideoInfo.frameRate=this.curFrameInfo.frameRate),e.bitrateMode>0?this.encodeVideoInfo.bitrateMode=e.bitrateMode:this.encodeVideoInfo.bitrateMode=0,e.latencyMode>0?this.encodeVideoInfo.latencyMode=e.latencyMode:this.encodeVideoInfo.latencyMode=0,0==e.encodeType&&(this.encodeVideoInfo.encodeVideoType="avc"),this.recoderBaseTimestampMode=e.baseTimeStampMode,this.recoderGetOriginData=e.getOriginData,null==this.oVideoEncoder&&(this.oVideoEncoder=new _t(this,this.player)),t.sampleRate>0?this.encodeAudioInfo.sampleRate=t.sampleRate:this.encodeAudioInfo.sampleRate=48e3,t.numberOfChannels>0?this.encodeAudioInfo.numberOfChannels=t.numberOfChannels:this.encodeAudioInfo.numberOfChannels=1,t.bitrate>0?this.encodeAudioInfo.bitrate=t.bitrate:this.encodeAudioInfo.bitrate=128e3,0==t.encodeType&&(this.encodeAudioInfo.encodeAudioType="aac"),null==this.oAudioEncoder&&(this.oAudioEncoder=new ht(this,this.player)),1}},{key:"StartVideoEncode",value:function(e){return null!=this.oVideoEncoder&&(this.oVideoEncoder.initEncoder("avc1.4d4032",this.encodeVideoInfo,e),this.startRecoderFlag=!0,this.stopRecoderFlag=!1),1}},{key:"StartAudioEncode",value:function(e){return null!=this.oAudioEncoder&&this.oAudioEncoder.initEncoder("mp4a.40.2",this.encodeAudioInfo,e),1}},{key:"InputPCMToEncode",value:function(e,t){if(null!=this.oAudioEncoder&&0==this.stopRecoderFlag){var a={format:"s16",sampleRate:this.encodeAudioInfo.sampleRate,numberOfFrames:e.length/2,numberOfChannels:1,timestamp:t,data:e},r=new AudioData(a);this.oAudioEncoder.inputData(r),r.close()}return 1}},{key:"StopEncode",value:function(){return this.startRecoderFlag=!1,this.stopRecoderFlag=!0,this.recoderFrameNum=0,null!=this.oAudioEncoder&&(this.oAudioEncoder.stopEncode(),this.oAudioEncoder=null),null!=this.oVideoEncoder&&(this.oVideoEncoder.stopEncode(),this.oVideoEncoder=null),this.recoderBaseTimestampMode=0,this.recoderGetOriginData=0,1}},{key:"SetRunTimeInfoCallBack",value:function(e,t){return this.runtimeCBFun=t,null!=this.oVideoDecoder&&this.oVideoDecoder.SetRunTimeInfoCallBackFun(e,t),1}},{key:"SetRunTimeInfoCallbackType",value:function(e,t,a){return 2==e?a?this.DecodeTypeFlagMap.set(t,1):this.DecodeTypeFlagMap.delete(t):3==e&&(a?this.RenderTypeFlagMap.set(t,1):this.RenderTypeFlagMap.delete(t)),null!=this.oVideoDecoder&&2==e&&this.oVideoDecoder.SetRunTimeInfoCallbackType(e,t,a),1}},{key:"IsVisible",value:function(e){return null!=this.oVideoDecoder&&this.oVideoDecoder.IsVisible(e),1}},{key:"SetPanoramaDisplayEffect",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetPanoramaDisplayEffect","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetPanoramaDisplayEffect(e):0}},{key:"SetPanoramaSphereViewParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetPanoramaSphereViewParam","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetPanoramaSphereViewParam(e,t):0}},{key:"GetPanoramaSphereViewParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support GetPanoramaSphereViewParam","color:red"),0):null!=this.oVideoRender?this.oVideoRender.GetPanoramaSphereViewParam(e,t):0}},{key:"ResetBuffer",value:function(){return this.resetTimer=!0,this.oVideoDecoder.clearDecoderObjBuffer(),1}}]),a}(),ct=function(){function a(t){e(this,a),this.player=t,this.oVideoPlayCtrl=new ft(t)}return t(a,[{key:"init",value:function(e,t,a,r){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.init(e,t,a,r)}},{key:"inputData",value:function(e,t){null!=this.oVideoPlayCtrl&&this.oVideoPlayCtrl.inputData(e,t)}},{key:"SetDisplayRegion",value:function(e,t,a,r){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetDisplayRegion(e,t,a,r)}},{key:"stop",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetCurStatus(4),this.oVideoPlayCtrl=null,window.g_printfFlag>=0&&console.log(">>>JS 03 destroy oVideoPlayCtrl")}},{key:"fast",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.fast()?0:void 0}},{key:"slow",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.slow()?0:void 0}},{key:"SetDisplayBuf",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetDisplayBuf(e)?0:void 0}},{key:"Pause",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.Pause(e)?0:void 0}},{key:"OneByOne",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.OneByOne(e)?0:void 0}},{key:"NotifyBackPlay",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.NotifyBackPlay(e)?0:void 0}},{key:"SetPlayOrBackSwitchMode",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetPlayOrBackSwitchMode(e)?0:void 0}},{key:"SetStretchPlay",value:function(e,t){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetStretchPlay(e,t)?0:void 0}},{key:"SetCanvasSize",value:function(e,t,a){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetCanvasSize(e,t,a)?0:void 0}},{key:"GetCanvasSize",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.GetCanvasSize()?0:void 0}},{key:"GetPlayedTime",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.GetPlayedTime()}},{key:"SetTargetRelativePos",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetTargetRelativePos(e,t,a)}},{key:"needReset",value:function(e){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetCurStatus(0,e)}},{key:"GetJPEG",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.GetJPEG()}},{key:"GetBMP",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.GetBMP()}},{key:"GetCropJPEG",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.GetCropJPEG()}},{key:"GetCropBMP",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.GetCropBMP()}},{key:"GetCanvasCapture",value:function(e,t,a){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.GetCanvasCapture(e,t,a)}},{key:"SetDecodeFrameType",value:function(e){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetDecodeFrameType(e)}},{key:"SetStreamEnd",value:function(e){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetStreamEnd(e)}},{key:"SetAntialias",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetAntialias(e)}},{key:"SetFrameInfoCallBack",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetFrameInfoCallBack(e,t)}},{key:"FEC_SetCanvasID",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetCanvasID(e)}},{key:"FEC_ResetCorrectType",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_ResetCorrectType(e,t,a)}},{key:"FEC_GetPort",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_GetPort(e,t)}},{key:"FEC_Enable",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_Enable(e)}},{key:"FEC_SetParam",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetParam(e,t)}},{key:"FEC_GetParam",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_GetParam(e,t)}},{key:"FEC_SetViewParam",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetViewParam(e,t,a)}},{key:"FEC_GetViewParam",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_GetViewParam(e,t,a)}},{key:"FEC_SetWnd",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetWnd(e,t)}},{key:"FEC_Disable",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_Disable(e,t,a)}},{key:"FEC_DelPort",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_DelPort(e)}},{key:"FEC_SetDisplayRegion",value:function(e,t,a,r,i,n,s){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetDisplayRegion(e,t,a,r,i,n,s)}},{key:"FEC_SetBackCilling",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetBackCilling(e,t)}},{key:"FEC_GetPTZPort",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_GetPTZPort(e,t,a)}},{key:"FEC_SetPTZDisplayMode",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_SetPTZDisplayMode(e)}},{key:"FEC_Capture",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.FEC_Capture(e,t)}},{key:"InputPrivateInfo",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.InputPrivateInfo(e,t,a)}},{key:"RenderPrivateData",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.RenderPrivateData(e,t)}},{key:"RenderPrivateDataEx",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.RenderPrivateDataEx(e,t,a)}},{key:"SetWaterMarkFont",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetWaterMarkFont(e)}},{key:"SetWaterMarkImage",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetWaterMarkImage(e)}},{key:"SetMosaicType",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetMosaicType(e)}},{key:"SelectIntelInfoFeatureToDraw",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SelectIntelInfoFeatureToDraw(e)}},{key:"SetD3DPostProcess",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetD3DPostProcess(e,t)}},{key:"SetTextCanvas",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetTextCanvas(e)}},{key:"SetPrintLogFlag",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetPrintLogFlag(e)}},{key:"SetRotateAngle",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetRotateAngle(e)}},{key:"InitEncoder",value:function(e,t){return null===this.oVideoPlayCtrl?0:(this.oVideoPlayCtrl.InitEncoder(e,t),1)}},{key:"StartVideoEncode",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.StartVideoEncode(e)}},{key:"StartAudioEncode",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.StartAudioEncode(e)}},{key:"InputPCMToEncode",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.InputPCMToEncode(e,t)}},{key:"StopEncode",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.StopEncode()}},{key:"SetRunTimeInfoCallBack",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetRunTimeInfoCallBack(e,t)}},{key:"SetRunTimeInfoCallbackType",value:function(e,t,a){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetRunTimeInfoCallbackType(e,t,a)}},{key:"IsVisible",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.IsVisible(e)}},{key:"SetPanoramaDisplayEffect",value:function(e){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetPanoramaDisplayEffect(e)}},{key:"SetPanoramaSphereViewParam",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.SetPanoramaSphereViewParam(e,t)}},{key:"GetPanoramaSphereViewParam",value:function(e,t){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.GetPanoramaSphereViewParam(e,t)}},{key:"ResetBuffer",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.ResetBuffer()}}]),a}(),ut=[];!function(){for(var e=0;e<8;e++){ut[e]=[];for(var t=0;t<64;t++)ut[e][t]=null}}();var dt=null,pt=!1,mt=!1,St=1,Rt=1,Pt={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:"unloaded",errorCode:0,status:0},bt=-1;window.JSPlayM4_RawDataCallBack=function(e,t,a,r){null!=ut[r][e]&&ut[r][e].__proto__.hasOwnProperty("JSPlayM4_InputRawData")&&ut[r][e].JSPlayM4_InputRawData(e,t,a)},window.JSPlayM4_PrivateInfoCallBack=function(e,t,a,r,i){null!=ut[i][e]&&ut[i][e].__proto__.hasOwnProperty("JSPlayM4_InputPrivateInfo")&&ut[i][e].JSPlayM4_InputPrivateInfo(t,a,r)};var yt=function(){function a(t,r,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,a),this.printfFlag=window.g_printfFlag,this.jsplayer=t,this.szBasePath=r,this.fn=i,this.nUser=s,this.renderEngine=x,this.hasWebWorker=o,this.setHasThread=l,this.oJSPlayerObj=this,this.port=-1,this.pcVideoManager=null,this.decodeWorker=null,this.offscreen=null,this.canvasID="",this.canvasCnv=null,this.rtpType=0,this.decodeEngine=1,this.FirstFrameCallBackflag=!1,this.inputDataBuffer=null,this.inputDataBufferSize=204800,this.canvasIDData=null,this._decoderLoaded=!1,this.streamOpenMode=0,this.width=0,this.height=0,this.rawDataFrameInfoBuffer=null,this.rawDataFrameInfo={},this.displayFrameInfo={},this.startTimeStamp=0,this.decodeFrameType=0,this.displayBuf=0,this.needSetDisplayBuf=!1,this.FirstFrame=!0,this.codecType=0,this.curStatus=0,this.lastStatus=0,this.playSpeed=1,this.needWaitIFrame=!1,this.sysType=0,this.SetDisRegionBottom=0,this.SetDisRegionLeft=0,this.SetDisRegionRight=0,this.SetDisRegionTop=0,this.cropBottom=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.canvasWidth=960,this.canvasHeight=480,this.enableCanvas=!0,this.needResetCanvasSize=!1,this.hasThread=0,this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadFlag=!1,this.bWriteAudioPCMData=!0,this.audioPCMBuffer=[],this.iAudioPCMFrameNum=0,this.pBmpData=null,this.nBmpDataSize=0,this.pBmpSizeData=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1,this.pJpegData=null,this.nJpegDataSize=0,this.pJPEGSizeData=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1,this.CropjpegDataCallback=null,this.CropjpegDownloadFlag=!1,this.CropbmpDataCallback=null,this.CropbmpDownloadFlag=!1,this.imageCB=null,this.pFontParam=null,this.pWaterMarkFontData=null,this.nWaterMarkFontLen=0,this.textCanvas=null,this.setTextCanvasFlag=!1,this.rgbDataBuffer=null,this.recoderVideoDataCBFun=null,this.recoderAudioDataCBFun=null,this.recoderAudioAnyWhere=!1,this.pMosaicParam=null,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.pFECTotalCanvasIDData=null,this.iFECCanvasIDLen=0,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1,this.stFECDisplayRect={top:0,left:0,right:0,bottom:0},this.FECcanvasIDArray=[],this.FECGetPortCB=null,this.FECGetPTZPortCB=null,this.FECParamCB=null,this.FECViewParamCB=null,this.GetPanoramaSphereViewParamCB=null,this.FECImageCB=null,this.FECRgbDataBuffer=null,this.FFCallBackFun=null,this.addtionCallBackFun=null,this.additionDataBuffer=null,this.additionDataBufferSize=0,this.displayCallBackFun=null,this.decCallBackFun=null,this.getPlayTimeCallBackFun=null,this.runtimeCBFun=null,this.callbackFlag=!1,this.runTimeModule=0,this.needSetRunTimeInfoCB=!1,this.decodeQueueSize=0,this.decodeFrameSize=0,this.streamInfoCBFun=null,this.streamInfoType=0,this.ResamplePCMCallBack=null,this.PostMpStreamOffsetCBFun=null,this.SetPlayPosCBFun=null,this.HardDecToJpegCBFun=null,this.HardDecToJpegQuality=1,this.HardDecToJpegInterval=2,this.HardToJpegZoomWidth=100,this.HardToJpegZoomHeight=100,this.HardToJpegZoomResolutionFlag=0,this.pstRuntimeInfo={nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:0,nInputDataInterval:0,nFrameNumInterval:0,nAverageDecodeTime:0,nSystemFormat:0,nDetectRes:0,nMp4FileTime:0,nMp4TotalFrameNum:0,AbsTimeYear:0,AbsTimeMonth:0,AbsTimeDay:0,AbsTimeHour:0,AbsTimeMinute:0,AbsTimeSecond:0,AbsTimeMilliseconds:0},this.needSetSecretKey=!1,this.SecretKeyData=null,this.keyType=1,this.pKeyDataLen=128,this.needPlaySound=!1,this.decInterval=-1,this.volumeValue=-1,this.renderPrivateInfo=new Map,this.renderIntelSubEx=new Map,this.renderIntelFlagEx=new Map,this.reversePlay=!1,this.decodeThreadNum=0,this.antialiasFlag=-1,this.decodeERCLevel=0,this.d3dPostProcessType=0,this.d3dPostProcessValue=0,this.needSetD3DPostProcess=!1,this.resetBufferType=-1,this.playOrBackSwitchMode=0,this.setStretchPlayTime=0,this.setStretchPlaySpeed=0,this.autoSmoothPlayModel=-1,this.keepPlaySpeed=-1,this.FECCanvasID="",this.FECPlaceType=0,this.FECCorrectType=0,this.anrParamFlag=!1,this.anrParamLevel=-1,this.resampleFlag=!1,this.resampleRate=48e3,this.globalBaseTime=null,this.needSetSkipErrorData=!1,this.skipErrorData=-1,this.needSetDemuxModel=!1,this.setDemuxModelType=-1,this.setDemuxModelFlag=!1,this.setAudioThreadModel=-1,this.syncToAudio=-1,this.twodRotateAngle=0,this.needSetRotateAngle=!1,this.additionDataType=0,this.additionFlag=0,this.addCBFun=null,this.needSetAdditionDataCB=!1,this.needPlaySoundShare=!1,this.needSetRunTimeInfoCBType=!1,this.HIK40Head=[],this.HIKHeadSize=40,this.HIKPoolSize=2097152,this.SDPInfoData=null,this.SDPInfoLen=0,this.SDPInfoPoolSize=4194304,this.SDPInfoProtocolType=1,this.SDPInfoSessionInfoType=1,this.wasmMemory=null,this.initialMemory=8192,this.maximumMemory=16368,this.OpenStreamMode=0,Pt.cmd="unloaded",Pt.errorCode=0,Pt.status=0,this.supportWebCodecs=_getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var _=new OffscreenCanvas(1,1),h=_.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),_=null,h=null}if(null!=dt||pt)Pt.cmd="loaded",new Promise((function(e,t){e()})).then((function(){if(null!==dt&&mt)n.fn(Pt);else var e=setInterval((function(){null!==dt&&mt&&(clearInterval(e),e=null,n.fn(Pt))}),10)}));else if(pt=!0,bt=_getFExplore(),this.supportWebCodecs?(Pt.bSupHardOrSoft=!0,Pt.bSupHardDecAVC=!0,Pt.bSupHardDecHEVC=!0):(this.printfFlag>=0&&console.info("%c1>your browser does not support hard Decoder ","color: red"),Rt=0,St=0,Pt.bSupHardDecAVC=!1,Pt.bSupHardDecHEVC=!1,this.supportSab&&this.supportOffscreen?Pt.bSupHardOrSoft=!0:Pt.bSupHardOrSoft=!1),this.getwasmMemory(),Pt.bSupHardOrSoft){this.printfFlag>=0&&console.log("%cstart load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var f=this.szBasePath,c=document.createElement("script");c.type="text/javascript",c.src=f,this.printfFlag>=0&&console.info("%c>>>>The Decoder.js path:%s","color: green",f),this.supportSab&&this.supportOffscreen?this.wasmMemory=new WebAssembly.Memory({initial:this.initialMemory,maximum:this.maximumMemory,shared:!0}):this.wasmMemory=new WebAssembly.Memory({initial:this.initialMemory,maximum:this.maximumMemory}),console.log("create wasmMemory this.initialMemory:"+this.initialMemory+",this.maximumMemory:"+this.maximumMemory),c.onload=function(){window.JSPlayerModule({wasmMemory:n.wasmMemory}).then((function(e){dt=e,n._decoderLoaded=!0,Pt.cmd="loaded";var t=dt._JSPlayM4_GetSDKVersion(),a=dt._JSPlayM4_GetBuildDate();n.printfFlag>=0&&console.log("%cEnd load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()+",version:"+t.toString(16)+",buildDate:"+a.toString(16),"color: blue"),dt._JSPlayM4_SetPrintLogFlag(-1,n.printfFlag),n.supportWebCodecs?VideoDecoder.isConfigSupported({codec:"avc1.42001f",hardwareAcceleration:"prefer-hardware"}).then((function(e){"prefer-hardware"==e.config.hardwareAcceleration&&e.supported?(Rt=1,Pt.bSupHardDecAVC=!0,n.printfFlag>=0&&console.info("%c1>your browser support 264 hard Decoder","color: green"),bt>97||-1===bt?VideoDecoder.isConfigSupported({codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"}).then((function(e){console.log("%c hevcConfigInfo.config.hardwareAcceleration:"+e.config.hardwareAcceleration,"color:red"),"prefer-hardware"==e.config.hardwareAcceleration&&e.supported?(St=1,Pt.bSupHardDecHEVC=!0,n.printfFlag>=0&&console.info("%c2>your browser support 265 hard Decoder","color: green")):(St=0,Pt.bSupHardDecHEVC=!1,n.printfFlag>=0&&console.info("%c2>your browser not support 265 hard Decoder","color: red")),n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0)})):(St=0,Pt.bSupHardDecHEVC=!1,n.printfFlag>=0&&console.info("%c2>your browser not support 265 hard Decoder chromeVersion:"+bt,"color: red"),n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0))):(Rt=0,Pt.bSupHardDecAVC=!1,St=0,Pt.bSupHardDecHEVC=!1,n.printfFlag>=0&&console.info("%c1>your browser not support 264/265 hard Decoder","color: red"),n.supportSab&&n.supportOffscreen?Pt.bSupHardOrSoft=!0:Pt.bSupHardOrSoft=!1,n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0))})).catch((function(){n.supportSab&&n.supportOffscreen?Pt.bSupHardOrSoft=!0:Pt.bSupHardOrSoft=!1,Rt=0,Pt.bSupHardDecAVC=!1,St=0,Pt.bSupHardDecHEVC=!1,n.printfFlag>=0&&console.log("%c2>hard decode supported error","color: red"),n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0)})):(n.supportSab&&n.supportOffscreen?Pt.bSupHardOrSoft=!0:Pt.bSupHardOrSoft=!1,n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0))}))},document.body.appendChild(c)}else this.printfFlag>=0&&console.log("%c not support hard or soft","color:red"),new Promise((function(e,t){e()})).then((function(){n.callbackFlag||(n.callbackFlag=!0,n.fn(Pt),mt=!0)}))}return t(a,[{key:"startWorker",value:function(e){function t(t,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){if(window.Worker){if(null==t.decodeWorker){if(t.decodeWorker=new _,null==t.decodeWorker)return 0;this.printfFlag>=0&&console.log("decodeWorker create success!")}t.canvasCnv=document.getElementById(e),t.offscreen=t.canvasCnv.transferControlToOffscreen(),t.decodeWorker.postMessage({command:"init",streamOpenMode:t.streamOpenMode,canvas:t.offscreen,sab:t.supportSab,renderEngine:t.renderEngine,printfLog:t.printfFlag},[t.offscreen]),0!=t.displayBuf&&t.decodeWorker.postMessage({command:"SetDisplayBuf",value:t.displayBuf}),""!=t.FECCanvasID&&t.decodeWorker.postMessage({command:"SetCanvasID",canvasID:t.FECCanvasID}),t.decodeWorker.onmessage=function(e){var a=e.data;switch(a.function){case"error":startWorker(t.canvasID,t);break;case"GetFrameData":var r=new Uint8Array(a.data);t.downloadRTPData(r);break;case"GetRawData":t.JSPlayM4_GetRawData();break;case"OrderError":console.log(">>>JS OrderError");break;case"GetPlayedTime":var i=a.value;t.getPlayTimeCallBackFun&&t.getPlayTimeCallBackFun(i-t.startTimeStamp);break;case"resetEnd":t.JSPlayM4_ResetEnd();break;case"bitmap":var n=a.value,s=a.type,x=a.sx,o=a.sy,l=a.sw,_=a.sh,h=a.framenum;t._GetImage(n,s,x,o,l,_,h);break;case"imageYUV":var f=new Uint8Array(a.value),c=a.size,u=new Uint8Array(f),d=a.type,p=a.width,m=a.height,S=a.yuvType,R=a.sx,P=a.sy,b=a.sw,y=a.sh;t._GetImage2(u,c,p,m,d,S,R,P,b,y),f=null,u=null,a.value=null;break;case"stop":t.decodeWorker=null,t.printfFlag>=0&&console.log("HardWorker is null");break;case"firstFrameCB":null!=t.FFCallBackFun&&t.FFCallBackFun({decodeEngine:1});break;case"SetPlayPosCB":var E={nRes:1};E.nRelativePos=a.value,null!=t.SetPlayPosCBFun&&t.SetPlayPosCBFun(E);break;case"SetFrameInfoCallBack":t.displayFrameInfo.port=a.curFrameInfo.port,t.displayFrameInfo.codecType=a.curFrameInfo.codecType,t.displayFrameInfo.frameType=a.curFrameInfo.frameType,t.displayFrameInfo.frameSize=a.curFrameInfo.frameSize,t.displayFrameInfo.width=a.curFrameInfo.width,t.displayFrameInfo.height=a.curFrameInfo.height,t.displayFrameInfo.timeStamp=a.curFrameInfo.timeStamp,t.displayFrameInfo.frameRate=a.curFrameInfo.frameRate,t.displayFrameInfo.frameNum=a.curFrameInfo.frameNum,t.displayFrameInfo.interlace=a.curFrameInfo.interlace,t.displayFrameInfo.streamEnd=a.curFrameInfo.streamEnd,t.displayFrameInfo.cropLeft=a.curFrameInfo.cropLeft,t.displayFrameInfo.cropRight=a.curFrameInfo.cropRight,t.displayFrameInfo.cropTop=a.curFrameInfo.cropTop,t.displayFrameInfo.cropBottom=a.curFrameInfo.cropBottom,t.displayFrameInfo.year=a.curFrameInfo.year,t.displayFrameInfo.month=a.curFrameInfo.month,t.displayFrameInfo.week=a.curFrameInfo.week,t.displayFrameInfo.day=a.curFrameInfo.day,t.displayFrameInfo.hour=a.curFrameInfo.hour,t.displayFrameInfo.minute=a.curFrameInfo.minute,t.displayFrameInfo.second=a.curFrameInfo.second,t.displayFrameInfo.milliseconds=a.curFrameInfo.milliseconds;break;case"FECGetViewParam":null!=t.FECViewParamCB&&t.FECViewParamCB(a.Param3D);break;case"GetPanoramaSphereViewParam":null!=t.GetPanoramaSphereViewParamCB&&t.GetPanoramaSphereViewParamCB(a.ParamVR);break;case"FECGetParam":null!=t.FECParamCB&&t.FECParamCB(a.param2d);break;case"FECGetPort":null!=t.FECGetPortCB&&t.FECGetPortCB(a.fishSubPort);break;case"FECGetPTZPort":null!=t.FECGetPTZPortCB&&t.FECGetPTZPortCB(a.fishSubPort);break;case"GetDecodeBufferSize":null!=a.rawSize&&null!=a.frameSize&&(t.decodeQueueSize=a.rawSize,t.decodeFrameSize=a.frameSize);break;case"GetCanvasCapture":if(0!=a.width&&0!=a.height){var g=new Uint8Array(a.frameData);t.imageCB(g,a.width,a.height)}break;case"FECCapture":if(0!=a.width&&0!=a.height){var F=new Uint8Array(a.frameData);t.FECImageCB(F,a.width,a.height,a.fishSubPort)}break;case"VideoRecoderInfo":var v=new Uint8Array(a.videoInfo.rawData),C=a.videoInfo;C.rawData=v,null!=t.recoderVideoDataCBFun&&t.recoderVideoDataCBFun(C),v=null;break;case"AudioRecoderInfo":var T=new Uint8Array(a.audioInfo.rawData),D=a.audioInfo;D.rawData=T,null!=t.recoderAudioDataCBFun&&t.recoderAudioDataCBFun(D),T=null;break;case"runtimeInfo":null!=t.runtimeCBFun&&t.runtimeCBFun(a.pstRuntimeInfo)}},t.decodeWorker.addEventListener("error",(function(e){console.error(e)}))}}))},{key:"JSPlayM4_GetDecodeBufferSize",value:function(e,t){return null!=e&&null!=t&&(this.decodeQueueSize=e,this.decodeFrameSize=t),1}},{key:"JSPlayM4_SetStreamEnd",value:function(e){if(1===this.decodeEngine)if(this.hasWebWorker){if(null==this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetStreamEnd",bTrue:e})}else null!=this.pcVideoManager&&this.pcVideoManager.SetStreamEnd(e)}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag>0&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1 "),null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPort","color: red"),0):(this.port=dt._JSPlayM4_GetPort(),ut[this.nUser][this.port]=this.oJSPlayerObj,this.printfFlag>0&&console.log(">>>>>yff>>> JSPlayM4_GetPort 2 this.port:"+this.port),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamOpenMode","color: red"),0):(this.streamOpenMode=e,this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),null==this.pcVideoManager&&(this.pcVideoManager=new ct(this)),dt._JSPlayM4_SetStreamOpenMode(this.port,e))}},{key:"JSPlayM4_OpenStream",value:function(e,t,a){if(this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e+",this.port:"+this.port),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OpenStream","color: red"),0;var r=dt._malloc(t);if(null===r)return console.log("hikHeadBuffer malloc failed"),0;var i=new Uint8Array(e.buffer);if(5==e[10]&&0==e[11]){if(this.codecType=5,!Pt.bSupHardDecHEVC&&!this.supportSab)return console.info("%c3>The codecType is VIDEO_AVC265,not support SharedArrayBuffer","color: red"),O}else 1==e[10]&&0==e[11]?this.codecType=1:0==e[10]&&1==e[11]?this.codecType=256:4==e[10]&&0==e[11]?this.codecType=4:this.codecType=0;dt.writeArrayToMemory(i,r);var n=dt._JSPlayM4_OpenStream(this.port,r,t,a);return null!==r&&(dt._free(r),r=null),i=null,this.HIK40Head=new Uint8Array(e),this.HIKHeadSize=t,this.HIKPoolSize=a,this.OpenStreamMode=0,n}},{key:"JSPlayM4_OpenStreamAdvanced",value:function(e,t,a,r,i){if(this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_OpenStreamAdvanced 1 :"+r+",this.port:"+this.port),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OpenStreamAdvanced","color: red"),0;var n=this._stringToBytes(r),s=dt._malloc(a);if(null!==s){var x=dt.HEAPU8.subarray(s,s+a),o=new Uint8Array(a);x.set(o,0),x.set(new Uint8Array(n)),x=null,o=null;var l=dt._JSPlayM4_OpenStreamAdvanced(this.port,e,t,a,s,i);return null!==s&&(dt._free(s),s=null),this.SDPInfoData=r,this.SDPInfoLen=a,this.SDPInfoPoolSize=i,this.SDPInfoProtocolType=e,this.SDPInfoSessionInfoType=t,this.OpenStreamMode=1,l}}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){return this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e?(console.log("0 is softDecode, 1 is hardDecoder,decodeEngine:"+e),0):0!==e||this.supportSab&&this.supportOffscreen?(this.decodeEngine=e,1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_switchHardToSoft",value:function(){return this.JSPlayM4_Stop(!0),this.JSPlayM4_CloseStream(),this.JSPlayM4_FreePort(),this.supportSab&&this.supportOffscreen?(this.JSPlayM4_SetDecodeEngine(0)&&(console.log("V3 switchHardToSoft this.szBasePath:"+this.szBasePath),this.JSPlayM4_GetPort(),this.JSPlayM4_SetStreamOpenMode(this.streamOpenMode),0==this.OpenStreamMode?this.JSPlayM4_OpenStream(this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize):this.JSPlayM4_OpenStreamAdvanced(this.SDPInfoProtocolType,this.SDPInfoSessionInfoType,this.SDPInfoLen,this.SDPInfoData,this.SDPInfoPoolSize),this.JSPlayM4_Play(null,!0),null!=this.runtimeCBFun&&(this.pstRuntimeInfo.nRunTimeModule=2,this.pstRuntimeInfo.nStrVersion=1,this.pstRuntimeInfo.nFrameTimeStamp=0,this.pstRuntimeInfo.nFrameNum=0,this.pstRuntimeInfo.nErrorCode=3,this.pstRuntimeInfo.nInputDataInterval=0,this.pstRuntimeInfo.nFrameNumInterval=0,this.pstRuntimeInfo.nAverageDecodeTime=0,this.pstRuntimeInfo.nSystemFormat=this.sysType,this.runtimeCBFun(this.pstRuntimeInfo))),1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_HardToSoftNeedResetParam",value:function(){if(null!=this.FFCallBackFun&&dt._JSPlayM4_SetFirstFrameCallBack(this.port,this.FirstFrameCallBackflag,this.nUser),this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.keyType,this.SecretKeyData,this.pKeyDataLen),null!=this.globalBaseTime&&this.globalBaseTime.month>0&&this.globalBaseTime.month<13&&this.JSPlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),this.needSetSkipErrorData&&this.JSPlayM4_SkipErrorData(this.skipErrorData),this.needSetDemuxModel&&this.JSPlayM4_SetDemuxModel(this.setDemuxModelType,this.setDemuxModelFlag),this.needSetAdditionDataCB&&this.JSPlayM4_SetAdditionDataCallBack(this.additionDataType,this.additionFlag,this.addCBFun),this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),-1!=this.decInterval&&dt._JSPlayM4_SetIFrameDecInterval(this.port,nInterval),0!=this.decodeThreadNum&&dt._JSPlayM4_SetDecodeThreadNum(this.port,this.decodeThreadNum),0!=this.decodeERCLevel&&dt._JSPlayM4_SetDecodeERC(this.port,this.decodeERCLevel),-1!=this.resetBufferType&&dt._JSPlayM4_ResetBuffer(this.port,this.resetBufferType),this.needPlaySound&&this.JSPlayM4_PlaySound(),this.needPlaySoundShare&&this.JSPlayM4_PlaySoundShare(),-1!=this.setAudioThreadModel&&this.JSPlayM4_SetAudioThreadModel(this.setAudioThreadModel),-1!=this.syncToAudio&&this.JSPlayM4_SyncToAudio(this.syncToAudio),this.anrParamFlag&&-1!=this.anrParamLevel&&this.JSPlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),this.resampleFlag&&this.JSPlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),-1!=this.volumeValue&&this.JSPlayM4_SetVolume(this.volumeValue),this.needSetRunTimeInfoCB&&dt._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,this.runTimeModule,this.nUser),this.needSetRunTimeInfoCBType){if(this.jsplayer.SourceTypeFlagMap.size>0){var e,t=D(this.jsplayer.SourceTypeFlagMap.keys());try{for(t.s();!(e=t.n()).done;){var a=e.value,r=this.jsplayer.SourceTypeFlagMap.get(a);1==r&&dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,0,a,r)}}catch(e){t.e(e)}finally{t.f()}}if(this.jsplayer.SplitterTypeFlagMap.size>0){var i,n=D(this.jsplayer.SplitterTypeFlagMap.keys());try{for(n.s();!(i=n.n()).done;){var s=i.value,x=this.jsplayer.SplitterTypeFlagMap.get(s);1==x&&dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,1,s,x)}}catch(e){n.e(e)}finally{n.f()}}if(this.jsplayer.DecodeTypeFlagMap.size>0){var o,l=D(this.jsplayer.DecodeTypeFlagMap.keys());try{for(l.s();!(o=l.n()).done;){var _=o.value,h=this.jsplayer.DecodeTypeFlagMap.get(_);1==h&&dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,2,_,h)}}catch(e){l.e(e)}finally{l.f()}}if(this.jsplayer.RenderTypeFlagMap.size>0){var f,c=D(this.jsplayer.RenderTypeFlagMap.keys());try{for(c.s();!(f=c.n()).done;){var u=f.value,d=this.jsplayer.RenderTypeFlagMap.get(u);1==d&&dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,3,u,d)}}catch(e){c.e(e)}finally{c.f()}}if(this.jsplayer.ManagerTypeFlagMap.size>0){var p,m=D(this.jsplayer.ManagerTypeFlagMap.keys());try{for(m.s();!(p=m.n()).done;){var S=p.value,R=this.jsplayer.ManagerTypeFlagMap.get(S);1==R&&dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,4,S,R)}}catch(e){m.e(e)}finally{m.f()}}}null!=this.streamInfoCBFun&&dt._JSPlayM4_SetStreamInfoCallBack(this.port,this.streamInfoType,this.nUser),null!=this.PostMpStreamOffsetCBFun&&dt._JSPlayM4_SetPostMpStreamOffsetCallBack(this.port,this.nUser),0!=this.playOrBackSwitchMode&&dt._JSPlayM4_SetPlayOrBackSwitchMode(this.port,this.playOrBackSwitchMode);var P,b=D(this.renderPrivateInfo.keys());try{for(b.s();!(P=b.n()).done;){var y=P.value,E=this.renderPrivateInfo.get(y);dt._JSPlayM4_RenderPrivateData(this.port,y,E)}}catch(e){b.e(e)}finally{b.f()}var g,F=D(this.renderIntelSubEx.keys());try{for(F.s();!(g=F.n()).done;){var v=g.value,C=this.renderIntelSubEx.get(v),T=this.renderIntelFlagEx.get(v);dt._JSPlayM4_RenderPrivateDataEx(this.port,v,C,T)}}catch(e){F.e(e)}finally{F.f()}return this.needSetDisplayBuf&&dt._JSPlayM4_SetDisplayBuf(this.port,this.displayBuf),-1!=this.antialiasFlag&&dt._JSPlayM4_SetAntialias(this.port,this.antialiasFlag),this.needSetD3DPostProcess&&dt._JSPlayM4_SetD3DPostProcess(this.port,this.d3dPostProcessType,this.d3dPostProcessValue),null!=this.pFontParam&&this.JSPlayM4_SetWaterMarkFont(this.pFontParam),null!=this.pMosaicParam&&this.JSPlayM4_SetMosaicType(this.pMosaicParam),0!=this.setStretchPlaySpeed&&dt._JSPlayM4_SetStretchPlay(this.port,this.setStretchPlayTime,this.setStretchPlaySpeed),-1!=this.autoSmoothPlayModel&&dt._JSPlayM4_SetAutoSmoothPlay(this.port,this.autoSmoothPlayModel),-1!=this.keepPlaySpeed&&dt._JSPlayM4_KeepPlaySpeed(this.port,this.keepPlaySpeed),this.printfFlag>0&&this.JSPlayM4_SetPrintLogFlag(this.printfFlag),this.needSetRotateAngle&&dt._JSPlayM4_SetRotateAngle(this.port,this.twodRotateAngle),""!=this.FECCanvasID&&this.JSPlayM4_FEC_SetCanvasID(this.FECCanvasID,!0),0!=this.FECPlaceType&&dt._JSPlayM4_FEC_ResetCorrectType(this.port,0,this.FECPlaceType,this.FECCorrectType),1}},{key:"JSPlayM4_DownloadRawData",value:function(){return this.downloadFlag=!0,1}},{key:"JSPlayM4_InputRawData",value:function(e,t,a){if(this.rawDataFrameInfoBuffer=a,this.rawDataFrameInfo.port=e,this.rawDataFrameInfo.codecType=dt.HEAP32[this.rawDataFrameInfoBuffer+4>>2],this.rawDataFrameInfo.frameType=dt.HEAP32[this.rawDataFrameInfoBuffer+12>>2],this.rawDataFrameInfo.frameSize=dt.HEAP32[this.rawDataFrameInfoBuffer+16>>2],this.rawDataFrameInfo.width=dt.HEAP32[this.rawDataFrameInfoBuffer+20>>2],this.rawDataFrameInfo.height=dt.HEAP32[this.rawDataFrameInfoBuffer+24>>2],this.rawDataFrameInfo.timeStamp=dt.HEAP32[this.rawDataFrameInfoBuffer+28>>2],this.rawDataFrameInfo.frameRate=dt.HEAP32[this.rawDataFrameInfoBuffer+32>>2],this.rawDataFrameInfo.frameNum=dt.HEAP32[this.rawDataFrameInfoBuffer+36>>2],this.rawDataFrameInfo.isKeyFrame=dt.HEAP32[this.rawDataFrameInfoBuffer+40>>2],this.rawDataFrameInfo.interlace=dt.HEAP32[this.rawDataFrameInfoBuffer+44>>2],this.rawDataFrameInfo.streamEnd=dt.HEAP32[this.rawDataFrameInfoBuffer+48>>2],this.rawDataFrameInfo.cropLeft=dt.HEAP32[this.rawDataFrameInfoBuffer+52>>2],this.rawDataFrameInfo.cropRight=dt.HEAP32[this.rawDataFrameInfoBuffer+56>>2],this.rawDataFrameInfo.cropTop=dt.HEAP32[this.rawDataFrameInfoBuffer+60>>2],this.rawDataFrameInfo.cropBottom=dt.HEAP32[this.rawDataFrameInfoBuffer+64>>2],this.rawDataFrameInfo.year=dt.HEAP16[this.rawDataFrameInfoBuffer+68>>1],this.rawDataFrameInfo.month=dt.HEAP16[this.rawDataFrameInfoBuffer+70>>1],this.rawDataFrameInfo.week=dt.HEAP16[this.rawDataFrameInfoBuffer+72>>1],this.rawDataFrameInfo.day=dt.HEAP16[this.rawDataFrameInfoBuffer+74>>1],this.rawDataFrameInfo.hour=dt.HEAP16[this.rawDataFrameInfoBuffer+76>>1],this.rawDataFrameInfo.minute=dt.HEAP16[this.rawDataFrameInfoBuffer+78>>1],this.rawDataFrameInfo.second=dt.HEAP16[this.rawDataFrameInfoBuffer+80>>1],this.rawDataFrameInfo.milliseconds=dt.HEAP16[this.rawDataFrameInfoBuffer+82>>1],this.sysType=dt.HEAP32[this.rawDataFrameInfoBuffer+84>>2],this.rawDataFrameInfo.VRViewLimitRate=dt.HEAP32[this.rawDataFrameInfoBuffer+88>>2],this.rawDataFrameInfo.needSetPreSoft=!1,(this.rawDataFrameInfo.frameRate<1||1==this.rawDataFrameInfo.interlace)&&(this.rawDataFrameInfo.needSetPreSoft=!0),0!=this.width&&0!=this.height||(this.width=this.rawDataFrameInfo.width,this.height=this.rawDataFrameInfo.height,this.startTimeStamp=this.rawDataFrameInfo.timeStamp,this.FirstFrame=!1),0==this.rawDataFrameInfo.cropLeft&&0==this.rawDataFrameInfo.cropRight&&0==this.rawDataFrameInfo.cropTop&&0==this.rawDataFrameInfo.cropBottom||(this.cropBottom=this.rawDataFrameInfo.cropBottom,this.cropLeft=this.rawDataFrameInfo.cropLeft,this.cropRight=this.rawDataFrameInfo.cropRight,this.cropTop=this.rawDataFrameInfo.cropTop),1==this.decodeFrameType){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.needWaitIFrame&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetDecodeFrameType",timestamp:this.rawDataFrameInfo.timeStamp}):this.pcVideoManager.SetDecodeFrameType(this.rawDataFrameInfo.timeStamp),this.needWaitIFrame=!1)}if(0==this.decodeFrameType&&1==this.needWaitIFrame){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.needWaitIFrame=!1}var r=new Uint8Array(this.rawDataFrameInfo.frameSize);if(r.set(dt.HEAPU8.subarray(dt.HEAP32[this.rawDataFrameInfoBuffer>>2],dt.HEAP32[this.rawDataFrameInfoBuffer>>2]+this.rawDataFrameInfo.frameSize)),this.downloadFlag&&this.downloadRTPData(r),this.hasWebWorker){if(null===this.decodeWorker)return r=null,0;this.decodeWorker.postMessage({command:"inputData",rawData:r.buffer,rawDataFrameInfo:this.rawDataFrameInfo},[r.buffer])}else null!==this.pcVideoManager&&this.pcVideoManager.inputData(r,this.rawDataFrameInfo);r=null}},{key:"JSPlayM4_GetRawData",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetRawData","color: red"),0;dt._JSPlayM4_SetHardQueueSize(this.port,this.decodeQueueSize,this.decodeFrameSize),dt._JSPlayM4_GetRawData(this.port)}},{key:"JSPlayM4_ResetEnd",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetEnd","color: red"),0):dt._JSPlayM4_ResetEnd(this.port)}},{key:"JSPlayM4_NeedReset",value:function(e,t,a){return this.hasWebWorker?null!=ut[a][e].decodeWorker&&ut[a][e].decodeWorker.postMessage({command:"needReset",bTrue:!0}):this.pcVideoManager.needReset(!0),1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioDisplayBuf","color: red"),0):dt._JSPlayM4_SetAudioDisplayBuf(this.port,e)}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Play","color: red"),0;if(this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2:"+this.decodeEngine),6==this.curStatus){if(1==this.decodeEngine){if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"NotifyBackPlay",flag:0})}else null!=this.pcVideoManager&&this.pcVideoManager.NotifyBackPlay(0);dt._JSPlayM4_ResetBuffer(this.port,1),this.needPlaySound&&dt._JSPlayM4_PlaySound(this.port),this.needPlaySoundShare&&dt._JSPlayM4_PlaySoundShare(this.port)}else dt._JSPlayM4_Play(this.port,this.canvasIDData);return this.curStatus=2,1}if(null!=e&&(this.canvasID=e,this.canvasWidth=document.getElementById(this.canvasID).width,this.canvasHeight=document.getElementById(this.canvasID).height),0===St&&5===this.codecType?(this.decodeEngine=0,console.info("%c2>there will decode 265 by softDecoder","color: green")):0!==Rt||256!==this.codecType&&1!==this.codecType?4==this.codecType&&(this.decodeEngine=0,console.info("%c2>there will decode MJPEG by softDecoder(only V3-soft support MJPEG)","color: green")):(this.decodeEngine=0,console.info("%c2>there will decode 264 by softDecoder","color: green")),0==Rt&&0==St&&(this.decodeEngine=0),!(this.supportSab&&this.supportOffscreen||0!==this.decodeEngine))return console.info("%c3>SharedArrayBuffer or Offscreen Error , does not support Soft Decdoe!!!!!","color: red"),this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),1;if(-1!=this.setHasThread&&(this.hasThread=this.setHasThread),dt._JSPlayM4_SetDecodeEngine(this.port,this.decodeEngine,this.hasThread),this.printfFlag>=0&&console.log("%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","color: green",this.decodeEngine,this.codecType),0===this.decodeEngine&&t&&null!=this.canvasID){var a=document.getElementById(this.canvasID);a&&(this.clonedCanvas=a.cloneNode(!0),this.clonedCanvasParentNode=a.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,a))}this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab+",this.decodeEngine:"+this.decodeEngine);var r=1;if(1===this.decodeEngine){this.hasWebWorker?this.startWorker(this.canvasID,this):(this.canvasCnv=document.getElementById(this.canvasID),this.pcVideoManager.init(this.canvasCnv,this.streamOpenMode,this.supportSab,this.renderEngine),this.needSetDisplayBuf&&this.pcVideoManager.SetDisplayBuf(this.displayBuf)),dt._JSPlayM4_SetVideoRawDataCallBack(this.port,this.nUser);var i=dt.addFunction(this.JSPlayM4_NeedReset,"viii");dt._JSPlayM4_SetResetCallBack(this.port,i,this.nUser),dt._JSPlayM4_SetPrivateInfoCallBack(this.port,this.nUser),this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight),1==(r=dt._JSPlayM4_Play(this.port,null))&&(this.curStatus=2)}else if(0===this.decodeEngine){if(""!=this.canvasID&&null!=this.canvasID){var n=this._stringToBytes("#"+this.canvasID),s=2*(this.canvasID.length+1);if(this.canvasIDData=dt._malloc(s),null===this.canvasIDData)return 0;var x=dt.HEAPU8.subarray(this.canvasIDData,this.canvasIDData+s),o=new Uint8Array(s);x.set(o,0),x.set(new Uint8Array(n)),x=null,o=null}this._HardToSoftNeedResetParam(),1==(r=dt._JSPlayM4_Play(this.port,this.canvasIDData))&&(this.curStatus=2)}if(this.JSPlayM4_SetFrameInfoCallBack(1),1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetPrintLogFlag",printfFlag:this.printfFlag})}else null!=this.pcVideoManager&&this.pcVideoManager.SetPrintLogFlag(this.printfFlag);return r}},{key:"JSPlayM4_InputData",value:function(e,t){if(this.inputDataBufferSize<t&&(null!==this.inputDataBuffer&&(dt._free(this.inputDataBuffer),this.inputDataBuffer=null),this.inputDataBufferSize=t),null===this.inputDataBuffer&&(this.inputDataBuffer=dt._malloc(this.inputDataBufferSize)),null===this.inputDataBuffer)return console.log("inputdata malloc failed!!!"),0;if(1==this.needResetCanvasSize&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight+1),this.needResetCanvasSize=!1),this.enableCanvas){var a=this.JSPlayM4_GetFrameInfo(),r=a.width,i=a.height;r&&i&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight-1),this.enableCanvas=!1,this.needResetCanvasSize=!0)}var n=new Uint8Array(e.buffer);dt.writeArrayToMemory(n,this.inputDataBuffer);var s=dt._JSPlayM4_InputData(this.port,this.inputDataBuffer,t,this.decodeQueueSize,this.decodeFrameSize);return this.printfFlag>0&&console.log(">>>>>yff>>>>> JSPlayM4_InputData 2 res:"+s+",inputSize:"+t),n=null,1!=s&&dt._JSPlayM4_GetLastError(this.port)==O&&this._switchHardToSoft(),s}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Stop","color: red"),0;if(this.JSPlayM4_StopEncode(),this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"stop"}):null!=this.pcVideoManager&&this.pcVideoManager.stop(),this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}var a=1;if((2==this.curStatus||5==this.curStatus||6==this.curStatus)&&(1==(a=dt._JSPlayM4_Stop(this.port))&&(this.curStatus=4),1==a&&e)){var r=document.getElementById(this.canvasID);if(r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r)),0!=this.FECcanvasIDArray.length)for(var i=0;i<this.FECcanvasIDArray.length;i++){var n=document.getElementById(this.FECcanvasIDArray[i]);n&&(this.clonedCanvas=n.cloneNode(!0),this.clonedCanvasParentNode=n.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,n))}}return a}},{key:"JSPlayM4_CloseStream",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_CloseStream","color: red"),0):null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FreePort","color: red"),0):(null!==this.inputDataBuffer&&(dt._free(this.inputDataBuffer),this.inputDataBuffer=null),null!==this.additionDataBuffer&&(dt._free(this.additionDataBuffer),this.additionDataBuffer=null),null!==this.canvasIDData&&(dt._free(this.canvasIDData),this.canvasIDData=null,this.FirstFrame=!0),null!=this.pFECTotalCanvasIDData&&(dt._free(this.pFECTotalCanvasIDData),this.pFECTotalCanvasIDData=null),null!=this.pBmpData&&(dt._free(this.pBmpData),this.pBmpData=null),null!=this.pBmpSizeData&&(dt._free(this.pBmpSizeData),this.pBmpSizeData=null),null!=this.pJpegData&&(dt._free(this.pJpegData),this.pJpegData=null),null!=this.pJPEGSizeData&&(dt._free(this.pJPEGSizeData),this.pJPEGSizeData=null),null!==this.pWaterMarkFontData&&(dt._free(this.pWaterMarkFontData),this.pWaterMarkFontData=null),null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null),this.bmpDataCallback=null,this.jpegDataCallback=null,this.CropjpegDataCallback=null,this.CropbmpDataCallback=null,this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.width=0,this.height=0,this.curStatus=1,this.iZoomNum=0,this.decodeQueueSize=0,this.decodeFrameSize=0,this.rawDataFrameInfoBuffer=null,this.displayFrameInfo={},this.rawDataFrameInfo={},this.pcVideoManager=null,this.setTextCanvasFlag=!1,dt._JSPlayM4_CloseStream(this.port))}},{key:"JSPlayM4_FreePort",value:function(){return dt._JSPlayM4_FreePort(this.port)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeFrameType","color: red"),0;var t=1;return 1===this.decodeEngine?(0==e&&1==this.decodeFrameType&&(this.needWaitIFrame=!0),1==e&&(this.needWaitIFrame=!0)):t=dt._JSPlayM4_SetDecodeFrameType(this.port,e),this.decodeFrameType=e,t}},{key:"JSPlayM4_PlaySound",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_PlaySound","color: red"),0):(this.needPlaySound=!0,dt._JSPlayM4_PlaySound(this.port))}},{key:"JSPlayM4_PlaySoundShare",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_PlaySoundShare","color: red"),0):(this.needPlaySoundShare=!0,dt._JSPlayM4_PlaySoundShare(this.port))}},{key:"JSPlayM4_StopSoundShare",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_StopSoundShare","color: red"),0):(this.needPlaySoundShare=!1,dt._JSPlayM4_StopSoundShare(this.port))}},{key:"resizedataURL",value:function(e,t,a){return new Promise((r=l(se().mark((function r(i,n){var s;return se().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(s=document.createElement("img")).onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=t,e.height=a,r.drawImage(this,0,0,t,a);var n=e.toDataURL();i(n)},s.src=e;case 3:case"end":return r.stop()}}),r)}))),function(e,t){return r.apply(this,arguments)}));var r}},{key:"_GetImage",value:function(e,t,a,r,i,n,s){var x=this;if(1===this.decodeEngine&&e.width&&e.height){var o="image/"+t,l=document.createElement("canvas"),_=l.getContext("2d"),h=1,f=1;null!=this.HardDecToJpegCBFun&&1==this.HardToJpegZoomResolutionFlag?(h=this.HardToJpegZoomWidth>i?i:this.HardToJpegZoomWidth,f=this.HardToJpegZoomHeight>n?n:this.HardToJpegZoomHeight):(h=i,f=n),l.width=h,l.height=f,_.drawImage(e,a,r,i,n,0,0,h,f),0==this.jpegDownloadFlag&&0==this.bmpDownloadFlag&&null==this.jpegDataCallback&&null==this.bmpDataCallback&&null==this.HardDecToJpegCBFun||l.toBlob((function(a){if(x.jpegDataCallback||x.bmpDataCallback||x.HardDecToJpegCBFun){var r=new FileReader;r.onload=function(){if(null!=this.jpegDataCallback&&(this.jpegDataCallback(new Uint8Array(r.result),r.result.byteLength),this.jpegDataCallback=null),null!=this.bmpDataCallback&&(this.bmpDataCallback(new Uint8Array(r.result),r.result.byteLength),this.bmpDataCallback=null),null!=this.HardDecToJpegCBFun){var e={};e.jpegData=new Uint8Array(r.result),e.jpegDataSize=r.result.byteLength,e.frameNum=s,this.HardDecToJpegCBFun(e)}}.bind(x),r.readAsArrayBuffer(a)}if(x.jpegDownloadFlag||x.bmpDownloadFlag){var i=window.URL.createObjectURL(a),n=document.createElement("a");n.download=(new Date).getTime()+"."+t,n.href=i,n.dataset.downloadurl=[o,n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n),e.close(),_=null,x.jpegDownloadFlag&&(x.jpegDownloadFlag=!1),x.bmpDownloadFlag&&(x.bmpDownloadFlag=!1)}}),o,this.HardDecToJpegQuality)}}},{key:"_GetImage2",value:function(e,t,a,r,i,n,s,x,o,l){var _=this;setTimeout((function(){if(0!=a&&0!=r){var h=dt._malloc(t);if(null===h)return;dt.writeArrayToMemory(new Uint8Array(e,0,t),h);var f;f=704!=a||288!=r&&240!=r?a*r*4+60:a*r*8+60;var c=dt._malloc(f),u=dt._malloc(4);if(null===c||null===u)return dt._free(h),h=null,null!=c&&(dt._free(c),c=null),void(null!=u&&(dt._free(u),u=null));dt.setValue(u,f,"i32");var d=2;"nv12"===n?d=2:"I420"===n&&(d=3),"jpeg"==i?dt._JSPlayM4_VideoDataToJpeg(_.port,h,t,c,u,a,r,d,s,x,o,l):"bmp"==i&&dt._JSPlayM4_VideoDataToBMP(_.port,h,t,c,u,a,r,d,s,x,o,l);var p=dt.getValue(u,"i32"),m=new Uint8Array(p);m.set(dt.HEAPU8.subarray(c,c+p)),0==s&&0==x&&0==o&&0==l?"jpeg"==i?(null!=_.jpegDataCallback&&_.jpegDataCallback(m,p),_.jpegDownloadFlag&&_._downloadFile(m,"GetImage."+i),_.jpegDataCallback=null,_.jpegDownloadFlag=!1):"bmp"==i&&(null!=_.bmpDataCallback&&_.bmpDataCallback(m,p),_.bmpDownloadFlag&&_._downloadFile(m,"GetImage."+i),_.bmpDataCallback=null,_.bmpDownloadFlag=!1):"jpeg"==i?(null!=_.CropjpegDataCallback&&_.CropjpegDataCallback(m,p),_.CropjpegDownloadFlag&&_._downloadFile(m,"GetCropImage."+i),_.CropjpegDataCallback=null,_.CropjpegDownloadFlag=!1):"bmp"==i&&(null!=_.CropbmpDataCallback&&_.CropbmpDataCallback(m,p),_.CropbmpDownloadFlag&&_._downloadFile(m,"GetCropImage."+i),_.CropbmpDataCallback=null,_.CropbmpDownloadFlag=!1),m=null,null!=c&&(dt._free(c),c=null),null!=u&&(dt._free(u),u=null)}}),0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.jpegDataCallback=e,this.jpegDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetJPEG(),1;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetJPEG","color: red"),0;var a=dt._JSPlayM4_GetFrameInfo(this.port);if(this.width=dt.HEAP32[a+12>>2],this.height=dt.HEAP32[a+16>>2],0!=this.width&&0!=this.height){var r=this.width*this.height*4+60;if((null==this.pJpegData||this.nJPEGDataSize<r)&&(null!=this.pJpegData&&(dt._free(this.pJpegData),this.pJpegData=null),this.nJPEGDataSize=r,this.pJpegData=dt._malloc(this.nJPEGDataSize),null===this.pJpegData))return;null==this.pJPEGSizeData&&(this.pJPEGSizeData=dt._malloc(4));var i=dt._JSPlayM4_GetJPEG(this.port,this.pJpegData,this.nJPEGDataSize,this.pJPEGSizeData);if(1!=i){var n=dt._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==i){var s=dt.getValue(this.pJPEGSizeData,"i32"),x=new Uint8Array(s);x.set(dt.HEAPU8.subarray(this.pJpegData,this.pJpegData+s)),null!=e&&e(x,s),t&&this._downloadFile(x,"GetJPEG.jpeg"),x=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1}return i}return 0}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bmpDataCallback=e,this.bmpDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetBMP(),1;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBMP","color: red"),0;var a=dt._JSPlayM4_GetFrameInfo(this.port);if(this.width=dt.HEAP32[a+12>>2],this.height=dt.HEAP32[a+16>>2],0==this.width||0==this.height)return 0;var r;if(r=704!=this.width||288!=this.height&&240!=this.height?this.width*this.height*4+60:this.width*this.height*8+60,!(null==this.pBmpData||this.nBmpDataSize<r)||(null!=this.pBmpData&&(dt._free(this.pBmpData),this.pBmpData=null),this.nBmpDataSize=r,this.pBmpData=dt._malloc(this.nBmpDataSize),null!==this.pBmpData)){null==this.pBmpSizeData&&(this.pBmpSizeData=dt._malloc(4));var i=dt._JSPlayM4_GetBMP(this.port,this.pBmpData,this.nBmpDataSize,this.pBmpSizeData);if(1!=i){var n=dt._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==i){var s=dt.getValue(this.pBmpSizeData,"i32"),x=new Uint8Array(s);x.set(dt.HEAPU8.subarray(this.pBmpData,this.pBmpData+s)),null!=e&&e(x,s),t&&this._downloadFile(x,"GetBmp.bmp"),x=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1}return 1}}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.CropjpegDataCallback=e,this.CropjpegDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropJPEG(),1;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropJPEG","color: red"),0;var a=dt._JSPlayM4_GetFrameInfo(this.port);if(this.width=dt.HEAP32[a+12>>2],this.height=dt.HEAP32[a+16>>2],0!=this.width&&0!=this.height){var r=this.width*this.height*4+60,i=dt._malloc(r),n=dt._malloc(4),s=this.SetDisRegionBottom,x=this.SetDisRegionLeft,o=this.SetDisRegionRight,l=this.SetDisRegionTop;if(null===i)return;var _=dt._JSPlayM4_GetCropJPEG(this.port,i,r,n,0,0,x,l,o,s);if(1!=_){var h=dt._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+h)}if(1==_){var f=dt.getValue(n,"i32"),c=new Uint8Array(f);c.set(dt.HEAPU8.subarray(i,i+f)),null!=e&&e(c,f),t&&this._downloadFile(c,"GetCropJPEG.jpeg"),c=null,this.CropjpegDataCallback=null,this.CropjpegDownloadFlag=!1}return null!=i&&(dt._free(i),i=null),null!=n&&(dt._free(n),n=null),_}return 0}},{key:"JSPlayM4_GetCropBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.CropbmpDataCallback=e,this.CropbmpDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropBMP(),1;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropBMP","color: red"),0;var a=dt._JSPlayM4_GetFrameInfo(this.port);if(this.width=dt.HEAP32[a+12>>2],this.height=dt.HEAP32[a+16>>2],0==this.width||0==this.height)return 0;var r=this.width*this.height*4+60,i=dt._malloc(r),n=dt._malloc(4),s=this.SetDisRegionBottom,x=this.SetDisRegionLeft,o=this.SetDisRegionRight,l=this.SetDisRegionTop;if(null!==i){var _=dt._JSPlayM4_GetCropBMP(this.port,i,r,n,0,0,x,l,o,s);if(1!=_){var h=dt._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+h)}if(1==_){var f=dt.getValue(n,"i32"),c=new Uint8Array(f);c.set(dt.HEAPU8.subarray(i,i+f)),null!=e&&e(c,f),t&&this._downloadFile(c,"GetCropBmp.bmp"),c=null,this.CropbmpDataCallback=null,this.CropbmpDownloadFlag=!1}return null!=i&&(dt._free(i),i=null),null!=n&&(dt._free(n),n=null),1}}},{key:"JSPlayM4_GetCanvasCapture",value:function(e,t,a){if(this.imageCB=e,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasCapture",capWidth:t,capHeight:a}):null!=this.pcVideoManager&&this.pcVideoManager.GetCanvasCapture(e,t,a),1;var r;return r=0==t||0==a?0:1,dt._JSPlayM4_GetD3DCapture(this.port,r,t,a),1}},{key:"JSPlayM4_StopSound",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_StopSound","color: red"),0):(this.needPlaySound=!1,dt._JSPlayM4_StopSound())}},{key:"JSPlayM4_GetSDKVersion",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSDKVersion","color: red"),0):dt._JSPlayM4_GetSDKVersion()}},{key:"JSPlayM4_GetBuildDate",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBuildDate","color: red"),0):dt._JSPlayM4_GetBuildDate()}},{key:"JSPlayM4_GetLastError",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetLastError","color: red"),0):dt._JSPlayM4_GetLastError(this.port)}},{key:"JSPlayM4_Fast",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Fast","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"fast"})}else null!=this.pcVideoManager&&this.pcVideoManager.fast();var e=dt._JSPlayM4_Fast(this.port);return 1==e&&(this.playSpeed=2*this.playSpeed),e}},{key:"JSPlayM4_Slow",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Slow","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"slow"})}else null!=this.pcVideoManager&&this.pcVideoManager.slow();var e=dt._JSPlayM4_Slow(this.port);return 1==e&&(this.playSpeed=this.playSpeed/2),console.log("this.playSpeed:"+this.playSpeed),e}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetIFrameDecInterval","color: red"),0):1===this.decodeEngine?1:(this.decInterval=e,dt._JSPlayM4_SetIFrameDecInterval(this.port,e))}},{key:"JSPlayM4_Pause",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_Pause","color: red"),0):0===this.streamOpenMode?1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"Pause",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.Pause(e)),dt._JSPlayM4_Pause(this.port,e))}},{key:"JSPlayM4_OneByOne",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOne","color: red"),0;if(0===this.streamOpenMode)return 0;Pt.cmd="onebyone";var e=dt._JSPlayM4_GetSourceBufferRemain(this.port),t=dt._JSPlayM4_GetLastError(this.port);return e<1e3||31==t?(Pt.errorCode=31,Pt.status=!0,this.fn(Pt)):(e>this.HIKPoolSize-1e3||11==t)&&(Pt.errorCode=0,Pt.status=!1,this.fn(Pt)),2!=this.curStatus&&6!=this.curStatus||(this.lastStatus=this.curStatus),this.curStatus=5,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:1}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(1)),dt._JSPlayM4_OneByOne(this.port,this.decodeQueueSize,this.decodeFrameSize)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOneResume","color: red"),0):(Pt.cmd="play",0===this.streamOpenMode?1:(2===this.lastStatus?this.curStatus=2:6===this.lastStatus&&(this.curStatus=6),1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:0}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(0)),dt._JSPlayM4_Play(this.port,this.canvasIDData)))}},{key:"JSPlayM4_SetVolume",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetVolume","color: red"),0):(this.volumeValue=e,dt._JSPlayM4_SetVolume(this.port,e))}},{key:"JSPlayM4_GetVolume",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetVolume","color: red"),0):dt._JSPlayM4_GetVolume(this.port)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,a,r,i){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayRegion","color: red"),0;var x=1,o=t,l=r,_=a,h=i;if(n?(o=0,_=this.canvasWidth,l=0,h=this.canvasHeight,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1):s&&0!==this.iZoomNum&&(o=Math.round(o/this.iRatio_x)+this.stDisplayRect.left,l=Math.round(l/this.iRatio_y)+this.stDisplayRect.top,_=Math.round(_/this.iRatio_x)+this.stDisplayRect.left,h=Math.round(h/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:l,left:o,right:_,bottom:h},1===this.decodeEngine)if(this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=o/this.canvasWidth*this.width,this.SetDisRegionRight=_/this.canvasWidth*this.width,this.SetDisRegionTop=l/this.canvasHeight*this.height,this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetDisplayRegion",sx:this.SetDisRegionLeft,sy:this.SetDisRegionTop,sw:this.SetDisRegionRight-this.SetDisRegionLeft,sh:this.SetDisRegionBottom-this.SetDisRegionTop})}else null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayRegion(this.SetDisRegionLeft,this.SetDisRegionTop,this.SetDisRegionRight-this.SetDisRegionLeft,this.SetDisRegionBottom-this.SetDisRegionTop);else{var f=dt._JSPlayM4_GetFrameInfo(this.port);this.width=dt.HEAP32[f+12>>2],this.height=dt.HEAP32[f+16>>2],this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=o/this.canvasWidth*this.width,this.SetDisRegionRight=_/this.canvasWidth*this.width,this.SetDisRegionTop=l/this.canvasHeight*this.height,x=dt._JSPlayM4_SetDisplayRegion(this.port,this.canvasID,this.SetDisRegionLeft,this.SetDisRegionRight,this.SetDisRegionTop,this.SetDisRegionBottom)}return s&&(this.iRatio_x=this.canvasWidth/(_-o),this.iRatio_y=this.canvasHeight/(h-l),this.iZoomNum++),x}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){if(this.printfFlag=Number(e),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPrintLogFlag","color: red"),0;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetPrintLogFlag",printfFlag:this.printfFlag})}else null!=this.pcVideoManager&&this.pcVideoManager.SetPrintLogFlag(this.printfFlag);return dt._JSPlayM4_SetPrintLogFlag(this.port,e)}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){var a=1;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateData","color: red"),0;if(this.renderPrivateInfo.set(e,t),1===this.decodeEngine){if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"RenderPrivateData",intelType:e,bTrue:t})}else null!=this.pcVideoManager&&(a=this.pcVideoManager.RenderPrivateData(e,t));t&&(a=dt._JSPlayM4_RenderPrivateData(this.port,e,t))}else a=dt._JSPlayM4_RenderPrivateData(this.port,e,t);return a}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,a){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateDataEx","color: red"),0;if(this.renderIntelSubEx.set(e,t),this.renderIntelFlagEx.set(e,a),1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"RenderPrivateDataEx",intelType:e,subType:t,bTrue:a})}else null!=this.pcVideoManager&&this.pcVideoManager.RenderPrivateDataEx(e,t,a);return dt._JSPlayM4_RenderPrivateDataEx(this.port,e,t,a)}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetCanvasSize","color: red"),0;if(e<16||t<16||null===this.canvasID)return 0;if(this.canvasWidth=e,this.canvasHeight=t,1===this.decodeEngine)if(this.hasWebWorker){if(null==this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetCanvasSize",width:e,height:t,FECSubPort:a})}else null!=this.pcVideoManager&&this.pcVideoManager.SetCanvasSize(e,t,a);return dt._JSPlayM4_SetCanvasSize(this.port,e,t,a)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayBuf","color: red"),0):(this.displayBuf=e,this.needSetDisplayBuf=!0,1===this.decodeEngine&&(this.hasWebWorker?null===this.decodeWorker||this.decodeWorker.postMessage({command:"SetDisplayBuf",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayBuf(e)),dt._JSPlayM4_SetDisplayBuf(this.port,e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSourceBufferRemain","color: red"),0):dt._JSPlayM4_GetSourceBufferRemain(this.port)}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBufferValue","color: red"),0):dt._JSPlayM4_GetBufferValue(this.port,e)}},{key:"JSPlayM4_ReversePlay",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_ReversePlay","color: red"),0;if(0===this.streamOpenMode)return 1;if(this.reversePlay=!0,1===this.decodeEngine){if(6==this.curStatus)return 1;if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"NotifyBackPlay",flag:1})}else null!=this.pcVideoManager&&this.pcVideoManager.NotifyBackPlay(1);return dt._JSPlayM4_ResetBuffer(this.port,1),this.needPlaySound&&dt._JSPlayM4_StopSound(),this.needPlaySoundShare&&dt._JSPlayM4_StopSoundShare(this.port),this.curStatus=6,1}var e=dt._JSPlayM4_ReversePlay(this.port);return 1==e&&(this.curStatus=6),e}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeThreadNum","color: red"),0):(this.decodeThreadNum=e,dt._JSPlayM4_SetDecodeThreadNum(this.port,e))}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCanvasSize","color: red"),0):1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasSize"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCanvasSize(),1):dt._JSPlayM4_GetCanvasSize(this.port,e)}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,a){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_DisplayLostFrames","color: red"),0):dt._JSPlayM4_DisplayLostFrames(this.port,e,t,a)}},{key:"JSPlayM4_SetIVSContraBandDrawMode",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetIVSContraBandDrawMode","color: red"),0):dt._JSPlayM4_SetIVSContraBandDrawMode(this.port,e)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetANRParam","color: red"),0):(this.anrParamFlag=e,this.anrParamLevel=t,dt._JSPlayM4_SetANRParam(this.port,e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetResampleValue","color: red"),0):(this.resampleFlag=e,this.resampleRate=t,dt._JSPlayM4_SetResampleValue(this.port,e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAntialias","color: red"),0;var t=1;return this.antialiasFlag=e,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetAntialias",value:e}):null!=this.pcVideoManager&&(t=this.pcVideoManager.SetAntialias(e)):t=dt._JSPlayM4_SetAntialias(this.port,e),t}},{key:"JSPlayM4_SyncToAudio",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SyncToAudio","color: red"),0):(this.syncToAudio=SyncToAudio,dt._JSPlayM4_SyncToAudio(this.port,e))}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioThreadModel","color: red"),0):(this.setAudioThreadModel=e,dt._JSPlayM4_SetAudioThreadModel(this.port,e))}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeERC","color: red"),0):(this.decodeERCLevel=e,dt._JSPlayM4_SetDecodeERC(this.port,e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SkipErrorData","color: red"),0):(this.needSetSkipErrorData=!0,this.skipErrorData=e,dt._JSPlayM4_SkipErrorData(this.port,e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDemuxModel","color: red"),0):(this.needSetDemuxModel=!0,this.setDemuxModelType=e,this.setDemuxModelFlag=t,dt._JSPlayM4_SetDemuxModel(this.port,e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetD3DPostProcess","color: red"),0;var a=1;return this.d3dPostProcessType=e,this.d3dPostProcessValue=t,this.needSetD3DPostProcess=!0,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetD3DPostProcess",ProcessType:e,ProcessValue:t}):null!=this.pcVideoManager&&(a=this.pcVideoManager.SetD3DPostProcess(e,t)):a=dt._JSPlayM4_SetD3DPostProcess(this.port,e,t),a}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){if(!(t&&"function"==typeof t||null===t))return 0;if(this.FFCallBackFun=t,this.FirstFrameCallBackflag=e,null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFirstFrameCallBack","color: red"),0;var a=1;return 0===this.decodeEngine&&(a=dt._JSPlayM4_SetFirstFrameCallBack(this.port,e,this.nUser)),a}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.decCallBackFun=t,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCallBack","color: red"),0):dt._JSPlayM4_SetDecCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetHardDecToJepgCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.HardDecToJpegQuality=e.nHardToJpegQuality,this.HardDecToJpegInterval=e.nHardToJpegInterval,this.HardToJpegZoomWidth=e.nHardToJpegZoomWidth,this.HardToJpegZoomHeight=e.nHardToJpegZoomHeight,this.HardToJpegZoomResolutionFlag=e.nZoomResolutionFlag,this.HardDecToJpegCBFun=t,1):0}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.displayCallBackFun=t,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayCallBack","color: red"),0):(this.JSPlayM4_SetDecCBStream(1),dt._JSPlayM4_SetDisplayCallBack(this.port,e,this.nUser))):0}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){var t=this,a=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetFrameInfoCallBack",value:e}):null!=this.pcVideoManager&&(a=this.pcVideoManager.SetFrameInfoCallBack((function(e){t.displayFrameInfo.port=e.port,t.displayFrameInfo.codecType=e.codecType,t.displayFrameInfo.frameType=e.frameType,t.displayFrameInfo.frameSize=e.frameSize,t.displayFrameInfo.width=e.width,t.displayFrameInfo.height=e.height,t.displayFrameInfo.timeStamp=e.timeStamp,t.displayFrameInfo.frameRate=e.frameRate,t.displayFrameInfo.frameNum=e.frameNum,t.displayFrameInfo.interlace=e.interlace,t.displayFrameInfo.streamEnd=e.streamEnd,t.displayFrameInfo.cropLeft=e.cropLeft,t.displayFrameInfo.cropRight=e.cropRight,t.displayFrameInfo.cropTop=e.cropTop,t.displayFrameInfo.cropBottom=e.cropBottom,t.displayFrameInfo.year=e.year,t.displayFrameInfo.month=e.month,t.displayFrameInfo.week=e.week,t.displayFrameInfo.day=e.day,t.displayFrameInfo.hour=e.hour,t.displayFrameInfo.minute=e.minute,t.displayFrameInfo.second=e.second,t.displayFrameInfo.milliseconds=e.milliseconds}),e));else{if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFrameInfoCallBack","color: red"),0;a=dt._JSPlayM4_SetFrameInfoCallBack(this.port,e)}return a}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCBStream","color: red"),0):dt._JSPlayM4_SetDecCBStream(this.port,e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFrameInfo","color: red"),0;var e={};if(0==this.decodeEngine){var t=dt._JSPlayM4_GetFrameInfo(this.port);e.port=dt.HEAP32[t>>2],e.frameType=dt.HEAP32[t+4>>2],e.frameSize=dt.HEAP32[t+8>>2],e.width=dt.HEAP32[t+12>>2],e.height=dt.HEAP32[t+16>>2],e.timeStamp=dt.HEAP32[t+20>>2],e.frameRate=dt.HEAP32[t+24>>2],e.bitPerSample=dt.HEAP32[t+28>>2],e.samplesPerSec=dt.HEAP32[t+32>>2],e.channel=dt.HEAP32[t+36>>2],e.frameNum=dt.HEAP32[t+40>>2],e.cropLeft=dt.HEAP32[t+44>>2],e.cropRight=dt.HEAP32[t+48>>2],e.cropTop=dt.HEAP32[t+52>>2],e.cropBottom=dt.HEAP32[t+56>>2],e.year=dt.HEAP16[t+60>>1],e.month=dt.HEAP16[t+62>>1],e.week=dt.HEAP16[t+64>>1],e.day=dt.HEAP16[t+66>>1],e.hour=dt.HEAP16[t+68>>1],e.minute=dt.HEAP16[t+70>>1],e.second=dt.HEAP16[t+72>>1],e.milliseconds=dt.HEAP16[t+74>>1],this.width=e.width,this.height=e.height}else e=this.displayFrameInfo;return e}},{key:"JSPlayM4_GetAdditionData",value:function(){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetAdditionData","color: red"),0;var e=null,t=dt._JSPlayM4_GetAdditionData(this.port);return e.dataType=dt.HEAP32[t>>2],e.dataStrVersion=dt.HEAP32[t+4>>2],e.dataTimeStamp=dt.HEAP32[t+8>>2],e.dataLength=dt.HEAP32[t+12>>2],e.pData=dt.HEAP32[t+16>>2],e.additionDataBuffer=new Uint8Array(dataLength),additionDataBuffer.set(dt.HEAPU8.subarray(pData,pData+dataLength)),e}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,a){return this.additionDataType=e,this.additionFlag=t,this.addCBFun=a,this.needSetAdditionDataCB=!0,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAdditionDataCallBack","color: red"),0):a&&"function"==typeof a||null===a?(this.addtionCallBackFun=a,dt._JSPlayM4_SetAdditionDataCallBack(this.port,e,t,this.nUser)):0}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPlayedTimeEx","color: red"),0;if(!(e&&"function"==typeof e||null===e))return 0;if(this.getPlayTimeCallBackFun=e,1===this.decodeEngine){if(this.hasWebWorker)this.decodeWorker.postMessage({command:"GetPlayedTime"});else if(null!=this.pcVideoManager){var t=this.pcVideoManager.GetPlayedTime();this.getPlayTimeCallBackFun&&this.getPlayTimeCallBackFun(t-this.startTimeStamp)}}else{var a=dt._JSPlayM4_GetPlayedTimeEx(this.port);this.getPlayTimeCallBackFun(a)}}},{key:"JSPlayM4_GetFileTime",value:function(){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFileTime","color: red"),0):dt._JSPlayM4_GetFileTime(this.port)}},{key:"JSPlayM4_GetMpOffset",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetMpOffset","color: red"),0;if(!(r&&"function"==typeof r||null===r))return 0;if((this.SetPlayPosCBFun=r,0==t)&&e>1e3*this.JSPlayM4_GetFileTime())return-1;1===this.decodeEngine&&(this.hasWebWorker?(this.decodeWorker.postMessage({command:"needReset",bTrue:!1}),this.decodeWorker.postMessage({command:"SetTargetRelativePos",nRelativePos:e,nPosType:t,nPlayMode:a})):null!=this.pcVideoManager&&(this.pcVideoManager.needReset(!1),this.pcVideoManager.SetTargetRelativePos(e,t,a)));var i=0;return null!=r&&(i=1),dt._JSPlayM4_GetMpOffset(this.port,e,t,a,i,this.nUser)}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetBuffer","color: red"),0):(this.resetBufferType=e,1!==this.decodeEngine||1!=e&&3!=e&&7!=e&&8!=e||(this.hasWebWorker?this.decodeWorker.postMessage({command:"ResetBuffer"}):null!=this.pcVideoManager&&this.pcVideoManager.ResetBuffer()),dt._JSPlayM4_ResetBuffer(this.port,e))}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,a,r,i,n,s){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetGlobalBaseTime","color: red"),0):(this.globalBaseTime={year:e,month:t,day:a,hour:r,min:i,sec:n,ms:s},dt._JSPlayM4_SetGlobalBaseTime(this.port,e,t,a,r,i,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e,t,a){if(this.needSetSecretKey=!0,this.SecretKeyData=t,this.keyType=e,this.pKeyDataLen=a,null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSecretKey","color: red"),0;this.printfFlag>0&&console.log(">>>>>yff>>> JSPlayM4_SetSecretKey keyType:"+e+",keyData:"+t+",this.port:"+this.port);var r=1;if(null==t||void 0===t||""===t)return 0;if(null!=t){var i=this._stringToBytes(t),n=dt._malloc(a);if(null===n)return;var s=dt.HEAPU8.subarray(n,n+a),x=new Uint8Array(a);s.set(x,0),s.set(new Uint8Array(i)),s=null,x=null,r=dt._JSPlayM4_SetSecretKey(this.port,e,n,a),null!==n&&(dt._free(n),n=null)}return r}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return t&&"function"==typeof t||null===t?(this.runtimeCBFun=t,this.runTimeModule=e,this.needSetRunTimeInfoCB=!0,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallBackEx","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetRunTimeInfoCallBack",module:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetRunTimeInfoCallBack(e,t)),dt._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,e,this.nUser))):0}},{key:"JSPlayM4_SetRunTimeInfoCallbackType",value:function(e,t,a){return this.needSetRunTimeInfoCBType=!0,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallbackType","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetRunTimeInfoCallbackType",module:e,type:t,flag:a}):null!=this.pcVideoManager&&this.pcVideoManager.SetRunTimeInfoCallbackType(e,t,a)),dt._JSPlayM4_SetRunTimeInfoCallbackType(this.port,e,t,a))}},{key:"JSPlayM4_SetStreamInfoCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.streamInfoCBFun=t,this.streamInfoType=e,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamInfoCallBack","color: red"),0):dt._JSPlayM4_SetStreamInfoCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetPostMpStreamOffsetCallBack",value:function(e){return this.PostMpStreamOffsetCBFun=e,null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPostMpStreamOffsetCallBack","color: red"),0):dt._JSPlayM4_SetPostMpStreamOffsetCallBack(this.port,this.nUser)}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPlayOrBackSwitchMode","color: red"),0;if(this.playOrBackSwitchMode=e,0==this.decodeEngine)return dt._JSPlayM4_SetPlayOrBackSwitchMode(this.port,e);if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetPlayOrBackSwitchMode",PlayOrBackMode:e})}else{if(null==this.pcVideoManager)return 0;this.pcVideoManager.SetPlayOrBackSwitchMode(e)}return 1}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStretchPlay","color: red"),0;if(t<1||t>16)return 0;if(this.setStretchPlayTime=e,this.setStretchPlaySpeed=t,1==this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetStretchPlay",Stretchtime:e,Stretchspeed:t})}else null!=this.pcVideoManager&&this.pcVideoManager.SetStretchPlay(e,t);return dt._JSPlayM4_SetStretchPlay(this.port,e,t)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAutoSmoothPlay","color: red"),0):(this.autoSmoothPlayModel=e,0==this.decodeEngine?dt._JSPlayM4_SetAutoSmoothPlay(this.port,e):0)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_KeepPlaySpeed","color: red"),0):(this.keepPlaySpeed=e,0==this.decodeEngine?dt._JSPlayM4_KeepPlaySpeed(this.port,e):0)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_IgnoreHeaderAudioDefine","color: red"),0):dt._JSPlayM4_IgnoreHeaderAudioDefine(this.port,e)}},{key:"JSPlayM4_SetSycGroup",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSycGroup","color: red"),0):dt._JSPlayM4_SetSycGroup(this.port,e)}},{key:"JSPlayM4_SetRotateAngle",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRotateAngle","color: red"),0;var t=1;return this.twodRotateAngle=e,this.needSetRotateAngle=!0,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetRotateAngle",rotateValue:e}):null!=this.pcVideoManager&&(t=this.pcVideoManager.SetRotateAngle(e)):t=dt._JSPlayM4_SetRotateAngle(this.port,e),t}},{key:"JSPlayM4_SetPanoramaDisplayEffect",value:function(e){var t=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"SetPanoramaDisplayEffect",DisplayEffect:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.SetPanoramaDisplayEffect(e):0:t=dt._JSPlayM4_SetPanoramaDisplayEffect(this.port,e),t}},{key:"JSPlayM4_SetPanoramaSphereViewParam",value:function(e,t){var a=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"SetPanoramaSphereViewParam",ViewParamType:e,fValue:t}):a=0:a=null!=this.pcVideoManager?this.pcVideoManager.SetPanoramaSphereViewParam(e,t):0:a=dt._JSPlayM4_SetPanoramaSphereViewParam(this.port,e,t),a}},{key:"JSPlayM4_GetPanoramaSphereViewParam",value:function(e,t){var a=1;this.GetPanoramaSphereViewParamCB=t;var r={fValue:-1};return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"GetPanoramaSphereViewParam",ViewParamType:e}):a=0:null!=this.pcVideoManager?(a=this.pcVideoManager.GetPanoramaSphereViewParam(e,r),null!=this.GetPanoramaSphereViewParamCB&&this.GetPanoramaSphereViewParamCB(r)):a=0:(r.fValue=dt._JSPlayM4_GetPanoramaSphereViewParam(this.port,e),a=-1==r.fValue?0:1,null!=this.GetPanoramaSphereViewParamCB&&this.GetPanoramaSphereViewParamCB(r)),a}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(console.log(" JSPlayM4_FEC_SetCanvasID canvasID :"+e),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetCanvasID","color: red"),0;this.FECCanvasID=e;var a=1;if(null!=e&&""!=e)if(this.FECcanvasIDArray=e.split(","),1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetCanvasID",canvasID:e}):null!=this.pcVideoManager?a=this.pcVideoManager.FEC_SetCanvasID(e):console.info("%c JSPlayM4_FEC_SetCanvasID this.pcVideoManager is null","color: red");else{for(var r="",i=0;i<this.FECcanvasIDArray.length;i++)i==this.FECcanvasIDArray.length-1?r+="#"+this.FECcanvasIDArray[i]:r+="#"+this.FECcanvasIDArray[i]+",";if(0!=this.FECcanvasIDArray.length&&t)for(var n=0;n<this.FECcanvasIDArray.length;n++){var s=document.getElementById(this.FECcanvasIDArray[n]);if(s){var x=s.cloneNode(!0);s.parentNode.replaceChild(x,s)}}var o=this._stringToBytes(r),l=2*r.length;if(this.pFECTotalCanvasIDData=dt._malloc(l),null===this.pFECTotalCanvasIDData)return 0;var _=dt.HEAPU8.subarray(this.pFECTotalCanvasIDData,this.pFECTotalCanvasIDData+l),h=new Uint8Array(l);_.set(h,0),_.set(new Uint8Array(o)),_=null,h=null,a=dt._JSPlayM4_FEC_SetCanvasID(this.port,this.pFECTotalCanvasIDData)}else console.log(" JSPlayM4_FEC_SetCanvasID canvasID is null :"+e),a=0;return a}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,a){if(this.printfFlag>0&&console.log("JSPlayM4_FEC_ResetCorrectType 1 decodeEngine:"+this.decodeEngine+",hasWebWorker:"+this.hasWebWorker+",fishSubPort:"+e+",placeType:"+t+",correctType:"+a),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_ResetCorrectType","color: red"),0;this.FECPlaceType=t,this.FECCorrectType=a;var r=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECResetCorrectType",fishSubPort:e,placeType:t,correctType:a}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_ResetCorrectType(e,t,a):0:r=dt._JSPlayM4_FEC_ResetCorrectType(this.port,e,t,a),r}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_GetPort this.decodeEngine："+this.decodeEngine+",placeType:"+e+",correctType:"+t),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPort","color: red"),0;var r=-1;return this.FECGetPortCB=a,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPort",placeType:e,correctType:t}):r=-1:(null!=this.pcVideoManager?((r=this.pcVideoManager.FEC_GetPort(e,t))<1||r>16||null==r)&&(r=-1):r=-1,null!=this.FECGetPortCB&&this.FECGetPortCB(r)):(((r=dt._JSPlayM4_FEC_GetPort(this.port,e,t))<1||r>16||null==r)&&(r=-1),""!=self.FECCanvasID&&r>3&&bt>70&&(console.info("%cJSPlayM4_FEC_GetPort fishport max is 4","color: red"),r=-1),null!=this.FECGetPortCB&&this.FECGetPortCB(r)),r}},{key:"JSPlayM4_FEC_Enable",value:function(e){if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_Enable this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Enable","color: red"),0;var t=1;return 0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECEnable",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_Enable(e):0:t=dt._JSPlayM4_FEC_Enable(this.port,e),t}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t.upDateType+",param2d.fPTZParam.fPTZPositionX:"+t.fPTZParam.fPTZPositionX+",param2d.fPTZParam.fPTZPositionY:"+t.fPTZParam.fPTZPositionY),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetParam","color: red"),0;var a=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetParam",fishSubPort:e,param2d:t}):a=0:a=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetParam(e,t):0;else{var r=dt._JSPlayM4_GetFishEye2DParam();null!=t.upDateType&&(dt.HEAP32[r>>2]=t.upDateType),null!=t.fPTZParam&&null!=t.fPTZParam.fPTZPositionX&&null!=t.fPTZParam.fPTZPositionY&&(dt.HEAPF32[r+8>>2]=t.fPTZParam.fPTZPositionX,dt.HEAPF32[r+12>>2]=t.fPTZParam.fPTZPositionY),null!=t.fPTZParam&&(dt.HEAPF32[r+32>>2]=t.fPTZZoom),null!=t.fValue&&(dt.HEAPF32[r+36>>2]=t.fValue),null!=t.stPTZColor&&(null!=t.stPTZColor.nR&&(dt.HEAP8[r+40>>1]=t.stPTZColor.nR),null!=t.stPTZColor.nG&&(dt.HEAP8[r+41>>1]=t.stPTZColor.nG),null!=t.stPTZColor.nB&&(dt.HEAP8[r+42>>1]=t.stPTZColor.nB),null!=t.stPTZColor.nAlpha&&(dt.HEAP8[r+43>>1]=t.stPTZColor.nAlpha)),a=dt._JSPlayM4_FEC_SetParam(this.port,e)}return a}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetParam","color: red"),0;var a={fRXLeft:0,fRXRight:0,fRYTop:0,fRYBottom:0,bBlack:0,bCut:0,nFishParamType:0,fAngle:0,fZoom:0,fPTZX:0,fPTZY:0,emCorrectType:0};if(this.FECParamCB=t,1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECGetParam",fishSubPort:e}):null!=this.pcVideoManager&&(this.pcVideoManager.FEC_GetParam(e,a),null!=this.FECParamCB&&this.FECParamCB(a));else{var r=dt._JSPlayM4_FEC_GetParam(this.port,e);a.bBlack=0,a.fPTZX=dt.HEAPF32[r+8>>2],a.fPTZY=dt.HEAPF32[r+12>>2],a.fRXLeft=dt.HEAPF32[r+16>>2],a.fRXRight=dt.HEAPF32[r+20>>2],a.fRYTop=dt.HEAPF32[r+24>>2],a.fRYBottom=dt.HEAPF32[r+28>>2],a.fZoom=dt.HEAPF32[r+32>>2],a.fAngle=dt.HEAPF32[r+36>>2],a.bCut=dt.HEAPF32[r+63>>2],a.nFishParamType=dt.HEAPF32[r+67>>2],null!=this.FECParamCB&&this.FECParamCB(a)}return 1}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,a){if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_SetViewParam this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t+",fValue:"+a),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetViewParam","color: red"),0;var r=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetViewParam",fishSubPort:e,upDateType:t,fValue:a}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetViewParam(e,t,a):0:r=dt._JSPlayM4_FEC_SetViewParam(this.port,e,t,a),r}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,a){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetViewParam","color: red"),0;var r=1;this.FECViewParamCB=a;var i={fValue:-1};if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetViewParam",fishSubPort:e,upDateType:t}):r=0:null!=this.pcVideoManager?(r=this.pcVideoManager.FEC_GetViewParam(e,t,i),null!=this.FECViewParamCB&&this.FECViewParamCB(i)):r=0;else{var n=dt._JSPlayM4_GetViewParam(this.port,e,t);i.fValue=n,null!=this.FECViewParamCB&&this.FECViewParamCB(i)}return r}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetWnd","color: red"),0;var a=1;if(0==e)console.log("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else if(null!=t)if(1===this.decodeEngine){var r=document.getElementById(t);if(this.hasWebWorker){var i=r.transferControlToOffscreen();null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetWnd",fishSubPort:e,offscrrenCnv:i},[i]):a=0}else a=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetWnd(e,r):0}else{var n=null;if(null!=t){var s=this._stringToBytes("#"+t),x=2*(t.length+1);n=dt._malloc(x);var o=dt.HEAPU8.subarray(n,n+x),l=new Uint8Array(x);o.set(l,0),o.set(new Uint8Array(s)),o=null,l=null}a=dt._JSPlayM4_FEC_SetWnd(this.port,e,n),null!=n&&(dt._free(n),n=null)}else console.log(">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),a=0;return a}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=1;return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Disable","color: red"),0):(0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDisable",fishSubPort:e,clearFECCanvas:t,clearContext:a}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_Disable(e,t,a):0:r=dt._JSPlayM4_FEC_Disable(this.port,e,t,a),r)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_DelPort this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_DelPort","color: red"),0;var t=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDelPort",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_DelPort(e):0:t=dt._JSPlayM4_FEC_DelPort(this.port,e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(this.printfFlag>0&&console.log(">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",left:"+r.left+",right:"+r.right+",top:"+r.top+",bottom:"+r.bottom),null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetDisplayRegion","color: red"),0;var x=1,o=r.left,l=r.right,_=r.top,h=r.bottom;if("number"!=typeof o||"number"!=typeof l||"number"!=typeof h||"number"!=typeof _)return console.log("param is not number"),0;if(n){if(o<0||l<0||_<0||h<0)return 0;if(l-o<16||h-_<16||l-o>this.canvasWidth||h-_>this.canvasHeight)return 0;s&&0!==this.iFECZoomNum&&(o=Math.round(o/this.iFECRatio_x)+this.stFECDisplayRect.left,_=Math.round(_/this.iFECRatio_y)+this.stFECDisplayRect.top,l=Math.round(l/this.iFECRatio_x)+this.stFECDisplayRect.left,h=Math.round(h/this.iFECRatio_y)+this.stFECDisplayRect.top)}else o=0,l=this.canvasWidth,_=0,h=this.canvasHeight,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1;if(this.stFECDisplayRect={top:_,left:o,right:l,bottom:h},1===this.decodeEngine){var f=o/this.canvasWidth*this.width,c=l/this.canvasWidth*this.width,u=_/this.canvasHeight*this.height,d=h/this.canvasHeight*this.height;this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetDisplayRegion",fishSubPort:e,type:t,regionNum:a,sx:f,sy:u,sw:c-f,sh:d-u}):x=0:x=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetDisplayRegion(e,t,a,f,u,c-f,d-u):0}else if(null!==dt){var p=o/this.canvasWidth*1e3,m=l/this.canvasWidth*1e3,S=_/this.canvasHeight*1e3,R=h/this.canvasHeight*1e3;x=n?dt._JSPlayM4_FEC_SetDisplayRegion(this.port,e,t,a,p,m,S,R,i,n):dt._JSPlayM4_FEC_SetDisplayRegion(this.port,e,0,0,0,0,0,0,null,n)}else x=0;return s&&(this.iFECRatio_x=this.canvasWidth/(l-o),this.iFECRatio_y=this.canvasHeight/(h-_),this.iFECZoomNum++),x}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var a=1;return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetBackCilling","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetBackCilling",fishSubPort:e,bValue:t}):a=0:a=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetBackCilling(e,t):0:a=dt._JSPlayM4_FEC_SetBackCilling(this.port,e,t),a)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPTZPort","color: red"),0;var r=-1;return this.FECGetPTZPortCB=a,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPTZPort",subport:0,fPositionX:e,fPositionY:t}):r=0:null!=this.pcVideoManager?(((r=this.pcVideoManager.FEC_GetPTZPort(0,e,t))<0||r>31||null==r)&&(r=-1),null!=this.FECGetPTZPortCB&&this.FECGetPTZPortCB(r)):r=-1:console.info("%c softDecoder not support JSPlayM4_FEC_GetPTZPort","color: red"),r}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetPTZDisplayMode","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECSetPTZDisplayMode",ptzMode:e}):null!=this.pcVideoManager&&this.pcVideoManager.FEC_SetPTZDisplayMode(e)),1)}},{key:"JSPlayM4_FEC_Capture",value:function(e,t){return this.FECImageCB=t,1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"FECCapture",subport:e}):null!=this.pcVideoManager&&this.pcVideoManager.FEC_Capture(e,t),1):(dt._JSPlayM4_FEC_Capture(this.port,e),1)}},{key:"JSPlayM4_FEC_PTZ2Window",value:function(e,t,a,r){return 1}},{key:"JSPlayM4_FEC_PTZ2Window2",value:function(e,t,a){return 1}},{key:"_SetTextCanvas",value:function(){if(1===this.decodeEngine){if(null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null),null==this.textCanvas&&(this.textCanvas=document.createElement("canvas")),this.hasWebWorker){var e=this.textCanvas.transferControlToOffscreen();this.decodeWorker.postMessage({command:"SetTextCanvas",textoffscreenCanvas:e},[e])}else null!=this.pcVideoManager&&this.pcVideoManager.SetTextCanvas(this.textCanvas);this.setTextCanvasFlag=!0}return 1}},{key:"JSPlayM4_InputPrivateInfo",value:function(e,t,a){this.setTextCanvasFlag||this._SetTextCanvas();var r={};r.linesNum=dt.HEAP32[e>>2],r.absTimeStamp=dt.HEAP32[e+4>>2],r.stDrawLinesArray=[];for(var i=0;i<r.linesNum;i++){r.stDrawLinesArray[i]={},r.stDrawLinesArray[i].vertex_num=dt.HEAP32[e+8+136*i>>2],r.stDrawLinesArray[i].lineWidth=dt.HEAP32[e+12+136*i>>2],r.stDrawLinesArray[i].bFill=dt.HEAP32[e+16+136*i>>2],r.stDrawLinesArray[i].bLoop=dt.HEAP32[e+20+136*i>>2],r.stDrawLinesArray[i].dwMatchType=dt.HEAP32[e+24+136*i>>2],r.stDrawLinesArray[i].dwIntelFlag=dt.HEAP32[e+28+136*i>>2],r.stDrawLinesArray[i].dwSubIntelFlag=dt.HEAP32[e+32+136*i>>2],r.stDrawLinesArray[i].color={},r.stDrawLinesArray[i].color.R=dt.HEAPF32[e+36+136*i>>2],r.stDrawLinesArray[i].color.G=dt.HEAPF32[e+40+136*i>>2],r.stDrawLinesArray[i].color.B=dt.HEAPF32[e+44+136*i>>2],r.stDrawLinesArray[i].color.A=dt.HEAPF32[e+48+136*i>>2],r.stDrawLinesArray[i].stPoint=[];for(var n=0;n<r.stDrawLinesArray[i].vertex_num;n++)r.stDrawLinesArray[i].stPoint[n]={},r.stDrawLinesArray[i].stPoint[n].x=dt.HEAPF32[e+52+136*i+8*n>>2],r.stDrawLinesArray[i].stPoint[n].y=dt.HEAPF32[e+56+136*i+8*n>>2];r.stDrawLinesArray[i].dwFillPicID=dt.HEAP32[e+132+136*i>>2],r.stDrawLinesArray[i].dwEventID=dt.HEAP32[e+136+136*i>>2],r.stDrawLinesArray[i].dwMosaictype=dt.HEAP32[e+140+136*i>>2]}var s={};s.nFontsNum=dt.HEAP32[t>>2],s.absTimeStamp=dt.HEAP32[t+4>>2],s.stDrawFontsArray=[];for(var x=0;x<s.nFontsNum;x++){s.stDrawFontsArray[x]={},s.stDrawFontsArray[x].nFontSizeW=dt.HEAP32[t+8+80*x>>2],s.stDrawFontsArray[x].nFontSizeH=dt.HEAP32[t+12+80*x>>2],s.stDrawFontsArray[x].dwMatchType=dt.HEAP32[t+16+80*x>>2],s.stDrawFontsArray[x].dwIntelFlag=dt.HEAP32[t+20+80*x>>2],s.stDrawFontsArray[x].dwSubIntelFlag=dt.HEAP32[t+24+80*x>>2],s.stDrawFontsArray[x].color={},s.stDrawFontsArray[x].color.R=dt.HEAPF32[t+28+80*x>>2],s.stDrawFontsArray[x].color.G=dt.HEAPF32[t+32+80*x>>2],s.stDrawFontsArray[x].color.B=dt.HEAPF32[t+36+80*x>>2],s.stDrawFontsArray[x].color.A=dt.HEAPF32[t+40+80*x>>2],s.stDrawFontsArray[x].stPoint={},s.stDrawFontsArray[x].stPoint.x=dt.HEAPF32[t+44+80*x>>2],s.stDrawFontsArray[x].stPoint.y=dt.HEAPF32[t+48+80*x>>2],s.stDrawFontsArray[x].NeedClearNormalPos=dt.HEAP32[t+60+80*x>>2],s.stDrawFontsArray[x].bBackGround=dt.HEAP32[t+64+80*x>>2],s.stDrawFontsArray[x].BGcolor={},s.stDrawFontsArray[x].BGcolor.R=dt.HEAPF32[t+68+80*x>>2],s.stDrawFontsArray[x].BGcolor.G=dt.HEAPF32[t+72+80*x>>2],s.stDrawFontsArray[x].BGcolor.B=dt.HEAPF32[t+76+80*x>>2],s.stDrawFontsArray[x].BGcolor.A=dt.HEAPF32[t+80+80*x>>2],s.stDrawFontsArray[x].dwEventID=dt.HEAP32[t+84+80*x>>2];var o=dt.HEAP32[t+52+80*x>>2],l=dt.HEAP32[t+56+80*x>>2],_=new Uint8Array(4*l);_.set(dt.HEAP8.subarray(o,o+4*l));for(var h=new Uint32Array(l),f=0;f<l;f++)h[f]=_[4*f]|_[4*f+1]<<8|_[4*f+2]<<16|_[4*f+3]<<24;for(var c="",u=0;u<h.length;u++)0!==h[u]&&(c+=String.fromCharCode(h[u]));s.stDrawFontsArray[x].fontString=c}var d={};d.absTimeStamp=dt.HEAP32[a>>2],d.nWidth=dt.HEAP32[a+4>>2],d.nHeight=dt.HEAP32[a+8>>2],d.pstRect={},d.pstRect.fTop=dt.HEAPF32[a+12>>2],d.pstRect.fBottom=dt.HEAPF32[a+16>>2],d.pstRect.fLeft=dt.HEAPF32[a+20>>2],d.pstRect.fRight=dt.HEAPF32[a+24>>2],d.nPixelFormat=dt.HEAP32[a+28>>2],d.fAlpha=dt.HEAPF32[a+32>>2],d.nPixelFormat;var p=dt.HEAP32[a+36>>2],m=dt.HEAP32[a+40>>2],S=new Uint8Array(m);return S.set(dt.HEAPU8.subarray(p,p+m)),d.picImageData=S,d.PicID=dt.HEAP32[a+44>>2],1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"InputPrivateInfo",linesInfo:r,fontInfo:s,ImageInfo:d}):null!=this.pcVideoManager&&this.pcVideoManager.InputPrivateInfo(r,s,d)),1}},{key:"JSPlayM4_SelectIntelInfoFeatureToDraw",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SelectIntelInfoFeatureToDraw","color: red"),0;if(null==e)return 0;var t=1;if(2==e.nMode){if(1!==this.decodeEngine)return 0;this.hasWebWorker?this.decodeWorker.postMessage({command:"SelectIntelInfoFeatureToDraw",IntelInfoParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SelectIntelInfoFeatureToDraw(e)}else{var a=dt._JSPlayM4_GetNeedDrawIntelInfoStruct();dt.HEAP32[a+3840>>2]=e.NodeNumber;for(var r=0;r<e.NodeNumber;r++)dt.HEAPU32[a+24*r>>2]=e.pIntelInfoNode[r].nID,dt.HEAPU8[a+4+24*r]=e.pIntelInfoNode[r].nType;t=dt._JSPlayM4_SelectIntelInfoFeatureToDraw(this.port,e.bTrue,e.nMode)}return t}},{key:"JSPlayM4_SetMosaicType",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetMosaicType","color: red"),0;var t=1;if(this.pMosaicParam=e,1===this.decodeEngine)this.hasWebWorker?this.decodeWorker.postMessage({command:"SetMosaicType",MosaicParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetMosaicType(e);else{var a=dt._JSPlayM4_GetMosaicTypeConfigStruct();dt.HEAPU8[a]=e.nMosaicType,dt.HEAPU8[a+1]=e.pstMosaicColor.fMosaicColorR,dt.HEAPU8[a+2]=e.pstMosaicColor.fMosaicColorG,dt.HEAPU8[a+3]=e.pstMosaicColor.fMosaicColorB,dt.HEAPU8[a+4]=e.pstMosaicColor.fMosaicColorA,dt.HEAPU8[a+5]=e.nMosaicSize,t=dt._JSPlayM4_SetMosaicType(this.port)}return t}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){if(null===dt)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkFont","color: red"),0;if(this.printfFlag>0){console.log("%cJSPlayerInterfaceV3.js JSPlayM4_SetWaterMarkFont: port:"+this.port+",string:"+e.pFontString+",fontcolr,fR:"+e.pstFontColor.fR+",fG:"+e.pstFontColor.fG+",fB:"+e.pstFontColor.fB+",fA:"+e.pstFontColor.fA+",fontSizeWidth:"+e.pstFontSize.nFontWidth+",fontSizeHeight:"+e.pstFontSize.nFontHeight+",rotateAngle:"+e.pstFontRotate.fRotateAngle+",fontFamily:"+e.pFontFamily,"color:red");var t=document.getElementById(this.canvasID).width,a=document.getElementById(this.canvasID).height;console.log("canvasWidht:"+t+",canvasHeight:"+a),console.log("fullScreen:"+e.pstFontRotate.fFillFullScreen+",rowNum:"+e.pstFontNumber.nRowNumber+",colNum:"+e.pstFontNumber.nColNumber+",space:"+e.pSpace+",fontAlign:"+e.nFontAlign+",colorAdapt:"+e.nColorAdapt),console.log("adaptMode:"+e.pstCanvasAdapt.nCanvasAdaptMode+",baseWidth:"+e.pstCanvasAdapt.nBaseCanvasWidth+",baseHeight:"+e.pstCanvasAdapt.nBaseCanvasHeight+",rowSpace:"+e.pstCanvasAdapt.nRowSpace+",colSpace:"+e.pstCanvasAdapt.nColSpace+",ntotalColSpace:"+e.pstCanvasAdapt.ntotalColSpace+",ntotalRowSpace:"+e.pstCanvasAdapt.ntotalRowSpace)}var r=1;if(this.pFontParam=e,1===this.decodeEngine)this.setTextCanvasFlag||this._SetTextCanvas(),this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkFont",fontParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkFont(e);else if(null==e){var i=dt._JSPlayM4_GetWaterMarkFontStruct();dt.HEAP32[i+1800-4+44>>2]=0,dt.HEAP32[i+1800-4+48>>2]=0,dt._JSPlayM4_SetWaterMarkFontString(0,null),r=dt._JSPlayM4_SetWaterMarkFont(this.port)}else{for(var n=0;n<e.pFontString.length;n++){var s=this._stringToBytes(e.pFontString[n]),x=2*e.pFontString[n].length;if(0==x&&(x=1),(null==this.pWaterMarkFontData||x>this.nWaterMarkFontLen)&&(null!==this.pWaterMarkFontData&&(dt._free(this.pWaterMarkFontData),this.pWaterMarkFontData=null),this.pWaterMarkFontData=dt._malloc(x),this.nWaterMarkFontLen=x),null===this.pWaterMarkFontData)return;var o=dt.HEAPU8.subarray(this.pWaterMarkFontData,this.pWaterMarkFontData+x),l=new Uint8Array(x);o.set(l,0),o.set(new Uint8Array(s)),o=null,l=null,dt._JSPlayM4_SetWaterMarkFontString(n,this.pWaterMarkFontData)}var _=dt._JSPlayM4_GetWaterMarkFontStruct();dt.HEAPF32[_+1800-4+4>>2]=e.pSpace,dt.HEAPU32[_+1800-4+8>>2]=e.pFontString.length,dt.HEAPU32[_+1800-4+12>>2]=e.nFontAlign,dt.HEAPU32[_+1800-4+16>>2]=e.nColorAdapt,dt.HEAPF32[_+1800-4+20>>2]=e.pstStartPos.fX,dt.HEAPF32[_+1800-4+24>>2]=e.pstStartPos.fY,dt.HEAPF32[_+1800-4+28>>2]=e.pstFontColor.fR,dt.HEAPF32[_+1800-4+32>>2]=e.pstFontColor.fG,dt.HEAPF32[_+1800-4+36>>2]=e.pstFontColor.fB,dt.HEAPF32[_+1800-4+40>>2]=e.pstFontColor.fA,dt.HEAP32[_+1800-4+44>>2]=e.pstFontSize.nFontWidth,dt.HEAP32[_+1800-4+48>>2]=e.pstFontSize.nFontHeight,dt.HEAPF32[_+1800-4+52>>2]=e.pstFontRotate.fRotateAngle,dt.HEAP32[_+1800-4+56>>2]=e.pstFontRotate.fFillFullScreen,dt.HEAP32[_+1800-4+60>>2]=e.pstFontNumber.nRowNumber,dt.HEAP32[_+1800-4+64>>2]=e.pstFontNumber.nColNumber,dt.HEAP32[_+1800-4+68>>2]=e.pstCanvasAdapt.nCanvasAdaptMode,dt.HEAP32[_+1800-4+72>>2]=e.pstCanvasAdapt.nRowSpace,dt.HEAP32[_+1800-4+76>>2]=e.pstCanvasAdapt.nColSpace,dt.HEAP32[_+1800-4+80>>2]=e.pstCanvasAdapt.nBaseCanvasWidth,dt.HEAP32[_+1800-4+84>>2]=e.pstCanvasAdapt.nBaseCanvasHeight,r=dt._JSPlayM4_SetWaterMarkFont(this.port)}return r}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkImage","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkImage",pImageData:e.pImageData,pImageType:e.pImageType,pstRectPos:e.pstRectPos,fAlpha:e.fAlpha},[e.pImageData]):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkImage(e):console.log("%c1>soft decode not support SetWaterMarkImage,","color: red"),1)}},{key:"JSPlayM4_InitEncoder",value:function(e,t){if(1!==this.decodeEngine)return console.log("%conly hard decoder support recoder,soft decoder not support (20240801)","color: red"),0;if(t.recoderAudioAnyWhere?(this.recoderAudioAnyWhere=!0,dt._JSPlayM4_SetRecoderAudio(this.port,1)):dt._JSPlayM4_SetRecoderAudio(this.port,0),this.needPlaySound||this.recoderAudioAnyWhere){var a=48e3;44100==t.sampleRate&&(a=t.sampleRate),this.JSPlayM4_SetResampleValue(!0,a)}return this.hasWebWorker?this.decodeWorker.postMessage({command:"InitEncoder",videoInfo:e,audioInfo:t}):null!=this.pcVideoManager&&this.pcVideoManager.InitEncoder(e,t),1}},{key:"JSPlayM4_StartEncode",value:function(e,t){var a=this;return 1!==this.decodeEngine?(console.log("%conly hard decoder support recoder,soft decoder not support (20240801)","color: red"),0):(this.recoderVideoDataCBFun=e,this.recoderAudioDataCBFun=t,"undefined"==typeof VideoEncoder?(console.log("%cbrowser or Graphics car not support videoEncode ","color: red"),0):(this.hasWebWorker?this.decodeWorker.postMessage({command:"StartVideoEncode"}):null!=this.pcVideoManager&&this.pcVideoManager.StartVideoEncode(e),(this.needPlaySound||this.recoderAudioAnyWhere)&&("undefined"==typeof AudioEncoder?console.log("%cbrowser or Graphics car not support audioEncode ","color: red"):(this.JSPlayM4_SetDecCBStream(2),dt._JSPlayM4_SetDecOrDisplayCallbackType(this.port,2,1),dt._JSPlayM4_SetDisplayCallBack(this.port,1,this.nUser),this.hasWebWorker?this.decodeWorker.postMessage({command:"StartAudioEncode"}):null!=this.pcVideoManager&&this.pcVideoManager.StartAudioEncode(t),this.ResamplePCMCallBack=function(e){101==e.type&&(a.hasWebWorker?a.decodeWorker.postMessage({command:"InputPCMToEncode",PCMData:e.yuvData,timeStamp:e.timeStamp},[e.yuvData.buffer]):null!=a.pcVideoManager&&a.pcVideoManager.InputPCMToEncode(e.yuvData,e.timeStamp))})),1))}},{key:"JSPlayM4_StopEncode",value:function(){return 1!==this.decodeEngine?(console.log("%conly hard decoder support recoder,soft decoder not support (20240801)","color: red"),0):(this.recoderVideoDataCBFun=null,this.recoderAudioDataCBFun=null,this.ResamplePCMCallBack=null,this.recoderAudioAnyWhere=!1,dt._JSPlayM4_SetRecoderAudio(this.port,0),dt._JSPlayM4_SetDisplayCallBack(this.port,0,this.nUser),this.hasWebWorker?this.decodeWorker.postMessage({command:"StopEncode"}):null!=this.pcVideoManager&&this.pcVideoManager.StopEncode(),1)}},{key:"JSPlayM4_IsVisible",value:function(e){return null===dt?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_IsVisible","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"IsVisible",visibility:e}):null!=this.pcVideoManager&&this.pcVideoManager.IsVisible(e):dt._JSPlayM4_IsVisible(this.port,e),1)}},{key:"_stringToBytes",value:function(e){if("string"!=typeof e||null==e)return console.log("%c_stringToBytes str:"+e,"color: red"),0;for(var t,a,r=[],i=0;i<e.length;i++){t=e.charCodeAt(i),a=[];do{a.push(255&t),t>>=8}while(t);r=r.concat(a.reverse())}return r}},{key:"_downloadFile",value:function(e,t){var a=e;i(e,Blob)||i(e,File)||(a=new Blob([e]));var r=window.URL.createObjectURL(a),n=window.document.createElement("a");n.href=r,n.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),n.dispatchEvent(s)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,a=this.aTotalBuffer.length;console.log("totalLength:"+a);for(var r=0,i=t.length;r<i;r++)this.aTotalBuffer[a+r]=t[r];this.iFrameNum++,t=null,console.log("downloadRTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=600){console.log("download600RawData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Raw600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}},{key:"downloadAudioPCMData",value:function(e){if(this.bWriteAudioPCMData){for(var t=e,a=this.audioPCMBuffer.length,r=0,i=t.length;r<i;r++)this.audioPCMBuffer[a+r]=t[r];this.iAudioPCMFrameNum++,t=null,console.log("download ANR Decode AudioData FrameNum:"+this.iAudioPCMFrameNum)}if(this.bWriteAudioPCMData&&this.iAudioPCMFrameNum>=WRITE_PCM_NUM){console.log("download"+WRITE_PCM_NUM+"this.audioPCMBuffer");var n=new Uint8Array(this.audioPCMBuffer);this._downloadFile(n,"AudioANR.data"),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.bWriteAudioPCMData=!1,this.iAudioPCMFrameNum=0,n=null}}},{key:"IsChromeVersion64Bit",value:function(){var e=navigator.userAgent;if(e.indexOf("Chrome")>-1){var t=e.match(/Chrome\/(\d+)/);if(t&&t[1]){var a=t[1];return e.indexOf("Mac")>-1?e.indexOf("Intel")>-1||a>61:e.indexOf("Windows")>-1?e.indexOf("Win64")>-1||e.indexOf("x64")>-1||(e.indexOf("x86"),!1):e.indexOf("Linux")>-1&&(e.indexOf("x86_64")>-1||e.indexOf("x64")>-1||(e.indexOf("i686")>-1||e.indexOf("x86"),!1))}return!1}return!1}},{key:"getwasmMemory",value:function(){var e,t={},a=navigator.userAgent.toLowerCase();if((e=a.match(/rv:([\d.]+)\) like gecko/))||(e=a.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=a.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=a.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=a.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=a.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=a.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),this.initialMemory=8192,t.chrome){var r=this.IsChromeVersion64Bit();this.maximumMemory=1==r?32768:16368}else if(t.safari){var i=t.safari,n=i.indexOf(".");Number(i.substring(0,n)),this.maximumMemory=16368,console.info("%c1>your safaribrowserbit  maximumMemory:%d","color: green",64*this.maximumMemory/1024)}else this.maximumMemory=16368,console.info("%c1>your browserbit is 32 and maximumMemory:%d","color: green",64*this.maximumMemory/1024);return this.isMobileDevice()&&(this.initialMemory=2048,this.maximumMemory=4096,console.info("%c1>your browser is mobileDevice maximumMemory:%d","color: green",64*this.maximumMemory/1024)),-1}},{key:"isMobileDevice",value:function(){var e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(e),a=window.innerWidth<=768,r="ontouchstart"in window||navigator.maxTouchPoints>0;return t||a&&r}}]),a}();window.JSPlayM4_AdditionDataCBFun=function(e,t,a){if(null!=ut[a][e]){var r={};r.dataType=dt.HEAP32[t>>2],r.dataStrVersion=dt.HEAP32[t+4>>2],r.dataTimeStamp=dt.HEAP32[t+8>>2],r.dataLength=dt.HEAP32[t+12>>2],r.pData=dt.HEAP32[t+16>>2],ut[a][e].additionDataBufferSize<r.dataLength&&(null!==ut[a][e].additionDataBuffer&&(dt._free(ut[a][e].additionDataBuffer),ut[a][e].additionDataBuffer=null),ut[a][e].additionDataBufferSize=r.dataLength),null===ut[a][e].additionDataBuffer&&(ut[a][e].additionDataBuffer=dt._malloc(ut[a][e].additionDataBufferSize));var i=new Uint8Array(r.dataLength);i.set(dt.HEAPU8.subarray(r.pData,r.pData+r.dataLength)),dt.writeArrayToMemory(i,ut[a][e].additionDataBuffer),r.additionDataBuffer=new Uint8Array(dt.HEAPU8.buffer,ut[a][e].additionDataBuffer,ut[a][e].additionDataBufferSize),ut[a][e].hasOwnProperty("addtionCallBackFun")&&null!=ut[a][e].addtionCallBackFun&&null!=ut[a][e].addtionCallBackFun&&(ut[a][e].addtionCallBackFun(r),i=null,r.additionDataBuffer=null)}},window.JSPlayM4_DisplayCallBack=function(e,t,a,r,i,n,s,x,o){if(null!=ut[o][e]){var l={};l.yuvData=new Uint8Array(a),l.yuvData.set(dt.HEAPU8.subarray(t,t+a)),l.isize=a,l.timeStamp=s,l.width=r,l.height=i,l.frameRate=n,l.type=x,ut[o][e].hasOwnProperty("displayCallBackFun")&&(null!=ut[o][e].displayCallBackFun&&(ut[o][e].displayCallBackFun(l),l.yuvData=null),null!=ut[o][e].ResamplePCMCallBack&&(44100==l.frameRate||48e3==l.frameRate?ut[o][e].ResamplePCMCallBack(l):console.log("%cAudio encode only support 44.1k and 48k.ResamplePCMCallBack sampleRate:"+l.frameRate,"color: red")))}},window.JSPlayM4_DecCallBack=function(e,t,a,r,i,n,s,x,o){if(null!=ut[o][e]){var l={};l.port=e,l.Data=new Uint8Array(a),l.Data.set(dt.HEAPU8.subarray(t,t+a)),l.isize=a,l.iDataType=r,l.SampleRate=i,l.width=n,l.height=s,l.stampTime=x,ut[o][e].hasOwnProperty("decCallBackFun")&&null!=ut[o][e].decCallBackFun&&(ut[o][e].decCallBackFun(l),l.Data=null)}},window.JSPlayM4_RunTimeInfoCallBack=function(e,t,a,r){if(null!=ut[r][e]){var i={nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:0,nInputDataInterval:0,nFrameNumInterval:0};if(i.nRunTimeModule=dt.HEAP32[t>>2],i.nStrVersion=dt.HEAP32[t+4>>2],i.nFrameTimeStamp=dt.HEAP32[t+8>>2],i.nFrameNum=dt.HEAP32[t+12>>2],i.nErrorCode=a,a==ee){var n=dt.HEAP32[t+20>>2];i.nInputDataInterval=n}if(1024==a){var s=dt.HEAP32[t+20>>2];i.nFrameNumInterval=s}if(a==te){var x=dt.HEAPF64[t+20>>3];i.nAverageDecodeTime=x}if(687865857==a){var o=dt.HEAPU8[t+20],l=dt.HEAPU8[t+21];i.nSystemFormat=l,i.nDetectRes=o,i.nMp4FileTime=i.nFrameTimeStamp,i.nMp4TotalFrameNum=i.nFrameNum}if(a==ae||a==re){var _=dt.HEAPU8[t+21],h=dt.HEAPU8[t+22]<<8|_,f=dt.HEAPU8[t+23],c=dt.HEAPU8[t+24],u=dt.HEAPU8[t+25],d=dt.HEAPU8[t+26],p=dt.HEAPU8[t+27],m=dt.HEAPU8[t+28],S=dt.HEAPU8[t+29]<<8|m;i.AbsTimeYear=h,i.AbsTimeMonth=f,i.AbsTimeDay=c,i.AbsTimeHour=u,i.AbsTimeMinute=d,i.AbsTimeSecond=p,i.AbsTimeMilliseconds=S}if(9==a&&1==ut[r][e].decodeEngine)return void ut[r][e].JSPlayM4_SetStreamEnd(!0);ut[r][e].hasOwnProperty("runtimeCBFun")&&null!=ut[r][e].runtimeCBFun&&ut[r][e].runtimeCBFun(i)}},window.JSPlayM4_StreamInfoCallBack=function(e,t,a){if(null!=ut[a][e]){var r={};r.nSystemformat=dt.HEAP16[t>>1],r.nVideoformat=dt.HEAP16[t+2>>1],r.nAudioformat=dt.HEAP16[t+4>>1],r.nAudiochannels=dt.HEAP16[t+6>>1],r.nAudiobitspersample=dt.HEAP32[t+8>>2],r.nAudiosamplesrate=dt.HEAP32[t+12>>2],r.nAudiobitrate=dt.HEAP32[t+16>>2],r.nWidth=dt.HEAP32[t+20>>2],r.nHeight=dt.HEAP32[t+24>>2],r.fFrameRate=dt.HEAPF32[t+28>>2],r.nIntervalOfIFrame=dt.HEAP32[t+32>>2],ut[a][e].hasOwnProperty("streamInfoCBFun")&&null!=ut[a][e].streamInfoCBFun&&ut[a][e].streamInfoCBFun(r)}},window.JSPlayM4_PostMpStreamOffsetCBFun=function(e,t,a){if(null!=ut[a][e]){var r={};r.nStreamOffset=t,ut[a][e].hasOwnProperty("streamInfoCBFun")&&null!=ut[a][e].PostMpStreamOffsetCBFun&&ut[a][e].PostMpStreamOffsetCBFun(r)}},window.JSPlayM4_FirstFrameCallBack=function(e,t){null!=ut[t][e]&&ut[t][e].hasOwnProperty("FFCallBackFun")&&null!=ut[t][e].FFCallBackFun&&null!=ut[t][e].FFCallBackFun&&ut[t][e].FFCallBackFun({decodeEngine:0})},window.JSPlayM4_AudioPCMCallBack=function(e,t,a,r){null!=ut[r][e]&&ut[r][e].__proto__.hasOwnProperty("downloadAudioPCMData")&&ut[r][e].downloadAudioPCMData(t)},window.JSPlayM4_RTPRawDataCallBack=function(e,t,a){null!=ut[a][port]&&ut[a][port].__proto__.hasOwnProperty("downloadRTPData")&&ut[a][port].downloadRTPData(e)},window.JSPlayM4_CaptrueRGBDataCallBack=function(e,t,a,r,i,n){null!=ut[n][e]&&ut[n][e].hasOwnProperty("imageCB")&&null!=ut[n][e].imageCB&&(null==ut[n][e].rgbDataBuffer&&(ut[n][e].rgbDataBuffer=new Uint8Array(i)),ut[n][e].rgbDataBuffer.set(dt.HEAPU8.subarray(t,t+i)),ut[n][e].imageCB(ut[n][e].rgbDataBuffer,a,r),ut[n][e].rgbDataBuffer=null)},window.JSPlayM4_SetPlayPosSucCallBack=function(e,t,a){if(null!=ut[a][e]){var r={nRes:1};r.nRelativePos=t,ut[a][e].hasOwnProperty("SetPlayPosCBFun")&&null!=ut[a][e].SetPlayPosCBFun&&ut[a][e].SetPlayPosCBFun(r)}},window.JSPlayM4_FishCaptrueRGBDataCallBack=function(e,t,a,r,i,n,s){null!=ut[s][e]&&ut[s][e].hasOwnProperty("FECImageCB")&&null!=ut[s][e].FECImageCB&&(null==ut[s][e].FECRgbDataBuffer&&(ut[s][e].FECRgbDataBuffer=new Uint8Array(n)),ut[s][e].FECRgbDataBuffer.set(dt.HEAPU8.subarray(a,a+n)),ut[s][e].FECImageCB(ut[s][e].FECRgbDataBuffer,r,i,t),ut[s][e].FECRgbDataBuffer=null)};var Et,gt=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),Ft=(Et=void 0,function(e){return e&&(Et=e),Et}),vt=function(){function e(){if(function(e,t){if(!i(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),Ft())return Ft();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,a){for(var r=0;r<a.length;r++)e.setUint8(t+r,a.charCodeAt(r))},this.setBufferToDataview=function(e,t,a){for(var r=0;r<a.length;r++,t++)e.setUint8(t,a[r])},Ft(this)}return gt(e,[{key:"Play",value:function(e,t,a){var r=new ArrayBuffer(44+t),i=new DataView(r),n=a.samplesPerSec,s=a.channels,x=a.bitsPerSample;this.writeString(i,0,"RIFF"),i.setUint32(4,32+2*t,!0),this.writeString(i,8,"WAVE"),this.writeString(i,12,"fmt "),i.setUint32(16,16,!0),i.setUint16(20,1,!0),i.setUint16(22,s,!0),i.setUint32(24,n,!0),i.setUint32(28,2*n,!0),i.setUint16(32,s*x/8,!0),i.setUint16(34,x,!0),this.writeString(i,36,"data"),i.setUint32(40,t,!0),this.setBufferToDataview(i,44,e);var o=this;return this.oAudioContext.decodeAudioData(i.buffer,(function(e){var t=o.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==o.gainNode||o.bSetVolume)&&(o.gainNode=o.oAudioContext.createGain(),o.bSetVolume=!1),o.gainNode.gain.value=o.currentVolume/100,o.gainNode.connect(o.oAudioContext.destination),t.connect(o.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),e}(),Ct=16,Tt=31,Dt=25,At=20480,It={width:0,height:0,frameNum:0,yuvData:null},Mt={width:0,height:0,frameNum:0,yuvData:null},Lt={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},wt={id:null,cmd:null,data:null,errorCode:0,status:null},Ot=function(){function a(t,r,i,n){if(e(this,a),this.jsplayer=t,null==r||void 0===r||"string"!=typeof r)return 0;if(this.szBasePath=r,!i||"function"!=typeof i)return 0;this.fnCallBack=i,this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.SystemFormat=-1,this.bFileHeadAudioFormat=!0,this.bHIKHeadValue=!0,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=1,this.szOSDTime=null,this.bJSPrintLog=window.g_printfFlag,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.jpegDownloadFlag=!1,this.bmpDownloadFlag=!1,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.nCurStatus=2,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=It,this.DisplayInfoYUV=Mt,this.DecInfoPCM=Lt,this.displayFrameInfo={},this.frameInfoFlag=!0,this.startTimeStamp=0,this.GetFileTimeCBFun=null,this.GetMpOffsetCBFun=null,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.decCBStream=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=0,this.runtimeInfoCBFun=null,this.pstRuntimeInfo={nRunTimeModule:0,nStrVersion:0,nFrameTimeStamp:0,nFrameNum:0,nErrorCode:0,nInputDataInterval:0,nFrameNumInterval:0,nAverageDecodeTime:0,nSystemFormat:0,nDetectRes:0,nMp4FileTime:0,nMp4TotalFrameNum:0,AbsTimeYear:0,AbsTimeMonth:0,AbsTimeDay:0,AbsTimeHour:0,AbsTimeMinute:0,AbsTimeSecond:0,AbsTimeMilliseconds:0},this.firstRenderBegin=!0,this.firstFrameCB=null,this.needFirstFrameCB=!1,this.bstreamEnd=!1,this.nstreamEndloopNum=0,this.streamInfoCBFun=null,this.PostMpStreamOffsetCBFun=null,this.addtionCallBackFun=null,this.textCanvas=null,this.setTextCanvasFlag=!1,this.FECGetPortCB=null,this.FECViewParamCB=null,this.oInputTimer=null,this.nLastSourceTimeStamp=-1,this.nLastClockTimeStamp=-1,this.nGetTotalFrameNum=0,this.nAverageDecodeTime=0,this.oDecodeTimer=null,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.nLostFrameFlag=1,this.nIgnoreHeaderAudioDefine=0,this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=5242880,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=At;var s=this;this.errorCode=1,this.loopNum=0,this.bJSPrintLog>=0&&console.info("%c1>there will play by V1","color: green"),this.needWaitMpOffset=!1,this.setCallBack=function(e,t,a,r,i){var s=wt;s.id=n,s.cmd=t,s.data=a,s.errorCode=r,s.status=i,e.errorCode=r,e.fnCallBack(s)},this.convertErrorCode=function(e){switch(e){case 1:return 1;case 98:return 0;default:return e}},this.arrayBufferCopy=function(e){var t=e.byteLength,a=new Uint8Array(t),r=new Uint8Array(e),i=0;for(i=0;i<t;i++)a[i]=r[i];return a},this.inputDataFun=function(){if(1==s.needWaitMpOffset)return 1;var e,t=0;if(s.bIsGetYUV=!1,s.bIsInputBufOver||s.bIsInputBufWillOver){e=new Uint8Array(1);var a={command:"InputData",data:new Uint8Array(e).buffer,dataSize:0};s.decodeWorker.postMessage(a,[a.data])}else if(s.bPlay&&(!s.bPause||s.bOnebyOne||6==s.nCurStatus)||this.bOnlyPlaySound){for(;s.aInputDataLens.length>0&&!((t+=s.aInputDataLens.shift())>s.iInputDataLen););e=s.aInputDataBuffer.splice(0,t);var r={command:"InputData",data:new Uint8Array(e).buffer,dataSize:t};s.decodeWorker.postMessage(r,[r.data])}e=null},this.getPic=function(e,t){if(null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;if(!e||"function"!=typeof e)return 0;if(this.dataCallBackFun=e,0===this.iZoomNum)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(0===this.iCanvasWidth||0===this.iCanvasHeight)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var a=this.nWidth/this.iCanvasWidth,r=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*a),this.stYUVRect.top=Math.round(this.stDisplayRect.top*r),this.stYUVRect.right=Math.round(this.stDisplayRect.right*a),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*r)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return 0}if(null==this.aDisplayBuf)return 2;var i={command:t,data:this.arrayBufferCopy(this.aDisplayBuf).buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(i,[i.data]),1},this.createWorker=function(e){if(window.Worker){if(null==e.decodeWorker){var t=new Blob([(r=e.szBasePath,"\n(function (event) {\n    const AUDIO_TYPE = 0;\t// 音频\n    const VIDEO_TYPE = 1;   // 视频\n    const PRIVT_TYPE = 2;  // 私有帧\n\n    const PLAYM4_AUDIO_FRAME = 100; // 音频帧\n    const PLAYM4_VIDEO_FRAME = 101; // 视频帧\n\n    const PLAYM4_OK = 1;\n    const PLAYM4_ORDER_ERROR = 2;\n    const PLAYM4_DECODE_ERROR = 44 \t// 解码失败\n    const PLAYM4_NOT_KEYFRAME = 48; \t// 非关键帧\n    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析\n    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环\n    const PLAYM4_SYS_NOT_SUPPORT = 16; \t// 不支持\n\n    importScripts('".concat(r,'\');\n    Module.addOnPostRun(function () {\n        postMessage({ \'function\': "loaded" });\n    });\n\n    var iStreamMode = 0;  // 流模式\n\n    var bOpenMode = false;\n    var bOpenStream = false;\n\n    var funGetFrameData = null;\n    var funGetAudFrameData = null;\n\n    var bWorkerPrintLog = 0;//worker层log开关\n\n    var g_nPort = -1;\n    var pInputData = null;\n    var inputBufferSize = 40960;\n\n    const MP_RTINFO_SOURCE_DATA_INTERVAL = 0x40000;   ///<实时流送帧时间间隔\n    const MP_RTINFO_IDMX_RTP_HEADER_SEQ_ERROR = 0x400;///<RTP视频包序不连续 或PS帧号不连续\n\n    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {\n        let port = nPort;\n        let user = pUser;\n        let runtimeInfo = {\n            nRunTimeModule: 0,\n            nStrVersion: 0,\n            nFrameTimeStamp: 0,\n            nFrameNum: 0,\n            nErrorCode: 0,\n            nInputDataInterval: 0,\n            nFrameNumInterval: 0\n        };\n        runtimeInfo.nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];\n        runtimeInfo.nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];\n        runtimeInfo.nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];\n        runtimeInfo.nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];\n        runtimeInfo.nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];\n        if (runtimeInfo.nErrorCode == MP_RTINFO_SOURCE_DATA_INTERVAL) {\n            let nTimeInterval = Module.HEAP32[pstRunTimeInfo + 20 >> 2]; //reserved[12]保留数组的前4字节 表示帧之间的送流延迟\n            runtimeInfo.nInputDataInterval = nTimeInterval; //送流间隔实时信息回调\n        }\n        if (runtimeInfo.nErrorCode == MP_RTINFO_IDMX_RTP_HEADER_SEQ_ERROR) {\n            let nFrameNumInterval = Module.HEAP32[pstRunTimeInfo + 20 >> 2]; //reserved[12]保留数组的前4字节 表示帧之间的送流延迟\n            runtimeInfo.nFrameNumInterval = nFrameNumInterval; //PS帧号不连续差值；RTP丢包为1\n        }\n        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);\n        postMessage({ \'function\': "RunTimeInfoCallBack", \'runtimeInfo\': runtimeInfo});\n    }\n\tself.JSPlayM4_StreamInfoCallBack = function (nPort, pstStreamInfo, pUser)\n\t{\n\t\tlet port = nPort;\n        let user = pUser;\n        let nSystemformat = Module.HEAP16[pstStreamInfo >> 1]; //封装类型\n        let nVideoformat = Module.HEAP16[pstStreamInfo + 2 >> 1];//视频编码类型\n        let nAudioformat = Module.HEAP16[pstStreamInfo + 4 >> 1];//音频编码类型\n        let nAudiochannels = Module.HEAP16[pstStreamInfo + 6 >> 1]; //音频通道数\n        let nAudiobitspersample = Module.HEAP32[pstStreamInfo + 8 >> 2];//音频样位率\n        let nAudiosamplesrate = Module.HEAP32[pstStreamInfo + 12 >> 2];//音频采样率\n        let nAudiobitrate = Module.HEAP32[pstStreamInfo + 16 >> 2];//音频比特率,单位：bit\n\t\tlet nWidth = Module.HEAP32[pstStreamInfo + 20 >> 2];//视频宽\n        let nHeight = Module.HEAP32[pstStreamInfo + 24 >> 2];//视频高\n        let fFrameRate = Module.HEAPF32[pstStreamInfo + 28 >> 2];//视频帧率\n        let nIntervalOfIFrame = Module.HEAP32[pstStreamInfo + 32 >> 2];//视频GOP大小（统计最近5个GOP的平均大小）\n\t\t//console.log("nSystemformat:" + nSystemformat + ",nVideoformat:" + nVideoformat + ",nAudioformat:" + nAudioformat + ",nAudiochannels:" + nAudiochannels + ",nAudiobitspersample:" + nAudiobitspersample + ",nAudiosamplesrate:" + nAudiosamplesrate + ",nAudiobitrate:" + nAudiobitrate);\n        postMessage({ \'function\': "StreamInfoCallBack", \'nSystemformat\': nSystemformat, \'nVideoformat\': nVideoformat, \'nAudioformat\': nAudioformat, \'nAudiochannels\': nAudiochannels, \'nAudiobitspersample\': nAudiobitspersample, \'nAudiosamplesrate\': nAudiosamplesrate, \'nAudiobitrate\': nAudiobitrate\n        , \'nWidth\': nWidth, \'nHeight\': nHeight, \'fFrameRate\': fFrameRate, \'nIntervalOfIFrame\': nIntervalOfIFrame});\n    }\n    self.JSPlayM4_AdditionDataCBFun = function (port, addDataInfo, nUser) {\n        let dataType = Module.HEAP32[addDataInfo >> 2];\n        let dataStrVersion = Module.HEAP32[addDataInfo + 4 >> 2];\n        let dataTimeStamp = Module.HEAP32[addDataInfo + 8 >> 2];\n        let dataLength = Module.HEAP32[addDataInfo + 12 >> 2];\n        let pData = Module.HEAP32[addDataInfo + 16 >> 2];\n        let additionDataBuffer = new Uint8Array(dataLength);\n        additionDataBuffer.set(Module.HEAPU8.subarray(pData, pData + dataLength));\n        postMessage({ \'function\': "AdditionDataCallBack", \'dataType\': dataType, \'dataStrVersion\': dataStrVersion, \'dataTimeStamp\': dataTimeStamp, \'dataLength\': dataLength, \'pData\':pData,\'additionDataBuffer\': additionDataBuffer},[additionDataBuffer.buffer]);\n      }\n    self.JSPlayM4_PostMpStreamOffsetCallBack = function (nPort, pstPostMpStreamOffsetInfo, pUser)\n\t{\n\t\tlet port = nPort;\n        let user = pUser;\n        let nStreamOffset = Module.HEAP32[pstPostMpStreamOffsetInfo >> 2];\n\t\tpostMessage({ \'function\': "PostMpStreamOffsetCallBack", \'nStreamOffset\': nStreamOffset});\n    }\n\n    onmessage = function (event) {\n        var eventData = event.data;\n        var res = 0;\n        switch (eventData.command) {\n            case "printLog":\n                let downloadFlag = eventData.data;\n                bWorkerPrintLog = downloadFlag;\n                res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                if (res !== PLAYM4_OK) {\n                    if(bWorkerPrintLog >= 0 ){\n                        console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);\n                    }\n                    postMessage({ \'function\': "printLog", \'errorCode\': res });\n                }\n                break;\n            case "SetPlayPosition":\n                let nFrameNumOrTime = eventData.data;\n                let enPosType = eventData.type;\n                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);\n                // if (res !== PLAYM4_OK)\n                // {\n                //     postMessage({\'function\': "SetPlayPosition", \'errorCode\': res});\n                //     return;\n                // }\n                // //有没有buffer需要清除\n\n                break;\n            case "SetStreamOpenMode":\n                //获取版本信息\n                let version = Module._GetSDKVersion();\n                let buildDate = Module._GetBuildDate();\n                console.log("%cV1Decoder.js version:" + version.toString(16) + ",buildDate:" + buildDate.toString(16), \'color: blue\');\n                //获取端口号\n                g_nPort = Module._GetPort();\n                //设置流打开模式\n                iStreamMode = eventData.data;\n                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetStreamOpenMode", \'errorCode\': res });\n                    return;\n                }\n                bOpenMode = true;\n                break;\n\n            case "OpenStream":\n                // 接收到的数据\n                var iHeadLen = eventData.dataSize;\n                var pHead = Module._malloc(iHeadLen + 4);\n                if (pHead === null) {\n                    return;\n                }\n                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n                aHead.set(new Uint8Array(eventData.data));\n                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);\n                postMessage({ \'function\': "OpenStream", \'errorCode\': res });\n                if (res !== PLAYM4_OK) {\n                    //释放内存\n                    Module._free(pHead);\n                    pHead = null;\n                    return;\n                }\n                bOpenStream = true;\n                break;\n            case "Play":\n                let resP = Module._Play(g_nPort);\n                if (resP !== PLAYM4_OK) {\n                    return;\n                }\n                break;\n            case "InputData":\n                // 接收到的数据\n                var iLen = eventData.dataSize;\n                if (iLen > 0) {\n                    if (pInputData == null || iLen > inputBufferSize) {\n                        if (pInputData != null) {\n                            Module._free(pInputData);\n                            pInputData = null;\n                        }\n                        if (iLen > inputBufferSize) {\n                            inputBufferSize = iLen;\n                        }\n\n                        pInputData = Module._malloc(inputBufferSize);\n                        if (pInputData === null) {\n                            return;\n                        }\n                    }\n\n                    var inputData = new Uint8Array(eventData.data);\n                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);\n                    // aInputData.set(inputData);\n                    Module.writeArrayToMemory(inputData, pInputData);\n                    inputData = null;\n                    res = Module._InputData(g_nPort, pInputData, iLen);\n                    if (res !== PLAYM4_OK) {\n                        let errorCode = Module._GetLastError(g_nPort);\n                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                        postMessage({ \'function\': "InputData", \'errorCode\': errorCode, "sourceRemain": sourceRemain });\n                    }\n                    //Module._free(pInputData);\n                    //pInputData = null;\n                } else {\n                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                    if (sourceRemain == 0) {\n                        postMessage({ \'function\': "InputData", \'errorCode\': PLAYM4_NEED_MORE_DATA });\n                        return;\n                    }\n                }\n\n                /////////////////////\n                // if (funGetFrameData === null) {\n                //     funGetFrameData = Module.cwrap(\'GetFrameData\', \'number\');\n                // }\n\n                while (bOpenMode && bOpenStream) {\n\n                    var ret = getFrameData();\n                    // 直到获取视频帧或数据不足为止\n                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret)//PLAYM4_VIDEO_FRAME === ret ||  || PLAYM4_NEED_NEET_LOOP === ret\n                    {\n                        break;\n                    }\n                }\n                break;\n\n            case "SetSecretKey":\n                var keyLen = eventData.nKeyLen;\n                var pKeyData = Module._malloc(keyLen);\n                if (pKeyData === null) {\n                    return;\n                }\n                var nKeySize = eventData.data.length\n                var bufData = stringToBytes(eventData.data);\n                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);\n                let u8array = new Uint8Array(keyLen);\n                aKeyData.set(u8array, 0);\n                aKeyData.set(new Uint8Array(bufData));\n                aKeyData = null;\n                u8array = null;\n\n                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetSecretKey", \'errorCode\': res });\n                    Module._free(pKeyData);\n                    pKeyData = null;\n                    return;\n                }\n\n                Module._free(pKeyData);\n                pKeyData = null;\n                break;\n\n            case "GetBMP":\n                var nBMPWidth = eventData.width;\n                var nBMPHeight = eventData.height;\n                var pYUVData = eventData.data;\n                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;\n                var oBMPCropRect = eventData.rect;\n\n                var pDataYUV = Module._malloc(nYUVSize);\n                if (pDataYUV === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);\n\n                // 分配BMP空间\n                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;\n                var pBmpData = Module._malloc(nBmpSize);\n                var pBmpSize = Module._malloc(4);\n                if (pBmpData === null || pBmpSize === null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n\n                    if (pBmpData != null) {\n                        Module._free(pBmpData);\n                        pBmpData = null;\n                    }\n\n                    if (pBmpSize != null) {\n                        Module._free(pBmpSize);\n                        pBmpSize = null;\n                    }\n                    return;\n                }\n\n                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码\n                Module.setValue(pBmpSize, nBmpSize, "i32");\n                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,\n                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetBMP", \'errorCode\': res });\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                    return;\n                }\n\n                // 获取BMP图片大小\n                var nBmpDataSize = Module.getValue(pBmpSize, "i32");\n\n                // 获取BMP图片数据\n                var aBmpData = new Uint8Array(nBmpDataSize);\n                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));\n\n                postMessage({ \'function\': "GetBMP", \'data\': aBmpData, \'errorCode\': res }, [aBmpData.buffer]);\n                aBmpData = null;\n                if (pDataYUV != null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                }\n                if (pBmpData != null) {\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                }\n                if (pBmpSize != null) {\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                }\n                break;\n\n            case "GetJPEG":\n                var nJpegWidth = eventData.width;\n                var nJpegHeight = eventData.height;\n                var pYUVData1 = eventData.data;\n                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;\n                var oJpegCropRect = eventData.rect;\n\n                var pDataYUV1 = Module._malloc(nYUVSize1);\n                if (pDataYUV1 === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);\n\n                // 分配JPEG空间\n                var pJpegData = Module._malloc(nYUVSize1);\n                var pJpegSize = Module._malloc(4);\n                if (pJpegData === null || pJpegSize === null) {\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小\n\n                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,\n                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetJPEG", \'errorCode\': res });\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                // 获取JPEG图片大小\n                var nJpegSize = Module.getValue(pJpegSize, "i32");\n\n                // 获取JPEG图片数据\n                var aJpegData = new Uint8Array(nJpegSize);\n                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));\n\n                postMessage({ \'function\': "GetJPEG", \'data\': aJpegData, \'errorCode\': res }, [aJpegData.buffer]);\n\n                nJpegSize = null;\n                aJpegData = null;\n\n                if (pDataYUV1 != null) {\n                    Module._free(pDataYUV1);\n                    pDataYUV1 = null;\n                }\n                if (pJpegData != null) {\n                    Module._free(pJpegData);\n                    pJpegData = null;\n                }\n                if (pJpegSize != null) {\n                    Module._free(pJpegSize);\n                    pJpegSize = null;\n                }\n                break;\n\n            case "SetDecodeFrameType":\n                var nFrameType = eventData.data;\n                res = Module._SetDecodeFrameType(g_nPort, nFrameType);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetDecodeFrameType", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "CloseStream":\n                //stop\n                let resS = Module._Stop(g_nPort);\n                if (resS !== PLAYM4_OK) {\n                    postMessage({ \'function\': "Stop", \'errorCode\': res });\n                    return;\n                }\n                //closeStream\n                res = Module._CloseStream(g_nPort);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "CloseStream", \'errorCode\': res });\n                    return;\n                }\n                //freePort\n                let resF = Module._FreePort(g_nPort);\n                if (resF !== PLAYM4_OK) {\n                    postMessage({ \'function\': "FreePort", \'errorCode\': res });\n                    return;\n                }\n                if (pInputData != null) {\n                    Module._free(pInputData);\n                    pInputData = null;\n                }\n                break;\n            case "PlaySound":\n                let resPS = Module._PlaySound(g_nPort);\n                if (resPS !== PLAYM4_OK) {\n                    console.log("PlaySound failed");\n                    return;\n                }\n                break;\n            case "StopSound":\n                let resSS = Module._StopSound();\n                if (resSS !== PLAYM4_OK) {\n                    console.log("StopSound failed");\n                    return;\n                }\n                break;\n            case "SetVolume":\n                let resSV = Module._SetVolume(g_nPort, eventData.volume);\n                if (resSV !== PLAYM4_OK) {\n                    console.log("Audio SetVolume failed");\n                    return;\n                }\n                break;\n            case "GetVolume":\n                let volume = Module._GetVolume();\n                if (volume > 0) {\n                    postMessage({ \'function\': "GetVolume", \'volume\': volume });\n                }\n                else {\n                    console.log("Audio GetVolume failed");\n                    return;\n                }\n                break;\n            case "OnlyPlaySound":\n                let resOPS = Module._OnlyPlaySound(g_nPort);\n                if (resOPS !== PLAYM4_OK) {\n                    console.log("OnlyPlaySound failed");\n                    return;\n                }\n                break;\n            case "Pause":\n                let resPa = Module._Pause(g_nPort, eventData.bPlay);\n                if (resPa !== PLAYM4_OK) {\n                    console.log("Pause failed");\n                    return;\n                }\n            case "PlayRate":\n                Module._SetPlayRate(g_nPort, eventData.playRate);\n                break;\n            case "SetIFrameDecInterval":\n                Module._SetIFrameDecInterval(g_nPort, eventData.data);\n                break;\n            case "SetLostFrameMode":\n                Module._SetLostFrameMode(g_nPort, eventData.data, 0);\n                break;\n            case "SetDemuxModel":\n                let resSDM = Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);\n                break;\n            case "SkipErrorData":\n                Module._SkipErrorData(g_nPort, eventData.bSkip);\n                break;\n            case "SetDecodeERC":\n                Module._SetDecodeERC(g_nPort, eventData.nLevel);\n                break;\n            case "SetANRParam":\n                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);\n                break;\n            case "SetResampleValue":\n                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);\n                break;\n            case "GetLastError":\n                let errorCode = Module._GetLastError(g_nPort);\n                postMessage({ \'function\': "GetLastError", \'errorCode\': errorCode });\n                break;\n            case "SetGlobalBaseTime":\n                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);\n                break;\n            case "SetRunTimeInfoCB":\n                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);\n                break;\n\t\t\tcase "SetStreamInfoCB":\n                Module._SetStreamInfoCallBack(g_nPort, eventData.nType, 0);\n                break;\n\t\t\tcase "GetFileTime":\n                let FileTime = Module._JSPlayM4_GetFileTime(g_nPort);\n\t\t\t\tpostMessage({ \'function\': "GetFileTime", \'FileTime\': FileTime });\n                break;\n\t\t\tcase "GetMpOffset":\n                let Offset = Module._JSPlayM4_GetMpOffset(g_nPort,eventData.FrameTime);\n\t\t\t\tpostMessage({ \'function\': "GetMpOffset", \'Offset\': Offset });\n                break;\n\t\t\tcase "ResetBuffer":\n                Module._JSPlayM4_ResetBuffer(g_nPort, eventData.type);\n                break;\n            case "SetAdditionDataCallBack":\n                Module._SetAdditionDataCallBack(g_nPort,eventData.additionDataType,eventData.nFlag,0);\n                break;\n            case "SetRunTimeInfoCallbackType":\n                Module._SetRunTimeInfoCallbackType(g_nPort,eventData.module,eventData.Type,eventData.Flag);\n                break;\n            case "SetPostMpStreamOffsetCB":\n                Module._SetPostMpStreamOffsetCallBack(g_nPort, 0);\n                break;\n            default:\n                break;\n        }\n    };\n\n    function getOSDTime(oFrameInfo) {\n        var iYear = oFrameInfo.year;\n        var iMonth = oFrameInfo.month;\n        var iDay = oFrameInfo.day;\n        var iHour = oFrameInfo.hour;\n        var iMinute = oFrameInfo.minute;\n        var iSecond = oFrameInfo.second;\n        var iMiSecond = oFrameInfo.misecond\n\n        if (iMonth < 10) {\n            iMonth = "0" + iMonth;\n        }\n        if (iDay < 10) {\n            iDay = "0" + iDay;\n        }\n        if (iHour < 10) {\n            iHour = "0" + iHour;\n        }\n        if (iMinute < 10) {\n            iMinute = "0" + iMinute;\n        }\n        if (iSecond < 10) {\n            iSecond = "0" + iSecond;\n        }\n        let osdTime = {};\n\n        osdTime.year = iYear;\n        osdTime.month = iMonth;\n        osdTime.week = 0;\n        osdTime.day = iDay;\n        osdTime.hour = iHour;\n        osdTime.minute = iMinute;\n        osdTime.second = iSecond;\n        osdTime.milliseconds = iMiSecond;\n        return osdTime;\n        //return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;\n    }\n    // 获取帧数据\n    function getFrameData() {\n        // function getFrameData() {\n        // 获取帧数据\n        var res = Module._GetFrameData();\n        //var res = fun();\n        if (res === PLAYM4_OK) {\n            var iFrameInfo = Module._GetFrameInfo();\n            let oFrameInfo = {};\n            oFrameInfo.frameType = Module.HEAP32[iFrameInfo >> 2];\n            oFrameInfo.frameSize = Module.HEAP32[iFrameInfo + 4 >> 2];\n            oFrameInfo.width = Module.HEAP32[iFrameInfo + 8 >> 2];\n            oFrameInfo.height = Module.HEAP32[iFrameInfo + 12 >> 2];\n            oFrameInfo.timeStamp = Module.HEAP32[iFrameInfo + 16 >> 2];\n            oFrameInfo.frameRate = Module.HEAP32[iFrameInfo + 20 >> 2];\n            oFrameInfo.bitsPerSample = Module.HEAP32[iFrameInfo + 24 >> 2];\n            oFrameInfo.samplesPerSec = Module.HEAP32[iFrameInfo + 28 >> 2];\n            oFrameInfo.channels = Module.HEAP32[iFrameInfo + 32 >> 2];\n            oFrameInfo.frameNum = Module.HEAP32[iFrameInfo + 36 >> 2];\n\n            oFrameInfo.cropLeft = Module.HEAP32[iFrameInfo + 40 >> 2];\n            oFrameInfo.cropRight = Module.HEAP32[iFrameInfo + 44 >> 2];\n            oFrameInfo.cropTop = Module.HEAP32[iFrameInfo + 48 >> 2];\n            oFrameInfo.cropBottom = Module.HEAP32[iFrameInfo + 52 >> 2];\n\t\t\toFrameInfo.relframeNum = Module.HEAP32[iFrameInfo + 56 >> 2];\n\t\t\toFrameInfo.relframeTime = Module.HEAP32[iFrameInfo + 60 >> 2];\n\n            oFrameInfo.year = Module.HEAP16[iFrameInfo + 64 >> 1];\n            oFrameInfo.month = Module.HEAP16[iFrameInfo + 66 >> 1];\n            oFrameInfo.day = Module.HEAP16[iFrameInfo + 68 >> 1];\n            oFrameInfo.hour = Module.HEAP16[iFrameInfo + 70 >> 1];\n            oFrameInfo.minute = Module.HEAP16[iFrameInfo + 72 >> 1];\n            oFrameInfo.second = Module.HEAP16[iFrameInfo + 74 >> 1];\n            oFrameInfo.misecond = Module.HEAP16[iFrameInfo + 76 >> 1];\n            switch (oFrameInfo.frameType) {\n                case AUDIO_TYPE:\n                    var iSize = oFrameInfo.frameSize;\n                    if (0 === iSize) {\n                        return -1;\n                    }\n                    var pPCM = Module._GetFrameBuffer();\n                    // var audioBuf = new ArrayBuffer(iSize);\n                    var aPCMData = new Uint8Array(iSize);\n                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));\n                    if (bWorkerPrintLog > 0 ) {\n                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + \',channel:\' + oFrameInfo.channels + \',bitsPerSample:\' + oFrameInfo.bitsPerSample);\n                    }\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "audioType", \'data\': aPCMData.buffer,\n                        \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aPCMData.buffer]);\n\n                    oFrameInfo = null;\n                    pPCM = null;\n                    aPCMData = null;\n                    return PLAYM4_AUDIO_FRAME;\n\n                case VIDEO_TYPE:\n                    var szOSDTime = getOSDTime(oFrameInfo);\n\n                    var iWidth = oFrameInfo.width;\n                    var iHeight = oFrameInfo.height;\n\n                    var iYUVSize = iWidth * iHeight * 3 / 2;\n                    if (0 === iYUVSize) {\n                        return -1;\n                    }\n\n                    var pYUV = Module._GetFrameBuffer();\n\n                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象\n                    var aYUVData = new Uint8Array(iYUVSize);\n                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));\n                    if (bWorkerPrintLog > 0) {\n                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);\n                    }\n\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "videoType", \'data\': aYUVData.buffer,\n                        \'dataLen\': aYUVData.length, \'osd\': szOSDTime, \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aYUVData.buffer]);\n\n                    oFrameInfo = null;\n                    pYUV = null;\n                    aYUVData = null;\n                    return PLAYM4_VIDEO_FRAME;\n\n                case PRIVT_TYPE:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n\n                default:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n            }\n        }\n        else {\n            let errorCode = Module._GetLastError(g_nPort);\n            //解码失败返回裸数据\n            if (PLAYM4_DECODE_ERROR === errorCode) {\n                var rawInfo = Module._GetRawDataInfo();\n                var pRawData = Module._GetRawDataBuffer();\n                var aRawData = new Uint8Array(rawInfo.isize);\n                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));\n                postMessage({\n                    \'function\': "GetRawData", \'type\': "", \'data\': aRawData.buffer,\n                    \'rawDataLen\': rawInfo.isize, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n                rawInfo = null;\n                pRawData = null;\n                aRawData = null;\n            }\n            //需要更多数据\n            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {\n                postMessage({\n                    \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                    \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n            }\n            return errorCode;\n        }\n    }\n\n    // 开始计算时间\n    function startTime() {\n        return new Date().getTime();\n    }\n\n    // 结束计算时间\n    function endTime() {\n        return new Date().getTime();\n    }\n\n    // 字母字符串转byte数组\n    function stringToBytes(str) {\n        var ch, st, re = [];\n        for (var i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);  // get char\n            st = [];                 // set up "stack"\n            do {\n                st.push(ch & 0xFF);  // push byte to stack\n                ch = ch >> 8;          // shift value down by 1 byte\n            }\n            while (ch);\n            // add stack contents to result\n            // done because chars have "wrong" endianness\n            re = re.concat(st.reverse());\n        }\n        // return an array of bytes\n        return re;\n    }\n})();\n'))]),a=URL.createObjectURL(t);if(this.decodeWorker=new Worker(a),e.bJSPrintLog>0&&console.log(">>>JSPlayV1.1 createWorker success!"),null==e.decodeWorker)return 60}e.decodeWorker.onmessage=function(t){var a=null,r=t.data;switch(e.errorCode=r.errorCode,r.function){case"printLog":e.bJSPrintLog>=0&&console.log("print JSPlayerSDK log failed");break;case"loaded":a="loaded",e.decodeWorker.postMessage({command:"printLog",data:e.bJSPrintLog}),e.bJSPrintLog>=0&&console.log("V1 Decoder.js loaded path:"+e.szBasePath),e.setCallBack(e,"loaded",0,0,!0);break;case"SetStreamOpenMode":a="SetStreamOpenMode";break;case"OpenStream":if(a="OpenStream",1===r.errorCode)return s.bOpenStream=!0,void(s.nCurStatus=1);break;case"InputData":a="InputData",11===r.errorCode&&(s.bIsInputBufOver=!0,e.bJSPrintLog>=0&&console.log("yff inputBuffer over set key frame \n"),1!=s.nDecFrameType&&s.PlayM4_SetDecodeFrameType(1)),36===r.errorCode&&(s.bIsInputBufWillOver=!0),r.errorCode===Tt&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1,s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0);break;case"GetFrameData":if(a="GetFrameData",!s.bOnlyPlaySound){if(null!=r.data&&null!=r.frameInfo&&(r.frameInfo.width,r.frameInfo.height),!s.bPlay)return;if(s.errorCode=r.errorCode,!(s.bIsFirstFrame||r.errorCode!==Tt&&35!==r.errorCode)){r.errorCode===Tt&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1),s.loopNum>5?(s.bIsGetYUV=!0,s.loopNum=0):(s.inputDataFun(),s.loopNum++);break}s.bIsInputBufOver||s.bIsInputBufWillOver?s.inputDataFun():"videoType"===r.type&&(s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0,s.bIsFirstFrame=!1)}if(s.bVisibility&&1===r.errorCode)switch(r.type){case"videoType":if(null==r.data||null==r.frameInfo)return 0;null!=s.DecCallBackFun&&(s.DecInfoYUV.port=0,s.DecInfoYUV.iDataType=3,s.DecInfoYUV.height=r.frameInfo.height,s.DecInfoYUV.width=r.frameInfo.width,s.DecInfoYUV.isize=r.frameInfo.width*r.frameInfo.height*3/2,s.DecInfoYUV.Data=new Uint8Array(r.data),s.DecCallBackFun(s.DecInfoYUV)),s.bIsFirstFrame=!1,e.nWidth=r.frameInfo.width,e.nHeight=r.frameInfo.height,e.nSPSCropLeft=r.frameInfo.cropLeft,e.nSPSCropRight=r.frameInfo.cropRight,e.nSPSCropTop=r.frameInfo.cropTop,e.nSPSCropBottom=r.frameInfo.cropBottom,e.timeStamp=r.frameInfo.timeStamp;var i=new Object;if(i.data=r.data,i.osdTime=r.frameInfo,i.nWidth=r.frameInfo.width,i.nHeight=r.frameInfo.height,i.frameNum=r.frameInfo.frameNum,i.timeStamp=r.frameInfo.timeStamp,i.relframeNum=r.frameInfo.relframeNum,i.relframeTime=r.frameInfo.relframeTime,e.jsplayer.DecodeTypeFlagMap.size>0){var n,x=I(e.jsplayer.DecodeTypeFlagMap.keys());try{for(x.s();!(n=x.n()).done;){var o=n.value;if(o&te&&1==e.jsplayer.DecodeTypeFlagMap.get(o)&&null!=e.runtimeInfoCBFun&&null!=e.oDecodeTimer){var l=e.oDecodeTimer.GetTimerWalk();l<=0||l>1e7||e.nGetTotalFrameNum>1e5?(e.nGetTotalFrameNum=0,e.oDecodeTimer.Init()):(e.nGetTotalFrameNum++,e.nAverageDecodeTime=l/e.nGetTotalFrameNum,null!=e.runtimeInfoCBFun&&(e.pstRuntimeInfo.nRunTimeModule=2,e.pstRuntimeInfo.nStrVersion=1,e.pstRuntimeInfo.nFrameTimeStamp=i.timeStamp,e.pstRuntimeInfo.nFrameNum=i.frameNum,e.pstRuntimeInfo.nErrorCode=te,e.pstRuntimeInfo.nInputDataInterval=0,e.pstRuntimeInfo.nFrameNumInterval=0,e.pstRuntimeInfo.nAverageDecodeTime=e.nAverageDecodeTime,e.runtimeInfoCBFun(e.pstRuntimeInfo)))}}}catch(e){x.e(e)}finally{x.f()}}if(e.bWriteYUVData){for(var _=new Uint8Array(r.data),h=e.aVideoYUVBuffer.length,f=0,c=_.length;f<c;f++)e.aVideoYUVBuffer[h+f]=_[f];e.iYUV10size++,_=null}if(e.bWriteYUVData&&e.iYUV10size>=20){var u=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(u,"videoYUV.data"),e.aVideoYUVBuffer.splice(0,e.aVideoYUVBuffer.length),e.bWriteYUVData=!1,e.iYUV10size=0,u=null}if(e.aVideoFrameBuffer.push(i),i=null,e.aVideoFrameBuffer.length>5&&(e.bOnebyOne||6==e.nCurStatus||e.aVideoFrameBuffer.splice(0,2)),(e.bOnebyOne||6==e.nCurStatus)&&(e.aVideoFrameBuffer.length>=15||e.aInputDataBuffer.length>=.8*e.iInputMaxBufSize)){e.setCallBack(e,"OnebyOne",0,0,!1),e.bIsFirstFrame=!0;break}break;case"audioType":if(0==e.bHIKHeadValue&&(e.bFileHeadAudioFormat=!0),e.bPlaySound&&!e.bPlayRateChange||s.bOnlyPlaySound){null!=s.PCMCallBackFun&&(s.DecInfoPCM.port=0,s.DecInfoPCM.SampleRate=r.frameInfo.samplesPerSec,s.DecInfoPCM.channel=r.frameInfo.channels,s.DecInfoPCM.bitsPerSample=r.frameInfo.bitsPerSample,s.DecInfoPCM.iDataType=101,s.DecInfoPCM.Data=new Uint8Array(r.data),s.DecInfoPCM.isize=s.DecInfoPCM.Data.length,s.PCMCallBackFun(s.DecInfoPCM));for(var d=new Uint8Array(r.data),p=e.aAudioBuffer.length,m=0,S=d.length;m<S;m++)e.aAudioBuffer[p+m]=d[m];if(e.iAudioBufferSize++,d=null,e.bWritePCMData){for(var R=new Uint8Array(r.data),P=e.aAudioPCMBuffer.length,b=0,y=R.length;b<y;b++)e.aAudioPCMBuffer[P+b]=R[b];e.bJSPrintLog>=0&&console.log("audio_type num:"+e.iAudioBuffer500Size+", len:"+R.length),e.iAudioBuffer500Size++,R=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=100){var E=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(E,"audioPCM.data"),e.aAudioPCMBuffer.splice(0,e.aAudioPCMBuffer.length),e.bWritePCMData=!1,e.iAudioBuffer500Size=0,E=null}e.iAudioBufferSize>=Dt&&(e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,r.frameInfo),e.aAudioBuffer.splice(0,e.aAudioBuffer.length),e.aAudioBuffer.length=0,e.iAudioBufferSize=0)}}break;case"GetRawData":if(a="GetRawData",e.bWriteRawData){for(var g=new Uint8Array(r.data),F=e.aRawDataBuffer.length,v=0,C=g.length;v<C;v++)e.aRawDataBuffer[F+v]=g[v];e.iRawDataSize++,g=null}if(e.bWriteRawData&&e.iRawDataSize>=100){var T=new Uint8Array(e.aRawDataBuffer);e.downloadFile(T,"rawBuffer.data"),e.aRawDataBuffer.splice(0,e.aRawDataBuffer.length),e.bWriteRawData=!1,e.iRawDataSize=0,T=null}break;case"PlaySound":a="PlaySound";break;case"GetJPEG":if(a="GetJPEG",1!==r.errorCode)return void(e.bJSPrintLog>=0&&console.log("GetJPEG ErrorParam"));var D=r.data;e.jpegDownloadFlag&&(e.downloadFile(D,"GetJPEG.jpeg"),e.jpegDownloadFlag=!1),e.dataCallBackFun(D,D.length);break;case"GetBMP":if(a="GetBMP",1!==r.errorCode)return void(e.bJSPrintLog>=0&&console.log("GetBMP ErrorParam"));var A=r.data;e.bmpDownloadFlag&&(e.downloadFile(A,"GetBmp.bmp"),e.bmpDownloadFlag=!1),e.dataCallBackFun(A,A.length);break;case"RunTimeInfoCallBack":a="RunTimeInfoCallBack",null!=e.runtimeInfoCBFun&&(e.pstRuntimeInfo.nRunTimeModule=r.runtimeInfo.nRunTimeModule,e.pstRuntimeInfo.nStrVersion=r.runtimeInfo.nStrVersion,e.pstRuntimeInfo.nFrameTimeStamp=r.runtimeInfo.nFrameTimeStamp,e.pstRuntimeInfo.nFrameNum=r.runtimeInfo.nFrameNum,e.pstRuntimeInfo.nErrorCode=r.runtimeInfo.nErrorCode,e.pstRuntimeInfo.nInputDataInterval=r.runtimeInfo.nInputDataInterval,e.pstRuntimeInfo.nFrameNumInterval=r.runtimeInfo.nFrameNumInterval,e.runtimeInfoCBFun(e.pstRuntimeInfo));break;case"StreamInfoCallBack":a="StreamInfoCallBack";var M={};M.nSystemformat=r.nSystemformat,M.nVideoformat=r.nVideoformat,M.nAudioformat=r.nAudioformat,M.nAudiochannels=r.nAudiochannels,M.nAudiobitspersample=r.nAudiobitspersample,M.nAudiosamplesrate=r.nAudiosamplesrate,M.nAudiobitrate=r.nAudiobitrate,M.nWidth=r.nWidth,M.nHeight=r.nHeight,M.fFrameRate=r.fFrameRate,M.nIntervalOfIFrame=r.nIntervalOfIFrame,null!=e.streamInfoCBFun&&e.streamInfoCBFun(M);break;case"PostMpStreamOffsetCallBack":a="PostMpStreamOffsetCallBack";var L={};L.nStreamOffset=r.nStreamOffset,null!=e.PostMpStreamOffsetCBFun&&e.PostMpStreamOffsetCBFun(L);break;case"GetFileTime":a="GetFileTime";var w=r.FileTime;null!=e.GetFileTimeCBFun&&e.GetFileTimeCBFun(w);break;case"GetMpOffset":a="GetMpOffset";var O=r.Offset;null!=e.GetMpOffsetCBFun&&(e.GetMpOffsetCBFun(O),s.needWaitMpOffset=!1);break;case"AdditionDataCallBack":var B={};B.dataType=r.dataType,B.dataStrVersion=r.dataStrVersion,B.dataTimeStamp=r.dataTimeStamp,B.dataLength=r.dataLength,B.pData=r.pData,B.additionDataBuffer=new Uint8Array(r.additionDataBuffer),null!=e.addtionCallBackFun&&e.addtionCallBackFun(B)}"GetFrameData"!==a&&"loaded"!==a?e.setCallBack(e,a,0,e.convertErrorCode(r.errorCode),!0):Ct!==r.errorCode&&101!==r.errorCode&&100!==r.errorCode&&48!==r.errorCode||e.setCallBack(e,a,0,e.convertErrorCode(r.errorCode),!0)}}var r},this.createWorker(s),this.draw=function(){if(s.bPlay){if(!s.bPause||s.bOnebyOne){requestAnimationFrame(s.draw);var e=s.aVideoFrameBuffer.length;if(null!=s.YUVBufSizeCBFun&&s.YUVBufSizeCBFun(e),s.bOnebyOne){if(e<=8&&s.setCallBack(s,"OnebyOne",0,Tt,!0),e<=s.FrameForwardLen+1)return void s.setCallBack(s,"OnebyOne",0,Tt,!0);for(var t=s.FrameForwardLen;t>1;)s.aVideoFrameBuffer.shift(),t--;s.bOnebyOne=!1}if(1==s.bstreamEnd&&(e<=0?(s.nstreamEndloopNum++,s.nstreamEndloopNum>=5&&(s.nstreamEndloopNum=0,s.bstreamEnd=!1,null!=s.runtimeInfoCBFun&&(s.pstRuntimeInfo.nRunTimeModule=0,s.pstRuntimeInfo.nStrVersion=0,s.pstRuntimeInfo.nFrameTimeStamp=0,s.pstRuntimeInfo.nFrameNum=0,s.pstRuntimeInfo.nErrorCode=9,s.pstRuntimeInfo.nInputDataInterval=0,s.pstRuntimeInfo.nFrameNumInterval=0,s.runtimeInfoCBFun(s.pstRuntimeInfo)))):s.nstreamEndloopNum=0),e>0){var a=s.aVideoFrameBuffer.shift(),r={};r.nCropLeft=s.nSPSCropLeft,r.nCropRight=s.nSPSCropRight,r.nCropTop=s.nSPSCropTop,r.nCropBottom=s.nSPSCropBottom,r.nCodeWidth=a.nWidth,r.nCodeHeight=a.nHeight,s.aDisplayBuf=a.data;var i=new Uint8Array(s.aDisplayBuf);if(s.jsplayer.RenderTypeFlagMap.size>0){var n,x=I(s.jsplayer.RenderTypeFlagMap.keys());try{for(x.s();!(n=x.n()).done;){var o=n.value;o==ae&&1==s.jsplayer.RenderTypeFlagMap.get(o)&&null!=s.runtimeInfoCBFun&&1==s.firstRenderBegin&&(s.pstRuntimeInfo.nRunTimeModule=3,s.pstRuntimeInfo.nStrVersion=1,s.pstRuntimeInfo.nFrameTimeStamp=a.timeStamp,s.pstRuntimeInfo.nFrameNum=0,s.pstRuntimeInfo.nErrorCode=ae,s.pstRuntimeInfo.nInputDataInterval=0,s.pstRuntimeInfo.nFrameNumInterval=0,s.pstRuntimeInfo.nAverageDecodeTime=0,s.pstRuntimeInfo.AbsTimeYear=a.osdTime.year,s.pstRuntimeInfo.AbsTimeMonth=a.osdTime.month,s.pstRuntimeInfo.AbsTimeDay=a.osdTime.day,s.pstRuntimeInfo.AbsTimeHour=a.osdTime.hour,s.pstRuntimeInfo.AbsTimeMinute=a.osdTime.minute,s.pstRuntimeInfo.AbsTimeSecond=a.osdTime.second,s.pstRuntimeInfo.AbsTimeMilliseconds=a.osdTime.misecond,s.runtimeInfoCBFun(s.pstRuntimeInfo),s.firstRenderBegin=!1)}}catch(e){x.e(e)}finally{x.f()}}if(s.bVideoCropInfo?s.oSuperRender.DisplayFrame(i,a.nWidth-s.nSPSCropLeft-s.nSPSCropRight,a.nHeight-s.nSPSCropTop-s.nSPSCropBottom,a.timeStamp,r,null).then((function(e){e.timestamp;var t=e.DrawRet;if(s.jsplayer.RenderTypeFlagMap.size>0&&1!=t){var r,i=I(s.jsplayer.RenderTypeFlagMap.keys());try{for(i.s();!(r=i.n()).done;){var n=r.value;n==ie&&1==s.jsplayer.RenderTypeFlagMap.get(n)&&null!=s.runtimeInfoCBFun&&(s.pstRuntimeInfo.nRunTimeModule=3,s.pstRuntimeInfo.nStrVersion=1,s.pstRuntimeInfo.nFrameTimeStamp=a.timeStamp,s.pstRuntimeInfo.nFrameNum=0,s.pstRuntimeInfo.nErrorCode=ie,s.runtimeInfoCBFun(s.pstRuntimeInfo))}}catch(e){i.e(e)}finally{i.f()}}})):s.oSuperRender.DisplayFrame(i,a.nWidth,a.nHeight,a.timeStamp,r,null).then((function(e){e.timestamp;var t=e.DrawRet;if(s.jsplayer.RenderTypeFlagMap.size>0&&1!=t){var r,i=I(s.jsplayer.RenderTypeFlagMap.keys());try{for(i.s();!(r=i.n()).done;){var n=r.value;n==ie&&1==s.jsplayer.RenderTypeFlagMap.get(n)&&null!=s.runtimeInfoCBFun&&(s.pstRuntimeInfo.nRunTimeModule=3,s.pstRuntimeInfo.nStrVersion=1,s.pstRuntimeInfo.nFrameTimeStamp=a.timeStamp,s.pstRuntimeInfo.nFrameNum=0,s.pstRuntimeInfo.nErrorCode=ie,s.runtimeInfoCBFun(s.pstRuntimeInfo))}}catch(e){i.e(e)}finally{i.f()}}})),s.jsplayer.RenderTypeFlagMap.size>0){var l,_=I(s.jsplayer.RenderTypeFlagMap.keys());try{for(_.s();!(l=_.n()).done;){var h=l.value;h==re&&1==s.jsplayer.RenderTypeFlagMap.get(h)&&null!=s.runtimeInfoCBFun&&(s.pstRuntimeInfo.nRunTimeModule=3,s.pstRuntimeInfo.nStrVersion=1,s.pstRuntimeInfo.nFrameTimeStamp=a.timeStamp,s.pstRuntimeInfo.nFrameNum=0,s.pstRuntimeInfo.nErrorCode=re,s.pstRuntimeInfo.nInputDataInterval=0,s.pstRuntimeInfo.nFrameNumInterval=0,s.pstRuntimeInfo.nAverageDecodeTime=0,s.pstRuntimeInfo.AbsTimeYear=a.osdTime.year,s.pstRuntimeInfo.AbsTimeMonth=a.osdTime.month,s.pstRuntimeInfo.AbsTimeDay=a.osdTime.day,s.pstRuntimeInfo.AbsTimeHour=a.osdTime.hour,s.pstRuntimeInfo.AbsTimeMinute=a.osdTime.minute,s.pstRuntimeInfo.AbsTimeSecond=a.osdTime.second,s.pstRuntimeInfo.AbsTimeMilliseconds=a.osdTime.misecond,s.runtimeInfoCBFun(s.pstRuntimeInfo))}}catch(e){_.e(e)}finally{_.f()}}null!=s.DisplayCallBackFun&&(s.DisplayInfoYUV.height=a.nHeight,s.DisplayInfoYUV.width=a.nWidth,s.DisplayInfoYUV.iSize=s.DisplayInfoYUV.height*s.DisplayInfoYUV.width*3/2,s.DisplayInfoYUV.frameNum=a.frameNum,s.DisplayInfoYUV.timeStamp=a.timeStamp,s.DisplayInfoYUV.yuvData=new Uint8Array(i),s.DisplayCallBackFun(s.DisplayInfoYUV)),s.frameInfoFlag&&(s.displayFrameInfo.codecType=0,s.displayFrameInfo.frameType=0,s.displayFrameInfo.frameSize=0,s.displayFrameInfo.width=a.nWidth-s.nSPSCropLeft-s.nSPSCropRight,s.displayFrameInfo.height=a.nHeight-s.nSPSCropTop-s.nSPSCropBottom,s.displayFrameInfo.timeStamp=a.timeStamp,s.displayFrameInfo.frameRate=0,s.displayFrameInfo.frameNum=a.frameNum,s.displayFrameInfo.interlace=0,s.displayFrameInfo.streamEnd=0,s.displayFrameInfo.cropLeft=s.nSPSCropLeft,s.displayFrameInfo.cropRight=s.nSPSCropRight,s.displayFrameInfo.cropTop=s.nSPSCropTop,s.displayFrameInfo.cropBottom=s.nSPSCropBottom,s.displayFrameInfo.year=a.osdTime.year,s.displayFrameInfo.month=a.osdTime.month,s.displayFrameInfo.week=0,s.displayFrameInfo.day=a.osdTime.day,s.displayFrameInfo.hour=a.osdTime.hour,s.displayFrameInfo.minute=a.osdTime.minute,s.displayFrameInfo.second=a.osdTime.second,s.displayFrameInfo.milliseconds=a.osdTime.misecond),0==s.startTimeStamp&&(s.startTimeStamp=a.timeStamp),i=null;var f=a.osdTime.year,c=a.osdTime.month,u=a.osdTime.day,d=a.osdTime.hour,p=a.osdTime.minute,m=a.osdTime.second;s.szOSDTime=f+"-"+c+"-"+u+" "+d+":"+p+":"+m,a=null,s.needFirstFrameCB&&null!=s.firstFrameCB&&(s.firstFrameCB({decodeEngine:2}),s.needFirstFrameCB=!1)}else s.setCallBack(s,"Play",0,Tt,!0)}}else s.bPlay||(s.aVideoFrameBuffer.splice(0,s.aVideoFrameBuffer.length),s.aAudioBuffer.splice(0,s.aAudioBuffer.length))}}return t(a,[{key:"PlayM4_SetCurrentFrameNum",value:function(e,t){return Ct}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(e){return this.bJSPrintLog=e,this.decodeWorker.postMessage({command:"printLog",data:e}),1}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,1}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,1}},{key:"PlayM4_SetDecCallBack",value:function(e,t){return e?(1==this.decCBStream&&(this.DecCallBackFun=t),2==this.decCBStream&&(this.PCMCallBackFun=t),3==this.decCBStream&&(this.PCMCallBackFun=t,this.DecCallBackFun=t)):(1==this.decCBStream&&(this.DecCallBackFun=null),2==this.decCBStream&&(this.PCMCallBackFun=null),3==this.decCBStream&&(this.PCMCallBackFun=null,this.DecCallBackFun=null)),1}},{key:"PlayM4_SetDisplayCallBack",value:function(e){return e&&"function"==typeof e?(this.DisplayCallBackFun=e,1):0}},{key:"PlayM4_SetPCMCallBack",value:function(e){return e&&"function"==typeof e?(this.PCMCallBackFun=e,1):0}},{key:"PlayM4_SetStreamOpenMode",value:function(e){return null==e||void 0===e||0!==e&&1!==e?0:(this.streamOpenMode=e,1)}},{key:"PlayM4_DownloadRTPData",value:function(e){this.downloadRTP=e}},{key:"PlayM4_SetVideoCropInfo",value:function(e){return null==e||void 0===e||"boolean"!=typeof e?0:(this.bVideoCropInfo=e,1)}},{key:"PlayM4_OpenStream",value:function(e,t,a){return this.bJSPrintLog>0&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),null==this.decodeWorker?2:null==e||t<=0||a<=0?0:(73==e[0]&&77==e[1]&&75==e[2]&&72==e[3]?this.bHIKHeadValue=!0:this.bHIKHeadValue=!1,0==e[12]&&0==e[13]?this.bFileHeadAudioFormat=!1:this.bFileHeadAudioFormat=!0,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,4===e[8]&&0===e[9]?this.streamOpenMode=0:this.streamOpenMode=1,this.SystemFormat=e[8]+(e[9]<<8),this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:e,dataSize:t,bufPoolSize:a}),this.bOpenStream=!0,1)}},{key:"PlayM4_CloseStream",value:function(){return null===this.decodeWorker?1:null===this.decodeWorker||!1===this.bOpenStream?2:(this.bOnlyPlaySound=!1,this.decodeWorker.postMessage({command:"CloseStream"}),null!==this.oSuperRender&&(this.oSuperRender.ReleaseDisplay(),this.oSuperRender=null),null!==this.audioRenderer&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,this.startTimeStamp,this.nCurStatus=2,null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null),this.setTextCanvasFlag=!1,null!=this.oInputTimer&&(this.oInputTimer.timerReset(),this.oInputTimer=null),null!=this.oDecodeTimer&&(this.oDecodeTimer.timerReset(),this.oDecodeTimer=null),1)}},{key:"PlayM4_Destroy",value:function(){return null===this.decodeWorker||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),1}},{key:"PlayM4_FreePort",value:function(){return this.decodeWorker.terminate(),this.decodeWorker=null,1}},{key:"PlayM4_InputData",value:function(e,t){var a=this.aInputDataBuffer.length;if(-1===t)return this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,this.bstreamEnd=!0,1;if(a+t>this.iInputMaxBufSize)return this.bJSPrintLog>=0&&console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,11;var r=null,i=t;switch(this.streamOpenMode){case 1:if(r=new Uint8Array(e.buffer),this.jsplayer.ManagerTypeFlagMap.size>0){var n,s=I(this.jsplayer.ManagerTypeFlagMap.keys());try{for(s.s();!(n=s.n()).done;){var x=n.value;if(x&ee&&1==this.jsplayer.ManagerTypeFlagMap.get(x)&&null!=this.runtimeInfoCBFun&&(2==this.SystemFormat||3==this.SystemFormat||32769==this.SystemFormat)){var o=this.SearchPtsInPes(r,t);if(o>=0&&t-o>=14&&0==r[o+0]&&0==r[o+1]&&1==r[o+2]&&(224==r[o+3]||192==r[o+3]||189==r[o+3]||191==r[o+3])&&128==(192&r[o+6])&&128&r[o+7]&&(32==(240&r[o+9])||48==(240&r[o+9]))&&!(1&~r[o+9])&&!(1&~r[o+11])&&!(1&~r[o+13])){var l=(((14&r[o+9])<<28)+(r[o+10]<<21)+((254&r[o+11])<<13)+(r[o+12]<<6)+((252&r[o+13])>>2))/45;this.SourceDataInterval(l)}}}}catch(e){s.e(e)}finally{s.f()}}this.aInputDataLens.push(t);break;case 0:i=t+4;var _=new Uint32Array([t]),h=new Uint8Array(_.buffer);if((r=new Uint8Array(i)).set(h,0),r.set(e,4),this.jsplayer.ManagerTypeFlagMap.size>0){var f,c=I(this.jsplayer.ManagerTypeFlagMap.keys());try{for(c.s();!(f=c.n()).done;){var u=f.value;u&ee&&1==this.jsplayer.ManagerTypeFlagMap.get(u)&&null!=this.runtimeInfoCBFun&&(4==this.SystemFormat||13==this.SystemFormat||260==this.SystemFormat)&&t>12&&(224==(255&r[5])||154==(255&r[5])||160==(255&r[5]))&&(l=((r[8]<<24)+(r[9]<<16)+(r[10]<<8)+r[11])/90,this.SourceDataInterval(l))}}catch(e){c.e(e)}finally{c.f()}}_=null,h=null,this.aInputDataLens.push(t+4);break;default:return Ct}for(var d=0;d<i;d++)this.aInputDataBuffer[a+d]=r[d];return!this.bPlay&&!this.bOnlyPlaySound||null===this.decodeWorker||!1===this.bOpenStream||(r=null,this.bOnlyPlaySound||this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),1}},{key:"PlayM4_Play",value:function(e){if(null===this.decodeWorker)return 2;if(this.bJSPrintLog>0&&console.log(">>>JS PlayM4_Play canvasID: "+e),this.nCurStatus=3,this.decodeWorker.postMessage({command:"SetLostFrameMode",data:this.nLostFrameFlag}),null===e)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if("string"!=typeof e)return 0;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return 1;if(null==this.oSuperRender&&(this.canvasCnv=document.getElementById(e),this.oSuperRender=new lt(this),this.oSuperRender.InitDisplay(this.canvasCnv,"webgl",1),null==this.oSuperRender))return 61;this.sCanvasId=e,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return null==this.audioRenderer&&(this.audioRenderer=new vt,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"Play"}),1)}},{key:"PlayM4_Stop",value:function(e){if(this.bJSPrintLog>0&&console.log(">>>>yff1020>>>>> V1 PlayM4_Stop"),null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.nCurStatus=5,this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;var t={};t.nCropLeft=this.nSPSCropLeft,t.nCropRight=this.nSPSCropRight,t.nCropTop=this.nSPSCropTop,t.nCropBottom=this.nSPSCropBottom,t.nCodeWidth=this.nWidth,t.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,t,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,t,null);var a=document.getElementById(this.sCanvasId);return a&&(this.clonedCanvas=a.cloneNode(!0),this.clonedCanvasParentNode=a.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,a)),1}},{key:"PlayM4_PlayRate",value:function(e){return null==this.decodeWorker?2:(this.bPlayRateChange=1!==e,e<1&&(e=1),this.iInputDataLen=e*At,this.decodeWorker.postMessage({command:"PlayRate",playRate:e}),1)}},{key:"PlayM4_Pause",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?this.bOnebyOne||this.bPause==e?2:(this.bPause=e,this.bIsFirstFrame=!0,e?(this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.nCurStatus=4):(this.bPlaySound&&this.PlayM4_PlaySound(),this.nCurStatus=3,this.decodeWorker.postMessage({command:"SetLostFrameMode",data:this.nLostFrameFlag}),this.draw()),1):2}},{key:"PlayM4_OneByOne",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?e>10||e<=0?0:(e||(e=1),this.iInputDataLen=At,this.FrameForwardLen=e,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.nCurStatus=6,this.draw(),this.decodeWorker.postMessage({command:"SetLostFrameMode",data:0}),1):2}},{key:"PlayM4_PlaySound",value:function(e){return null===this.decodeWorker||!1===this.bOpenStream?2:e<0||e>16?0:null==this.audioRenderer&&(this.audioRenderer=new vt,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(e),0!==this.Volume&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),0==this.nIgnoreHeaderAudioDefine&&0==this.bFileHeadAudioFormat?Ct:(this.bPlaySound=!0,1))}},{key:"PlayM4_StopSound",value:function(){return null==this.decodeWorker||null==this.audioRenderer?2:this.bPlaySound?(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,1):2}},{key:"PlayM4_SetDisplayBuf",value:function(e){return null==this.decodeWorker?2:e<=0?0:(this.YUVBufferSize=e,1)}},{key:"PlayM4_SetSecretKey",value:function(e,t,a){if(null==this.decodeWorker||!1===this.bOpenStream)return 2;if(null==t)return 0;if(1===e){if(128!==a)return 0;if(null==t||void 0===t)return 0}else if(2===e){if(256!==a)return 0;if(null==t||void 0===t)return 0}else if(0!==e)return 0;return this.decodeWorker.postMessage({command:"SetSecretKey",data:t,nKeyType:e,nKeyLen:a}),1}},{key:"PlayM4_SetDecodeFrameType",value:function(e){return this.bJSPrintLog>0&&console.log("PlayM4_SetDecodeFrameType nFrameType:"+e),null==this.decodeWorker||null==this.oSuperRender?2:0!==e&&1!==e?0:(this.bJSPrintLog>0&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+e),this.nDecFrameType=e,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:e}),1)}},{key:"PlayM4_SetIFrameDecInterval",value:function(e){return 1!==this.nDecFrameType?2:e<0?0:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:e}),1)}},{key:"PlayM4_SetLostFrameMode",value:function(e){return e<0||e>1?0:(this.nLostFrameFlag=e,this.decodeWorker.postMessage({command:"SetLostFrameMode",data:e}),1)}},{key:"PlayM4_SetDisplayRegion",value:function(e,t,a){if(this.bJSPrintLog>0&&console.log(">>>>yff1020>>>>> PlayM4_SetDisplayRegion left:"+e.left+",top:"+e.top+",right:"+e.right+",bottom:"+e.bottom),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;if(null===this.canvasId)return 2;if(!0===t){if(null==e)return 0;if("number"!=typeof e.left||"number"!=typeof e.top||"number"!=typeof e.right||"number"!=typeof e.bottom)return 0;var r=e.left,i=e.right,n=e.top,s=e.bottom,x=document.getElementById(this.sCanvasId).getBoundingClientRect();this.iCanvasWidth=x.width,this.iCanvasHeight=x.height,0!==this.iZoomNum&&(r=Math.round(r/this.iRatio_x)+this.stDisplayRect.left,n=Math.round(n/this.iRatio_y)+this.stDisplayRect.top,i=Math.round(i/this.iRatio_x)+this.stDisplayRect.left,s=Math.round(s/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:n,left:r,right:i,bottom:s};var o=s/this.iCanvasHeight*this.nHeight,l=r/this.iCanvasWidth*this.nWidth,_=i/this.iCanvasWidth*this.nWidth,h=n/this.iCanvasHeight*this.nHeight;this.oSuperRender.SetDisplayRect(l,h,_-l,o-h),this.bDisRect=!0;var f=i-r,c=s-n;this.iRatio_x=this.iCanvasWidth/f,this.iRatio_y=this.iCanvasHeight/c,a&&this.iZoomNum++}else this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;if(this.bPause||this.bOnebyOne||this.bPlayRateChange){var u={};u.nCropLeft=this.nSPSCropLeft,u.nCropRight=this.nSPSCropRight,u.nCropTop=this.nSPSCropTop,u.nCropBottom=this.nSPSCropBottom,u.nCodeWidth=this.nWidth,u.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,u,null):this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight,this.timeStamp,u,null)}return 1}},{key:"PlayM4_FEC_GetPort",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.printfFlag&&console.log(">>>JS PlayM4_FEC_GetPort placeType:"+e+",correctType:"+t+",fecGetPortCB:"+a),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;if(null===this.canvasId)return 2;if(1280!=t&&0!=t)return Ct;var r;return this.FECGetPortCB=a,r=null!=this.oSuperRender?this.oSuperRender.FEC_GetPort(e,t):-1,null!=this.FECGetPortCB&&this.FECGetPortCB(r),r}},{key:"PlayM4_FEC_Enable",value:function(e){if(this.printfFlag&&console.log(">>>JS PlayM4_FEC_Enable fishSubPort:"+e),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;var t=1;return 0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):t=null!=this.oSuperRender?this.oSuperRender.FEC_Enable(e):0,t}},{key:"PlayM4_FEC_SetWnd",value:function(e,t){if(this.printfFlag&&console.log(">>>JS PlayM4_FEC_SetWnd fishSubPort:"+e+",hWnd:"+t),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;var a=1;if(0==e)console.log("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else if(null!=t){var r=document.getElementById(t);if(null!=this.oSuperRender)return this.oSuperRender.FEC_SetWnd(e,r);a=0}else console.log(">>>JS PlayM4_FEC_SetWnd hwnd error fishSubPort:"+e+",hWnd:"+t),a=0;return a}},{key:"PlayM4_FEC_SetParam",value:function(e,t){return this.printfFlag&&console.log(">>>JS PlayM4_FEC_SetParam 1 this.fishSubPort:"+e+",upDateType:"+t.upDateType+",param2d.fPTZParam.fPTZPositionX:"+t.fPTZParam.fPTZPositionX+",param2d.fPTZParam.fPTZPositionY:"+t.fPTZParam.fPTZPositionY),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender?2:null!=this.oSuperRender?this.oSuperRender.FEC_SetParam(e,t):0}},{key:"PlayM4_FEC_SetViewParam",value:function(e,t,a){return this.printfFlag&&console.log(">>>JS PlayM4_FEC_SetViewParam fishSubPort:"+e+",upDateType:"+t+",fValue:"+a),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender?2:null!=this.oSuperRender?this.oSuperRender.FEC_SetViewParam(e,t,a):0}},{key:"PlayM4_FEC_GetViewParam",value:function(e,t,a){if(this.printfFlag&&console.log(">>>JS PlayM4_FEC_GetViewParam fishSubPort:"+e+",upDateType:"+t+",viewParamCB:"+a),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;var r=1;this.FECViewParamCB=a;var i={fValue:-1};return null!=this.oSuperRender?(r=this.oSuperRender.FEC_GetViewParam(e,t,i),null!=this.FECViewParamCB&&this.FECViewParamCB(i)):r=0,r}},{key:"PlayM4_FEC_ResetCorrectType",value:function(e,t,a){return this.printfFlag&&console.log("PlayM4_FEC_ResetCorrectType 1 fishSubPort:"+e+",placeType:"+t+",correctType:"+a),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender?2:1280!=a&&0!=a?Ct:null!=this.oSuperRender?this.oSuperRender.FEC_ResetCorrectType(e,t,a):0}},{key:"PlayM4_FEC_Capture",value:function(e,t){return this.printfFlag&&console.log("PlayM4_FEC_Capture 1 fishSubPort:"+e+",FECImageCB:"+t),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender?2:null!=this.oSuperRender?this.oSuperRender.FEC_Capture(e,t):0}},{key:"PlayM4_FEC_SetBackCilling",value:function(e,t){return this.printfFlag&&console.log("PlayM4_FEC_SetBackCilling 1 fishSubPort:"+e+",bValue:"+t),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender?2:null!=this.oSuperRender?this.oSuperRender.FEC_SetBackCilling(e,t):0}},{key:"PlayM4_GetBMP",value:function(e,t){return this.bmpDownloadFlag=t,this.getPic(e,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(e,t){return this.jpegDownloadFlag=t,this.getPic(e,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(e){return null==this.decodeWorker||null==this.audioRenderer?2:e<0||e>100||""===e?0:(this.Volume=e,this.audioRenderer.SetVolume(e),1)}},{key:"PlayM4_GetVolume",value:function(e){if(null==this.decodeWorker)return 2;if(null==this.audioRenderer)return 2;if(e&&"function"==typeof e){var t=this.audioRenderer.GetVolume();return null===t?63:(e(t),1)}return 0}},{key:"PlayM4_GetOSDTime",value:function(e){return null==this.decodeWorker?2:this.bPlay?e&&"function"==typeof e?(e(this.szOSDTime),1):0:2}},{key:"PlayM4_SetFrameInfoCallBack",value:function(e){return this.frameInfoFlag=!!e,1}},{key:"PlayM4_GetFrameInfo",value:function(){return this.displayFrameInfo}},{key:"PlayM4_IsVisible",value:function(e){return this.bVisibility=e,1}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040007"}},{key:"PlayM4_GetBuildDate",value:function(){return"20231219"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(e){return e>0?(this.iInputMaxBufSize=e,this.bJSPrintLog>0&&console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),1):0}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(e){return null==this.decodeWorker?2:e&&"function"==typeof e?(e(this.nWidth,this.nHeight),1):0}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(e){return e&&"function"==typeof e?(this.YUVBufSizeCBFun=e,1):0}},{key:"PlayM4_GetFileTime",value:function(e){return e&&"function"==typeof e?(this.GetFileTimeCBFun=e,this.decodeWorker.postMessage({command:"GetFileTime"}),1):0}},{key:"PlayM4_GetMpOffset",value:function(e,t){return this.needWaitMpOffset=!0,e&&"function"==typeof e?(this.GetMpOffsetCBFun=e,this.decodeWorker.postMessage({command:"GetMpOffset",FrameTime:t}),1):0}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return null!=this.YUVBufSizeCBFun&&(this.YUVBufSizeCBFun=null),1}},{key:"PlayM4_ClearCanvas",value:function(){if(null==this.oSuperRender)return 2;var e={};return e.nCropLeft=this.nSPSCropLeft,e.nCropRight=this.nSPSCropRight,e.nCropTop=this.nSPSCropTop,e.nCropBottom=this.nSPSCropBottom,e.nCodeWidth=this.nWidth,e.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,e,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,e,null),1}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return null===this.aInputDataBuffer?2:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.bIsInput=!1,1)}},{key:"PlayM4_ResetBuffer",value:function(e){return null===this.aInputDataBuffer?2:(this.decodeWorker.postMessage({command:"ResetBuffer",type:e}),1)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeInfoCBFun=t,null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:e}),1)}},{key:"PlayM4_SetRunTimeInfoCallbackType",value:function(e,t,a){return t==te&&(this.nGetTotalFrameNum=0,a?null==this.oDecodeTimer&&(this.oDecodeTimer=new _e,this.oDecodeTimer.Init()):null!==this.oDecodeTimer&&(this.oDecodeTimer.timerReset(),this.oDecodeTimer=null)),null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetRunTimeInfoCallbackType",module:e,Type:t,Flag:a}),1)}},{key:"PlayM4_SetStreamInfoCallBack",value:function(e,t){return this.streamInfoCBFun=t,this.decodeWorker.postMessage({command:"SetStreamInfoCB",nType:e}),1}},{key:"PlayM4_SetPostMpStreamOffsetCallBack",value:function(e){return this.PostMpStreamOffsetCBFun=e,this.decodeWorker.postMessage({command:"SetPostMpStreamOffsetCB"}),1}},{key:"PlayM4_SetDemuxModel",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:e,bTrue:t}),1)}},{key:"PlayM4_SkipErrorData",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:e}),1)}},{key:"PlayM4_SetDecodeERC",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:e}),1)}},{key:"PlayM4_SetANRParam",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetANRParam",nEnable:e,nANRLevel:t}),1)}},{key:"PlayM4_SetResampleValue",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:e,resampleValue:t}),1)}},{key:"PlayM4_SetGlobalBaseTime",value:function(e,t,a,r,i,n,s){return null==this.decodeWorker?2:e<2e3||e>3e3||t<1||t>12||e<0||t<0||a<0||r<0||i<0||n<0||s<0?Ct:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:e,month:t,day:a,hour:r,min:i,sec:n,ms:s}),1)}},{key:"PlayM4_SetAudioDisplayBuf",value:function(e){return Dt=e,1}},{key:"PlayM4_GetCanvasCapture",value:function(e,t,a){return null!=this.oSuperRender?this.oSuperRender.GetCanvasData(e,t,a):1}},{key:"PlayM4_SetFirstFrameCallBack",value:function(e,t){return null!=t&&"function"!=typeof t?0:(e&&(this.firstFrameCB=t),this.needFirstFrameCB=!0,1)}},{key:"PlayM4_SetDecCBStream",value:function(e){return this.decCBStream=e,1}},{key:"PlayM4_SetCanvasSize",value:function(e,t){return e<16||t<16?0:null!=this.oSuperRender&&this.oSuperRender.SetCanvasSize(e,t,0)}},{key:"PlayM4_GetCanvasSize",value:function(){return null!=this.oSuperRender&&this.oSuperRender.GetCanvasSize()}},{key:"PlayM4_GetBufferValue",value:function(){return this.iInputMaxBufSize}},{key:"PlayM4_GetLastError",value:function(){return this.errorCode}},{key:"PlayM4_GetPlayedTimeEx",value:function(e){e(this.timeStamp-this.startTimeStamp)}},{key:"PlayM4_SetAntialias",value:function(e){return null!=this.oSuperRender?this.oSuperRender.SetAntialias(e):0}},{key:"_SetTextCanvas",value:function(){return null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null),null==this.textCanvas&&(this.textCanvas=document.createElement("canvas")),null!=this.oSuperRender&&this.oSuperRender.SetTextCanvas(this.textCanvas),this.setTextCanvasFlag=!0,1}},{key:"PlayM4_SetWaterMarkFont",value:function(e){return null!=this.oSuperRender?(this.setTextCanvasFlag||this._SetTextCanvas(),this.oSuperRender.SetWaterMarkFont(e)):0}},{key:"PlayM4_SetWaterMarkImage",value:function(e){return null!=this.oSuperRender?this.oSuperRender.SetWaterMarkImage(e):0}},{key:"PlayM4_SetD3DPostProcess",value:function(e,t){return null!=this.oSuperRender?this.oSuperRender.SetD3DPostProcess(e,t):0}},{key:"PlayM4_SetRotateAngle",value:function(e){return null!=this.oSuperRender?this.oSuperRender.SetRotateAngle(e):0}},{key:"PlayM4_IgnoreHeaderAudioDefine",value:function(e){return this.nIgnoreHeaderAudioDefine=e,1}},{key:"getScriptDirectory",value:function(){var e=self.location.href;return e.substr(0,e.lastIndexOf("/")+1)}},{key:"PlayM4_SetAdditionDataCallBack",value:function(e,t,a){return a&&"function"==typeof a||null===a?(this.addtionCallBackFun=a,this.decodeWorker.postMessage({command:"SetAdditionDataCallBack",additionDataType:e,nFlag:t}),1):0}},{key:"downloadFile",value:function(e,t){var a=e;i(e,Blob)||i(e,File)||(a=new Blob([e]));var r=window.URL.createObjectURL(a),n=window.document.createElement("a");n.href=r,n.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),n.dispatchEvent(s)}},{key:"SourceDataInterval",value:function(e){var t,a=0;return null==this.oInputTimer&&(this.oInputTimer=new _e,this.oInputTimer.Init()),-1==this.nLastSourceTimeStamp&&(this.nLastSourceTimeStamp=e),t=this.oInputTimer.GetTimerWalk(),-1==this.nLastClockTimeStamp?(this.nLastClockTimeStamp=t,1):t>=this.nLastClockTimeStamp?(a=t-this.nLastClockTimeStamp,e!=this.nLastSourceTimeStamp&&this.nLastSourceTimeStamp,null!=this.runtimeInfoCBFun&&(this.pstRuntimeInfo.nRunTimeModule=4,this.pstRuntimeInfo.nStrVersion=1,this.pstRuntimeInfo.nFrameTimeStamp=e,this.pstRuntimeInfo.nFrameNum=0,this.pstRuntimeInfo.nErrorCode=ee,this.pstRuntimeInfo.nInputDataInterval=a,this.pstRuntimeInfo.nFrameNumInterval=0,this.runtimeInfoCBFun(this.pstRuntimeInfo)),this.nLastSourceTimeStamp=e,this.nLastClockTimeStamp=t,1):(null!=this.oInputTimer&&this.oInputTimer.Init(),this.nLastClockTimeStamp=-1,1)}},{key:"SearchPtsInPes",value:function(e,t){if(t<8)return-1;var a=new Uint8Array(e),r=0;for(r=0;r<t-7;r++){if(r+2>t)return-1;if(0==a[r]&&0==a[r+1]&&1==a[r+2]){if(r+3>t)return-1;switch(a[r+3]){case 189:case 191:if(r+5>t)return-1;var i=6+(a[r+4]<<8)+a[r+5];if(!(r+i<t))return-1;r+=i;break;case 224:if(r+7>t)return-1;if(128&a[r+7])return r}}}return-1}}]),a}(),Bt=r((function(){return s(this,(function(e){return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))]}))})),kt={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:null,errorCode:0,status:null};window.g_printfFlag=0,window.g_recorderFlag=0;var Nt=function(){function a(t,r,i){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,x=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,a),this.printfFlag=window.g_printfFlag,this.printfFlag>=0&&console.log("%c>>>JSPlayerInterface wasmPathV3:%s, wasmPathV1:%s, chromeVersion:%d,renderEngine:%s,webworker:%d,setHasThread:%d","color: red",t,r,_getFExplore(),x,o,l),this.szBasePathV3=t,this.szBasePathV1=r,this.fnCallBack=i,this.nUser=s,this.renderEngine=x,this.hasWebWorker=o,this.setHasThread=l,this.decodeEngine=1,this.streamOpenMode=0,this.canvasID="",this.FECcanvasIDArray=[],this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadInputDataFlag=!1,this.rtpDataNeedAdd4Size=!1,this.aInputDataBuffer=[],this.iInputMaxBufSize=2097152,this.switchingV3toV1=!1,this.audioDisplayBufSize=0,this.decodeFrameType=0,this.decInterval=-1,this.volume=0,this.displayBuf=0,this.anrParamLevel=0,this.anrParamFlag=0,this.resampleRate=0,this.resampleFlag=0,this.decodeERCLevel=0,this.skipErrorData=0,this.demuxModelType=0,this.demuxModeFlag=0,this.needResetBuffer=0,this.globalBaseTime={},this.globalBaseTime.year=0,this.inputBufSize=0,this.needSetRotateAngle=!1,this.twodRotateAngle=0,this.frameInfoCBFlag=!1,this.waterFontParam=null,this.waterImageParam=null,this.waterCanvas=null,this.waterCanvasCtx=null,this.textCanvas=null,this.needSetFFCB=!1,this.FFCBFlag=0,this.firstFrameCB=null,this.needSetSecretKey=!1,this.keyData=null,this.keyType=1,this.runtimeModule=0,this.runtimeCBFun=null,this.streamInfoType=0,this.streamInfoCBFun=null,this.additionDataType=0,this.additionFlag=0,this.addCBFun=null,this.needSetRunTimeInfoCB=!1,this.needSetstreamInfoCB=!1,this.needPlaySound=!1,this.needSetAdditionDataCB=!1,this.needSetRunTimeInfoCBType=!1,this.PostMpStreamOffsetCBFun=null,this.needPostMpStreamOffsetCB=!1,this.CanvasSubPortMap=new Map,this.SourceTypeFlagMap=new Map,this.SplitterTypeFlagMap=new Map,this.DecodeTypeFlagMap=new Map,this.RenderTypeFlagMap=new Map,this.ManagerTypeFlagMap=new Map,this.oJSPlayerObj=null,this.supportWebCodecs=window._getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var _=new OffscreenCanvas(1,1),h=_.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),_=null,h=null}var f=this.JSPlayM4_GetSDKVersion(),c=this.JSPlayM4_GetBuildDate();this.printfFlag>=0&&console.log("%c wasmplayer.min.js version:%s,buildDate:%s","color: blue",f,c),this.supportSIMD=!1,this.callBackParameter=kt,this.jsplayerVersion=3,this.supportWebCodecs?this.jsplayerVersion=3:this.supportSab&&this.supportOffscreen?this.jsplayerVersion=2:this.jsplayerVersion=1,this.jsplayerVersion<3&&(this.callBackParameter.bSupHardDecAVC=!1,this.callBackParameter.bSupHardDecHEVC=!1,this.callBackParameter.bSupHardOrSoft=!1),null===this.szBasePathV3&&null!=this.szBasePathV1?this.jsplayerVersion=1:null!=this.szBasePathV3&&null===this.szBasePathV1?(this.printfFlag>=0&&console.info("%c>>>> szBasePathV1 is null ","color: red"),this.jsplayerVersion=3):null===this.szBasePathV3&&null===this.szBasePathV1&&(this.printfFlag>=0&&console.info("%c>>>> szBasePathV3 and szBasePathV1 are null ","color: red"),this.fnCallBack(this.callBackParameter)),Bt().then(function(e){e?(this.supportSIMD=!0,this.printfFlag>=0&&console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion)):(this.supportSIMD=!1,this.printfFlag>=0&&console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion))}.bind(this)),this.wasmloaded=!1,this.jsplayerVersion>1?this.oJSPlayerObj=new yt(this,this.szBasePathV3,(function(e){var t=e.bSupHardOrSoft,a=e.bSupHardDecAVC,r=e.bSupHardDecHEVC,i=e.cmd,s=e.errorCode,x=e.status;t?(n.callBackParameter.bSupHardDecAVC=a,n.callBackParameter.bSupHardDecHEVC=r,n.callBackParameter.bSupHardOrSoft=t,n.callBackParameter.cmd=i,n.callBackParameter.errorCode=s,n.callBackParameter.status=x,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)):(n.printfFlag>=0&&console.log("%c5>not support V3hard and V3Soft ,switch V3 to V1 ","color: red"),n.jsplayerVersion=1,n.oJSPlayerObj=new Ot(n,n.szBasePathV1,(function(e){e.instance;var t=e.cmd,a=e.errorCode,r=e.status;n.callBackParameter.bSupHardDecAVC=!1,n.callBackParameter.bSupHardDecHEVC=!1,n.callBackParameter.bSupHardOrSoft=!1,n.callBackParameter.cmd=t,n.callBackParameter.errorCode=a,n.callBackParameter.status=r,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),0))}),this.nUser,this.renderEngine,this.hasWebWorker,this.setHasThread,this.jsplayerVersion):this.oJSPlayerObj=new Ot(this,this.szBasePathV1,(function(e){e.instance;var t=e.cmd,a=e.errorCode,r=e.status;n.callBackParameter.bSupHardDecAVC=!1,n.callBackParameter.bSupHardDecHEVC=!1,n.callBackParameter.bSupHardOrSoft=!1,n.callBackParameter.cmd=t,n.callBackParameter.errorCode=a,n.callBackParameter.status=r,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),0)}return t(a,[{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag>0&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&this.oJSPlayerObj.JSPlayM4_GetPort(),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag>0&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),this.streamOpenMode=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStreamOpenMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetStreamOpenMode(e):this.oJSPlayerObj.PlayM4_SetStreamOpenMode(e),1)}},{key:"JSPlayM4_OpenStream",value:function(e,t,a){if(this.printfFlag>0&&console.log(">>>>>yff20230817>>>>> JSPlayM4_OpenStream 1 :"+e),40!==t&&console.info("%cJSPlayM4_OpenStream nSize is not 40","color: red"),4===e[8]&&0===e[9]&&(this.rtpDataNeedAdd4Size=!0),this.downloadInputDataFlag){var r=new Uint8Array(e.buffer);this.downloadRTPData(r),console.log("write 40 hik head")}if(this.HIK40Head=e,this.HIKHeadSize=t,this.HIKPoolSize=a,this.switchingV3toV1)return 1;var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OpenStream this.oJSPlayerObj is null"),0):((i=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OpenStream(e,t,a):this.oJSPlayerObj.PlayM4_OpenStream(e,t,a))===O&&this._switchV3ToV1(this.streamOpenMode,e,t,a,this.needPlay),this.switchingV3toV1?1:i)}},{key:"JSPlayM4_OpenStreamAdvanced",value:function(e,t,a,r,i){if(this.printfFlag>0&&console.log(">>>>>yff20230817>>>>> JSPlayM4_OpenStreamAdvanced 1 :"+r),1!=e||1!=t||a<0||r.length<0||i<1048576)return console.log("%c JSPlayM4_OpenStreamAdvanced input param error nProtocolType:"+e+",nSessionInfoType:"+t+",nSessionInfoLen:"+a+",pSessionInfoData:"+r+",nBufPoolSize:"+i,"color: red"),0;if(this.downloadInputDataFlag){var n=new Uint8Array(r.buffer);this.downloadRTPData(n),console.log("write sdpinfo")}var s=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OpenStreamAdvanced this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?s=this.oJSPlayerObj.JSPlayM4_OpenStreamAdvanced(e,t,a,r,i):console.log("20240223 V1 not support sdp openstream "),s)}},{key:"_switchV3ToV1",value:function(e,t,a,r,i){var n=this;console.log("%c5>switch V3 to V1","color: red"),this.switchingV3toV1=!0,this.jsplayerVersion=1,this.oJSPlayerObj.JSPlayM4_Stop(),this.oJSPlayerObj.JSPlayM4_CloseStream(),this.oJSPlayerObj.JSPlayM4_FreePort(),this.oJSPlayerObj=null;var s=new Ot(this,this.szBasePathV1,(function(x){x.instance;var o=x.cmd,l=x.errorCode,_=x.status;"loaded"===o&&(n.oJSPlayerObj=s,n.switchingV3toV1=!1,n.callBackParameter.cmd=o,n.callBackParameter.errorCode=l,n.callBackParameter.status=_,n.JSPlayM4_SetStreamOpenMode(e),n.JSPlayM4_OpenStream(t,a,r),(i||n.needPlay)&&n.JSPlayM4_Play(n.canvasID),n._switchV3ToV1ResetParam())}),0)}},{key:"_switchV3ToV1ResetParam",value:function(){if(this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.keyData,this.keyType),this.needSetFFCB&&this.JSPlayM4_SetFirstFrameCallBack(this.FFCBFlag,this.firstFrameCB),this.needSetRunTimeInfoCB&&this.JSPlayM4_SetRunTimeInfoCallBackEx(this.runtimeModule,this.runtimeCBFun),this.needSetRunTimeInfoCBType){if(this.SourceTypeFlagMap.size>0){var e,t=L(this.SourceTypeFlagMap.keys());try{for(t.s();!(e=t.n()).done;){var a=e.value,r=this.SourceTypeFlagMap.get(a);1==r&&this.JSPlayM4_SetRunTimeInfoCallbackType(0,a,r)}}catch(e){t.e(e)}finally{t.f()}}if(this.SplitterTypeFlagMap.size>0){var i,n=L(this.SplitterTypeFlagMap.keys());try{for(n.s();!(i=n.n()).done;){var s=i.value,x=this.SplitterTypeFlagMap.get(s);1==x&&this.JSPlayM4_SetRunTimeInfoCallbackType(1,s,x)}}catch(e){n.e(e)}finally{n.f()}}if(this.DecodeTypeFlagMap.size>0){var o,l=L(this.DecodeTypeFlagMap.keys());try{for(l.s();!(o=l.n()).done;){var _=o.value,h=this.DecodeTypeFlagMap.get(_);1==h&&this.JSPlayM4_SetRunTimeInfoCallbackType(2,_,h)}}catch(e){l.e(e)}finally{l.f()}}if(this.RenderTypeFlagMap.size>0){var f,c=L(this.RenderTypeFlagMap.keys());try{for(c.s();!(f=c.n()).done;){var u=f.value,d=this.RenderTypeFlagMap.get(u);1==d&&this.JSPlayM4_SetRunTimeInfoCallbackType(3,u,d)}}catch(e){c.e(e)}finally{c.f()}}if(this.ManagerTypeFlagMap.size>0){var p,m=L(this.ManagerTypeFlagMap.keys());try{for(m.s();!(p=m.n()).done;){var S=p.value,R=this.ManagerTypeFlagMap.get(S);1==R&&this.JSPlayM4_SetRunTimeInfoCallbackType(4,S,R)}}catch(e){m.e(e)}finally{m.f()}}}return this.needSetAdditionDataCB&&this.JSPlayM4_SetAdditionDataCallBack(this.additionDataType,this.additionFlag,this.addCBFun),this.needSetstreamInfoCB&&this.JSPlayM4_SetStreamInfoCallBack(this.streamInfoType,this.streamInfoCBFun),this.needPostMpStreamOffsetCB&&this.JSPlayM4_SetPostMpStreamOffsetCallBack(this.PostMpStreamOffsetCBFun),this.needPlaySound&&this.JSPlayM4_PlaySound(),0!=this.skipErrorData&&this.oJSPlayerObj.PlayM4_SkipErrorData(this.skipErrorData),0!=this.demuxModeFlag&&this.oJSPlayerObj.PlayM4_SetDemuxModel(this.demuxModelType,this.demuxModeFlag),0!=this.globalBaseTime.year&&this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),-1!=this.decInterval&&this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(this.decInterval),0!=this.decodeERCLevel&&this.oJSPlayerObj.PlayM4_SetDecodeERC(this.decodeERCLevel),0!=this.volume&&this.JSPlayM4_SetVolume(this.volume),0!=this.anrParamFlag&&this.oJSPlayerObj.PlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),0!=this.resampleFlag&&this.oJSPlayerObj.PlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),0!=this.displayBuf&&this.oJSPlayerObj.PlayM4_SetDisplayBuf(this.displayBuf),null!=this.waterFontParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkFont(this.waterFontParam),null!=this.waterImageParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkImage(this.waterImageParam),this.needSetRotateAngle&&oJSPlayerWasm._JSPlayM4_SetRotateAngle(this.port,this.twodRotateAngle),0!=this.audioDisplayBufSize&&this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(this.audioDisplayBufSize),0!=this.decodeFrameType&&this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),0!=this.needResetBuffer&&this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),0!=this.inputBufSize&&this.oJSPlayerObj.PlayM4_SetInputBufSize(this.inputBufSize),this.oJSPlayerObj.PlayM4_SetFrameInfoCallBack(this.frameInfoCBFlag),1}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){if(this.printfFlag>0&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e)return console.log("0 is V3softDecode, 1 is V3hardDecoder,decodeEngine:"+e),0;this.decodeEngine=e;var t=1;if(this.jsplayerVersion>1){if(!this.supportSab&&0==e)return console.info("%c3>JSPlayM4_SetDecodeEngine(0 is soft,1 is hard):%d,SharedArrayBuffer Error , does not support Soft Decdoe!!!!!","color: red",e),0;t=this.oJSPlayerObj.JSPlayM4_SetDecodeEngine(this.decodeEngine)}return this.switchingV3toV1?1:t}},{key:"JSPlayM4_DownloadData",value:function(){return this.downloadInputDataFlag=!0,1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return this.audioDisplayBufSize=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioDisplayBuf this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetAudioDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(e)}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canvasID=e;var t=1;return this.printfFlag>0&&console.log(">>>>>yff20230817>>>>> JSPlayM4_Play 1 this.supportSab:"+this.supportSab),this.needPlay=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Play this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.JSPlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))):(t=this.oJSPlayerObj.PlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.PlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))),this.switchingV3toV1?1:t)}},{key:"JSPlayM4_InputData",value:function(e,t){var a;if(null===this.oJSPlayerObj||!this.wasmloaded||1==this.jsplayerVersion&&null==this.oJSPlayerObj.streamOpenMode){var r=this.aInputDataBuffer.length;if(r+t>this.iInputMaxBufSize)return console.log("WasmPlayer input over"),0;for(var i=0;i<t;i++)this.aInputDataBuffer[r+i]=e[i];return 1}if(a=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_InputData(e,t):this.oJSPlayerObj.PlayM4_InputData(e,t),this.downloadInputDataFlag&&t>0)if(this.rtpDataNeedAdd4Size){var n=null,s=t+4,x=new Uint32Array([t]),o=new Uint8Array(x.buffer);(n=new Uint8Array(s)).set(o,0),n.set(e,4),this.downloadRTPData(n),x=null,o=null,n=null}else this.downloadRTPData(e);return a}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_Stop this.oJSPlayerObj is null"),0;if(this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}return this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Stop(e):this.oJSPlayerObj.PlayM4_Stop(e)}},{key:"JSPlayM4_CloseStream",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>>  JSPlayM4_CloseStream this.oJSPlayerObj is null"),0):(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_CloseStream():this.oJSPlayerObj.PlayM4_CloseStream(),null!=this.waterCanvas&&(this.waterCanvas.remove(),this.waterCanvas=null),this.waterCanvasCtx=null,this.SourceTypeFlagMap.clear(),this.SplitterTypeFlagMap.clear(),this.DecodeTypeFlagMap.clear(),this.RenderTypeFlagMap.clear(),this.ManagerTypeFlagMap.clear(),e)}},{key:"JSPlayM4_FreePort",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FreePort this.oJSPlayerObj is null"),0):(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FreePort():this.oJSPlayerObj.PlayM4_FreePort(),this.oJSPlayerObj=null,e)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeFrameType this.oJSPlayerObj is null"),0):(this.decodeFrameType=e,this.switchingV3toV1?1:(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeFrameType(e):7==e?t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(1):(t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(0),t=this.oJSPlayerObj.PlayM4_SetDecodeFrameType(e)),t))}},{key:"JSPlayM4_PlaySound",value:function(){var e=1;return this.needPlaySound=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_PlaySound this.oJSPlayerObj is null"),0):(this.SetDefaultSampleRate(),1!=(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_PlaySound():this.oJSPlayerObj.PlayM4_PlaySound(0))&&(e=0),e)}},{key:"JSPlayM4_PlaySoundShare",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_PlaySoundShare this.oJSPlayerObj is null"),0):(this.SetDefaultSampleRate(),1!=(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_PlaySoundShare():this.oJSPlayerObj.PlayM4_PlaySound(0))&&(e=0),e)}},{key:"SetDefaultSampleRate",value:function(){var e=1,t=new(window.AudioContext||window.webkitAudioContext),a=t.sampleRate;return t.close(),48e3!=a&&(console.log("浏览器默认采样率:",a+"Hz"),e=this.JSPlayM4_SetResampleValue(!0,a),console.log("JSPlayM4_SetResampleValue resSDSR:"+e)),e}},{key:"JSPlayM4_StopSoundShare",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_StopSoundShare this.oJSPlayerObj is null"),0):(1!=(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopSoundShare():this.oJSPlayerObj.PlayM4_StopSound())&&(e=0),e)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetJPEG this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetJPEG(e,t):this.oJSPlayerObj.PlayM4_GetJPEG(e,t)}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBMP this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBMP(e,t):this.oJSPlayerObj.PlayM4_GetBMP(e,t)}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropJPEG this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_GetCropJPEG(e,t):console.log("%c1>JSPlayerV1.X does not support GetCropJPEG","color: red"),a)}},{key:"JSPlayM4_GetCropBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropBMP this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_GetCropBMP(e,t):console.log("%c1>JSPlayerV1.X does not support GetCropBMP","color: red"),a)}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasCapture this.oJSPlayerObj is null"),0):t<0||a<0?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasCapture(e,t,a):this.oJSPlayerObj.PlayM4_GetCanvasCapture(e,t,a)}},{key:"JSPlayM4_StopSound",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_StopSound this.oJSPlayerObj is null"),0):(1!=(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopSound():this.oJSPlayerObj.PlayM4_StopSound())&&(e=0),e)}},{key:"JSPlayM4_GetSDKVersion",value:function(){return"0801000B"}},{key:"JSPlayM4_GetBuildDate",value:function(){return"202512151926"}},{key:"JSPlayM4_GetLastError",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetLastError():this.oJSPlayerObj.PlayM4_GetLastError()}},{key:"JSPlayM4_Fast",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Fast this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Fast()),e)}},{key:"JSPlayM4_Slow",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Slow this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Slow()),e)}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return this.decInterval=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetIFrameDecInterval this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetIFrameDecInterval(e):this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(e)}},{key:"JSPlayM4_Pause",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Pause this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Pause(e):this.oJSPlayerObj.PlayM4_Pause(e)}},{key:"JSPlayM4_OneByOne",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOne this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOne():this.oJSPlayerObj.PlayM4_OneByOne(e)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOneResume this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOneResume():this.oJSPlayerObj.PlayM4_Pause(!1)}},{key:"JSPlayM4_SetVolume",value:function(e){var t=1;if(this.volume=e,this.switchingV3toV1)return 1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetVolume this.oJSPlayerObj is null"),0;if(this.jsplayerVersion>1)t=this.oJSPlayerObj.JSPlayM4_SetVolume(e);else{var a=e/65535*100;t=this.oJSPlayerObj.PlayM4_SetVolume(a)}return t}},{key:"JSPlayM4_GetVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetVolume this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_GetVolume(),null!=e&&e(t)):t=this.oJSPlayerObj.PlayM4_GetVolume((function(t){null!=e&&e(t/100*65535)})),t)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,a,r,i){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],x=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetDisplayRegion this.oJSPlayerObj is null"),0;if("number"!=typeof t||"number"!=typeof r||"number"!=typeof a||"number"!=typeof i)return console.log("param is not number"),0;if(0!=n&&1!=n&&0!=n&&1!=n)return 0;if(0!=s&&1!=s&&0!=s&&1!=s)return 0;if(!n){var o=document.getElementById(this.canvasID).width,l=document.getElementById(this.canvasID).height;if(t<0||a<0||r<0||i<0||t>o||a>o||r>l||i>l)return 0;if(a-t<16||i-r<16||a-t>o||i-r>l)return console.log(">>>JS left:"+t+",right:"+a+",top:"+r+",bottom:"+i+",bClose:"+n+",bZoomEnable:"+s+",canvasWidth:"+o+",canvasHeight:"+l),0}if(this.jsplayerVersion>1)x=this.oJSPlayerObj.JSPlayM4_SetDisplayRegion(e,t,a,r,i,n,s);else{var _={};_.left=t,_.right=a,_.top=r,_.bottom=i,x=this.oJSPlayerObj.PlayM4_SetDisplayRegion(_,!n,s)}return x}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return this.printfFlag=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPrintLogFlag this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPrintLogFlag(e):this.oJSPlayerObj.PlayM4_OpenPlayerSDKPrintLog(e)}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateData this.oJSPlayerObj is null"),0):1!=e&&2!=e&&4!=e&&8!=e&&16!=e&&32!=e&&64!=e&&128!=e?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx intelType value error"),0):1!=t&&0!=t&&1!=t&&0!=t?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx bTrue value error"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_RenderPrivateData(e,t):console.log("%c1>JSPlayerV1.X does not support RenderPrivateData","color: red"),a)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,a){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx this.oJSPlayerObj is null"),0):1!=e&&2!=e&&4!=e&&8!=e&&16!=e&&32!=e&&64!=e&&128!=e?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx intelType value error"),0):16==e&&(t<1||t>15)||32==e&&(t<1||t>7)||64==e&&(t<1||t>3)||128==e&&(t<1||t>7)?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx subType value error"),0):1!=a&&0!=a&&1!=a&&0!=a?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx bTrue value error"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_RenderPrivateDataEx(e,t,a):console.log("%c1>JSPlayerV1.X does not support RenderPrivateDataEx","color: red"),r)}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetCanvasSize(e,t,a):this.oJSPlayerObj.PlayM4_SetCanvasSize(e,t)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayBuf this.oJSPlayerObj is null"),0):(this.displayBuf=e,this.switchingV3toV1?1:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetDisplayBuf(e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetSourceBufferRemain():this.oJSPlayerObj.PlayM4_GetInputBufSize()}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBufferValue this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBufferValue(e):this.oJSPlayerObj.PlayM4_GetBufferValue(e)}},{key:"JSPlayM4_ReversePlay",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReversePlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_ReversePlay():console.log("%c1>JSPlayerV1.X does not support ReversePlay","color: red"),e)}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeThreadNum this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeThreadNum(e):console.log("%c1>JSPlayerV1.X does not support SetDecodeThreadNum, V1.X decocde only 1 thread","color: red"),t)}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasSize(e):this.oJSPlayerObj.PlayM4_GetCanvasSize()}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,a){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_DisplayLostFrames(e,t,a):console.log("%c1>JSPlayerV1.X does not support DisplayLostFrames","color: red"),r)}},{key:"JSPlayM4_SetIVSContraBandDrawMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):0!=e&&1!=e?0:(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetIVSContraBandDrawMode(e):console.log("%c1>JSPlayerV1.X does not support SetIVSContraBandDrawMode","color: red"),t)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetANRParam this.oJSPlayerObj is null"),0):(this.anrParamLevel=t,this.anrParamFlag=e,this.switchingV3toV1?1:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetANRParam(e,t):this.oJSPlayerObj.PlayM4_SetANRParam(e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetResampleValue this.oJSPlayerObj is null"),0):(this.resampleRate=t,this.resampleFlag=e,this.switchingV3toV1?1:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetResampleValue(e,t):this.oJSPlayerObj.PlayM4_SetResampleValue(e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAntialias this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_SetAntialias(e),console.log("V3 JSPlayM4_SetAntialias resSA: ".concat(t))):(t=this.oJSPlayerObj.PlayM4_SetAntialias(e),console.log("V1 JSPlayM4_SetAntialias resSA: ".concat(t))),t)}},{key:"JSPlayM4_SyncToAudio",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SyncToAudio this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SyncToAudio(e):console.log("%c1>JSPlayerV1.X does not support SyncToAudio","color: red"),t)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioThreadModel this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAudioThreadModel(e):console.log("%c1>JSPlayerV1.X does not support SetAudioThreadModel","color: red"),t)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return this.decodeERCLevel=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeERC this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecodeERC(e):this.oJSPlayerObj.PlayM4_SetDecodeERC(e)}},{key:"JSPlayM4_SkipErrorData",value:function(e){return this.skipErrorData=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SkipErrorData this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SkipErrorData(e):this.oJSPlayerObj.PlayM4_SkipErrorData(e)}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return this.demuxModelType=e,this.demuxModeFlag=t,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDemuxModel this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDemuxModel(e,t):this.oJSPlayerObj.PlayM4_SetDemuxModel(e,t)}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess this.oJSPlayerObj is null"),0):"number"!=typeof e||"number"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType or fValue is not number"),0):1!==e&&2!==e&&3!==e&&4!==e&&5!==e?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType is 1~5"),0):1===e&&(t<-1||t>1)||2===e&&(t<0||t>1)||3===e&&(t<-1||t>1)||4===e&&(t<-1||t>1)||5===e&&(t<0||t>1)?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess pFontParam f* is 0~1 or -1~1"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetD3DPostProcess(e,t):this.oJSPlayerObj.PlayM4_SetD3DPostProcess(e,t)}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){return this.needSetFFCB=!0,this.FFCBFlag=e,this.firstFrameCB=t,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFirstFrameCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFirstFrameCallBack(e,t):this.oJSPlayerObj.PlayM4_SetFirstFrameCallBack(e,t)}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDecCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDecCallBack(e,t)}},{key:"JSPlayM4_SetHardDecToJepgCallBack",value:function(e,t){return null==e||null==e.nHardToJpegQuality||null==e.nHardToJpegInterval||null==e.nHardToJpegZoomWidth||null==e.nHardToJpegZoomHeight||null==e.nZoomResolutionFlag||e.nHardToJpegQuality<=0||e.nHardToJpegQuality>1||e.nHardToJpegInterval<1||e.nHardToJpegZoomWidth<1||e.nHardToJpegZoomHeight<1||0!=e.nZoomResolutionFlag&&1!=e.nZoomResolutionFlag?0:null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetHardDecToJepgCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetHardDecToJepgCallBack(e,t):(console.log("%c1>JSPlayerV1.X does not support SetHardDecToJepgCallBack","color: red"),0)}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDisplayCallBack(t)}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){return this.frameInfoCBFlag=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFrameInfoCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFrameInfoCallBack(e):this.oJSPlayerObj.PlayM4_SetFrameInfoCallBack(e)}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===this.oJSPlayerObj||e<1||e>3?(console.log(">>>>>yff>>> JSPlayM4_SetDecCBStream this.oJSPlayerObj is null stream:"+e),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCBStream(e):this.oJSPlayerObj.PlayM4_SetDecCBStream(e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFrameInfo this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetFrameInfo():this.oJSPlayerObj.PlayM4_GetFrameInfo()}},{key:"JSPlayM4_GetAdditionData",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetAdditionData this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetAdditionData():(console.log("%c1>JSPlayerV1.X does not support GetAdditionData","color: red"),0)}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,a){return this.additionDataType=e,this.additionFlag=t,this.addCBFun=a,this.needSetAdditionDataCB=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAdditionDataCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetAdditionDataCallBack(e,t,a):this.oJSPlayerObj.PlayM4_SetAdditionDataCallBack(e,t,a)}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPlayedTimeEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetPlayedTimeEx(e):this.oJSPlayerObj.PlayM4_GetPlayedTimeEx(e)}},{key:"JSPlayM4_GetFileTime",value:function(e){var t=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFileTime this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_GetFileTime(),null!=e&&e(t)):t=this.oJSPlayerObj.PlayM4_GetFileTime(e),1e3*t)}},{key:"JSPlayM4_GetMpOffset",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetMpOffset this.oJSPlayerObj is null"),-1):(this.jsplayerVersion>1?(n=this.oJSPlayerObj.JSPlayM4_GetMpOffset(t,a,r,i),null!=e&&e(n)):n=this.oJSPlayerObj.PlayM4_GetMpOffset(e,t),n)}},{key:"JSPlayM4_ResetBuffer",value:function(e){var t=1;return this.needResetBuffer=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ResetBuffer this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_ResetBuffer(e):(t=this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),t=this.oJSPlayerObj.PlayM4_ResetBuffer(e)),t)}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,a,r,i,n,s){return e<0||t<0||t>12||a<0||a>31||r<0||r>=24||i<0||i>=60||n<0||n>=60||s<0||s>=1e3?0:(this.globalBaseTime={year:e,month:t,day:a,hour:r,min:i,sec:n,ms:s},this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetGlobalBaseTime this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetGlobalBaseTime(e,t,a,r,i,n,s):this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(e,t,a,r,i,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.needSetSecretKey=!0,this.keyData=e,this.keyType=t,this.switchingV3toV1)return 1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetSecretKey this.oJSPlayerObj is null"),0;if(1!=t&&2!=t)return 0;var a=0;return 1==t?a=128:2==t&&(a=256),this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetSecretKey(t,e,a):this.oJSPlayerObj.PlayM4_SetSecretKey(t,e,a)}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeModule=e,this.runtimeCBFun=t,this.needSetRunTimeInfoCB=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallBackEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRunTimeInfoCallBackEx(e,t):this.oJSPlayerObj.PlayM4_SetRunTimeInfoCallBackEx(e,t)}},{key:"JSPlayM4_SetRunTimeInfoCallbackType",value:function(e,t,a){switch((e>4||e<0||t<0||0!=a&&1!=a)&&console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallbackType param error nModule:"+e+",nType:"+t+",nFlag:"+a),e){case 0:a?this.SourceTypeFlagMap.set(t,1):this.SourceTypeFlagMap.delete(t);break;case 1:a?this.SplitterTypeFlagMap.set(t,1):this.SplitterTypeFlagMap.delete(t);break;case 2:a?this.DecodeTypeFlagMap.set(t,1):this.DecodeTypeFlagMap.delete(t);break;case 3:a?this.RenderTypeFlagMap.set(t,1):this.RenderTypeFlagMap.delete(t);break;case 4:a?this.ManagerTypeFlagMap.set(t,1):this.ManagerTypeFlagMap.delete(t);break;default:return 0}return this.needSetRunTimeInfoCBType=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallbackType this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRunTimeInfoCallbackType(e,t,a):this.oJSPlayerObj.PlayM4_SetRunTimeInfoCallbackType(e,t,a)}},{key:"JSPlayM4_SetStreamInfoCallBack",value:function(e,t){return this.streamInfoCBFun=t,this.streamInfoType=e,this.needSetstreamInfoCB=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStreamInfoCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetStreamInfoCallBack(e,t):this.oJSPlayerObj.PlayM4_SetStreamInfoCallBack(e,t)}},{key:"JSPlayM4_SetPostMpStreamOffsetCallBack",value:function(e){return e&&"function"==typeof e||null===e?(this.PostMpStreamOffsetCBFun=e,this.needPostMpStreamOffsetCB=!0,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPostMpStreamOffsetCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPostMpStreamOffsetCallBack(e):this.oJSPlayerObj.PlayM4_SetPostMpStreamOffsetCallBack(e)):0}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPlayOrBackSwitchMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetPlayOrBackSwitchMode(e):console.log("%c1>JSPlayerV1.X does not support SetPlayOrBackSwitchMode","color: red"),t)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStretchPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_SetStretchPlay(e,t):console.log("%c1>JSPlayerV1.X does not support SetStretchPlay","color: red"),a)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAutoSmoothPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAutoSmoothPlay(e):console.log("%c1>JSPlayerV1.X does not support SetAutoSmoothPlay","color: red"),t)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_KeepPlaySpeed this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_KeepPlaySpeed(e):console.log("%c1>JSPlayerV1.X does not support KeepPlaySpeed","color: red"),t)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IgnoreHeaderAudioDefine this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_IgnoreHeaderAudioDefine(e):this.oJSPlayerObj.PlayM4_IgnoreHeaderAudioDefine(e)}},{key:"JSPlayM4_SetSycGroup",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSycGroup this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetSycGroup(e):console.log("%c1>JSPlayerV1.X does not support SetSycGroup","color: red"),t)}},{key:"JSPlayM4_SetRotateAngle",value:function(e){return"number"!=typeof e?(console.log(">>>>>yff>>> JSPlayM4_SetRotateAngle nValue is not number"),0):0!=e&&90!=e&&180!=e&&270!=e?(console.log(">>>>>yff>>> JSPlayM4_SetRotateAngle only support 0/90/180/270"),0):(this.needSetRotateAngle=!0,this.twodRotateAngle=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRotateAngle this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRotateAngle(e):this.oJSPlayerObj.PlayM4_SetRotateAngle(e))}},{key:"JSPlayM4_SetPanoramaDisplayEffect",value:function(e){return"number"!=typeof e?(console.log(">>>>>yff>>> JSPlayM4_SetPanoramaDisplayEffect eDisplayEffect is not number"),0):0!=e&&1!=e&&2!=e&&3!=e?(console.log(">>>>>yff>>> JSPlayM4_SetPanoramaDisplayEffect only support 0/1/2/3"),0):this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPanoramaDisplayEffect this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPanoramaDisplayEffect(e):(console.log("%c1>JSPlayerV1.X does not support SetPanoramaDisplayEffect 20250910","color: red"),0)}},{key:"JSPlayM4_SetPanoramaSphereViewParam",value:function(e,t){var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPanoramaSphereViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_SetPanoramaSphereViewParam(e,t):console.log("%c1>JSPlayerV1.X does not support  JSPlayM4_SetPanoramaSphereViewParam 20250910","color: red"),a)}},{key:"JSPlayM4_GetPanoramaSphereViewParam",value:function(e,t){var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPanoramaSphereViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_GetPanoramaSphereViewParam(e,t):console.log("%c1>JSPlayerV1.X does not support  JSPlayM4_GetPanoramaSphereViewParam 20250910","color: red"),a)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return this.FECcanvasIDArray=e.split(","),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetCanvasID this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetCanvasID(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,a){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_ResetCorrectType this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_ResetCorrectType(e,t,a):this.oJSPlayerObj.PlayM4_FEC_ResetCorrectType(e,t,a)}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPort this.oJSPlayerObj is null"),-1):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetPort(e,t,a):this.oJSPlayerObj.PlayM4_FEC_GetPort(e,t,a)}},{key:"JSPlayM4_FEC_Enable",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Enable this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_Enable(e):this.oJSPlayerObj.PlayM4_FEC_Enable(e)}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_SetParam(e,t):this.oJSPlayerObj.PlayM4_FEC_SetParam(e,t)}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetParam(e,t):(console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),1)}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,a){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetViewParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_SetViewParam(e,t,a):this.oJSPlayerObj.PlayM4_FEC_SetViewParam(e,t,a)}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,a){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetViewParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetViewParam(e,t,a):this.oJSPlayerObj.PlayM4_FEC_GetViewParam(e,t,a)}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetWnd this.oJSPlayerObj is null"),0):(this.CanvasSubPortMap.set(e,t),this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_SetWnd(e,t):this.oJSPlayerObj.PlayM4_FEC_SetWnd(e,t))}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Disable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_Disable(e,t,a):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_FEC_DelPort this.oJSPlayerObj is null"),0;var a=this.CanvasSubPortMap.get(e);this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_DelPort(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red");var r=document.getElementById(a);if(r){var i=r.cloneNode(!0);r.parentNode.replaceChild(i,r)}return this.CanvasSubPortMap.delete(e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,x=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetDisplayRegion this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?x=this.oJSPlayerObj.JSPlayM4_FEC_SetDisplayRegion(e,t,a,r,i,n,s):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),x)}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetBackCilling this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_SetBackCilling(e,t):this.oJSPlayerObj.PlayM4_FEC_SetBackCilling(e,t)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPTZPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_GetPTZPort(e,t,a,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetPTZDisplayMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetPTZDisplayMode(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_Capture",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Capture this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_Capture(e,t):this.oJSPlayerObj.PlayM4_FEC_Capture(e,t)}},{key:"JSPlayM4_SetVideoCropInfo",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetVideoCropInfo this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetVideoCropInfo,","color: red"):t=this.oJSPlayerObj.PlayM4_SetVideoCropInfo(e),t)}},{key:"JSPlayM4_IsVisible",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IsVisible this.oJSPlayerObj is null"),0):1!=e&&0!=e?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_IsVisible(e):this.oJSPlayerObj.PlayM4_IsVisible(e)}},{key:"JSPlayM4_SetInputBufSize",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetInputBufSize this.oJSPlayerObj is null"),0):(this.inputBufSize=e,this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetInputBufSize,","color: red"):t=this.oJSPlayerObj.PlayM4_SetInputBufSize(e),t)}},{key:"JSPlayM4_GetYUVBufSize",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetYUVBufSize this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetYUVBufSize,","color: red"):e=this.oJSPlayerObj.PlayM4_GetYUVBufSize(),e)}},{key:"JSPlayM4_ClearCanvas",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ClearCanvas this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ClearCanvas,","color: red"):e=this.oJSPlayerObj.PlayM4_ClearCanvas(),e)}},{key:"JSPlayM4_ReleaseInputBuffer",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReleaseInputBuffer this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ReleaseInputBuffer,","color: red"):e=this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),e)}},{key:"JSPlayM4_GetDecodeFrameType",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetDecodeFrameType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetDecodeFrameType,","color: red"):e=this.oJSPlayerObj.PlayM4_GetDecodeFrameType(),e)}},{key:"JSPlayM4_SetMosaicType",value:function(e){var t=0;return null==e||null==e||null==e.pstMosaicColor||null==e.pstMosaicColor.fMosaicColorR||null==e.pstMosaicColor.fMosaicColorG||null==e.pstMosaicColor.fMosaicColorB||null==e.pstMosaicColor.fMosaicColorA||null==e.nMosaicSize||null==e.nMosaicType||e.pstMosaicColor.fMosaicColorR<0||e.pstMosaicColor.fMosaicColorR>255||e.pstMosaicColor.fMosaicColorG<0||e.pstMosaicColor.fMosaicColorG>255||e.pstMosaicColor.fMosaicColorB<0||e.pstMosaicColor.fMosaicColorB>255||e.pstMosaicColor.fMosaicColorA<0||e.pstMosaicColor.fMosaicColorA>100||e.nMosaicSize<1||e.nMosaicSize>100||1!=e.nMosaicType&&3!=e.nMosaicType&&5!=e.nMosaicType?0:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetMosaicType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetMosaicType(e):console.log("%c1>JSPlayerV1.X does not support SetMosaicType,","color: red"),t)}},{key:"JSPlayM4_SelectIntelInfoFeatureToDraw",value:function(e){var t=0;if(null==e||null==e)return 0;if(0!=e.bTrue&&1!=e.bTrue)return 0;if(0!=e.nMode&&1!=e.nMode&&2!=e.nMode)return 0;if(e.NodeNumber<0||e.NodeNumber>160)return 0;if(e.NodeNumber!=e.pIntelInfoNode.length)return 0;for(var a=0;a<e.NodeNumber;a++){if(e.pIntelInfoNode[a].nID<0)return 0;if(1!=e.pIntelInfoNode[a].nType&&2!=e.pIntelInfoNode[a].nType&&4!=e.pIntelInfoNode[a].nType&&8!=e.pIntelInfoNode[a].nType)return 0}return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SelectIntelInfoFeatureToDraw this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SelectIntelInfoFeatureToDraw(e):console.log("%cJSPlayM4_SelectIntelInfoFeatureToDraw V1 not support","color: red"),t)}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){if(null!=e){if(null!=e.nFontAlign&&null!=e.nFontAlign||(e.nFontAlign=0),null!=e.nColorAdapt&&null!=e.nColorAdapt||(e.nColorAdapt=0),null==e.pstCanvasAdapt&&(e.pstCanvasAdapt={},e.pstCanvasAdapt.nCanvasAdaptMode=0,e.pstCanvasAdapt.ntotalRowSpace=0,e.pstCanvasAdapt.ntotalColSpace=0,e.pstCanvasAdapt.nBaseCanvasWidth=0,e.pstCanvasAdapt.nBaseCanvasHeight=0),this.printfFlag>0){console.log("%cJSPlayerInterface.js JSPlayM4_SetWaterMarkFont:string:"+e.pFontString+",fontcolr,fR:"+e.pstFontColor.fR+",fG:"+e.pstFontColor.fG+",fB:"+e.pstFontColor.fB+",fA:"+e.pstFontColor.fA+",fontSizeWidth:"+e.pstFontSize.nFontWidth+",fontSizeHeight:"+e.pstFontSize.nFontHeight+",rotateAngle:"+e.pstFontRotate.fRotateAngle+",fontFamily:"+e.pFontFamily,"color:red");var t=document.getElementById(this.canvasID).width,a=document.getElementById(this.canvasID).height;console.log("canvasWidht:"+t+",canvasHeight:"+a),console.log("fullScreen:"+e.pstFontRotate.fFillFullScreen+",rowNum:"+e.pstFontNumber.nRowNumber+",colNum:"+e.pstFontNumber.nColNumber+",space:"+e.pSpace+",fontAlign:"+e.nFontAlign+",colorAdapt:"+e.nColorAdapt),console.log("adaptMode:"+e.pstCanvasAdapt.nCanvasAdaptMode+",baseWidth:"+e.pstCanvasAdapt.nBaseCanvasWidth+",baseHeight:"+e.pstCanvasAdapt.nBaseCanvasHeight+",rowSpace:"+e.pstCanvasAdapt.nRowSpace+",colSpace:"+e.pstCanvasAdapt.nColSpace)}if(void 0===e.pFontString||null==e.pstStartPos||null==e.pstFontColor||null==e.pstFontSize||null==e.pstFontRotate||null==e.pFontFamily||null==e.pstStartPos.fX||null==e.pstStartPos.fY||null==e.pstFontColor.fR||null==e.pstFontColor.fG||null==e.pstFontColor.fB||null==e.pstFontColor.fA||null==e.pstFontSize.nFontWidth||null==e.pstFontSize.nFontHeight||null==e.pstFontRotate.fRotateAngle||null==e.pstFontRotate.fFillFullScreen||null==e.pSpace)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam undefined"),0;if(e.pstStartPos.fX>1||e.pstStartPos.fX<0||e.pstStartPos.fY>1||e.pstStartPos.fY<0||e.pstFontColor.fR>1||e.pstFontColor.fR<0||e.pstFontColor.fG>1||e.pstFontColor.fG<0||e.pstFontColor.fB>1||e.pstFontColor.fB<0||e.pstFontColor.fA>1||e.pstFontColor.fA<0)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam f* is 0~1"),0;if(1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen&&1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen)return console.log(">>>>>yff>>> pFontParam.pstFontRotate.fFillFullScreen is true or false"),0;if(0==e.pstCanvasAdapt.nCanvasAdaptMode&&e.pstFontRotate.fFillFullScreen&&(e.pstFontNumber.nRowNumber<1||e.pstFontNumber.nColNumber<1||null==e.pstFontNumber.nRowNumber||null==e.pstFontNumber.nColNumber||e.pstFontNumber.nRowNumber>16||e.pstFontNumber.nColNumber>16))return console.log(">>>>>yff>>> pFontParam.pstFontNumber row/col num should be greater than 1 and les than 16"),0;if("string"!=typeof e.pFontFamily)return console.log(">>>>>yff>>> pFontParam.pFontFamily is not string"),0;if(!Array.isArray(e.pFontString)||e.pFontString.length>9)return console.log(">>>>>yff>>> pFontParam.pFontString is not array, pFontParam.pFontString.length:"+e.pFontString.length),0;if(0!=e.pstCanvasAdapt.nCanvasAdaptMode&&1!=e.pstCanvasAdapt.nCanvasAdaptMode&&2!=e.pstCanvasAdapt.nCanvasAdaptMode)return console.log(">>>>>yff>>> pFontParam.pstCanvasAdapt.nCanvasAdaptMode:(0,1,2)"+e.pstCanvasAdapt.nCanvasAdaptMode),0;if(1==e.pstCanvasAdapt.nCanvasAdaptMode&&(null==e.pstCanvasAdapt.nRowSpace||null==e.pstCanvasAdapt.nColSpace||e.pstCanvasAdapt.nRowSpace<0||e.pstCanvasAdapt.nColSpace<0))return console.log(">>>>>yff>>> nCanvasAdaptMode is 1, nRowSpace:"+e.pstCanvasAdapt.nRowSpace+",pFontParam.pstCanvasAdapt.nColSpace:"+e.pstCanvasAdapt.nColSpace),0;if(2==e.pstCanvasAdapt.nCanvasAdaptMode&&(null==e.pstCanvasAdapt.nBaseCanvasWidth||null==e.pstCanvasAdapt.nBaseCanvasHeight||e.pstCanvasAdapt.nBaseCanvasWidth<0||e.pstCanvasAdapt.nBaseCanvasHeight<0))return console.log(">>>>>yff>>> nCanvasAdaptMode is 2, nBaseCanvasWidth:"+e.pstCanvasAdapt.nBaseCanvasWidth+",pFontParam.pstCanvasAdapt.nBaseCanvasHeight:"+e.pstCanvasAdapt.nBaseCanvasHeight),0;if(0==e.pstCanvasAdapt.nCanvasAdaptMode&&(e.pstCanvasAdapt.ntotalColSpace=0,e.pstCanvasAdapt.ntotalRowSpace=0),1==e.pstCanvasAdapt.nCanvasAdaptMode){var r=e.pstFontRotate.fRotateAngle%360/360*2*Math.PI;if(null==this.waterCanvas&&(this.waterCanvas=document.createElement("canvas"),null!=this.waterCanvas&&(this.waterCanvasCtx=this.waterCanvas.getContext("2d"))),null!=this.waterCanvasCtx){var i=Math.min(e.pstFontSize.nFontHeight,e.pstFontSize.nFontWidth);this.waterCanvasCtx.font=i.toString()+"px "+e.pFontFamily;for(var n=0,s=0;s<e.pFontString.length;s++){var x=this.waterCanvasCtx.measureText(e.pFontString[s]).width;n=n>x?n:x}var o=e.pSpace*parseInt(this.waterCanvasCtx.font)*e.pFontString.length;e.pstCanvasAdapt.ntotalColSpace=e.pstCanvasAdapt.nColSpace+Math.abs(n*Math.cos(r))+Math.abs(o*Math.sin(r)),e.pstCanvasAdapt.ntotalRowSpace=e.pstCanvasAdapt.nRowSpace+Math.abs(o*Math.cos(r))+Math.abs(n*Math.sin(r)),(e.pstCanvasAdapt.ntotalColSpace<0||e.pstCanvasAdapt.ntotalRowSpace<0)&&(e.pstCanvasAdapt.nCanvasAdaptMode=0)}}2==e.pstCanvasAdapt.nCanvasAdaptMode&&(e.pstCanvasAdapt.ntotalRowSpace=0,e.pstCanvasAdapt.ntotalColSpace=0),(e.pstFontSize.nFontHeight<=0||e.pstFontSize.nFontWidth<=0)&&(e=null)}return this.waterFontParam=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkFont(e):this.oJSPlayerObj.PlayM4_SetWaterMarkFont(e)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){if(!("ImageDecoder"in window))return console.log(">>>>>yff>>> window not support ImageDecoder"),O;if(null!=e){if(void 0===e.pImageData)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageData undefined"),0;if(void 0===e.pImageType||"jpg"!=e.pImageType&&"jpeg"!=e.pImageType&&"png"!=e.pImageType&&"gif"!=e.pImageType&&"bmp"!=e.pImageType&&"webp"!=e.pImageType&&"avif"!=e.pImageType)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageType:"+e.pImageType+" error"),0;(void 0===e.pstRectPos||e.pstRectPos.fLeft<0||e.pstRectPos.fLeft>1||e.pstRectPos.fRight<0||e.pstRectPos.fRight>1||e.pstRectPos.fTop<0||e.pstRectPos.fTop>1||e.pstRectPos.fBottom<0||e.pstRectPos.fBottom>1)&&(e.pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1}),(void 0===e.fAlpha||e.fAlpha<0||e.fAlpha>1)&&(e.fAlpha=1)}return this.waterImageParam=e,this.switchingV3toV1?1:null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkImage(e):this.oJSPlayerObj.PlayM4_SetWaterMarkImage(e)}},{key:"JSPlayM4_InitEncoder",value:function(e,t){return null==e||null==e?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo:"+e+",encodeAudioInfo:"+t,"color:red"),0):0!==e.encodeType?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.encodeType(only support 0(H264)):"+e.encodeType,"color:red"),0):0!=e.baseTimeStampMode&&1!=e.baseTimeStampMode?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.baseTimeStampMode(only support 0(start from 0),1(old)):"+e.baseTimeStampMode,"color:red"),0):0!=e.encodeWidth&&(e.encodeWidth>1920||e.encodeWidth<32)?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.encodeWidth(32x32 to 1920x1088 pixels):"+e.encodeWidth,"color:red"),0):0!=e.encodeHeight&&(e.encodeHeight>1088||e.encodeHeight<32)?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.encodeWidth(32x32 to 1920x1088 pixels encodeVideoInfo.encodeHeight:"+e.encodeHeight,"color:red"),0):0!=e.bitrate&&e.bitrate<0?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder ncodeVideoInfo.bitrate( need largger than 0):"+e.bitrate,"color:red"),0):0!=e.framerate&&e.framerate<0?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.framerate( need largger than 0):"+e.framerate,"color:red"),0):0!=e.bitrateMode&&1!=e.bitrateMode?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.bitrateMode only support 0(variable) and 1(constant)","color:red"),0):0!=e.latencyMode&&1!=e.latencyMode?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.latencyMode only support 0(realtime) and 1(quality)","color:red"),0):(null==e.getOriginData&&(e.getOriginData=0),0!=e.getOriginData&&1!=e.getOriginData?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeVideoInfo.getOriginData only support 0(crop) and 1(origin)","color:red"),0):null==t||null==t?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo:"+t,"color:red"),0):0!=t.encodeType?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo.encodeType(only support 0(aac)):"+t.encodeType,"color:red"),0):0!=t.sampleRate&&48e3!=t.sampleRate&&44100!=t.sampleRate?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo.sampleRate(only support 48k and 44.1k):"+t.sampleRate,"color:red"),0):0!=t.numberOfChannels&&1!=t.numberOfChannels?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo.numberOfChannels (only support single channel):"+t.numberOfChannels,"color:red"),0):0!=t.bitrate&&128e3!=t.bitrate?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo.bitrate(only support 128000):"+t.bitrate,"color:red"),0):(null==t.recoderAudioAnyWhere&&(t.recoderAudioAnyWhere=0),0!=t.recoderAudioAnyWhere&&1!=t.recoderAudioAnyWhere?(console.log("%cJSPlayerInterface.js JSPlayM4_InitEncoder encodeAudioInfo.recoderAudioAnyWhere(only support 0 and 1):"+t.recoderAudioAnyWhere,"color:red"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_InitEncoder(e,t):(console.log("%conly hard decoder support recoder,V1 not support (20240801)","color: red"),0)))}},{key:"JSPlayM4_StartEncode",value:function(e,t){return 1===window.g_recorderFlag?(console.log("%conly support one recorder at the same time!","color: red"),0):(window.g_recorderFlag=1,"function"!=typeof e||"function"!=typeof t?(console.log("%cJSPlayM4_StartEncode param need CBfunction videoRawDataFunCB:"+e+",audioRawDataFunCB:"+t,"color: red"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StartEncode(e,t):(console.log("%cJSPlayM4_StartEncode only hard decoder support recoder,V1 not support (20240801)","color: red"),0))}},{key:"JSPlayM4_StopEncode",value:function(){return window.g_recorderFlag=0,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopEncode():(console.log("%c JSPlayM4_StopEncode only hard decoder support recoder,V1 not support (20240801)","color: red"),0)}},{key:"_downloadFile",value:function(e,t){var a=e;i(e,Blob)||i(e,File)||(a=new Blob([e]));var r=window.URL.createObjectURL(a),n=window.document.createElement("a");n.href=r,n.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),n.dispatchEvent(s)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,a=this.aTotalBuffer.length;console.log("totalLength:"+a);for(var r=0,i=t.length;r<i;r++)this.aTotalBuffer[a+r]=t[r];this.iFrameNum++,t=null,console.log("download200RTPdata iFrameNum:"+this.iFrameNum)}}}]),a}();window._getFExplore=function(){var e,t={},a=navigator.userAgent.toLowerCase();if((e=a.match(/rv:([\d.]+)\) like gecko/))||(e=a.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=a.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=a.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=a.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=a.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=a.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var r=t.chrome,i=r.indexOf(".");return Number(r.substring(0,i))}return t.ie?console.log("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.log("%c1>your browser is safari ","color: red"):t.firefox?console.log("%c1>your browser is Firefox ","color: red"):console.log("%c1>your browser does not support play without plugin","color: red"),-1},window._getFSupportWebCodecs=function(){return"undefined"!=typeof VideoDecoder},window._getFSupportSIMD=function(){return new Promise((function(e,t){Bt().then((function(a){a?e():t()}))}))},window.gSetWasmPlayerPrintf=function(e){return window.g_printfFlag=e,!0}}(),x}()}))}(At,At.exports);var It=At.exports.JSPlayCtrl;function Mt(e,t,a){return Mt=wt()?Reflect.construct:function(e,t,a){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return a&&Lt(i,a.prototype),i},Mt.apply(null,arguments)}function Lt(e,t){return Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Lt(e,t)}function wt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(wt=function(){return!!e})()}function Ot(e){var t,a,r,i,n;e.initializing=!0,e.emit(ee.initializing);var s=F(null!=(n=null==(t=e._options.staticPath)?void 0:t.replace(/\/$/,""))?n:"")+"/PlayCtrlWasm",x=s+"/playCtrl3/hasWorker/HasSIMD/Decoder.js",o=s+"/playCtrl1/HasSIMD/Decoder.js";"iOS"===(null==Et||null==(a=Et.os)?void 0:a.name)&&"16.4"===(null==Et||null==(r=Et.os)?void 0:r.version)&&(o=s+"/playCtrl1/NoSIMD/Decoder.js"),window.SharedArrayBuffer||(x=s+"/playCtrl3/noWorker/Decoder.js");var l=function(){var e,t;return!(!(Et&&Et.browser&&["Chrome","Electron"].includes(Et.browser.name))||["120","118"].includes(null==(e=Et.browser)?void 0:e.major)&&"macOS"===(null==(t=Et.os)?void 0:t.name))}(),_=function(t,a,r,i){return void 0===t&&(t=0),void 0===a&&(a="webgl"),void 0===r&&(r=0),void 0===i&&(i=0),new Promise((function(n){var s=e._options.decoderType,_=[!g()&&l&&["auto","v3"].includes(s)?x:null,o];e.wasmplayer=Mt(It,[].concat(_,[function(t){if("loaded"===t.cmd)e.logger.log("init wasm cmd:",t.cmd),window.JSPlayerModuleLoaded=!0,e.initializing=!1,e.emit(ee.initializing,K(t));e._decoderStatus=t,n(t)},t,a,r,i])),window["wasmplayer-"+e._options.id]=e.wasmplayer}))};return null==(i=window)?void 0:i._getFSupportSIMD().then((function(){return _()}),(function(){return x=s+"/playCtrl3/hasWorker/NoSIMD/Decoder.js",o=s+"/playCtrl1/NoSIMD/Decoder.js",_()}))}function Bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}function kt(e,t){return kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},kt(e,t)}var Nt=null,Vt=Symbol("CANVAS"),Ut=Symbol("CONTEXT"),Ht=Symbol("SHAPES"),Wt=Symbol("DRAWSTATUS"),Yt=Symbol("SHAPETYPE"),Gt=Symbol("MAXSHAPENUMSUPPORT"),Xt=Symbol("SHAPESTYLE"),Jt=Symbol("POLYGONDRAWING"),Zt=Symbol("CURRENTSHAPEINFO"),jt=Symbol("DRAWSHAPEMULTIONETIME"),zt=Symbol("EVENTCALLBACK");function Kt(){Nt[Ut].clearRect(0,0,Nt.m_iCanvasWidth,Nt.m_iCanvasHeight);for(var e=0,t=Nt[Ht].length;e<t;e++)Nt[Ht][e].draw()}function qt(e){Nt[Ht].length<Nt[Gt]&&Nt[Ht].push(e)}function $t(){var e,t,a,r,i,n,s,x=!1,o={},l=0,_=0,h=0,f=0,c=0,u=0,d="draw",p=null;function m(){for(var e=-1,t=0,a=Nt[Ht].length;t<a;t++)if(Nt[Ht][t].m_bChoosed){e=t;break}return e}Nt[Vt].oncontextmenu=function(){return!1},Nt[Vt].onselectstart=function(){return!1},Qt(),Nt.ON_MOUSEDOWN=function(e){if(2===e.button)Nt[Jt]&&p&&p.m_aPoint.length>=p.m_iMinClosed&&(p.m_bClosed=!0,Nt[Jt]=!1,p.setPointInfo(p.m_aPoint),qt(p),Kt(),x=!1,Nt[jt]||(Nt[Wt]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,p.m_szType,"onDrawEnd",p.m_szId));else if(0===e.button){if(x){if(Math.abs(e.offsetX-l)>2&&Math.abs(e.offsetY-_)>2&&(qt(p),Nt[jt]||(Nt[Wt]=!1)),Nt[zt]){var t,a={startPos:[],endPos:[]};a.startPos=[l,_],a.endPos=[e.offsetX,e.offsetY],null==(t=Nt[zt])||t.call(Nt,a),Nt.clearAllShape()}return p=null,void(x=!1)}if(l=e.offsetX,_=e.offsetY,d="draw",!Nt[Jt]){var r=m();if(-1!==r&&Nt[Ht][r].inArc(e.offsetX,e.offsetY,5)&&(d="stretch"),"stretch"!==d)for(var i=0,n=Nt[Ht].length;i<n;i++)Nt[Ht][i].inShape(e.offsetX,e.offsetY)&&2!==Nt[Ht][i].m_iEditType?(Nt[Ht][i].m_bChoosed=!0,Nt[Ht][i].getMouseDownPoints(e.offsetX,e.offsetY),d="drag",null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Nt[Ht][i].m_szType,"onChoose",Nt[Ht][i].m_szId)):Nt[Ht][i].m_bChoosed=!1;Nt[Vt].style.cursor="drag"===d?"move":"default","draw"===d&&1===Nt[Ht].length&&1===Nt[Ht][0].m_iRedrawMode&&(Nt.deleteRepeatPolyonById(Nt[Ht][0].m_szId),Nt[Wt]=!0),Nt[Wt]&&!Nt[jt]&&(d="draw")}if("draw"===d&&Nt[Wt]){if(Nt[Gt]<=Nt[Ht].length&&"Grid"!==Nt[Yt]&&"Point"!==Nt[Yt])return;"Rect"===Nt[Yt]?(p=new ta).m_szTips=Nt[Zt].szTips||"":"Grid"===Nt[Yt]?0===Nt[Ht].length&&qt(p=new ra):"Polygon"===Nt[Yt]?(Nt[Jt]||(Nt[Jt]=!0,(p=new na).m_szId=Nt[Zt].szId||"",p.m_szTips=Nt[Zt].szTips||"",p.m_iMinClosed=Nt[Zt].iMinClosed||3,p.m_iMaxPointNum=Nt[Zt].iMaxPointNum||11,p.m_iPolygonType=Nt[Zt].iPolygonType,p.m_szDrawColor=Nt[Zt].szDrawColor,p.m_szFillColor=Nt[Zt].szFillColor,p.m_iTranslucent=Nt[Zt].iTranslucent,p.m_iRedrawMode=Nt[Zt].iRedrawMode),1===p.m_iPolygonType&&(p.addPoint(l,_),p.m_aPoint.length===p.m_iMaxPointNum&&(p.m_bClosed=!0,Nt[Jt]=!1,qt(p),Kt(),x=!1,Nt[jt]||(Nt[Wt]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,p.m_szType,"onDrawEnd",p.m_szId)))):"Point"===Nt[Yt]&&(Nt.clearShapeByType("Point"),(p=new sa).m_szId=Nt[Zt].szId||"",p.m_szDrawColor=Nt[Zt].szDrawColor,p.setPointInfo([[l,_]]),qt(p),Kt())}x=!0}},null==(e=Nt[Vt])||e.addEventListener("mousedown",Nt.ON_MOUSEDOWN),Nt.ON_MOUSEENTER=function(e){o={isIn:!0,offsetX:e.offsetX,offsetY:e.offsetY},Nt[Wt]&&x&&("Rect"===Nt[Yt]?p.move([[l,_],[e.offsetX,e.offsetY]]):"Grid"===Nt[Yt]&&Nt[Ht][0].move(l,_,e.offsetX,e.offsetY))},null==(t=Nt[Vt])||t.addEventListener("mouseenter",Nt.ON_MOUSEENTER),Nt.ON_MOUSELEAVE=function(e){o={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}},null==(a=Nt[Vt])||a.addEventListener("mouseleave",Nt.ON_MOUSELEAVE),Nt.ON_MOUSEMOVE=function(e){if(Nt[Jt])Nt[Wt]&&x&&("Polygon"===Nt[Yt]&&0===p.m_iPolygonType&&(p.m_bClosed=!0),Kt(),p.move(e.offsetX,e.offsetY,l,_));else{var t=m();t>-1?x&&("drag"===d?(Nt[Ht][t].drag(e.offsetX,e.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Nt[Ht][t].m_szType,"onDrag",Nt[Ht][t].m_szId)):"stretch"===d&&(Nt[Ht][t].stretch(e.offsetX,e.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Nt[Ht][t].m_szType,"onStretch",Nt[Ht][t].m_szId))):Nt[Wt]&&x&&o.isIn&&("Rect"===Nt[Yt]?p.move([[l,_],[e.offsetX,e.offsetY]]):"Grid"===Nt[Yt]&&Nt[Ht][0].move(l,_,e.offsetX,e.offsetY))}},null==(r=Nt[Vt])||r.addEventListener("mousemove",Nt.ON_MOUSEMOVE),Nt.ON_MOUSEUP=function(e){if(Nt[Vt].style.cursor="default",null!=p&&"draw"===d)if("Rect"===Nt[Yt]){if(Math.abs(e.offsetX-l)>2&&Math.abs(e.offsetY-_)>2&&(qt(p),Nt[jt]||(Nt[Wt]=!1)),Nt[zt]){var t,a={startPos:[],endPos:[]};a.startPos=[l,_],a.endPos=[e.offsetX,e.offsetY],null==(t=Nt[zt])||t.call(Nt,a),Nt.clearAllShape()}p=null}else"Polygon"===Nt[Yt]&&0===p.m_iPolygonType&&Nt[Jt]&&Math.abs(e.offsetX-l)>2&&Math.abs(e.offsetY-_)>2&&(qt(p),Nt[Jt]=!1,Nt[jt]||(Nt[Wt]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,p.m_szType,"onDrawEnd",p.m_szId));x=!!Nt[Jt],Nt[Jt]||Kt()},null==(i=Nt[Vt])||i.addEventListener("mouseup",Nt.ON_MOUSEUP),Nt.ON_DBLCLICK=function(){Nt[Wt]&&"Grid"===Nt[Yt]&&(Nt[Ht][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",Kt())},Nt[Vt].addEventListener("dblclick",Nt.ON_DBLCLICK),Nt.ON_TOUCHSTART=function(e){var t,a=e.target.getBoundingClientRect();if(null==(t=e.touches)?void 0:t[0]){if(h=parseInt(e.touches[0].clientX-a.x)>0?parseInt(e.touches[0].clientX-a.x):0,f=parseInt(e.touches[0].clientY-a.y)>0?parseInt(e.touches[0].clientY-a.y):0,d="draw",Nt[Wt]){if(Nt[Gt]<=Nt[Ht].length&&"Grid"!==Nt[Yt]&&"Point"!==Nt[Yt])return;"Rect"===Nt[Yt]?(p=new ta).m_szTips=Nt[Zt].szTips||"":"Grid"===Nt[Yt]?0===Nt[Ht].length&&qt(p=new ra):"Polygon"===Nt[Yt]?(Nt[Jt]||(Nt[Jt]=!0,(p=new na).m_szId=Nt[Zt].szId||"",p.m_szTips=Nt[Zt].szTips||"",p.m_iMinClosed=Nt[Zt].iMinClosed||3,p.m_iMaxPointNum=Nt[Zt].iMaxPointNum||11,p.m_iPolygonType=Nt[Zt].iPolygonType,p.m_szDrawColor=Nt[Zt].szDrawColor,p.m_szFillColor=Nt[Zt].szFillColor,p.m_iTranslucent=Nt[Zt].iTranslucent,p.m_iRedrawMode=Nt[Zt].iRedrawMode),1===p.m_iPolygonType&&(p.addPoint(h,f),p.m_aPoint.length===p.m_iMaxPointNum&&(p.m_bClosed=!0,Nt[Jt]=!1,qt(p),Kt(),x=!1,Nt[jt]||(Nt[Wt]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,p.m_szType,"onDrawEnd",p.m_szId)))):"Point"===Nt[Yt]&&(Nt.clearShapeByType("Point"),(p=new sa).m_szId=Nt[Zt].szId||"",p.m_szDrawColor=Nt[Zt].szDrawColor,p.setPointInfo([[h,f]]),qt(p),Kt())}x=!0}},null==(n=Nt[Vt])||n.addEventListener("touchstart",Nt.ON_TOUCHSTART),Nt.ON_TOUCHMOVE=function(e){var t,a=e.target.getBoundingClientRect();if(null==(t=e.touches)?void 0:t[0])if(c=parseInt(e.touches[0].clientX-a.x)>0?parseInt(e.touches[0].clientX-a.x):0,u=parseInt(e.touches[0].clientY-a.y)>0?parseInt(e.touches[0].clientY-a.y):0,Nt[Jt])Nt[Wt]&&x&&("Polygon"===Nt[Yt]&&0===p.m_iPolygonType&&(p.m_bClosed=!0),Kt(),p.move(e.touches[0].offsetX,e.touches[0].offsetY,h,f));else{var r=m();r>-1?x&&("drag"===d?(Nt[Ht][r].drag(c,u),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Nt[Ht][r].m_szType,"onDrag",Nt[Ht][r].m_szId)):"stretch"===d&&(Nt[Ht][r].stretch(c,u),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Nt[Ht][r].m_szType,"onStretch",Nt[Ht][r].m_szId))):Nt[Wt]&&x&&("Rect"===Nt[Yt]?p.move([[2*h,2*f],[2*c,2*u]]):"Grid"===Nt[Yt]&&Nt[Ht][0].move(h,f,c,u))}},null==(s=Nt[Vt])||s.addEventListener("touchmove",Nt.ON_TOUCHMOVE),Nt.ON_TOUCHEND=function(e){if(h!=c||f!=u){if(Nt[Vt].style.cursor="default",null!=p&&"draw"===d)if("Rect"===Nt[Yt]){if(Math.abs(c-h)>2&&Math.abs(u-f)>2&&(qt(p),Nt[jt]||(Nt[Wt]=!1)),Nt[zt]&&Math.abs(c-h)>15&&Math.abs(u-f)>15){var t,a={startPos:[],endPos:[]};a.startPos=[h,f],a.endPos=[c,u],null==(t=Nt[zt])||t.call(Nt,a)}Nt.clearAllShape(),p=null}else"Polygon"===Nt[Yt]&&0===p.m_iPolygonType&&Nt[Jt]&&Math.abs(c-h)>2&&Math.abs(u-f)>2&&(qt(p),Nt[Jt]=!1,Nt[jt]||(Nt[Wt]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,p.m_szType,"onDrawEnd",p.m_szId));x=!!Nt[Jt],Nt[Jt]||Kt()}},Nt[Vt].addEventListener("touchend",Nt.ON_TOUCHEND)}function Qt(){var e,t,a,r,i,n,s,x,o;Nt.ON_MOUSEDOWN&&(null==(e=Nt[Vt])||e.removeEventListener("mousedown",Nt.ON_MOUSEDOWN),Nt.ON_MOUSEDOWN=null);Nt.ON_MOUSEENTER&&(null==(t=Nt[Vt])||t.removeEventListener("mouseenter",Nt.ON_MOUSEENTER),Nt.ON_MOUSEENTER=null);Nt.ON_MOUSELEAVE&&(null==(a=Nt[Vt])||a.removeEventListener("mouseleave",Nt.ON_MOUSELEAVE),Nt.ON_MOUSELEAVE=null);Nt.ON_MOUSEMOVE&&(null==(r=Nt[Vt])||r.removeEventListener("mousemove",Nt.ON_MOUSEMOVE),Nt.ON_MOUSEMOVE=null);Nt.ON_MOUSEUP&&(null==(i=Nt[Vt])||i.removeEventListener("mouseup",Nt.ON_MOUSEUP),Nt.ON_MOUSEUP=null);Nt.ON_DBLCLICK&&(null==(n=Nt[Vt])||n.removeEventListener("dblclick",Nt.ON_DBLCLICK),Nt.ON_DBLCLICK=null);Nt.ON_TOUCHSTART&&(null==(s=Nt[Vt])||s.removeEventListener("touchstart",Nt.ON_TOUCHSTART),Nt.ON_TOUCHSTART=null);Nt.ON_TOUCHMOVE&&(null==(x=Nt[Vt])||x.removeEventListener("touchmove",Nt.ON_TOUCHMOVE),Nt.ON_TOUCHMOVE=null);Nt.ON_TOUCHEND&&(null==(o=Nt[Vt])||o.removeEventListener("touchend",Nt.ON_TOUCHEND),Nt.ON_TOUCHEND=null)}var ea=function(){function e(){this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=Nt[Xt].szDrawColor,this.m_szFillColor=Nt[Xt].szFillColor,this.m_iTranslucent=Nt[Xt].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}var t=e.prototype;return t.draw=function(){},t.drag=function(e,t){if(2!==this.m_iEditType){var a=this.m_aPoint.length,r=0;for(r=0;r<a;r++)if(this.m_aPoint[r][0]+e-this.m_iDriftStartX>Nt.m_iCanvasWidth||this.m_aPoint[r][1]+t-this.m_iDriftStartY>Nt.m_iCanvasHeight||this.m_aPoint[r][0]+e-this.m_iDriftStartX<0||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<a;r++)this.m_aPoint[r][0]=this.m_aPoint[r][0]+e-this.m_iDriftStartX,this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY;this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setPointInfo(this.m_aPoint),Kt()}},t.stretch=function(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),Kt())},t.inShape=function(e,t){for(var a=!1,r=this.m_aPoint.length,i=0,n=r-1;i<r;n=i++)this.m_aPoint[i][1]>t!=this.m_aPoint[n][1]>t&&e<(this.m_aPoint[n][0]-this.m_aPoint[i][0])*(t-this.m_aPoint[i][1])/(this.m_aPoint[n][1]-this.m_aPoint[i][1])+this.m_aPoint[i][0]&&(a=!a);return a},t.inArc=function(e,t,a){for(var r=!1,i=0,n=this.m_aPoint.length;i<n;i++){if(Math.sqrt((e-this.m_aPoint[i][0])*(e-this.m_aPoint[i][0])+(t-this.m_aPoint[i][1])*(t-this.m_aPoint[i][1]))<a){r=!0,this.m_iIndexChoosePoint=i;break}}return r},t.getMouseDownPoints=function(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t},t.getPointInfo=function(){return this.m_aPoint},t.setPointInfo=function(e){null!=e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))},t.addPoint=function(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)},t.setEdgePoints=function(e){for(var t=0,a=e.length;t<a;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))},e}(),ta=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Rect",t}Bt(t,e);var a=t.prototype;return a.setPointInfo=function(e){if(null!=e){for(var t=e[0][0],a=e[0][1],r=e[0][0],i=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),a>e[n][1]&&(a=e[n][1]),r<e[n][0]&&(r=e[n][0]),i<e[n][1]&&(i=e[n][1]);this.m_aPoint=[[t,a],[r,a],[r,i],[t,i]]}},a.draw=function(){Nt[Ut].fillStyle=this.m_szFillColor,Nt[Ut].strokeStyle=this.m_szDrawColor;var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],a=this.m_aPoint[2][0]-e,r=this.m_aPoint[2][1]-t;if(Nt[Ut].globalAlpha=this.m_iTranslucent,Nt[Ut].fillRect(e,t,a,r),Nt[Ut].globalAlpha=1,Nt[Ut].fillText(this.m_szTips,(e+this.m_aPoint[2][0])/2,(t+this.m_aPoint[2][1])/2),this.m_bChoosed){var i=Math.round(a/2),n=Math.round(r/2);if(0===this.m_iEditType)for(var s=[e,e+i,e+a,e,e+a,e,e+i,e+a],x=[t,t,t,t+n,t+n,t+r,t+r,t+r],o=0;o<8;o++)Nt[Ut].beginPath(),Nt[Ut].arc(s[o],x[o],3,0,360,!1),Nt[Ut].fillStyle=this.m_szDrawColor,Nt[Ut].closePath(),Nt[Ut].fill()}Nt[Ut].strokeRect(e,t,a,r)},a.stretch=function(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),Kt())},a.move=function(e){Kt(),this.m_bChoosed=!0;var t=e[0][0],a=e[0][1],r=e[1][0],i=e[1][1];this.setPointInfo([[t,a],[r,a],[r,i],[t,i]]),this.draw()},a.inArc=function(e,t,a){for(var r=this.m_aPoint[0][0],i=this.m_aPoint[0][1],n=this.m_aPoint[2][0]-r,s=this.m_aPoint[2][1]-i,x=Math.round(n/2),o=Math.round(s/2),l=[r,r+x,r+n,r,r+n,r,r+x,r+n],_=[i,i,i,i+o,i+o,i+s,i+s,i+s],h=0;h<8;h++){if(Math.sqrt((e-l[h])*(e-l[h])+(t-_[h])*(t-_[h]))<a)return this.m_iIndexChoosePoint=h,!0}return!1},t}(ea),aa=function(e){function t(t,a){var r;return(r=e.call(this)||this).m_szType="RectOSD",r.m_szOSDType="overlay-date",r.m_szText=t||"",r.m_szEnabled=a||"",r.m_szDateStyle="",r.m_szClockType="",r.m_szDisplayWeek="",r.m_szId="",r.m_szAlignment="0",r}Bt(t,e);var a=t.prototype;return a.draw=function(){if("true"===this.m_szEnabled){var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],a=this.m_aPoint[2][0]-e,r=this.m_aPoint[2][1]-t;Nt[Ut].beginPath(),Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].globalAlpha=1,Nt[Ut].rect(e,t,a,r),Nt[Ut].font="15px serif",Nt[Ut].strokeText(this.m_szText,e,t+15),Nt[Ut].stroke()}},a.drag=function(e,t){var a=this.m_aPoint.length,r=0;if("0"===this.m_szAlignment){for(r=0;r<a;r++)if(this.m_aPoint[r][1]+t-this.m_iDriftStartY>Nt.m_iCanvasHeight||this.m_aPoint[r][0]+e-this.m_iDriftStartX<0||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<a;r++)this.m_aPoint[r][0]=this.m_aPoint[r][0]+e-this.m_iDriftStartX,this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(r=0;r<a;r++)if(this.m_aPoint[r][1]+t-this.m_iDriftStartY>Nt.m_iCanvasHeight||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<a;r++)this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY}this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setEdgePoints(this.m_aPoint),Kt()},a.stretch=function(){},t}(ea),ra=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Grid",t.m_iGridColNum=22,t.m_iGridRowNum=18,t.m_szGridMap="",t.m_aAddGridMap=[],t}Bt(t,e);var a=t.prototype;return a.draw=function(){for(var e=Nt.m_iCanvasWidth/this.m_iGridColNum,t=Nt.m_iCanvasHeight/this.m_iGridRowNum,a="",r=0;r<this.m_iGridRowNum;r++){for(var i=this.m_szGridMap.substring(6*r,6*r+6),n=parseInt("f"+i,16).toString(2).split("").slice(4),s="",x=0;x<this.m_iGridColNum;x++){var o="";"1"===n[x]?(Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].globalAlpha=1,Nt[Ut].strokeRect(e*x,t*r,e,t),o="1"):o="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[r][x]&&(Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].strokeRect(e*x,t*r,e,t),o="1"),s+=o}a+=parseInt("1111"+s+"00",2).toString(16).substring(1)}this.m_szGridMap=a},a.move=function(e,t,a,r){var i=Nt.m_iCanvasWidth/this.m_iGridColNum,n=Nt.m_iCanvasHeight/this.m_iGridRowNum,s=Math.floor(e/i),x=Math.floor(t/n),o=Math.floor(Math.abs(a-e)/i),l=Math.floor(Math.abs(r-t)/n),_=1,h=1;_=a-e>0?1:-1,h=r-t>0?1:-1;for(var f=[],c=0;c<this.m_iGridRowNum;c++){f[c]=[];for(var u=0;u<this.m_iGridColNum;u++)f[c][u]=1===_?1===h?c>=x&&c<=x+l&&u>=s&&u<=s+o?1:0:c<=x&&c>=x-l&&u>=s&&u<=s+o?1:0:1===h?c>=x&&c<=x+l&&u<=s&&u>=s-o?1:0:c<=x&&c>=x-l&&u<=s&&u>=s-o?1:0}this.m_aAddGridMap=f,this.draw()},t}(ea),ia=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Line",t.m_iLineType=0,t.m_iDirection=0,t.m_iArrowType=0,t.m_aCrossArrowPoint=[],t}Bt(t,e);var a=t.prototype;return a.draw=function(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()},a.drawNormalLine=function(){if(Nt[Ut].globalAlpha=1,this.m_aPoint.length>0){Nt[Ut].beginPath(),Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].lineWidth=2,Nt[Ut].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var e=1,t=this.m_aPoint.length;e<t;e++)Nt[Ut].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);if(Nt[Ut].stroke(),this.m_bChoosed)for(var a=0,r=this.m_aPoint.length;a<r;a++)Nt[Ut].beginPath(),Nt[Ut].fillStyle=this.m_szDrawColor,Nt[Ut].arc(this.m_aPoint[a][0],this.m_aPoint[a][1],3,0,2*Math.PI,!0),Nt[Ut].closePath(),Nt[Ut].fill();""!==this.m_szTips&&(Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}},a.drawArrowLine=function(e,t,a,r,i,n,s,x){n=void 0!==n?n:30,s=void 0!==s?s:10,x=void 0!==x?x:1;var o=180*Math.atan2(a-i,t-r)/Math.PI,l=(o+n)*Math.PI/180,_=(o-n)*Math.PI/180,h=s*Math.cos(l),f=s*Math.sin(l),c=s*Math.cos(_),u=s*Math.sin(_);Nt[Ut].save(),Nt[Ut].beginPath();var d=t-h,p=a-f;Nt[Ut].moveTo(d,p),Nt[Ut].lineTo(t,a),d=t-c,p=a-u,Nt[Ut].lineTo(d,p),Nt[Ut].moveTo(t,a),Nt[Ut].lineTo(r,i),1===e&&(d=r+h,p=i+f,Nt[Ut].moveTo(d,p),Nt[Ut].lineTo(r,i),d=r+c,p=i+u,Nt[Ut].lineTo(d,p)),Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].lineWidth=x,Nt[Ut].stroke(),Nt[Ut].restore()},a.drawCrossLine=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,a=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,r=(a+90)*Math.PI/180,i=(a-90)*Math.PI/180,n=25*Math.cos(r),s=25*Math.sin(r),x=25*Math.cos(i),o=25*Math.sin(i),l=0,_=0;l=e-n,_=t-s;var h=0,f=0;0===this.m_iDirection?(h=-10,f=-15):1===this.m_iDirection?(h=10,f=10):(h=10,f=-15),0!==this.m_iDirection&&this.drawArrowLine(0,l,_,e,t),Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].font="8px",Nt[Ut].strokeText("A",l+h,_+4),l=e-x,_=t-o,1!==this.m_iDirection&&this.drawArrowLine(0,l,_,e,t),Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].font="8px",Nt[Ut].strokeText("B",l+f,_+4)},a.drawLineCount=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,a=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,r=(a+90)*Math.PI/180,i=(a-90)*Math.PI/180,n=25*Math.cos(r),s=25*Math.sin(r),x=25*Math.cos(i),o=25*Math.sin(i),l=0,_=0;l=e-n,_=t-s,1===this.m_iArrowType?(l=e-x,_=t-o,this.drawArrowLine(0,l,_,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,l,_,e,t),this.m_aCrossArrowPoint=[[e,t],[l,_]]},a.inShape=function(e,t){for(var a=!1,r=0,i=this.m_aPoint.length-1;r<i;r++){var n=Math.sqrt((this.m_aPoint[r+1][0]-this.m_aPoint[r][0])*(this.m_aPoint[r+1][0]-this.m_aPoint[r][0])+(this.m_aPoint[r+1][1]-this.m_aPoint[r][1])*(this.m_aPoint[r+1][1]-this.m_aPoint[r][1]));Math.sqrt((e-this.m_aPoint[r][0])*(e-this.m_aPoint[r][0])+(t-this.m_aPoint[r][1])*(t-this.m_aPoint[r][1]))+Math.sqrt((e-this.m_aPoint[r+1][0])*(e-this.m_aPoint[r+1][0])+(t-this.m_aPoint[r+1][1])*(t-this.m_aPoint[r+1][1]))-n<1&&(a=!0)}return a},t}(ea),na=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Polygon",t.m_iPolygonType=1,t}Bt(t,e);var a=t.prototype;return a.setPointInfo=function(e){if(null!=e){if(0===this.m_iPolygonType){for(var t=e[0][0],a=e[0][1],r=e[0][0],i=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),a>e[n][1]&&(a=e[n][1]),r<e[n][0]&&(r=e[n][0]),i<e[n][1]&&(i=e[n][1]);this.m_aPoint=[[t,a],[r,a],[r,i],[t,i]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}},a.draw=function(){if(this.m_aPoint.length>0){Nt[Ut].fillStyle=this.m_szFillColor,Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].globalAlpha=1;var e=0,t=0;if(this.m_bChoosed)for(e=0,t=this.m_aPoint.length;e<t;e++)Nt[Ut].beginPath(),Nt[Ut].arc(this.m_aPoint[e][0],this.m_aPoint[e][1],3,0,360,!1),Nt[Ut].fillStyle=this.m_szDrawColor,Nt[Ut].closePath(),Nt[Ut].fill();for(Nt[Ut].beginPath(),Nt[Ut].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),e=0,t=this.m_aPoint.length;e<t;e++)0!==e&&Nt[Ut].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);Nt[Ut].stroke(),this.m_bClosed&&(Nt[Ut].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),Nt[Ut].closePath(),Nt[Ut].stroke(),Nt[Ut].globalAlpha=this.m_iTranslucent,Nt[Ut].fill())}},a.move=function(e,t,a,r){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){Nt[Ut].fillStyle=this.m_szFillColor,Nt[Ut].strokeStyle=this.m_szDrawColor,Nt[Ut].globalAlpha=1;var i=0,n=0;for(i=0,n=this.m_aPoint.length;i<n;i++)Nt[Ut].beginPath(),Nt[Ut].arc(this.m_aPoint[i][0],this.m_aPoint[i][1],3,0,360,!1),Nt[Ut].fillStyle=this.m_szDrawColor,Nt[Ut].closePath(),Nt[Ut].fill();for(Nt[Ut].beginPath(),Nt[Ut].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),i=0,n=this.m_aPoint.length;i<n;i++)0!==i&&Nt[Ut].lineTo(this.m_aPoint[i][0],this.m_aPoint[i][1]);Nt[Ut].lineTo(e,t),Nt[Ut].closePath(),Nt[Ut].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;var s=a,x=r,o=e,l=t;this.setPointInfo([[s,x],[o,x],[o,l],[s,l]]),this.draw()}},a.stretch=function(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),Kt())},t}(ea),sa=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Point",t.m_szId="",t}Bt(t,e);var a=t.prototype;return a.draw=function(){Nt[Ut].beginPath(),Nt[Ut].fillStyle=this.m_szDrawColor,Nt[Ut].globalAlpha=1,Nt[Ut].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),Nt[Ut].closePath(),Nt[Ut].fill()},a.drag=function(){},a.stretch=function(){},t}(ea),xa=function(){function e(e){Nt=this,this[Vt]=document.createElement("canvas"),this[Vt].width=e.clientWidth,this[Vt].height=e.clientHeight,e.appendChild(this[Vt]),this[Vt].style.cssText="position: absolute; width: 100%; height: 100%; left: 0; top: 0;z-index: 1; border: 0; outline: none;",this[Vt].classList.add("ezplayer-3d_draw"),this[Ut]=this[Vt].getContext("2d"),this[Ht]=[],this[Wt]=!1,this[Yt]="Rect",this[Gt]=10,this[jt]=!0,this[Zt]={},this[zt]=null,this[Xt]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[Jt]=!1,this.m_iCanvasWidth=this[Vt].clientWidth,this.m_iCanvasHeight=this[Vt].clientHeight,this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",$t(),this[Ht].length=0}var t=e.prototype;return t.setDrawMutiShapeOneTime=function(e){this[jt]=e},t.setMaxShapeSupport=function(e){this[Gt]=e},t.getMaxShapeSupport=function(){return this[Gt]},t.setDrawStatus=function(e,t){this[Wt]=e,t&&e&&(this[zt]=t),e||(this[zt]=null,Qt())},t.setShapeType=function(e){this[Yt]=e,Kt()},t.setCurrentShapeInfo=function(e){this[Zt]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}},t.getShapeType=function(){return this[Yt]},t.getAllShapesInfo=function(){for(var e=[],t=0,a=this[Ht].length;t<a;t++)"Grid"===this[Ht][t].m_szType?e.push({szType:this[Ht][t].m_szType,szGridMap:this[Ht][t].m_szGridMap,iGridColNum:this[Ht][t].m_iGridColNum,iGridRowNum:this[Ht][t].m_iGridRowNum}):"RectOSD"===this[Ht][t].m_szType?e.push({szType:this[Ht][t].m_szType,szText:this[Ht][t].m_szText,szEnabled:this[Ht][t].m_szEnabled,szOSDType:this[Ht][t].m_szOSDType,iPositionX:this[Ht][t].m_aPoint[0][0],iPositionY:this[Ht][t].m_aPoint[0][1],szDateStyle:this[Ht][t].m_szDateStyle,szClockType:this[Ht][t].m_szClockType,szDisplayWeek:this[Ht][t].m_szDisplayWeek,szId:this[Ht][t].m_szId,szAlignment:this[Ht][t].m_szAlignment}):e.push({szType:this[Ht][t].m_szType,aPoint:this[Ht][t].m_aPoint,szId:this[Ht][t].m_szId,bChoosed:this[Ht][t].m_bChoosed});return e},t.deleteRepeatPolyonById=function(e){var t=this.getAllShapesInfo(),a=t.length;if(a>0)for(var r=0;r<a;r++)"Polygon"===t[r].szType&&t[r].szId===e&&this.deleteShape(r)},t.getShapesInfoByType=function(e){for(var t=[],a=0,r=this[Ht].length;a<r;a++)this[Ht][a].m_szType===e&&("Grid"===this[Ht][a].m_szType?t.push({szType:this[Ht][a].m_szType,szGridMap:this[Ht][a].m_szGridMap,iGridColNum:this[Ht][a].m_iGridColNum,iGridRowNum:this[Ht][a].m_iGridRowNum}):"RectOSD"===this[Ht][a].m_szType?t.push({szType:this[Ht][a].m_szType,szText:this[Ht][a].m_szText,szEnabled:this[Ht][a].m_szEnabled,szOSDType:this[Ht][a].m_szOSDType,iPositionX:this[Ht][a].m_aPoint[0][0],iPositionY:this[Ht][a].m_aPoint[0][1],szDateStyle:this[Ht][a].m_szDateStyle,szClockType:this[Ht][a].m_szClockType,szDisplayWeek:this[Ht][a].m_szDisplayWeek,szId:this[Ht][a].m_szId,szAlignment:this[Ht][a].m_szAlignment}):"Polygon"===e?t.push({szType:this[Ht][a].m_szType,szId:this[Ht][a].m_szId,iPolygonType:this[Ht][a].m_iPolygonType,iMinClosed:this[Ht][a].m_iMinClosed,iMaxPointNum:this[Ht][a].m_iMaxPointNum,iEditType:this[Ht][a].m_iEditType,aPoint:this[Ht][a].m_aPoint,bClosed:this[Ht][a].m_bClosed,szTips:this[Ht][a].m_szTips,szDrawColor:this[Ht][a].m_szDrawColor,szFillColor:this[Ht][a].m_szFillColor,iTranslucent:this[Ht][a].m_iTranslucent}):"Line"===e?t.push({szType:this[Ht][a].m_szType,szId:this[Ht][a].m_szId,aPoint:this[Ht][a].m_aPoint,szTips:this[Ht][a].m_szTips,iLineType:this[Ht][a].m_iLineType,iDirection:this[Ht][a].m_iDirection,iArrowType:this[Ht][a].m_iArrowType,szDrawColor:this[Ht][a].m_szDrawColor,aCrossArrowPoint:this[Ht][a].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[Ht][a].m_szType,iEditType:this[Ht][a].m_iEditType,aPoint:this[Ht][a].m_aPoint,szTips:this[Ht][a].m_szTips,szDrawColor:this[Ht][a].m_szDrawColor,szFillColor:this[Ht][a].m_szFillColor,iTranslucent:this[Ht][a].m_iTranslucent}):t.push({szType:this[Ht][a].m_szType,aPoint:this[Ht][a].m_aPoint}));return t},t.setShapesInfoByType=function(e,t){t||(t=[]);var a=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(var r=0,i=t.length;r<i;r++)"Rect"===e?((a=new ta).m_iEditType=t[r].iEditType,a.m_szTips=t[r].szTips||"",a.m_szDrawColor=t[r].szDrawColor,a.m_szFillColor=t[r].szFillColor,a.m_iTranslucent=t[r].iTranslucent,a.m_iRedrawMode=t[r].iRedrawMode):"Polygon"===e?(a=new na,0===t[r].iPolygonType?a.m_bClosed=!0:a.m_bClosed=t[r].bClosed,a.m_szTips=t[r].szTips||"",a.m_szId=t[r].szId||"",a.m_iPolygonType=t[r].iPolygonType,a.m_iMinClosed=t[r].iMinClosed||3,a.m_iMaxPointNum=t[r].iMaxPointNum||11,a.m_iEditType=t[r].iEditType,a.m_szDrawColor=t[r].szDrawColor,a.m_szFillColor=t[r].szFillColor,a.m_iTranslucent=t[r].iTranslucent,a.m_iRedrawMode=t[r].iRedrawMode):"Line"===e?((a=new ia).m_iLineType=t[r].iLineType,a.m_szTips=t[r].szTips||"",a.m_szId=t[r].szId,a.m_iDirection=t[r].iDirection,a.m_iArrowType=t[r].iArrowType,a.m_szDrawColor=t[r].szDrawColor,a.setPointInfo(t[r].aPoint)):"Point"===e&&((a=new sa).m_szId=t[r].szId,a.m_szDrawColor=t[r].szDrawColor,a.setPointInfo(t[r].aPoint)),a.setPointInfo(t[r].aPoint),0===r&&(a.m_bChoosed=!0),qt(a);else"Grid"===e&&((a=new ra).m_szGridMap=t[0].szGridMap||"",a.m_iGridColNum=t[0].iGridColNum||22,a.m_iGridRowNum=t[0].iGridRowNum||18,qt(a));Kt()},t.addOSDShape=function(e,t,a,r,i){a||r||(a=0,r=0),i||(i={});var n=new aa(e,t),s=10*e.replace(/[^x00-xff]/g,"rr").length;n.m_szOSDType=i.szOSDType||"",n.m_szDateStyle=i.szDateStyle||"",n.m_szClockType=i.szClockType||"",n.m_szDisplayWeek=i.szDisplayWeek||"",n.m_szId=i.szId||"",n.m_szAlignment=""+i.szAlignment||"0","0"===n.m_szAlignment?n.m_aPoint=[[a,r],[s+a,r],[s+a,r+20],[a,r+20]]:"1"===n.m_szAlignment?n.m_aPoint=[[0,r],[s,r],[s,r+20],[0,r+20]]:"2"===n.m_szAlignment?n.m_aPoint=[[this.m_iCanvasWidth-s,r],[this.m_iCanvasWidth,r],[this.m_iCanvasWidth,r+20],[this.m_iCanvasWidth-s,r+20]]:n.m_aPoint=[[a,r],[s+a,r],[s+a,r+20],[a,r+20]],qt(n),Kt()},t.selectShapeById=function(e,t){for(var a=0,r=Nt[Ht].length;a<r;a++)e===Nt[Ht][a].m_szType&&(t===Nt[Ht][a].m_szId?Nt[Ht][a].m_bChoosed=!0:Nt[Ht][a].m_bChoosed=!1);Kt()},t.setCanvasSize=function(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,Kt())},t.setDrawStyle=function(e,t,a){this[Xt]={szDrawColor:e,szFillColor:t,iTranslucent:a}},t.clearAllShape=function(){this[Ht].length=0,Nt[Jt]=!1,Kt()},t.clearShapeByType=function(e){for(var t=this[Ht].length;t>0;t--)this[Ht][t-1].m_szType===e&&("Grid"===e?(this[Ht][t-1].m_szGridMap="",this[Ht][t-1].m_aAddGridMap=[]):this[Ht].splice(t-1,1));"Polygon"===e&&(Nt[Jt]=!1),Kt()},t.deleteShape=function(e){this[Ht].length>e&&this[Ht].splice(e,1),Kt()},t.updateCanvas=function(e){this[Vt]=document.getElementById(e),this[Ut]=this[Vt].getContext("2d"),this.m_iCanvasWidth=this[Vt].clientWidth,this.m_iCanvasHeight=this[Vt].clientHeight,$t()},t.resizeCanvas=function(){this.m_iCanvasWidth=this[Vt].clientWidth,this.m_iCanvasHeight=this[Vt].clientHeight},t.canvasRedraw=function(){Kt()},t.resize=function(e,t){this[Vt].width=e,this[Vt].height=t,this.resizeCanvas(e,t)},t.destroy=function(){this[Vt]&&this[Vt].remove(),this[Vt]=null,this[Ut]=null,this[Ht]=[],this[Xt]={},this[Jt]=!1,this.m_iCanvasWidth=0,this.m_iCanvasHeight=0},e}();function oa(e){return e.esCanvas&&(e.esCanvas.setDrawStatus(!1),e.esCanvas.destroy(),e.esCanvas=null,e.__fCallback=null,e.__b3DZoom=!1),0}function la(e){return null==e||""===e}function _a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var ha="object"===("undefined"==typeof window?"undefined":_a(window))&&window.window===window?window:"object"===("undefined"==typeof self?"undefined":_a(self))&&self.self===self?self:"object"===("undefined"==typeof global?"undefined":_a(global))&&global.global===global?global:void 0;function fa(e,t,a){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){pa(r.response,t,a)},r.onerror=function(){},r.send()}function ca(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function ua(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var da=ha.navigator&&navigator.userAgent.includes("Macintosh")&&navigator.userAgent.includes("AppleWebKit")&&!navigator.userAgent.includes("Safari"),pa="object"!==("undefined"==typeof window?"undefined":_a(window))||window!==ha?function(){}:"download"in HTMLAnchorElement.prototype&&!da?function(e,t,a){var r=ha.URL||ha.webkitURL,i=document.createElementNS("http://www.w3.org/1999/xhtml","a");t=t||e.name||"download",i.download=t,i.rel="noopener","string"==typeof e?(i.href=e,i.origin!==location.origin?ca(i.href)?fa(e,t,a):ua(i,i.target="_blank"):ua(i)):(i.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){ua(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"==typeof e)if(ca(e))fa(e,t,a);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){ua(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(void 0===t?"undefined":_a(t))&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,a),t)}:function(e,t,a,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return fa(e,t,a);var i="application/octet-stream"===e.type,n=/constructor/i.test(ha.HTMLElement)||ha.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&n||da)&&"undefined"!=typeof FileReader){var x=new FileReader;x.onloadend=function(){var e=x.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},x.readAsDataURL(e)}else{var o=ha.URL||ha.webkitURL,l=o.createObjectURL(e);r?r.location=l:location.href=l,r=null,setTimeout((function(){o.revokeObjectURL(l)}),4e4)}};function ma(e,t,a,r,i,n,s){return void 0===a&&(a="jpeg"),void 0===n&&(n=!0),void 0===s&&(s=!1),a="jpeg",t=(la(t)?(new Date).getTime():t)+"."+a,new Promise((function(r,x){var o,l;s?Sa(e,t,a,i,n).then((function(e){0===(null==e?void 0:e.code)&&r(e)})):(e.logger.log("snapshot GetJPEG start:",(new Date).getTime()),1!=+(null==(l=e.wasmplayer)||null==(o=l.JSPlayM4_GetJPEG)?void 0:o.call(l,(function(a){if(a){var s,x,o,l=function(e){for(var t=new Uint8Array(e),a="",r=0;r<t.length;r++)a+=String.fromCharCode(t[r]);return"data:image/jpeg;base64,"+window.btoa(a)}(a);i&&Ra(l,t);var _=null==e||null==(s=e.getOSDTime)?void 0:s.call(e);n&&(null==e.emit||e.emit.call(e,ee.API.snapshot,K({fileName:t,base64:l,currentOSD:_}))),null==(o=e.logger)||null==(x=o.log)||x.call(o,"snapshot GetJPEG end:",(new Date).getTime()),r(z({fileName:t,base64:l,currentOSD:_}))}}),!1))&&Sa(e,t,a,i,n).then((function(e){0===(null==e?void 0:e.code)?r(e):x(e)})))}))}function Sa(e,t,a,r,i){void 0===i&&(i=!1);var n=e.wasmplayer;return new Promise((function(s,x){var o,l;null==(o=e.logger)||o.log("snapshot GetCanvasCapture start:",(new Date).getTime());var _=null==n||null==(l=n.JSPlayM4_GetCanvasCapture)?void 0:l.call(n,(function(n,x,o){if(n&&x&&o){var l;a=a||"jpeg",t=(la(t)?(new Date).getTime():t)+"."+a;var _=new ImageData(x,o);_.data.set(n);var h="image/"+a,f=document.createElement("canvas"),c=f.getContext("2d");f.width=x,f.height=o,null==c||c.putImageData(_,0,0);var u=f.toDataURL(h,.7);r&&Ra(u,t);var d=e.getOSDTime();i&&(null==e.emit||e.emit.call(e,ee.API.snapshot,K({fileName:t,base64:u,currentOSD:d}))),null==(l=e.logger)||l.log("snapshot GetCanvasCapture end:",(new Date).getTime()),s(z({fileName:t,base64:u,currentOSD:d}))}}));1!==_&&s(z(null,-1,"截图失败"))}))}function Ra(e,t){pa(function(e){void 0===e&&(e="");for(var t=e.split(","),a=atob(t[1]),r=t[0].replace("data:","").replace(";base64",""),i=a.length,n=new Uint8Array(i);i--;)n[i]=a.charCodeAt(i);return new File([n],"file",{type:r})}(e),t)}var Pa={.5:3,1:1,2:2,4:4,8:6,16:8,32:10};var ba={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,a="~";function r(){}function i(e,t,a){this.fn=e,this.context=t,this.once=a||!1}function n(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var x=new i(r,n||e,s),o=a?a+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],x]:e._events[o].push(x):(e._events[o]=x,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function x(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(a=!1)),x.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(a?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},x.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,n=r.length,s=new Array(n);i<n;i++)s[i]=r[i].fn;return s},x.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},x.prototype.emit=function(e,t,r,i,n,s){var x=a?a+e:e;if(!this._events[x])return!1;var o,l,_=this._events[x],h=arguments.length;if(_.fn){switch(_.once&&this.removeListener(e,_.fn,void 0,!0),h){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,t),!0;case 3:return _.fn.call(_.context,t,r),!0;case 4:return _.fn.call(_.context,t,r,i),!0;case 5:return _.fn.call(_.context,t,r,i,n),!0;case 6:return _.fn.call(_.context,t,r,i,n,s),!0}for(l=1,o=new Array(h-1);l<h;l++)o[l-1]=arguments[l];_.fn.apply(_.context,o)}else{var f,c=_.length;for(l=0;l<c;l++)switch(_[l].once&&this.removeListener(e,_[l].fn,void 0,!0),h){case 1:_[l].fn.call(_[l].context);break;case 2:_[l].fn.call(_[l].context,t);break;case 3:_[l].fn.call(_[l].context,t,r);break;case 4:_[l].fn.call(_[l].context,t,r,i);break;default:if(!o)for(f=1,o=new Array(h-1);f<h;f++)o[f-1]=arguments[f];_[l].fn.apply(_[l].context,o)}}return!0},x.prototype.on=function(e,t,a){return n(this,e,t,a,!1)},x.prototype.once=function(e,t,a){return n(this,e,t,a,!0)},x.prototype.removeListener=function(e,t,r,i){var n=a?a+e:e;if(!this._events[n])return this;if(!t)return s(this,n),this;var x=this._events[n];if(x.fn)x.fn!==t||i&&!x.once||r&&x.context!==r||s(this,n);else{for(var o=0,l=[],_=x.length;o<_;o++)(x[o].fn!==t||i&&!x[o].once||r&&x[o].context!==r)&&l.push(x[o]);l.length?this._events[n]=1===l.length?l[0]:l:s(this,n)}return this},x.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},x.prototype.off=x.prototype.removeListener,x.prototype.addListener=x.prototype.on,x.prefixed=a,x.EventEmitter=x,e.exports=x}(ba);var ya=r(ba.exports);Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e};var Ea=function(e,t){var a=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),r=(t||window.location.href).match(a);return decodeURIComponent(r?r[2]:"")},ga=function(e,t){var a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=t.match(a);return null!=r?unescape(r[2]):null};function Fa(){return Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Fa.apply(this,arguments)}function va(e,t,a){var r=e.reduce((function(e,t,a){return 0===a?(null==t||delete t.coverPic,e.push(Fa({},t)),e):(e[e.length-1].downloadPath===t.downloadPath?e[e.length-1].endTime=t.endTime:(null==t||delete t.coverPic,e.push(Fa({},t))),e)}),[]);return r.length>0&&(r[0].startTime=t.valueOf(),r[r.length-1].endTime=a.valueOf()),r}function Ca(e){var t=e.wasmplayer;t&&t.JSPlayM4_CloseStream(),e.playing=!1}function Ta(){return Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ta.apply(this,arguments)}function Da(e,t,a,r){var i,n,s,x,o,l=(x=(s=t).split("?")[0].replace("/live","").replace("/playback",""),(o=(s.includes("/live")?"/live?":s.includes("cloudplayback")?"/cloudplayback?":"/playback?")+s.split("?")[1]).includes("/playback")&&(o=o.replace("stream=2","stream=1")),{websocketConnectUrl:x,websocketStreamingParam:o});if(l.websocketConnectUrl){var _,h=null!=(_=null==(n=e._options)||null==(i=n.env)?void 0:i.wsUrl)?_:l.websocketConnectUrl;Ma(e,h,{playURL:l.websocketStreamingParam}).then((function(){return a(0)}),(function(t){e.logger.error("play error: ",t),e.emit(q,K(t)),r(1)}))}}function Aa(e){var t=e._options.url;return e.service.getRealPlayUrl({ezopen:e._options.url}).then((function(a){var r=a.realUrl,i=ga("checkCode",r);return i&&(e._validateCode=i),r.includes("playback")?function(e,t,a){var r,i=M(ga("begin",t)||ga("begin",a)||M().format("YYYY-MM-DD 00:00:00")),n=M(ga("end",t)||ga("end",a)||M().format("YYYY-MM-DD 23:59:59")),s=ga("end",t)||ga("end",a),x=+Ea("timeZone",a);x<24&&x>-24?x=Math.round(x):(x=0,e.logger.warn("timeZone时区参数错误，取值范围为-23~23"));var o=M(i).add(x,"hour"),l=s?M(n).add(x,"hour"):M(M(o).format("YYYYMMDD 23:59:59"));o>=l&&(l=M(M(o).format("YYYYMMDD 23:59:59")),e.logger.warn("End time greater than or equal to start time"));var _,h="YYYYMMDDTHHmmss";t=t.replace("&begin="+Ea("begin",t),""),t=t+"&begin="+o.format(h)+"Z",function(e,t){var a=M(e).startOf("day"),r=M(t).startOf("day");return!a.isSame(r)}(o,l)&&"cloud"===e.urlInfo.recType&&(l=M(M(o).format("YYYYMMDD 23:59:59")),e.logger.warn("The start and end times have crossed days"));t=t.replace("&end="+Ea("end",t),""),t=t+"&end="+l.format(h)+"Z",Ea("stream",t)||(t=t.replace("stream","&stream"));return"cloud"===e.urlInfo.recType&&"7"===(null==(r=e.urlInfo.searchParams)?void 0:r.busType)?function(e,t){return new Promise((function(a,r){e.service.getRecordCloudVideoByTime(t).then((function(t){e.emit(ee.NETWORK.videoFragmentFiles,K(t.data||[],"云录制录像信息查询","RecordCloud")),a(t)})).catch((function(t){e.emit(ee.NETWORK.error.error,K(t)),e.emit(ee.NETWORK.error.videoFragmentFiles,K(t)),r(t)}))}))}(e,{channelNo:e.urlInfo.channelNo,startTime:M(M(o).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:M(M(l).format("YYYY-MM-DD 23:59:59")).valueOf(),spaceId:null==(_=e.urlInfo.searchParams)?void 0:_.spaceId}).then((function(e){var a=l;e.data.length>0&&M(e.data[e.data.length-1].endTime)<M(l)&&(a=M(e.data[e.data.length-1].endTime));var r=JSON.stringify(va(e.data,o,a)).replace("\\","");return t+="&recSlice="+r.replace("\\","")+"&r="+Math.random()})):"cloud"===e.urlInfo.recType?gt(e,{recType:1,channelNo:e.urlInfo.channelNo,startTime:M(M(o).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:M(M(l).format("YYYY-MM-DD 23:59:59")).valueOf()}).then((function(e){var a=l;e.data.length>0&&M(e.data[e.data.length-1].endTime)<M(l)&&(a=M(e.data[e.data.length-1].endTime));var r=JSON.stringify(va(e.data,o,a)).replace("\\","");return t+="&recSlice="+r.replace("\\","")+"&r="+Math.random()})):(gt(e,{recType:2,channelNo:e.urlInfo.channelNo,startTime:M(M(o).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:M(M(l).format("YYYY-MM-DD 23:59:59")).valueOf()}),Promise.resolve(t))}(e,r,t):Promise.resolve(r)}))}var Ia="";function Ma(e,t,a,r){var i,n;return null==(n=e._playerWindow)||null==(i=n.reRenderCanvas)||i.call(n,!0),e.playing=!1,e.__videoInfo={},e.__audioInfo={},e._wss_info={wssUrl:t,oParams:a},new Promise((function(t,a){var r;(Ia="",e._oStreamClient.stopAll(),null===e._g_port)&&((null==(r=e._options)?void 0:r.debugDownloadData)&&e.wasmplayer.JSPlayM4_DownloadData(),e._g_port=e.wasmplayer.JSPlayM4_GetPort(),e.logger.log("1.获取播放库端口号 g_port:"+e._g_port));/^ws[s]?:\/\//.test(e._wss_info.wssUrl)?(e.emit($,K({type:Q.openStreamCallback,data:null})),La(e).then(t,a)):(e.logger.error("wssUrl:",e._wss_info.wssUrl),a("Socket stream address invalid!"))}))}function La(e,t){var a=!0,r=!0,i=0;return new Promise((function(n,s){wa(e),e.playing=!0;var x=!1,o=!1;e._oStreamClient.openStream(e._wss_info.wssUrl,e._wss_info.oParams,(function(s){if(s.errorCode&&"1"!=s.errorCode&&e.emit(ee.SOCKET.autoClose),null==s?void 0:s.bHead){var l;if(e.emit($,K({type:Q.getStreamHeaderCallback})),"resume"===t||x||(x=!0,function(e,t){var a=e.wasmplayer,r=a.JSPlayM4_OpenStream(t,40,4194304);e.emit("PlayM4_openStream",K(t)),e.setStreamInfoCallBackType(e._options.streamInfoCBType),void 0!==e._options.decodeEngine&&e.wasmplayer.JSPlayM4_SetDecodeEngine(e._options.decodeEngine);a.JSPlayM4_SetFirstFrameCallBack(1,(function(t){var a=t.decodeEngine;e.emit($,K({type:Q.firstFrameCallback,decodeEngine:a}))})),a.JSPlayM4_SetRunTimeInfoCallbackType(1,1024,1),a.JSPlayM4_SetRunTimeInfoCallbackType(2,352321537,1),a.JSPlayM4_SetRunTimeInfoCallbackType(4,262144,1);var i=0;e&&e.on("seek",(function(e){i=e.data.startTime.replace(/[TZ]/gi,"")}));a.JSPlayM4_SetRunTimeInfoCallBackEx(2,(function(t){var a,r,f,c,u=Date.now();1024===t.nErrorCode&&t.nFrameNum>0&&(t.nFrameNumInterval&&(o+=t.nFrameNumInterval),u-h>=3e3&&(e.emit($,K({type:Q.stutterDetectedCallback,data:{type:1,frameNumInterval:t.nFrameNum-l,frameLossNum:o}})),l=t.nFrameNum,h=u,o=0),e.emit($,K({type:Q.stutterDetectedCallback,data:{type:1,pstRuntimeInfo:t,errorTime:M(i||(null==e||null==(r=e.urlInfo)||null==(a=r.searchParams)?void 0:a.begin)||M().format("YYYYMMDD000000"))}})));(352321537===t.nErrorCode&&(n>0&&t.nAverageDecodeTime&&(x+=Math.floor(t.nAverageDecodeTime),s++),u-_>=1e3&&(n>0?(e.emit($,K({type:Q.stutterDetectedCallback,data:{type:2,runtimeInfo:t,averageDecodeTime:x,account:s}})),x=0,s=0):n++,_=u)),262144===t.nErrorCode)&&e.emit($,K({type:Q.stutterDetectedCallback,data:{type:4,pstRuntimeInfo:t,errorTime:M(i||(null==e||null==(c=e.urlInfo)||null==(f=c.searchParams)?void 0:f.begin)||M().format("YYYYMMDD000000"))}}));if(e){var d,p,m=e.getOSDTime();i=i||(Number.isNaN(m)?0:1e3*m),e.emit($,K({type:Q.setRunTimeInfoCallBack,data:{pstRuntimeInfo:t,errorTime:M(i||(null==e||null==(p=e.urlInfo)||null==(d=p.searchParams)?void 0:d.begin)||M().format("YYYYMMDD000000"))}})),i=0}}));var n=-3,s=0,x=0,o=0,l=0,_=0,h=0,f=48;function c(e){var t={};if(e)for(var a=f,r=0;r<1500&&!(a+28>e.additionDataBuffer.length);r++){var i={id:-1,x:0,y:0,type:0,viewAngleH:0,viewAngleV:0,r:0,r_max:0,north:0,res0:0,res1:0,res2:0};i.id=parseInt(e.additionDataBuffer[a])>244?parseInt(e.additionDataBuffer[a])+256:parseInt(e.additionDataBuffer[a]),i.x=e.additionDataBuffer[a+2],i.y=e.additionDataBuffer[a+4],i.type=e.additionDataBuffer[a+6],i.viewAngleH=e.additionDataBuffer[a+8],i.viewAngleV=e.additionDataBuffer[a+10],i.r=e.additionDataBuffer[a+12],i.r_max=e.additionDataBuffer[a+14],i.res0=e.additionDataBuffer[a+7],a+=28,t[i.id]=i}return t}a.JSPlayM4_SetAdditionDataCallBack(2052,1,(function(t){e&&e.emit($,K({type:Q.setAdditionDataCallBack,data:{additionInfo:Ta({},t,{additionDataBufferView:new Int32Array(t.additionDataBuffer)}),labelMap:c(t)}}))})),e.logger.log("3.打开流 resO:"+r)}(e,s.buf)),e._aHead=new Uint8Array(s.buf),(null==e||null==(l=e.urlInfo)?void 0:l.validateCode)||e._secretKey){var _,h,f,c=(null==e||null==(_=e.urlInfo)?void 0:_.validateCode)||e._secretKey;if(1==+(null==(h=e.wasmplayer)?void 0:h.JSPlayM4_SetSecretKey(c)))null==(f=e.logger)||f.log("set secretKey success, ",c);else e.logger.error("set secretKey fail, ",c)}if("resume"!==t&&!o){if(o=!0,1!=+e.wasmplayer.JSPlayM4_SetFrameInfoCallBack(1)){var u=e.wasmplayer.JSPlayM4_GetLastError();e.logger.error("resFrameInfoError:",u)}a=!0,r=!0,e.emit("JSPlayM4_Play_Before",K(void 0));var d,p=e.wasmplayer.JSPlayM4_Play(e._playerWindow.canvasId);if(e._options.disableRenderPrivateData)e.wasmplayer.JSPlayM4_RenderPrivateData(1,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(2,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(4,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(8,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(16,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(32,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(64,!1),e.wasmplayer.JSPlayM4_RenderPrivateData(128,!1),null==(d=e.logger)||d.log("disable render private data");else e.wasmplayer.JSPlayM4_RenderPrivateData(4,1),e.wasmplayer.JSPlayM4_RenderPrivateData(8,1),e.wasmplayer.JSPlayM4_RenderPrivateData(32,1),e.wasmplayer.JSPlayM4_RenderPrivateData(64,1),e.wasmplayer.JSPlayM4_RenderPrivateData(128,1);e.emit("JSPlayM4_Play_After",K(void 0)),e.logger.log("4.开始播放 resP:"+p,e._playerWindow.canvasId),n(p)}}else{if(r&&s.buf&&(r=!1,e.emit($,K({type:Q.getVideoStreamCallback}))),a&&s.buf){var m=e.getFrameInfo();(null==m?void 0:m.width)&&(e.emit($,K({type:Q.appearFirstFrameCallback})),e.emit($,K({type:Q.averageStreamSuccessCallback})),a=!1,e.playing=!0)}var S=new Uint8Array(s.buf);s.statusString?e.emit($,K({type:Q.pluginErrorHandler,iWndIndex:0,code:1001,data:s})):s.type&&"exception"===s.type&&e.emit($,K({type:Q.pluginErrorHandler,iWndIndex:0,code:1002,data:s})),i+=S.length,e.wasmplayer.JSPlayM4_InputData(S,S.length),S=null}e.emit("recordInputData",K(s.buf))}),(function(t){Ia===t&&e&&(e.emit($,K({type:Q.pluginErrorHandler,iWndIndex:0,code:1003})),e.emit(ee.SOCKET.close)),e.playing=!1,wa(e),s()}),(function(t,a){e&&(null==e||e.emit($,K({type:Q.pluginErrorHandler,iWndIndex:0,code:1004,msg:a})),null==e||e.emit(ee.SOCKET.error))})).then((function(a){Ia=a,e._oStreamClient.startPlay().then((function(){var a;if("resume"===t){var r,i,x=null==(i=e.wasmplayer)||null==(r=i.JSPlayM4_Pause)?void 0:r.call(i,0);x?(e.playing=!0,e._tempPauseDate=null,n(x)):(e.logger.error("startPlay pause error"),s())}else{var o,l,_=null==(l=e.wasmplayer)||null==(o=l.JSPlayM4_SetStreamOpenMode)?void 0:o.call(l,1);e.logger.log("2.设置流模式 resSSOM:"+_)}e.emit(ee.API.play),(null==e||null==(a=e._options)?void 0:a.url.includes(".rec"))&&(null==e?void 0:e._playbackRate)>0&&setTimeout((function(){e.setPlaybackRate(e._playbackRate||1)}),1e3)})).catch((function(t){e.playing=!1,e.logger.error("startPlay error:",t),wa(e),s(t.oError)})),e._detectTimer=setInterval((function(){e.emit($,K({type:Q.stutterDetectedCallback,data:{type:5,codeRate:(8*i/1e3).toFixed(2)}})),i=0}),1e3)}),(function(t){wa(e),e.playing=!1,e.logger.error("openStream error:",t),Ca(e),s(t)}))}))}function wa(e){e._detectTimer&&(clearInterval(e._detectTimer),e._detectTimer=null)}function Oa(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function Ba(e){return(e=+e)<10&&(e="0"+e),e+""}var ka={startPos:{fX:.1,fY:.1},fontColor:{fR:0,fG:0,fB:0,fA:1},fontSize:{nFontWidth:20,nFontHeight:20},fontRotate:{fRotateAngle:0,fFillFullScreen:!1},fontFamily:"Arial",fontNumber:{nRowNumber:5,nColNumber:5},space:1,fontAlign:0,pstCanvasAdapt:{nCanvasAdaptMode:2,nRowSpace:0,nColSpace:0,nBaseCanvasWidth:0,nBaseCanvasHeight:0}};function Na(){return Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Na.apply(this,arguments)}function Va(e,t,a){return t&&function(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Ua(){return Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ua.apply(this,arguments)}function Ha(e,t){return Ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ha(e,t)}var Wa=function(e){function t(t){var a;return(a=e.call(this)||this).event=null,a.initializing=!0,a.loading=!1,a.playbackRate=1,a.playing=!1,a.volume=0,a.destroyed=!1,a.deviceCapacity={},a.deviceInfo={},a.error=null,a._aHead=null,a._detectTimer=null,a._g_port=null,a._secretKey="",a._tempPauseDate=null,a._tempPauseTime="",a._playbackRate=1,a.__videoInfo={},a.__audioInfo={},a._waterMarkParams=null,a._decoderStatus={},a._wss_info={wssUrl:"",oParams:{playURL:""}},a._setOptions(t),a.event={on:a.on.bind(a),emit:a.emit.bind(a),off:a.off.bind(a),once:a.once.bind(a),removeAllListeners:a.removeAllListeners.bind(a)},a._playerWindow=new Dt({container:a.$container,id:a._options.id,dpr:a._options.dpr,player:a}),a._playerInit(),a._addEventListener(),a}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ha(e,t)}(t,e);var a=t.prototype;return a._playerInit=function(){var e,t=this;return(e=this,e.logger.log("player engine start init"),Ot(e).then((function(t){return e.logger.log("player engine init success"),t}))).then((function(e){return t._wasmDecoderInfo=e,"loaded"===e.cmd&&t._options.autoPlay&&t.play(),e}))},a.play=function(e){var t=this;return this.loading=!0,this._destroyed(),e&&this._setOptions(null!=e?e:{}),new Promise((function(e,a){var r;(r=t,r._playerWindow.hide(),new Promise((function(e,t){r._options.accessToken&&H(r._options.url)?r._oStreamClient._streamUUID?r.stop().then((function(){Aa(r).then((function(a){Da(r,a,e,t)})).catch((function(e){r.logger.error("play error: ",e),r.emit(q,K(e)),t(e)}))})).catch((function(e){t(e)})):Aa(r).then((function(a){Da(r,a,e,t)})).catch((function(e){r.logger.error("play error: ",e),r.emit(q,K(e)),t(e)})):t(1)}))).then((function(){t._options.audio&&setTimeout((function(){t.setVolume(.8)}),100),t.loading=!1,e(0)})).catch((function(){t.loading=!1,a(1)}))}))},a._wss_play=function(e,t,a){var r=this;return void 0===t&&(t={playURL:""}),this._destroyed(),new Promise((function(a,i){var n=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(n),Ma(r,e,t).then((function(e){a(e)})).catch((function(e){i(e)})))}),50)}))},a.pause=function(e){return function(e,t){if(!e.playing)return e._tempPauseDate?Promise.resolve(z(new Date(e._tempPauseDate),0)):Promise.reject(z(void 0,-1,"当前不是播放状态，不需要暂停"));e._detectTimer&&(clearInterval(e._detectTimer),e._detectTimer=null);var a=e.getFrameInfo(),r=new Date(a.year+"/"+a.month+"/"+a.day+" "+a.hour+":"+a.minute+":"+a.second).getTime()/1e3,i=new Date(1e3*r);return e._tempPauseDate=i.valueOf(),e._tempPauseTime=""+a.year+Ba(a.month)+Ba(a.day)+Ba(a.hour)+Ba(a.minute)+Ba(a.second),new Promise((function(a,r){t?e.stop().then((function(){a(z(i,0,"暂停成功"))})).catch((function(e){r(z(i,-1,"暂停失败"))})):(e._oStreamClient.stopAll(),1==+e.wasmplayer.JSPlayM4_Pause(1)?(e.playing=!1,a(z(i))):r(z(i,-1,"暂停失败"))),e.emit("pause",K(void 0))}))}(this,e)},a.resume=function(e){return this._destroyed(),function(e,t){var a=e._tempPauseTime,r=e._tempPauseDate,i=e._wss_info;if(e.playing)return Promise.resolve();var n=!1;return new Promise((function(s,x){var o,l,_;t&&(a?a=a.slice(0,14-t.length)+t:(n=!0,a=t)),(null==(o=i.oParams)?void 0:o.playURL.includes("playback"))&&(i.oParams.playURL=null==i||null==(l=i.oParams)?void 0:l.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+a.slice(0,8)+"T"+a.slice(8,14)+"Z")),i.oParams.playURL.includes("cloudplayback")&&(i.oParams.playURL=null==i||null==(_=i.oParams)?void 0:_.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+r)),e.emit(ee.API.resume,K(t)),t&&!n?e._wss_play(null==i?void 0:i.wssUrl,null==i?void 0:i.oParams).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){x(e)})):La(e,"resume").then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){x(e)}))}))}(this,e)},a.destroy=function(){return function(e){var t,a,r,i,n,s;if(e._detectTimer&&(clearInterval(e._detectTimer),e._detectTimer=null),e._oStreamClient&&(null==(t=e._oStreamClient)||t.destroy(),e._oStreamClient=null,null==(a=e.logger)||a.log("[destroy] StreamClient destroy")),e.wasmplayer&&(null==e.wasmplayer.JSPlayM4_Stop||e.wasmplayer.JSPlayM4_Stop.call(e.wasmplayer),null==(r=e.logger)||r.log("[destroy] stop")),Ca(e),e.wasmplayer)try{var x,o,l;null==(o=e.wasmplayer)||null==(x=o.JSPlayM4_FreePort)||x.call(o),e.wasmplayer=null,null==(l=e.logger)||l.log("[destroy] free port")}catch(t){var _,h;null==(h=e.logger)||null==(_=h.error)||_.call(h,"[destroy] free port",t)}return e._g_port=null,e.pluginManager&&(e.pluginManager.destroy(),e.pluginManager=null,null==(i=e.logger)||i.log("[destroy] plugin destroy")),e._playerWindow&&(null==e._playerWindow.destroy||e._playerWindow.destroy.call(e._playerWindow),e._playerWindow=null,null==(n=e.logger)||n.log("[destroy] window destroy")),e.esCanvas&&(oa(e),null==(s=e.logger)||s.log("[destroy] esCanvas destroy")),setTimeout((function(){e&&(e.emit(ee.API.destroy),e.removeAllListeners(),e.event&&(e.event=null))}),0),e.__videoInfo={},e.__audioInfo={},e.destroyed=!0,Promise.resolve()}(this)},a._destroyed=function(){return function(e){if(e.destroyed)throw new Error("player is destroyed!")}(this)},a.stop=function(e){return void 0===e&&(e=!1),function(e,t){void 0===t&&(t=!1),e.playing=!1;var a,r=e.wasmplayer;return t||(e._playerWindow.hide(),e.wasmplayer&&(null==e.wasmplayer.JSPlayM4_Stop||e.wasmplayer.JSPlayM4_Stop.call(e.wasmplayer),null==(a=e.logger)||a.log("[destroy] stop"),Ca(e))),e.playbackRate=1,e._detectTimer&&(clearInterval(e._detectTimer),e._detectTimer=null),new Promise((function(a,i){if(t)try{ma(e,"","jpeg",0,!1,!1,!0).then((function(t){var a,r;if(e.logger.log("保留最后一帧....",null==(a=t.data)?void 0:a.base64),!e.destroyed&&!e.playing){var i,n,s,x=null==(r=e.$container)?void 0:r.querySelector(".ezplayer-poster-img");x||(x=e.$container),x&&null===e.fECCorrect._correctType&&((null==(i=t.data)?void 0:i.base64)?Oa(x,HTMLImageElement)?x.src=null==(n=t.data)?void 0:n.base64:(x.style.backgroundImage="url("+(null==(s=t.data)?void 0:s.base64)+")",x.style.backgroundSize="100% 100%"):Oa(x,HTMLImageElement)||(x.style.backgroundImage="none"))}}))}catch(t){e.logger.warn("保留最后一帧....",t)}setTimeout((function(){e._oStreamClient&&e._oStreamClient.stopAll().then((function(){e.emit("stop",K(void 0)),e.emit("JSPlayM4_Stop",K(void 0));var t=r.JSPlayM4_Stop(!1);if(1===t)Ca(e),a({resS:t});else{var i=r.JSPlayM4_GetLastError();if(35==+i)var n=setInterval((function(){t?clearInterval(n):1==+(t=r.JSPlayM4_Stop(!1))?(Ca(e),a({resS:t})):(i=r.JSPlayM4_GetLastError(),e.logger.error("JSPlayM4_Stop error: ",i))}),50);else e.logger.error("stop - other error, still resolve: ",i),Ca(e),a({resS:t,jsPluginErrorCode:i})}})).catch((function(t){Ca(e);var a=r.JSPlayM4_GetLastError();e.logger.error("JSPlayM4_Stop error: ",a),i({jsPluginErrorCode:a})}))}),100)}))}(this,e)},a.snapshot=function(e,t,a,r,i){return void 0===t&&(t="jpeg"),ma(this,e,t,0,r,!0,i)},a.snapshotByCanvas=function(e,t,a){return void 0===t&&(t="jpeg"),Sa(this,e,t,a)},a.resize=function(e,t){return function(e,t,a){var r=e._options.dpr||1,i="";/^\d+(\.\d+)?$/.test(t+"")?i+="width: "+t+"px;":t&&(i+="width: "+t+";"),/^\d+(\.\d+)?$/.test(a+"")?i+="height: "+a+"px;":a&&(i+="height: "+a+";"),e.$container&&(e.$container.style.cssText+=i);var n,s=e.$container.clientWidth,x=e.$container.clientHeight;if(s<16||x<16)return Promise.reject();if(e._playerWindow&&e.wasmplayer)try{null==e.wasmplayer.JSPlayM4_SetCanvasSize||e.wasmplayer.JSPlayM4_SetCanvasSize.call(e.wasmplayer,s*r,x*r)}catch(t){var o;null==(o=e.logger)||o.error("[engine] [resize] error:",t)}return e&&(null==e||e.emit("resize",K({width:x,height:x}))),e.logger&&(null==(n=e.logger)||n.log("[engine] [resize] width: "+x+"  height: "+x+" dpr: "+r)),Promise.resolve({width:t,height:a})}(this,e,t)},a.setVolume=function(e){return function(e,t){var a=0;return t<0||t>1?(e.logger.warn("audio volume ("+t+") is invalid!"),0):(0===t?1===(a=e.wasmplayer.JSPlayM4_StopSoundShare())&&(e.volume=0):1===(a=e.wasmplayer.JSPlayM4_PlaySoundShare())&&(e.volume=t),e.emit(ee.volumeChange,K(t)),a)}(this,e)},a.use=function(e){this.pluginManager.use(e)},a.setFECCorrectType=function(e,t){return this.fECCorrect.setFECCorrectType(e,t)},a.setFEC2DParam=function(e,t){return this.fECCorrect.setFEC2DParam(e,t)},a.setFEC3DViewParam=function(e){return this.fECCorrect.setFEC3DViewParam(e)},a.get3DViewParam=function(e){return this.fECCorrect.get3DViewParam(e)},a.setPoster=function(e){},a.setPlaybackRate=function(e){!function(e,t){var a,r;if(t=+t,Number.isNaN(t))throw new Error("rate is error, only support 0.5 | 1 | 2 | 4 | 8 | 16 | 32");if(![.5,1,2,4,8,16,32].includes(t))throw new Error("rate is error, only support  0.5 | 1 | 2 | 4 | 8 | 16 | 32");null==(r=e._oStreamClient)||null==(a=r.setPlayRate)||a.call(r,Pa[t]);var i,n,s,x,o,l,_=e.playbackRate;if(_>t)for(var h=t;h<_;){var f,c;h*=2,null==(c=e.wasmplayer)||null==(f=c.JSPlayM4_Slow)||f.call(c)}else if(_<t)for(var u=_;u<t;){var d,p;u*=2,null==(p=e.wasmplayer)||null==(d=p.JSPlayM4_Fast)||d.call(p)}+t>=4&&(null==(n=e.wasmplayer)||null==(i=n.JSPlayM4_SetDecodeThreadNum)||i.call(n,4)),+t>=8?null==(x=e.wasmplayer)||null==(s=x.JSPlayM4_SetDecodeFrameType)||s.call(x,1):null==(l=e.wasmplayer)||null==(o=l.JSPlayM4_SetDecodeFrameType)||o.call(l,0),e.emit(ee.API.rateChange,K(t)),e.playbackRate=t,e._playbackRate=t}(this,e)},a.seek=function(e,t){return function(e,t,a){return e.wasmplayer,e.emit(ee.API.seek,K({startTime:t,endTime:a})),e._oStreamClient.seek(t,a).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams)})),Promise.resolve()}(this,e,t)},a._setOptions=function(e){Ft(this,e)},a.enable3DZoom=function(e){return function(e,t){if(!e.playing)return-1;var a=e.wasmplayer,r=null==a.JSPlayM4_GetFrameInfo?void 0:a.JSPlayM4_GetFrameInfo.call(a);return new Promise((function(t,i){t({code:0,data:null==a.JSPlayM4_SetDisplayRegion?void 0:a.JSPlayM4_SetDisplayRegion.call(a,e._playerWindow.canvasId,0,r.width,0,r.height,!1,!0)})})),e.__fCallback=t,e.esCanvas=new xa(e.$container),e.esCanvas.setShapeType("Rect"),e.esCanvas.setDrawStyle("#ff0000","",0),e.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t&&t(e)})),e.__b3DZoom=!0,0}(this,e)},a.disable3DZoom=function(){return oa(this)},a.getOSDTime=function(){var e=this.getFrameInfo();return(null==e?void 0:e.year)?new Date((null==e?void 0:e.year)+"/"+(null==e?void 0:e.month)+"/"+(null==e?void 0:e.day)+" "+(null==e?void 0:e.hour)+":"+(null==e?void 0:e.minute)+":"+(null==e?void 0:e.second)).getTime()/1e3:0},a.getFrameInfo=function(){var e,t,a,r,i,n=null==(t=this.wasmplayer)||null==(e=t.JSPlayM4_GetFrameInfo)?void 0:e.call(t);if(!n)return null==(i=this.logger)||i.warn("[getFrameInfo] error",n),{};var s=vt[null==n?void 0:n.codecType];return n.videoFormatName=s,(null==n?void 0:n.width)>0&&(null==n?void 0:n.height)>0&&((null==(a=this.__videoInfo)?void 0:a.width)!==(null==n?void 0:n.width)||(null==(r=this.__videoInfo)?void 0:r.height)!==(null==n?void 0:n.height))&&(n.videoFormatName||(n.videoFormatName=this.__videoInfo.videoFormatName),n.frameRate||(n.frameRate=this.__videoInfo.frameRate),this.__videoInfo=Ua({},this.__videoInfo,n),this.emit(ee.videoInfo,K(this.__videoInfo))),n},a.setDisplayRegion=function(e,t,a,r,i,n){void 0===i&&(i=!0),void 0===n&&(n=!1);var s=function(e,t,a,r,i,n,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var x=e.wasmplayer,o=e.getFrameInfo(),l=e._playerWindow.canvasId,_=document.getElementById(l);if(_){var h=function(e){return{width:(null==e?void 0:e.style.width)?+(null==e?void 0:e.style.width.replace("px","")):e.width||e.offsetWidth,height:(null==e?void 0:e.style.height)?+(null==e?void 0:e.style.height.replace("px","")):e.height||e.offsetHeight}}(_);e._options.dpr;var f=h.width,c=h.height;return s&&(c=h.width,f=h.height),null==e||e.emit("setDisplayRegion",K({left:t,right:a,top:r,bottom:i,flag:n,isFullscreen:s})),x.JSPlayM4_SetDisplayRegion(l,f*t/o.width,f*a/o.width,c*r/o.height,c*i/o.height,!n,!1)}}(this,e,t,a,r,i,n);return 1===s},a.setSecretKey=function(e){null!=e&&""!==e&&(this._secretKey=e)},a.getOptions=function(){return this._options},a.setLogger=function(e){var t,a;this._options=u(this._options,{logger:e},{clone:!1}),null==(a=this.logger)||null==(t=a.setOptions)||t.call(a,e)},a.getVersion=function(){var e=this.wasmplayer.JSPlayM4_GetSDKVersion();return{version:"8.2.5-beta.2",decoder:this._wasmDecoderInfo.bSupHardOrSoft?"V3":"V1",decoderVersion:e.toString(16)}},a.setWaterMark=function(e){return this._waterMarkParams=e,function(e,t){var a=e.wasmplayer,r=e.$container.getBoundingClientRect(),i=r.width,n=r.height,s={nCanvasAdaptMode:2,nRowSpace:0,nColSpace:0,nBaseCanvasWidth:Math.floor(i),nBaseCanvasHeight:Math.floor(n)};return t=u.all([{},ka,t||{},{pstCanvasAdapt:s}],{clone:!1}),new Promise((function(e,r){var i;1===(i=t&&t.fontString?a.JSPlayM4_SetWaterMarkFont({pFontString:t.fontString,pstStartPos:t.startPos,pstFontColor:t.fontColor,pstFontSize:t.fontSize,pstFontRotate:t.fontRotate,pstFontNumber:t.fontNumber,pFontFamily:t.fontFamily,pSpace:t.space,pstCanvasAdapt:t.pstCanvasAdapt}):a.JSPlayM4_SetWaterMarkFont(null))?e({code:0,msg:"水印设置成功"}):r({code:-1,msg:i})}))}(this,e)},a.setAntialias=function(e){return this.wasmplayer.JSPlayM4_SetAntialias(e)},a.setGlobalBaseTime=function(e){return function(e,t){return e.wasmplayer.JSPlayM4_SetGlobalBaseTime(t.year,t.month,t.day,t.hour,t.min,t.sec,t.ms)}(this,e)},a.setMirrorFlip=function(e){return function(e,t){var a;return e.service.setMirrorFlip({command:t,channelNo:null==(a=e.urlInfo)?void 0:a.channelNo})}(this,e)},a.setStreamInfoCallBackType=function(e,t){!function(e,t,a){var r,i,n,s;[0,1].includes(t)?e.wasmplayer?e.wasmplayer.JSPlayM4_SetStreamInfoCallBack(t,(function(t){null==a||a(t),e.emit(ee.streamInfoCB,K({systemFormat:t.nSystemformat,videoFormat:t.nVideoformat,videoFormatName:vt[t.nVideoformat],audioFormat:t.nAudioformat,audioFormatName:Ct[t.nAudioformat],audioChannels:t.nAudiochannels,audioBitsPerSample:t.nAudiobitspersample,audioSamplesRate:t.nAudiosamplesrate,audioBitRate:t.nAudiobitrate,width:t.nWidth,height:t.nHeight,frameRate:t.fFrameRate,intervalOfIFrame:t.nIntervalOfIFrame})),t.nWidth>0&&t.nHeight>0&&(e.__videoInfo.width!==t.nWidth||e.__videoInfo.height!==t.nHeight||e.__videoInfo.frameRate!==t.fFrameRate||e.__videoInfo.videoFormatName!==vt[t.nVideoformat])&&(e.__videoInfo={videoFormat:t.nVideoformat,videoFormatName:vt[t.nVideoformat],width:t.nWidth,height:t.nHeight,frameRate:t.fFrameRate,intervalOfIFrame:t.nIntervalOfIFrame},e.emit(ee.videoInfo,K(Na({},e.__videoInfo,{from:"setStreamInfoCallBack"})))),e.__audioInfo.audioFormat===t.nAudioformat&&e.__audioInfo.audioChannels===t.nAudiochannels&&e.__audioInfo.audioBitsPerSample===t.nAudiobitspersample&&e.__audioInfo.audioSamplesRate===t.nAudiosamplesrate&&e.__audioInfo.audioBitRate===t.nAudiobitrate||(e.__audioInfo={audioFormat:t.nAudioformat,audioFormatName:Ct[t.nAudioformat],audioChannels:t.nAudiochannels,audioBitsPerSample:t.nAudiobitspersample,audioSamplesRate:t.nAudiosamplesrate,audioBitRate:t.nAudiobitrate},e.emit(ee.audioInfo,K(e.__audioInfo)))})):null==(i=e.logger)||null==(r=i.warn)||r.call(i,"player.wasmplayer is not defined"):null==(s=e.logger)||null==(n=s.warn)||n.call(s,"type "+t+" not supported")}(this,e,t)},a._addEventListener=function(){var e,t,a,r,i=this;this.on(ee.videoInfo,(e=function(e){e.data.width&&e.data.height&&i._playerWindow.resize(e.data.width,e.data.height)},t=500,a=null,r=0,function(){for(var i=this,n=arguments.length,s=new Array(n),x=0;x<n;x++)s[x]=arguments[x];var o=Date.now(),l=t-(o-r);l<=0?(r=o,e.apply(this,s)):a||(a=setTimeout((function(){r=Date.now(),a=null,e.apply(i,s)}),l))})),this.on("Control.contentRerender",(function(e){e.width&&e.height&&i._waterMarkParams&&i.setWaterMark(i._waterMarkParams)}))},Va(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]),t}(ya);return Wa.EVENT_TYPE=ee,Wa.version="8.2.5-beta.2",Wa}));
